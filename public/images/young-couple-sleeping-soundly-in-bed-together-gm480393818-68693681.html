<!DOCTYPE html><!--[if lt IE 9 ]>    <html class="no-js lt-ie10 lt-ie9" lang=""> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js lt-ie10" lang=""> <![endif]-->
<!--[if gt IE 9]><!-->
<html lang="en" prefix="og: http://ogp.me/ns#">
<script>if(/*@cc_on!@*/false){document.documentElement.className+=' ie10';}</script>
<!--<![endif]-->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
            <!--[if lte IE 9]>
<script src="http://i.istockimg.com/static/1464293291/js/vendor/xdomain.js" slave="https://rest.istockphoto.com/api/v1/ie9.html"></script>
<![endif]-->                    <base href="/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" />
    
    <script>
		if (typeof window.timestamps === 'undefined') {
		window.timestamps = {};
        window.timestamps.serverStart = 1464353272742;
	}
		window.timestamps.serverEnd = 1464353273252;
</script>
    <script>
		window.timestamps.htmlStart = Math.round((new Date()).getTime());;
</script>
        <title>Stock Photography: Search Royalty Free Images &amp; Photos - iStock</title>    <meta name="fragment" content="!" >
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<meta charset="utf-8">
<meta name="description" content="Browse the best stock library of royalty free content at prices anyone can afford." >
<meta name="language" content="EN" >
<meta name="viewport" content="width=device-width, initial-scale=1.0" >
<meta http-equiv="content-language" content="en" >            <meta property="og:locale" content="en_US" />
                                    <meta property="og:locale:alternate" content="fr_FR" />
                            <meta property="og:locale:alternate" content="es_ES" />
                            <meta property="og:locale:alternate" content="de_DE" />
                            <meta property="og:locale:alternate" content="ja_JP" />
                            <meta property="og:locale:alternate" content="pt_PT" />
                            <meta property="og:locale:alternate" content="pt_BR" />
                            <meta property="og:locale:alternate" content="it_IT" />
                            <meta property="og:locale:alternate" content="pl_PL" />
                            <meta property="og:locale:alternate" content="ru_RU" />
                            <meta property="og:locale:alternate" content="ko_KR" />
                                            <link href="http://i.istockimg.com/static/1464293291/css/banshee/base.css" media="all" rel="stylesheet" type="text/css" >
<link href="//www.istockphoto.com/favicon.ico" rel="shortcut icon" type="image/x-icon" >
<link href="http://i.istockimg.com/favicon.ico" rel="icon" type="image/x-icon" >
<link href="http://i.istockimg.com/static/images/icons/touch-icons/touch-icon-50x50.png" rel="apple-touch-icon" sizes="50x50" >
<link href="http://i.istockimg.com/static/images/icons/touch-icons/touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" >
<link href="http://i.istockimg.com/static/images/icons/touch-icons/touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" >
<link href="http://i.istockimg.com/static/images/icons/touch-icons/touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" >
<link href="/static/opensearchdescription.xml" rel="search" type="application/opensearchdescription+xml" title="iStockphoto" >
<link href="http://www.istockphoto.com/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" rel="canonical" >
<link href="/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="x-default" rel="alternate" >
<link href="/us/es/foto/pareja-joven-durmiendo-profundamente-en-la-cama-juntos-gm480393818-68693681" hreflang="es-us" rel="alternate" >
<link href="/ca/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-ca" rel="alternate" >
<link href="/ca/fr/photo/jeune-couple-dormir-à-poings-fermés-dans-le-lit-ensemble-gm480393818-68693681" hreflang="fr-ca" rel="alternate" >
<link href="/gb/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-gb" rel="alternate" >
<link href="/au/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-au" rel="alternate" >
<link href="/de/foto/junges-paar-im-bett-zusammen-schlafen-sie-erholsam-gm480393818-68693681" hreflang="de-de" rel="alternate" >
<link href="/de/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-de" rel="alternate" >
<link href="/fr/photo/jeune-couple-dormir-à-poings-fermés-dans-le-lit-ensemble-gm480393818-68693681" hreflang="fr-fr" rel="alternate" >
<link href="/fr/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-fr" rel="alternate" >
<link href="/nl/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-nl" rel="alternate" >
<link href="/ch/foto/junges-paar-im-bett-zusammen-schlafen-sie-erholsam-gm480393818-68693681" hreflang="de-ch" rel="alternate" >
<link href="/ch/fr/photo/jeune-couple-dormir-à-poings-fermés-dans-le-lit-ensemble-gm480393818-68693681" hreflang="fr-ch" rel="alternate" >
<link href="/ch/it/foto/giovane-coppia-dormire-sonni-tranquilli-a-letto-insieme-gm480393818-68693681" hreflang="it-ch" rel="alternate" >
<link href="/ch/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-ch" rel="alternate" >
<link href="/it/foto/giovane-coppia-dormire-sonni-tranquilli-a-letto-insieme-gm480393818-68693681" hreflang="it-it" rel="alternate" >
<link href="/it/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-it" rel="alternate" >
<link href="/at/foto/junges-paar-im-bett-zusammen-schlafen-sie-erholsam-gm480393818-68693681" hreflang="de-at" rel="alternate" >
<link href="/at/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-at" rel="alternate" >
<link href="/se/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-se" rel="alternate" >
<link href="/es/foto/pareja-joven-durmiendo-profundamente-en-la-cama-juntos-gm480393818-68693681" hreflang="es-es" rel="alternate" >
<link href="/es/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-es" rel="alternate" >
<link href="/be/photo/jeune-couple-dormir-à-poings-fermés-dans-le-lit-ensemble-gm480393818-68693681" hreflang="fr-be" rel="alternate" >
<link href="/be/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-be" rel="alternate" >
<link href="/pt/foto/jovem-casal-dormir-descansados-à-noite-na-cama-juntos-gm480393818-68693681" hreflang="pt-pt" rel="alternate" >
<link href="/pt/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-pt" rel="alternate" >
<link href="/pl/zdjęcie/młoda-para-spanie-w-łóżku-razem-odpowiada-gm480393818-68693681" hreflang="pl-pl" rel="alternate" >
<link href="/pl/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-pl" rel="alternate" >
<link href="/jp/ストックフォト/若いカップルのベッドをしつらえたベッドと-gm480393818-68693681" hreflang="ja-jp" rel="alternate" >
<link href="/jp/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-jp" rel="alternate" >
<link href="/br/foto/casal-jovem-a-dormir-profundamente-na-cama-juntos-gm480393818-68693681" hreflang="pt-br" rel="alternate" >
<link href="/br/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-br" rel="alternate" >
<link href="/tr/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-tr" rel="alternate" >
<link href="/ru/фото/молодая-пара-спите-крепко-в-постели-вместе-gm480393818-68693681" hreflang="ru-ru" rel="alternate" >
<link href="/ru/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-ru" rel="alternate" >
<link href="/kr/사진/젊은-커플입니다-슬리핑-사운들리-베드-발허리뼈와-gm480393818-68693681" hreflang="ko-kr" rel="alternate" >
<link href="/kr/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-kr" rel="alternate" >
<link href="/mx/foto/pareja-joven-durmiendo-profundamente-en-la-cama-juntos-gm480393818-68693681" hreflang="es-mx" rel="alternate" >
<link href="/mx/en/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-mx" rel="alternate" >
<link href="/in/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-in" rel="alternate" >
<link href="/hk/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-hk" rel="alternate" >
<link href="/nz/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-nz" rel="alternate" >
<link href="/dk/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-dk" rel="alternate" >
<link href="/no/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-no" rel="alternate" >
<link href="/fi/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-fi" rel="alternate" >
<link href="/za/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-za" rel="alternate" >
<link href="/ie/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-ie" rel="alternate" >
<link href="/sg/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-sg" rel="alternate" >
<link href="/il/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-il" rel="alternate" >
<link href="/ae/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-ae" rel="alternate" >
<link href="/th/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-th" rel="alternate" >
<link href="/my/photo/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681" hreflang="en-my" rel="alternate" >    <script type="text/javascript" src="http://i.istockimg.com/static/1464293291/js/banshee-vendors.js"></script>
<script type="text/javascript"  style="display:none">
<!--

namespacing={init:function(namespace){var spaces=[];namespace.split('.').forEach(function(space){var curSpace=window,i;spaces.push(space);for(i=0;i<spaces.length;i++){if(typeof curSpace[spaces[i]]==='undefined'){curSpace[spaces[i]]={};}
curSpace=curSpace[spaces[i]];}});}};
//-->
</script>
<script type="text/javascript" src="http://i.istockimg.com/static/1464293291/js/jquery.js"></script>
<script type="text/javascript"  style="display:none">
<!--
/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2014, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/

(function ($, window, document, undefined) {
  'use strict';

  var header_helpers = function (class_array) {
    var i = class_array.length;
    var head = $('head');

    while (i--) {
      if(head.has('.' + class_array[i]).length === 0) {
          head.append('<meta class="' + class_array[i] + '" />');
      }
    }
  };

  header_helpers([
    'foundation-mq-small',
    'foundation-mq-medium',
    'foundation-mq-large',
    'foundation-mq-xlarge',
    'foundation-mq-xxlarge',
    'foundation-data-attribute-namespace']);

  // Enable FastClick if present

  $(function() {
    if (typeof FastClick !== 'undefined') {
      // Don't attach to body if undefined
      if (typeof document.body !== 'undefined') {
        FastClick.attach(document.body);
      }
    }
  });

  // private Fast Selector wrapper,
  // returns jQuery object. Only use where
  // getElementById is not available.
  var S = function (selector, context) {
    if (typeof selector === 'string') {
      if (context) {
        var cont;
        if (context.jquery) {
          cont = context[0];
          if (!cont) return context;
        } else {
          cont = context;
        }
        return $(cont.querySelectorAll(selector));
      }

      return $(document.querySelectorAll(selector));
    }

    return $(selector, context);
  };

  // Namespace functions.

  var attr_name = function (init) {
    var arr = [];
    if (!init) arr.push('data');
    if (this.namespace.length > 0) arr.push(this.namespace);
    arr.push(this.name);

    return arr.join('-');
  };

  var add_namespace = function (str) {
    var parts = str.split('-'),
        i = parts.length,
        arr = [];

    while (i--) {
      if (i !== 0) {
        arr.push(parts[i]);
      } else {
        if (this.namespace.length > 0) {
          arr.push(this.namespace, parts[i]);
        } else {
          arr.push(parts[i]);
        }
      }
    }

    return arr.reverse().join('-');
  };

  // Event binding and data-options updating.

  var bindings = function (method, options) {
    var self = this,
        should_bind_events = !S(this).data(this.attr_name(true));

    if (typeof method === 'string') {
      return this[method].call(this, options);
    }

    if (S(this.scope).is('[' + this.attr_name() +']')) {
      S(this.scope).data(this.attr_name(true) + '-init', $.extend({}, this.settings, (options || method), this.data_options(S(this.scope))));

      if (should_bind_events) {
        this.events(this.scope);
      }

    } else {
      S('[' + this.attr_name() +']', this.scope).each(function () {
        var should_bind_events = !S(this).data(self.attr_name(true) + '-init');
        S(this).data(self.attr_name(true) + '-init', $.extend({}, self.settings, (options || method), self.data_options(S(this))));

        if (should_bind_events) {
          self.events(this);
        }
      });
    }
  };

  var single_image_loaded = function (image, callback) {
    function loaded () {
      callback(image[0]);
    }

    function bindLoad () {
      this.one('load', loaded);

      if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
        var src = this.attr( 'src' ),
            param = src.match( /\?/ ) ? '&' : '?';

        param += 'random=' + (new Date()).getTime();
        this.attr('src', src + param);
      }
    }

    if (!image.attr('src')) {
      loaded();
      return;
    }

    if (image[0].complete || image[0].readyState === 4) {
      loaded();
    } else {
      bindLoad.call(image);
    }
  };
  
  /*
    https://github.com/paulirish/matchMedia.js
  */

  window.matchMedia = window.matchMedia || (function( doc ) {

    "use strict";

    var bool,
        docElem = doc.documentElement,
        refNode = docElem.firstElementChild || docElem.firstChild,
        // fakeBody required for <FF4 when executed in <head>
        fakeBody = doc.createElement( "body" ),
        div = doc.createElement( "div" );

    div.id = "mq-test-1";
    div.style.cssText = "position:absolute;top:-100em";
    fakeBody.style.background = "none";
    fakeBody.appendChild(div);

    return function (q) {

      div.innerHTML = "&shy;<style media=\"" + q + "\"> #mq-test-1 { width: 42px; }</style>";

      docElem.insertBefore( fakeBody, refNode );
      bool = div.offsetWidth === 42;
      docElem.removeChild( fakeBody );

      return {
        matches: bool,
        media: q
      };

    };

  }( document ));

  /*
   * jquery.requestAnimationFrame
   * https://github.com/gnarf37/jquery-requestAnimationFrame
   * Requires jQuery 1.8+
   *
   * Copyright (c) 2012 Corey Frang
   * Licensed under the MIT license.
   */

  (function($) {

  // requestAnimationFrame polyfill adapted from Erik Möller
  // fixes from Paul Irish and Tino Zijdel
  // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
  // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

  var animating,
      lastTime = 0,
      vendors = ['webkit', 'moz'],
      requestAnimationFrame = window.requestAnimationFrame,
      cancelAnimationFrame = window.cancelAnimationFrame,
      jqueryFxAvailable = 'undefined' !== typeof jQuery.fx;

  for (; lastTime < vendors.length && !requestAnimationFrame; lastTime++) {
    requestAnimationFrame = window[ vendors[lastTime] + "RequestAnimationFrame" ];
    cancelAnimationFrame = cancelAnimationFrame ||
      window[ vendors[lastTime] + "CancelAnimationFrame" ] || 
      window[ vendors[lastTime] + "CancelRequestAnimationFrame" ];
  }

  function raf() {
    if (animating) {
      requestAnimationFrame(raf);
      
      if (jqueryFxAvailable) {
        jQuery.fx.tick();
      }
    }
  }

  if (requestAnimationFrame) {
    // use rAF
    window.requestAnimationFrame = requestAnimationFrame;
    window.cancelAnimationFrame = cancelAnimationFrame;
    
    if (jqueryFxAvailable) {
      jQuery.fx.timer = function (timer) {
        if (timer() && jQuery.timers.push(timer) && !animating) {
          animating = true;
          raf();
        }
      };

      jQuery.fx.stop = function () {
        animating = false;
      };
    }
  } else {
    // polyfill
    window.requestAnimationFrame = function (callback) {
      var currTime = new Date().getTime(),
        timeToCall = Math.max(0, 16 - (currTime - lastTime)),
        id = window.setTimeout(function () {
          callback(currTime + timeToCall);
        }, timeToCall);
      lastTime = currTime + timeToCall;
      return id;
    };

    window.cancelAnimationFrame = function (id) {
      clearTimeout(id);
    };

  }

  }( jQuery ));


  function removeQuotes (string) {
    if (typeof string === 'string' || string instanceof String) {
      string = string.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g, '');
    }

    return string;
  }

  window.Foundation = {
    name : 'Foundation',

    version : '5.2.2',

    media_queries : {
      small : S('.foundation-mq-small').css('font-family').replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g, ''),
      medium : S('.foundation-mq-medium').css('font-family').replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g, ''),
      large : S('.foundation-mq-large').css('font-family').replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g, ''),
      xlarge: S('.foundation-mq-xlarge').css('font-family').replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g, ''),
      xxlarge: S('.foundation-mq-xxlarge').css('font-family').replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g, '')
    },

    stylesheet : $('<style></style>').appendTo('head')[0].sheet,

    global: {
      namespace: undefined
    },

    init : function (scope, libraries, method, options, response) {
      var args = [scope, method, options, response],
          responses = [];

      // check RTL
      this.rtl = /rtl/i.test(S('html').attr('dir'));

      // set foundation global scope
      this.scope = scope || this.scope;

      this.set_namespace();

      if (libraries && typeof libraries === 'string' && !/reflow/i.test(libraries)) {
        if (this.libs.hasOwnProperty(libraries)) {
          responses.push(this.init_lib(libraries, args));
        }
      } else {
        for (var lib in this.libs) {
          responses.push(this.init_lib(lib, libraries));
        }
      }

      return scope;
    },

    init_lib : function (lib, args) {
      if (this.libs.hasOwnProperty(lib)) {
        this.patch(this.libs[lib]);

        if (args && args.hasOwnProperty(lib)) {
            if (typeof this.libs[lib].settings !== 'undefined') {
                $.extend(true, this.libs[lib].settings, args[lib]);
            }
            else if (typeof this.libs[lib].defaults !== 'undefined') {
                $.extend(true, this.libs[lib].defaults, args[lib]);
            }
          return this.libs[lib].init.apply(this.libs[lib], [this.scope, args[lib]]);
        }

        args = args instanceof Array ? args : new Array(args);    // PATCH: added this line
        return this.libs[lib].init.apply(this.libs[lib], args);
      }

      return function () {};
    },

    patch : function (lib) {
      lib.scope = this.scope;
      lib.namespace = this.global.namespace;
      lib.rtl = this.rtl;
      lib['data_options'] = this.utils.data_options;
      lib['attr_name'] = attr_name;
      lib['add_namespace'] = add_namespace;
      lib['bindings'] = bindings;
      lib['S'] = this.utils.S;
    },

    inherit : function (scope, methods) {
      var methods_arr = methods.split(' '),
          i = methods_arr.length;

      while (i--) {
        if (this.utils.hasOwnProperty(methods_arr[i])) {
          scope[methods_arr[i]] = this.utils[methods_arr[i]];
        }
      }
    },

    set_namespace: function () {

      // Description:
      //    Don't bother reading the namespace out of the meta tag
      //    if the namespace has been set globally in javascript
      //
      // Example: 
      //    Foundation.global.namespace = 'my-namespace';
      // or make it an empty string:
      //    Foundation.global.namespace = '';
      //
      //

      // If the namespace has not been set (is undefined), try to read it out of the meta element. 
      // Otherwise use the globally defined namespace, even if it's empty ('')
      var namespace = ( this.global.namespace === undefined ) ? $('.foundation-data-attribute-namespace').css('font-family') : this.global.namespace;
      
      // Finally, if the namsepace is either undefined or false, set it to an empty string. 
      // Otherwise use the namespace value.
      this.global.namespace = ( namespace === undefined || /false/i.test(namespace) ) ? '' : namespace;
    },

    libs : {},

    // methods that can be inherited in libraries
    utils : {

      // Description:
      //    Fast Selector wrapper returns jQuery object. Only use where getElementById 
      //    is not available.
      //
      // Arguments:
      //    Selector (String): CSS selector describing the element(s) to be 
      //    returned as a jQuery object.
      //
      //    Scope (String): CSS selector describing the area to be searched. Default 
      //    is document.
      //
      // Returns:
      //    Element (jQuery Object): jQuery object containing elements matching the 
      //    selector within the scope.
      S : S,

      // Description:
      //    Executes a function a max of once every n milliseconds 
      //
      // Arguments:
      //    Func (Function): Function to be throttled.
      //
      //    Delay (Integer): Function execution threshold in milliseconds.
      //
      // Returns:
      //    Lazy_function (Function): Function with throttling applied.
      throttle : function (func, delay) {
        var timer = null;

        return function () {
          var context = this, args = arguments;

          if (timer == null) {
            timer = setTimeout(function () {
              func.apply(context, args);
              timer = null;
            }, delay);
          }
        };
      },

      // Description:
      //    Executes a function when it stops being invoked for n seconds
      //    Modified version of _.debounce() http://underscorejs.org
      //
      // Arguments:
      //    Func (Function): Function to be debounced.
      //
      //    Delay (Integer): Function execution threshold in milliseconds.
      // 
      //    Immediate (Bool): Whether the function should be called at the beginning 
      //    of the delay instead of the end. Default is false.
      //
      // Returns:
      //    Lazy_function (Function): Function with debouncing applied.
      debounce : function (func, delay, immediate) {
        var timeout, result;
        return function () {
          var context = this, args = arguments;
          var later = function () {
            timeout = null;
            if (!immediate) result = func.apply(context, args);
          };
          var callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, delay);
          if (callNow) result = func.apply(context, args);
          return result;
        };
      },

      // Description:
      //    Parses data-options attribute
      //
      // Arguments:
      //    El (jQuery Object): Element to be parsed.
      //
      // Returns:
      //    Options (Javascript Object): Contents of the element's data-options 
      //    attribute.
      data_options : function (el) {
        var opts = {}, ii, p, opts_arr,
            data_options = function (el) {
              var namespace = Foundation.global.namespace;

              if (namespace.length > 0) {
                return el.data(namespace + '-options');
              }

              return el.data('options');
            };

        var cached_options = data_options(el);

        if (typeof cached_options === 'object') {
          return cached_options;
        }

        opts_arr = (cached_options || ':').split(';');
        ii = opts_arr.length;

        function isNumber (o) {
          return ! isNaN (o-0) && o !== null && o !== "" && o !== false && o !== true;
        }

        function trim (str) {
          if (typeof str === 'string') return $.trim(str);
          return str;
        }

        while (ii--) {
          p = opts_arr[ii].split(':');

          if (/true/i.test(p[1])) p[1] = true;
          if (/false/i.test(p[1])) p[1] = false;
          if (isNumber(p[1])) {
            if (p[1].indexOf('.') === -1) {
              p[1] = parseInt(p[1], 10);
            } else {
              p[1] = parseFloat(p[1]);
            }
          }

          if (p.length === 2 && p[0].length > 0) {
            opts[trim(p[0])] = trim(p[1]);
          }
        }

        return opts;
      },

      // Description:
      //    Adds JS-recognizable media queries
      //
      // Arguments:
      //    Media (String): Key string for the media query to be stored as in 
      //    Foundation.media_queries
      //
      //    Class (String): Class name for the generated <meta> tag
      register_media : function (media, media_class) {
        if(Foundation.media_queries[media] === undefined) {
          $('head').append('<meta class="' + media_class + '">');
          Foundation.media_queries[media] = removeQuotes($('.' + media_class).css('font-family'));
        }
      },

      // Description:
      //    Add custom CSS within a JS-defined media query
      //
      // Arguments:
      //    Rule (String): CSS rule to be appended to the document.
      //
      //    Media (String): Optional media query string for the CSS rule to be 
      //    nested under.
      add_custom_rule : function (rule, media) {
        if (media === undefined) {
          Foundation.stylesheet.insertRule(rule, Foundation.stylesheet.cssRules.length);
        } else {
          var query = Foundation.media_queries[media];

          if (query !== undefined) {
            Foundation.stylesheet.insertRule('@media ' + 
              Foundation.media_queries[media] + '{ ' + rule + ' }');
          }
        }
      },

      // Description:
      //    Performs a callback function when an image is fully loaded
      //
      // Arguments:
      //    Image (jQuery Object): Image(s) to check if loaded.
      //
      //    Callback (Function): Fundation to execute when image is fully loaded.
      image_loaded : function (images, callback) {
        var self = this,
            unloaded = images.length;

        if (unloaded === 0) {
          callback(images);
        }

        images.each(function () {
          single_image_loaded(self.S(this), function () {
            unloaded -= 1;
            if (unloaded === 0) {
              callback(images);
            }
          });
        });
      },

      // Description:
      //    Returns a random, alphanumeric string
      //
      // Arguments:
      //    Length (Integer): Length of string to be generated. Defaults to random 
      //    integer.
      //
      // Returns:
      //    Rand (String): Pseudo-random, alphanumeric string.
      random_str : function () {
        if (!this.fidx) this.fidx = 0;
        this.prefix = this.prefix || [(this.name || 'F'), (+new Date).toString(36)].join('-');

        return this.prefix + (this.fidx++).toString(36);
      }
    }
  };

  $.fn.foundation = function () {
    var args = Array.prototype.slice.call(arguments, 0);

    return this.each(function () {
      Foundation.init.apply(Foundation, [this].concat(args));
      return this;
    });
  };

}(jQuery, this, this.document));

;(function ($, window, document, undefined) {
  'use strict';

  Foundation.libs.offcanvas = {
    name : 'offcanvas',

    version : '5.2.2',

    settings : {},

    init : function (scope, method, options) {
      this.events();
    },

    events : function () {
      var self = this,
          S = self.S;

      S(this.scope).off('.offcanvas')
        .on('click.fndtn.offcanvas', '.left-off-canvas-toggle', function (e) {
          self.click_toggle_class(e, 'move-right');
        })
        .on('click.fndtn.offcanvas', '.left-off-canvas-menu a', function (e) {
          S(".off-canvas-wrap").removeClass("move-right");
        })
        .on('click.fndtn.offcanvas', '.right-off-canvas-toggle', function (e) {
          self.click_toggle_class(e, 'move-left');
        })
        .on('click.fndtn.offcanvas', '.right-off-canvas-menu a', function (e) {
          S(".off-canvas-wrap").removeClass("move-left");
        })
        .on('click.fndtn.offcanvas', '.exit-off-canvas', function (e) {
          self.click_remove_class(e, 'move-left');
          self.click_remove_class(e, 'move-right');
        })
    },

    click_toggle_class: function(e, class_name) {
      e.preventDefault();
      this.S(e.target).closest('.off-canvas-wrap').toggleClass(class_name);
    },

    click_remove_class: function(e, class_name) {
      e.preventDefault();
      this.S('.off-canvas-wrap').removeClass(class_name);
    },

    reflow : function () {}
  };
}(jQuery, this, this.document));

;(function ($, window, document, undefined) {
  'use strict';

  Foundation.libs.reveal = {
    name : 'reveal',

    version : '5.2.2',

    locked : false,

    settings : {
      animation: 'fadeAndPop',
      animation_speed: 250,
      close_on_background_click: true,
      close_on_esc: true,
      dismiss_modal_class: 'close-reveal-modal',
      bg_class: 'reveal-modal-bg',
      open: function(){},
      opened: function(){},
      close: function(){},
      closed: function(){},
      bg : $('.reveal-modal-bg'),
      css : {
        open : {
          'opacity': 0,
          'visibility': 'visible',
          'display' : 'block'
        },
        close : {
          'opacity': 1,
          'visibility': 'hidden',
          'display': 'none'
        }
      }
    },

    init : function (scope, method, options) {
      $.extend(true, this.settings, method, options);
      this.bindings(method, options);
    },

    events : function (scope) {
      var self = this,
          S = self.S;

      S(this.scope)
        .off('.reveal')
        .on('click.fndtn.reveal', '[' + this.add_namespace('data-reveal-id') + ']', function (e) {
          e.preventDefault();

          if (!self.locked) {
            var element = S(this),
                ajax = element.data(self.data_attr('reveal-ajax'));

            self.locked = true;

            if (typeof ajax === 'undefined') {
              self.open.call(self, element);
            } else {
              var url = ajax === true ? element.attr('href') : ajax;

              self.open.call(self, element, {url: url});
            }
          }
        });

      S(document)
        .on('touchend.fndtn.reveal click.fndtn.reveal', this.close_targets(), function (e) {

          e.preventDefault();

          if (!self.locked) {
            var settings = S('[' + self.attr_name() + '].open').data(self.attr_name(true) + '-init'),
                bg_clicked = S(e.target)[0] === S('.' + settings.bg_class)[0];

            if (bg_clicked) {
              if (settings.close_on_background_click) {
                e.stopPropagation();
              } else {
                return;
              }
            }

            self.locked = true;
            self.close.call(self, bg_clicked ? S('[' + self.attr_name() + '].open') : S(this).closest('[' + self.attr_name() + ']'));
          }
        });

      if(S('[' + self.attr_name() + ']', this.scope).length > 0) {
        S(this.scope)
          // .off('.reveal')
          .on('open.fndtn.reveal', this.settings.open)
          .on('opened.fndtn.reveal', this.settings.opened)
          .on('opened.fndtn.reveal', this.open_video)
          .on('close.fndtn.reveal', this.settings.close)
          .on('closed.fndtn.reveal', this.settings.closed)
          .on('closed.fndtn.reveal', this.close_video);
      } else {
        S(this.scope)
          // .off('.reveal')
          .on('open.fndtn.reveal', '[' + self.attr_name() + ']', this.settings.open)
          .on('opened.fndtn.reveal', '[' + self.attr_name() + ']', this.settings.opened)
          .on('opened.fndtn.reveal', '[' + self.attr_name() + ']', this.open_video)
          .on('close.fndtn.reveal', '[' + self.attr_name() + ']', this.settings.close)
          .on('closed.fndtn.reveal', '[' + self.attr_name() + ']', this.settings.closed)
          .on('closed.fndtn.reveal', '[' + self.attr_name() + ']', this.close_video);
      }

      return true;
    },

    // PATCH #3: turning on key up capture only when a reveal window is open
    key_up_on : function (scope) {
      var self = this;

      // PATCH #1: fixing multiple keyup event trigger from single key press
      self.S('body').off('keyup.fndtn.reveal').on('keyup.fndtn.reveal', function ( event ) {
        var open_modal = self.S('[' + self.attr_name() + '].open'),
            settings = open_modal.data(self.attr_name(true) + '-init');
        // PATCH #2: making sure that the close event can be called only while unlocked,
        //           so that multiple keyup.fndtn.reveal events don't prevent clean closing of the reveal window.
        if ( settings && event.which === 27  && settings.close_on_esc && !self.locked) { // 27 is the keycode for the Escape key
          self.close.call(self, open_modal);
        }
      });

      return true;
    },

    // PATCH #3: turning on key up capture only when a reveal window is open
    key_up_off : function (scope) {
      this.S('body').off('keyup.fndtn.reveal');
      return true;
    },

    open : function (target, ajax_settings) {
      var self = this;
      if (target) {
        if (typeof target.selector !== 'undefined') {
          var modal = self.S('#' + target.data(self.data_attr('reveal-id')));
        } else {
          var modal = self.S(this.scope);

          ajax_settings = target;
        }
      } else {
        var modal = self.S(this.scope);
      }

      var settings = modal.data(self.attr_name(true) + '-init');

      if (!modal.hasClass('open')) {
        var open_modal = self.S('[' + self.attr_name() + '].open');

        if (typeof modal.data('css-top') === 'undefined') {
          modal.data('css-top', parseInt(modal.css('top'), 10))
            .data('offset', this.cache_offset(modal));
        }

        this.key_up_on(modal);    // PATCH #3: turning on key up capture only when a reveal window is open
        modal.trigger('open');

        if (open_modal.length < 1) {
          this.toggle_bg(modal);
        }

        if (typeof ajax_settings === 'string') {
          ajax_settings = {
            url: ajax_settings
          };
        }

        if (typeof ajax_settings === 'undefined' || !ajax_settings.url) {
          if (open_modal.length > 0) {
            this.hide(open_modal, settings.css.close);
          }

          this.show(modal, settings.css.open);
        } else {
          var old_success = typeof ajax_settings.success !== 'undefined' ? ajax_settings.success : null;

          $.extend(ajax_settings, {
            success: function (data, textStatus, jqXHR) {
              if ( $.isFunction(old_success) ) {
                old_success(data, textStatus, jqXHR);
              }

              modal.html(data);
              self.S(modal).foundation('section', 'reflow');

              if (open_modal.length > 0) {
                self.hide(open_modal, settings.css.close);
              }
              self.show(modal, settings.css.open);
            }
          });

          $.ajax(ajax_settings);
        }
      }
    },

    close : function (modal) {
      var modal = modal && modal.length ? modal : this.S(this.scope),
          open_modals = this.S('[' + this.attr_name() + '].open'),
          settings = modal.data(this.attr_name(true) + '-init');

      if (open_modals.length > 0) {
        this.locked = true;
        this.key_up_off(modal);   // PATCH #3: turning on key up capture only when a reveal window is open
        modal.trigger('close');
        this.toggle_bg(modal);
        this.hide(open_modals, settings.css.close, settings);
      }
    },

    close_targets : function () {
      var base = '.' + this.settings.dismiss_modal_class;

      if (this.settings.close_on_background_click) {
        return base + ', .' + this.settings.bg_class;
      }

      return base;
    },

    toggle_bg : function (modal) {
      var settings = modal.data(this.attr_name(true));

      if (this.S('.' + this.settings.bg_class).length === 0) {
        this.settings.bg = $('<div />', {'class': this.settings.bg_class})
          .appendTo('body').hide();
      }

      if (this.settings.bg.filter(':visible').length > 0) {
        this.hide(this.settings.bg);
      } else {
        this.show(this.settings.bg);
      }
    },

    show : function (el, css) {
      // is modal
      if (css) {
        var settings = el.data(this.attr_name(true) + '-init');
        if (el.parent('body').length === 0) {
          var placeholder = el.wrap('<div style="display: none;" />').parent(),
              rootElement = this.settings.rootElement || 'body';

          el.on('closed.fndtn.reveal.wrapped', function() {
            el.detach().appendTo(placeholder);
            el.unwrap().unbind('closed.fndtn.reveal.wrapped');
          });

          el.detach().appendTo(rootElement);
        }

        var animData = getAnimationData(settings.animation);
        if (!animData.animate) {
          this.locked = false;
        }
        if (animData.pop) {
          css.top = $(window).scrollTop() - el.data('offset') + 'px';
          var end_css = {
            top: $(window).scrollTop() + el.data('css-top') + 'px',
            opacity: 1
          };

          return setTimeout(function () {
            return el
              .css(css)
              .animate(end_css, settings.animation_speed, 'linear', function () {
                this.locked = false;
                el.trigger('opened');
              }.bind(this))
              .addClass('open');
          }.bind(this), settings.animation_speed / 2);
        }

        if (animData.fade) {
          css.top = $(window).scrollTop() + el.data('css-top') + 'px';
          var end_css = {opacity: 1};

          return setTimeout(function () {
            return el
              .css(css)
              .animate(end_css, settings.animation_speed, 'linear', function () {
                this.locked = false;
                el.trigger('opened');
              }.bind(this))
              .addClass('open');
          }.bind(this), settings.animation_speed / 2);
        }

        return el.css(css).show().css({opacity: 1}).addClass('open').trigger('opened');
      }

      var settings = this.settings;

      // should we animate the background?
      if (getAnimationData(settings.animation).fade) {
        return el.fadeIn(settings.animation_speed / 2);
      }

      this.locked = false;

      return el.show();
    },

    hide : function (el, css) {
      // is modal
      if (css) {
        var settings = el.data(this.attr_name(true) + '-init');
        var animData = getAnimationData(settings.animation);
        if (!animData.animate) {
          this.locked = false;
        }
        if (animData.pop) {
          var end_css = {
            top: - $(window).scrollTop() - el.data('offset') + 'px',
            opacity: 0
          };

          return setTimeout(function () {
            return el
              .animate(end_css, settings.animation_speed, 'linear', function () {
                this.locked = false;
                el.css(css).trigger('closed');
              }.bind(this))
              .removeClass('open');
          }.bind(this), settings.animation_speed / 2);
        }

        if (animData.fade) {
          var end_css = {opacity: 0};

          return setTimeout(function () {
            return el
              .animate(end_css, settings.animation_speed, 'linear', function () {
                this.locked = false;
                el.css(css).trigger('closed');
              }.bind(this))
              .removeClass('open');
          }.bind(this), settings.animation_speed / 2);
        }

        return el.hide().css(css).removeClass('open').trigger('closed');
      }

      var settings = this.settings;

      // should we animate the background?
      if (getAnimationData(settings.animation).fade) {
        return el.fadeOut(settings.animation_speed / 2);
      }

      return el.hide();
    },

    close_video : function (e) {
      var video = $('.flex-video', e.target),
          iframe = $('iframe', video);

      if (iframe.length > 0) {
        iframe.attr('data-src', iframe[0].src);
        iframe.attr('src', 'about:blank');
        video.hide();
      }
    },

    open_video : function (e) {
      var video = $('.flex-video', e.target),
          iframe = video.find('iframe');

      if (iframe.length > 0) {
        var data_src = iframe.attr('data-src');
        if (typeof data_src === 'string') {
          iframe[0].src = iframe.attr('data-src');
        } else {
          var src = iframe[0].src;
          iframe[0].src = undefined;
          iframe[0].src = src;
        }
        video.show();
      }
    },

    data_attr: function (str) {
      if (this.namespace.length > 0) {
        return this.namespace + '-' + str;
      }

      return str;
    },

    cache_offset : function (modal) {
      var offset = modal.show().height() + parseInt(modal.css('top'), 10);

      modal.hide();

      return offset;
    },

    off : function () {
      $(this.scope).off('.fndtn.reveal');
    },

    reflow : function () {}
  };

  /*
   * getAnimationData('popAndFade') // {animate: true,  pop: true,  fade: true}
   * getAnimationData('fade')       // {animate: true,  pop: false, fade: true}
   * getAnimationData('pop')        // {animate: true,  pop: true,  fade: false}
   * getAnimationData('foo')        // {animate: false, pop: false, fade: false}
   * getAnimationData(null)         // {animate: false, pop: false, fade: false}
   */
  function getAnimationData(str) {
    var fade = /fade/i.test(str);
    var pop = /pop/i.test(str);
    return {
      animate: fade || pop,
      pop: pop,
      fade: fade
    };
  }
}(jQuery, this, this.document));

;(function ($, window, document, undefined) {
  'use strict';

  Foundation.libs.tooltip = {
    name : 'tooltip',

    version : '5.2.2',

    settings : {
      additional_inheritable_classes : [],
      tooltip_class : '.tooltip',
      append_to: 'body',
      touch_close_text: 'Tap To Close',
      disable_for_touch: false,
      hover_delay: 200,
      tip_template : function (selector, content) {
        return '<span data-selector="' + selector + '" class="'
          + Foundation.libs.tooltip.settings.tooltip_class.substring(1)
          + '">' + content + '<span class="nub"></span></span>';
      }
    },

    cache : {},

    init : function (scope, method, options) {
      Foundation.inherit(this, 'random_str');
      this.bindings(method, options);
    },

    events : function (instance) {
      var self = this,
          S = self.S;

      self.create(this.S(instance));

      $(this.scope)
        .off('.tooltip')
        .on('mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip',
          '[' + this.attr_name() + ']', function (e) {
          var $this = S(this),
              settings = $.extend({}, self.settings, self.data_options($this)),
              is_touch = false;

          if (Modernizr.touch && /touchstart|MSPointerDown/i.test(e.type) && S(e.target).is('a')) {
            return false;
          }

          if (/mouse/i.test(e.type) && self.ie_touch(e)) return false;

          if ($this.hasClass('open')) {
            if (Modernizr.touch && /touchstart|MSPointerDown/i.test(e.type)) e.preventDefault();
            self.hide($this);
          } else {
            if (settings.disable_for_touch && Modernizr.touch && /touchstart|MSPointerDown/i.test(e.type)) {
              return;
            } else if(!settings.disable_for_touch && Modernizr.touch && /touchstart|MSPointerDown/i.test(e.type)) {
              e.preventDefault();
              S(settings.tooltip_class + '.open').hide();
              is_touch = true;
            }

            if (/enter|over/i.test(e.type)) {
              this.timer = setTimeout(function () {
                var tip = self.showTip($this);
              }.bind(this), self.settings.hover_delay);
            } else if (e.type === 'mouseout' || e.type === 'mouseleave') {
              clearTimeout(this.timer);
              self.hide($this);
            } else {
              self.showTip($this);
            }
          }
        })
        .on('mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip', '[' + this.attr_name() + '].open', function (e) {
          if (/mouse/i.test(e.type) && self.ie_touch(e)) return false;

          if($(this).data('tooltip-open-event-type') == 'touch' && e.type == 'mouseleave') {
            return;
          }
          else if($(this).data('tooltip-open-event-type') == 'mouse' && /MSPointerDown|touchstart/i.test(e.type)) {
            self.convert_to_touch($(this));
          } else {
            self.hide($(this));
          }
        })
        .on('DOMNodeRemoved DOMAttrModified', '[' + this.attr_name() + ']:not(a)', function (e) {
          self.hide(S(this));
        });
    },

    ie_touch : function (e) {
      // How do I distinguish between IE11 and Windows Phone 8?????
      return false;
    },

    showTip : function ($target) {
      var $tip = this.getTip($target);

        return this.show($target);
    },

    getTip : function ($target) {
      var selector = this.selector($target),
          settings = $.extend({}, this.settings, this.data_options($target)),
          tip = null;

      if (selector) {
        tip = this.S('span[data-selector="' + selector + '"]' + settings.tooltip_class);
      }

      return (typeof tip === 'object') ? tip : false;
    },

    selector : function ($target) {
      var id = $target.attr('id'),
          dataSelector = $target.attr(this.attr_name()) || $target.attr('data-selector');

      if ((id && id.length < 1 || !id) && typeof dataSelector != 'string') {
        dataSelector = this.random_str(6);
        $target.attr('data-selector', dataSelector);
      }

      return (id && id.length > 0) ? id : dataSelector;
    },

    create : function ($target) {
      var self = this,
          settings = $.extend({}, this.settings, this.data_options($target)),
          tip_template = this.settings.tip_template;

      if (typeof settings.tip_template === 'string' && window.hasOwnProperty(settings.tip_template)) {
        tip_template = window[settings.tip_template];
      }

      var $tip = $(tip_template(this.selector($target), $('<div></div>').html($target.attr('title')).html())),
          classes = this.inheritable_classes($target);

      $tip.addClass(classes).appendTo(settings.append_to);

      if (Modernizr.touch) {
        $tip.append('<span class="tap-to-close">'+settings.touch_close_text+'</span>');
        $tip.on('touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip', function(e) {
          self.hide($target);
        });
      }

      $target.removeAttr('title').attr('title','');
    },

    reposition : function (target, tip, classes) {
      var width, nub, nubHeight, nubWidth, column, objPos;

      tip.css('visibility', 'hidden').show();

      width = target.data('width');
      nub = tip.children('.nub');
      nubHeight = nub.outerHeight();
      nubWidth = nub.outerHeight();

      if (this.small()) {
        tip.css({'width' : '100%' });
      } else {
        tip.css({'width' : (width) ? width : 'auto'});
      }

      objPos = function (obj, top, right, bottom, left, width) {
        return obj.css({
          'top' : (top) ? top : 'auto',
          'bottom' : (bottom) ? bottom : 'auto',
          'left' : (left) ? left : 'auto',
          'right' : (right) ? right : 'auto',
        }).end();
      };

      objPos(tip, (target.offset().top + target.outerHeight() + 10), 'auto', 'auto', target.offset().left);

      if (this.small()) {
        objPos(tip, (target.offset().top + target.outerHeight() + 10), 'auto', 'auto', 12.5, $(this.scope).width());
        tip.addClass('tip-override');
        objPos(nub, -nubHeight, 'auto', 'auto', target.offset().left);
      } else {
        var left = target.offset().left;
        if (Foundation.rtl) {
          nub.addClass('rtl');
          left = target.offset().left + target.outerWidth() - tip.outerWidth();
        }
        objPos(tip, (target.offset().top + target.outerHeight() + 10), 'auto', 'auto', left);
        tip.removeClass('tip-override');
        if (classes && classes.indexOf('tip-top') > -1) {
          if (Foundation.rtl) nub.addClass('rtl');
          objPos(tip, (target.offset().top - tip.outerHeight()), 'auto', 'auto', left)
            .removeClass('tip-override');
        } else if (classes && classes.indexOf('tip-left') > -1) {
          objPos(tip, (target.offset().top + (target.outerHeight() / 2) - (tip.outerHeight() / 2)), 'auto', 'auto', (target.offset().left - tip.outerWidth() - nubHeight))
            .removeClass('tip-override');
          nub.removeClass('rtl');
        } else if (classes && classes.indexOf('tip-right') > -1) {
          objPos(tip, (target.offset().top + (target.outerHeight() / 2) - (tip.outerHeight() / 2)), 'auto', 'auto', (target.offset().left + target.outerWidth() + nubHeight))
            .removeClass('tip-override');
          nub.removeClass('rtl');
        }
      }

      tip.css('visibility', 'visible').hide();
    },

    small : function () {
      return matchMedia(Foundation.media_queries.small).matches &&
        !matchMedia(Foundation.media_queries.medium).matches;
    },

    inheritable_classes : function ($target) {
      var settings = $.extend({}, this.settings, this.data_options($target)),
          inheritables = ['tip-top', 'tip-left', 'tip-bottom', 'tip-right', 'radius', 'round'].concat(settings.additional_inheritable_classes),
          classes = $target.attr('class'),
          filtered = classes ? $.map(classes.split(' '), function (el, i) {
            if ($.inArray(el, inheritables) !== -1) {
              return el;
            }
          }).join(' ') : '';

      return $.trim(filtered);
    },

    convert_to_touch : function($target) {
      var self = this,
          $tip = self.getTip($target),
          settings = $.extend({}, self.settings, self.data_options($target));

      if ($tip.find('.tap-to-close').length === 0) {
        $tip.append('<span class="tap-to-close">'+settings.touch_close_text+'</span>');
        $tip.on('click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose', function(e) {
          self.hide($target);
        });
      }

      $target.data('tooltip-open-event-type', 'touch');
    },

    show : function ($target) {
      var $tip = this.getTip($target);

      if ($target.data('tooltip-open-event-type') == 'touch') {
        this.convert_to_touch($target);
      }

      this.reposition($target, $tip, $target.attr('class'));
      $target.addClass('open');
      $tip.fadeIn(150);
    },

    hide : function ($target) {
      var $tip = this.getTip($target);

      $tip.fadeOut(150, function() {
        $tip.find('.tap-to-close').remove();
        $tip.off('click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose');
        $target.removeClass('open');
      });
    },

    off : function () {
      var self = this;
      this.S(this.scope).off('.fndtn.tooltip');
      this.S(this.settings.tooltip_class).each(function (i) {
        $('[' + self.attr_name() + ']').eq(i).attr('title', $(this).text());
      }).remove();
    },

    reflow : function () {}
  };
}(jQuery, this, this.document));

;(function ($, window, document, undefined) {
  'use strict';

  Foundation.libs.equalizer = {
    name : 'equalizer',

    version : '5.2.2',

    settings : {
      use_tallest: true,
      before_height_change: $.noop,
      after_height_change: $.noop
    },

    init : function (scope, method, options) {
      Foundation.inherit(this, 'image_loaded');
      this.bindings(method, options);
      this.reflow();
    },

    events : function () {
      this.S(window).off('.equalizer').on('resize.fndtn.equalizer', function(e){
        this.reflow();
      }.bind(this));
    },

    equalize: function(equalizer) {
      var isStacked = false,
          vals = equalizer.find('[' + this.attr_name() + '-watch]:visible'),
          firstTopOffset = vals.first().offset().top,
          settings = equalizer.data(this.attr_name(true)+'-init');

      if (vals.length === 0) return;
      settings.before_height_change();
      equalizer.trigger('before-height-change');
      vals.height('inherit');
      vals.each(function(){
        var el = $(this);
        if (el.offset().top !== firstTopOffset) {
          isStacked = true;
        }
      });
      if (isStacked) return;

      var heights = vals.map(function(){ return $(this).outerHeight() }).get();
      if (settings.use_tallest) {
        var max = Math.max.apply(null, heights);
        vals.css('height', max);
      } else {
        var min = Math.min.apply(null, heights);
        vals.css('height', min);
      }
      settings.after_height_change();
      equalizer.trigger('after-height-change');
    },

    reflow : function () {
      var self = this;

      this.S('[' + this.attr_name() + ']', this.scope).each(function(){
        var $eq_target = $(this);
        self.image_loaded(self.S('img', this), function(){
          self.equalize($eq_target)
        });
      });
    }
  };
}(jQuery, this, this.document));
;(function ($, window, document, undefined) {
  'use strict';

  var Modernizr = Modernizr || false;

  Foundation.libs.joyride = {
    name : 'joyride',

    version : '5.2.2',

    defaults : {
      expose                   : false,     // turn on or off the expose feature
      modal                    : true,      // Whether to cover page with modal during the tour
      tip_location             : 'bottom',  // 'top' or 'bottom' in relation to parent
      nub_position             : 'auto',    // override on a per tooltip bases
      scroll_speed             : 1500,      // Page scrolling speed in milliseconds, 0 = no scroll animation
      scroll_animation         : 'linear',  // supports 'swing' and 'linear', extend with jQuery UI.
      timer                    : 0,         // 0 = no timer , all other numbers = timer in milliseconds
      start_timer_on_click     : true,      // true or false - true requires clicking the first button start the timer
      start_offset             : 0,         // the index of the tooltip you want to start on (index of the li)
      next_button              : true,      // true or false to control whether a next button is used
      tip_animation            : 'fade',    // 'pop' or 'fade' in each tip
      pause_after              : [],        // array of indexes where to pause the tour after
      exposed                  : [],        // array of expose elements
      tip_animation_fade_speed : 300,       // when tipAnimation = 'fade' this is speed in milliseconds for the transition
      cookie_monster           : false,     // true or false to control whether cookies are used
      cookie_name              : 'joyride', // Name the cookie you'll use
      cookie_domain            : false,     // Will this cookie be attached to a domain, ie. '.notableapp.com'
      cookie_expires           : 365,       // set when you would like the cookie to expire.
      tip_container            : 'body',    // Where will the tip be attached
      abort_on_close           : true,      // When true, the close event will not fire any callback
      tip_location_patterns    : {
        top: ['bottom'],
        bottom: [], // bottom should not need to be repositioned
        left: ['right', 'top', 'bottom'],
        right: ['left', 'top', 'bottom']
      },
      post_ride_callback     : function (){},    // A method to call once the tour closes (canceled or complete)
      post_step_callback     : function (){},    // A method to call after each step
      pre_step_callback      : function (){},    // A method to call before each step
      pre_ride_callback      : function (){},    // A method to call before the tour starts (passed index, tip, and cloned exposed element)
      post_expose_callback   : function (){},    // A method to call after an element has been exposed
      template : { // HTML segments for tip layout
        link    : '<a href="#close" class="joyride-close-tip"><img src="/images/blank.gif" class="general-icon-x"></a>',
        timer   : '<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',
        tip     : '<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',
        wrapper : '<div class="joyride-content-wrapper"></div>',
        button  : '<a href="#" class="small button joyride-next-tip"></a>',
        modal   : '<div class="joyride-modal-bg"></div>',
        expose  : '<div class="joyride-expose-wrapper"></div>',
        expose_cover: '<div class="joyride-expose-cover"></div>'
      },
      expose_add_class : '' // One or more space-separated class names to be added to exposed element
    },

    init : function (scope, method, options) {
      Foundation.inherit(this, 'throttle random_str');

      this.settings = this.settings || $.extend({}, this.defaults, (options || method));

      this.bindings(method, options)
    },

    events : function () {
      var self = this;

      $(this.scope)
        .off('.joyride')
        .on('click.fndtn.joyride', '.joyride-next-tip, .joyride-modal-bg', function (e) {
          e.preventDefault();

          if (this.settings.$li.next().length < 1) {
            this.end();
          } else if (this.settings.timer > 0) {
            clearTimeout(this.settings.automate);
            this.hide();
            this.show();
            this.startTimer();
          } else {
            this.hide();
            this.show();
          }

        }.bind(this))

        .on('click.fndtn.joyride', '.joyride-close-tip', function (e) {
          e.preventDefault();
          this.end(this.settings.abort_on_close);
        }.bind(this));

      $(window)
        .off('.joyride')
        .on('resize.fndtn.joyride', self.throttle(function () {
          if ($('[' + self.attr_name() + ']').length > 0 && self.settings.$next_tip) {
            if (self.settings.exposed.length > 0) {
              var $els = $(self.settings.exposed);

              $els.each(function () {
                var $this = $(this);
                self.un_expose($this);
                self.expose($this);
              });
            }

            if (self.is_phone()) {
              self.pos_phone();
            } else {
              self.pos_default(false, true);
            }
          }
        }, 100));
    },

    start : function () {
      var self = this,
          $this = $('[' + this.attr_name() + ']', this.scope),
          integer_settings = ['timer', 'scrollSpeed', 'startOffset', 'tipAnimationFadeSpeed', 'cookieExpires'],
          int_settings_count = integer_settings.length;

      if (!$this.length > 0) return;

      if (!this.settings.init) this.events();

      this.settings = $this.data(this.attr_name(true) + '-init');

      // non configureable settings
      this.settings.$content_el = $this;
      this.settings.$body = $(this.settings.tip_container);
      this.settings.body_offset = $(this.settings.tip_container).position();
      this.settings.$tip_content = this.settings.$content_el.find('> li');
      this.settings.paused = false;
      this.settings.attempts = 0;

      // can we create cookies?
      if (typeof $.cookie !== 'function') {
        this.settings.cookie_monster = false;
      }

      // generate the tips and insert into dom.
      if (!this.settings.cookie_monster || this.settings.cookie_monster && !$.cookie(this.settings.cookie_name)) {
        this.settings.$tip_content.each(function (index) {
          var $this = $(this);
          this.settings = $.extend({}, self.defaults, self.data_options($this))

          // Make sure that settings parsed from data_options are integers where necessary
          var i = int_settings_count;
          while (i--) {
            self.settings[integer_settings[i]] = parseInt(self.settings[integer_settings[i]], 10);
          }
          self.create({$li : $this, index : index});
        });

        // show first tip
        if (!this.settings.start_timer_on_click && this.settings.timer > 0) {
          this.show('init');
          this.startTimer();
        } else {
          this.show('init');
        }

      }
    },

    resume : function () {
      this.set_li();
      this.show();
    },

    tip_template : function (opts) {
      var $blank, content;

      opts.tip_class = opts.tip_class || '';

      $blank = $(this.settings.template.tip).addClass(opts.tip_class);
      content = $.trim($(opts.li).html()) +
        this.button_text(opts.button_text) +
        this.settings.template.link +
        this.timer_instance(opts.index);

      $blank.append($(this.settings.template.wrapper));
      $blank.first().attr(this.add_namespace('data-index'), opts.index);
      $('.joyride-content-wrapper', $blank).append(content);

      return $blank[0];
    },

    timer_instance : function (index) {
      var txt;

      if ((index === 0 && this.settings.start_timer_on_click && this.settings.timer > 0) || this.settings.timer === 0) {
        txt = '';
      } else {
        txt = $(this.settings.template.timer)[0].outerHTML;
      }
      return txt;
    },

    button_text : function (txt) {
      if (this.settings.next_button) {
        txt = $.trim(txt) || 'Next';
        txt = $(this.settings.template.button).append(txt)[0].outerHTML;
      } else {
        txt = '';
      }
      return txt;
    },

    create : function (opts) {
      var buttonText = opts.$li.attr(this.add_namespace('data-button')) 
        || opts.$li.attr(this.add_namespace('data-text')),
        tipClass = opts.$li.attr('class'),
        $tip_content = $(this.tip_template({
          tip_class : tipClass,
          index : opts.index,
          button_text : buttonText,
          li : opts.$li
        }));

      $(this.settings.tip_container).append($tip_content);
    },

    show : function (init) {
      var $timer = null;

      // are we paused?
      if (this.settings.$li === undefined
        || ($.inArray(this.settings.$li.index(), this.settings.pause_after) === -1)) {

        // don't go to the next li if the tour was paused
        if (this.settings.paused) {
          this.settings.paused = false;
        } else {
          this.set_li(init);
        }

        this.settings.attempts = 0;

        if (this.settings.$li.length && this.settings.$target.length > 0) {
          if (init) { //run when we first start
            this.settings.pre_ride_callback(this.settings.$li.index(), this.settings.$next_tip);
            if (this.settings.modal) {
              this.show_modal();
            }
          }

          this.settings.pre_step_callback(this.settings.$li.index(), this.settings.$next_tip);

          if (this.settings.modal && this.settings.expose) {
            this.expose();
          }

          this.settings.tip_settings = $.extend({}, this.settings, this.data_options(this.settings.$li));

          this.settings.timer = parseInt(this.settings.timer, 10);

          this.settings.tip_settings.tip_location_pattern = this.settings.tip_location_patterns[this.settings.tip_settings.tip_location];

          // scroll if not modal
          if (!/body/i.test(this.settings.$target.selector)) {
            this.scroll_to();
          }

          if (this.is_phone()) {
            this.pos_phone(true);
          } else {
            this.pos_default(true);
          }

          $timer = this.settings.$next_tip.find('.joyride-timer-indicator');

          if (/pop/i.test(this.settings.tip_animation)) {

            $timer.width(0);

            if (this.settings.timer > 0) {

              this.settings.$next_tip.show();

              setTimeout(function () {
                $timer.animate({
                  width: $timer.parent().width()
                }, this.settings.timer, 'linear');
              }.bind(this), this.settings.tip_animation_fade_speed);

            } else {
              this.settings.$next_tip.show();

            }


          } else if (/fade/i.test(this.settings.tip_animation)) {

            $timer.width(0);

            if (this.settings.timer > 0) {

              this.settings.$next_tip
                .fadeIn(this.settings.tip_animation_fade_speed)
                .show();

              setTimeout(function () {
                $timer.animate({
                  width: $timer.parent().width()
                }, this.settings.timer, 'linear');
              }.bind(this), this.settings.tip_animation_fadeSpeed);

            } else {
              this.settings.$next_tip.fadeIn(this.settings.tip_animation_fade_speed);
            }
          }

          this.settings.$current_tip = this.settings.$next_tip;

        // skip non-existant targets
        } else if (this.settings.$li && this.settings.$target.length < 1) {

          this.show();

        } else {

          this.end();

        }
      } else {

        this.settings.paused = true;

      }

    },

    is_phone : function () {
      return matchMedia(Foundation.media_queries.small).matches &&
        !matchMedia(Foundation.media_queries.medium).matches;
    },

    hide : function () {
      if (this.settings.modal && this.settings.expose) {
        this.un_expose();
      }

      if (!this.settings.modal) {
        $('.joyride-modal-bg').hide();
      }

      // Prevent scroll bouncing...wait to remove from layout
      this.settings.$current_tip.css('visibility', 'hidden');
      setTimeout($.proxy(function() {
        this.hide();
        this.css('visibility', 'visible');
      }, this.settings.$current_tip), 0);
      this.settings.post_step_callback(this.settings.$li.index(),
        this.settings.$current_tip);
    },

    set_li : function (init) {
      if (init) {
        this.settings.$li = this.settings.$tip_content.eq(this.settings.start_offset);
        this.set_next_tip();
        this.settings.$current_tip = this.settings.$next_tip;
      } else {
        this.settings.$li = this.settings.$li.next();
        this.set_next_tip();
      }

      this.set_target();
    },

    set_next_tip : function () {
      this.settings.$next_tip = $(".joyride-tip-guide").eq(this.settings.$li.index());
      this.settings.$next_tip.data('closed', '');
    },

    set_target : function () {
      var cl = this.settings.$li.attr(this.add_namespace('data-class')),
          id = this.settings.$li.attr(this.add_namespace('data-id')),
          $sel = function () {
            if (id) {
              return $(document.getElementById(id));
            } else if (cl) {
              return $('.' + cl).first();
            } else {
              return $('body');
            }
          };

      this.settings.$target = $sel();
    },

    scroll_to : function () {
      var window_half, tipOffset;

      window_half = $(window).height() / 2;
      tipOffset = Math.ceil(this.settings.$target.offset().top - window_half + this.settings.$next_tip.outerHeight());

      if (tipOffset != 0) {
        $('html, body').animate({
          scrollTop: tipOffset
        }, this.settings.scroll_speed, 'swing');
      }
    },

    paused : function () {
      return ($.inArray((this.settings.$li.index() + 1), this.settings.pause_after) === -1);
    },

    restart : function () {
      this.hide();
      this.settings.$li = undefined;
      this.show('init');
    },

    pos_default : function (init, resizing) {
      var half_fold = Math.ceil($(window).height() / 2),
          tip_position = this.settings.$next_tip.offset(),
          $nub = this.settings.$next_tip.find('.joyride-nub'),
          nub_width = Math.ceil($nub.outerWidth() / 2),
          nub_height = Math.ceil($nub.outerHeight() / 2),
          toggle = init || false;

      // tip must not be "display: none" to calculate position
      if (toggle) {
        this.settings.$next_tip.css('visibility', 'hidden');
        this.settings.$next_tip.show();
      }

      if (typeof resizing === 'undefined') {
        resizing = false;
      }

      if (!/body/i.test(this.settings.$target.selector)) {
          if (this.bottom()) {
            if (this.rtl) {
              this.settings.$next_tip.css({
                top: (this.settings.$target.offset().top + nub_height + this.settings.$target.outerHeight() -10 )});
                //left: this.settings.$target.offset().left + this.settings.$target.outerWidth() - this.settings.$next_tip.outerWidth()});
            } else {
              this.settings.$next_tip.css({
                top: (this.settings.$target.offset().top + nub_height + this.settings.$target.outerHeight() -10 )});
                //left: this.settings.$target.offset().left});
            }

            this.nub_position($nub, this.settings.tip_settings.nub_position, 'top');

          } else if (this.top()) {
            if (this.rtl) {
              this.settings.$next_tip.css({
                top: (this.settings.$target.offset().top - this.settings.$next_tip.outerHeight() - nub_height),
                left: this.settings.$target.offset().left + this.settings.$target.outerWidth() - this.settings.$next_tip.outerWidth()});
            } else {
              this.settings.$next_tip.css({
                top: (this.settings.$target.offset().top - this.settings.$next_tip.outerHeight() - nub_height),
                left: this.settings.$target.offset().left});
            }

            this.nub_position($nub, this.settings.tip_settings.nub_position, 'bottom');

          } else if (this.right()) {

            this.settings.$next_tip.css({
              top: this.settings.$target.offset().top,
              left: (this.settings.$target.outerWidth() + this.settings.$target.offset().left + nub_width)});

            this.nub_position($nub, this.settings.tip_settings.nub_position, 'left');

          } else if (this.left()) {

            this.settings.$next_tip.css({
              top: this.settings.$target.offset().top,
              left: (this.settings.$target.offset().left - this.settings.$next_tip.outerWidth() - nub_width)});

            this.nub_position($nub, this.settings.tip_settings.nub_position, 'right');

          }

          if (!this.visible(this.corners(this.settings.$next_tip)) && this.settings.attempts < this.settings.tip_settings.tip_location_pattern.length) {

            $nub.removeClass('bottom')
              .removeClass('top')
              .removeClass('right')
              .removeClass('left');

            this.settings.tip_settings.tip_location = this.settings.tip_settings.tip_location_pattern[this.settings.attempts];

            this.settings.attempts++;

            this.pos_default();

          }

      } else if (this.settings.$li.length) {

        this.pos_modal($nub);

      }

      if (toggle) {
        this.settings.$next_tip.hide();
        this.settings.$next_tip.css('visibility', 'visible');
      }

    },

    pos_phone : function (init) {
      var tip_height = this.settings.$next_tip.outerHeight(),
          tip_offset = this.settings.$next_tip.offset(),
          target_height = this.settings.$target.outerHeight(),
          $nub = $('.joyride-nub', this.settings.$next_tip),
          nub_height = Math.ceil($nub.outerHeight() / 2),
          toggle = init || false;

      $nub.removeClass('bottom')
        .removeClass('top')
        .removeClass('right')
        .removeClass('left');

      if (toggle) {
        this.settings.$next_tip.css('visibility', 'hidden');
        this.settings.$next_tip.show();
      }

      if (!/body/i.test(this.settings.$target.selector)) {

        if (this.top()) {

            this.settings.$next_tip.offset({top: this.settings.$target.offset().top - tip_height - nub_height});
            $nub.addClass('bottom');

        } else {

          this.settings.$next_tip.offset({top: this.settings.$target.offset().top + target_height + nub_height});
          $nub.addClass('top');

        }

      } else if (this.settings.$li.length) {
        this.pos_modal($nub);
      }

      if (toggle) {
        this.settings.$next_tip.hide();
        this.settings.$next_tip.css('visibility', 'visible');
      }
    },

    pos_modal : function ($nub) {
      this.center();
      $nub.hide();

      this.show_modal();
    },

    show_modal : function () {
      if (!this.settings.$next_tip.data('closed')) {
        var joyridemodalbg =  $('.joyride-modal-bg');
        if (joyridemodalbg.length < 1) {
          $('body').append(this.settings.template.modal).show();
        }

        if (/pop/i.test(this.settings.tip_animation)) {
            joyridemodalbg.show();
        } else {
            joyridemodalbg.fadeIn(this.settings.tip_animation_fade_speed);
        }
      }
    },

    expose : function () {
      var expose,
          exposeCover,
          el,
          origCSS,
          origClasses,
          randId = 'expose-' + this.random_str(6);

      if (arguments.length > 0 && arguments[0] instanceof $) {
        el = arguments[0];
      } else if(this.settings.$target && !/body/i.test(this.settings.$target.selector)){
        el = this.settings.$target;
      }  else {
        return false;
      }

      if(el.length < 1){
        if(window.console){
          console.error('element not valid', el);
        }
        return false;
      }

      expose = $(this.settings.template.expose);
      this.settings.$body.append(expose);
      expose.css({
        top: el.offset().top,
        left: el.offset().left,
        width: el.outerWidth(true),
        height: el.outerHeight(true)
      });

      exposeCover = $(this.settings.template.expose_cover);

      origCSS = {
        zIndex: el.css('z-index'),
        position: el.css('position')
      };

      origClasses = el.attr('class') == null ? '' : el.attr('class');

      el.css('z-index',parseInt(expose.css('z-index'))+1);

      if (origCSS.position == 'static') {
        el.css('position','relative');
      }

      el.data('expose-css',origCSS);
      el.data('orig-class', origClasses);
      el.attr('class', origClasses + ' ' + this.settings.expose_add_class);

      exposeCover.css({
        top: el.offset().top,
        left: el.offset().left,
        width: el.outerWidth(true),
        height: el.outerHeight(true)
      });

      if (this.settings.modal) this.show_modal();

      this.settings.$body.append(exposeCover);
      expose.addClass(randId);
      exposeCover.addClass(randId);
      el.data('expose', randId);
      this.settings.post_expose_callback(this.settings.$li.index(), this.settings.$next_tip, el);
      this.add_exposed(el);
    },

    un_expose : function () {
      var exposeId,
          el,
          expose ,
          origCSS,
          origClasses,
          clearAll = false;

      if (arguments.length > 0 && arguments[0] instanceof $) {
        el = arguments[0];
      } else if(this.settings.$target && !/body/i.test(this.settings.$target.selector)){
        el = this.settings.$target;
      }  else {
        return false;
      }

      if(el.length < 1){
        if (window.console) {
          console.error('element not valid', el);
        }
        return false;
      }

      exposeId = el.data('expose');
      expose = $('.' + exposeId);

      if (arguments.length > 1) {
        clearAll = arguments[1];
      }

      if (clearAll === true) {
        $('.joyride-expose-wrapper,.joyride-expose-cover').remove();
      } else {
        expose.remove();
      }

      origCSS = el.data('expose-css');

      if (origCSS.zIndex == 'auto') {
        el.css('z-index', '');
      } else {
        el.css('z-index', origCSS.zIndex);
      }

      if (origCSS.position != el.css('position')) {
        if(origCSS.position == 'static') {// this is default, no need to set it.
          el.css('position', '');
        } else {
          el.css('position', origCSS.position);
        }
      }

      origClasses = el.data('orig-class');
      el.attr('class', origClasses);
      el.removeData('orig-classes');

      el.removeData('expose');
      el.removeData('expose-z-index');
      this.remove_exposed(el);
    },

    add_exposed: function(el){
      this.settings.exposed = this.settings.exposed || [];
      if (el instanceof $ || typeof el === 'object') {
        this.settings.exposed.push(el[0]);
      } else if (typeof el == 'string') {
        this.settings.exposed.push(el);
      }
    },

    remove_exposed: function(el){
      var search, i;
      if (el instanceof $) {
        search = el[0]
      } else if (typeof el == 'string'){
        search = el;
      }

      this.settings.exposed = this.settings.exposed || [];
      i = this.settings.exposed.length;

      while (i--) {
        if (this.settings.exposed[i] == search) {
          this.settings.exposed.splice(i, 1);
          return;
        }
      }
    },

    center : function () {
      var $w = $(window);

      this.settings.$next_tip.css({
        top : ((($w.height() - this.settings.$next_tip.outerHeight()) / 2) + $w.scrollTop()),
        left : ((($w.width() - this.settings.$next_tip.outerWidth()) / 2) + $w.scrollLeft())
      });

      return true;
    },

    bottom : function () {
      return /bottom/i.test(this.settings.tip_settings.tip_location);
    },

    top : function () {
      return /top/i.test(this.settings.tip_settings.tip_location);
    },

    right : function () {
      return /right/i.test(this.settings.tip_settings.tip_location);
    },

    left : function () {
      return /left/i.test(this.settings.tip_settings.tip_location);
    },

    corners : function (el) {
      var w = $(window),
          window_half = w.height() / 2,
          //using this to calculate since scroll may not have finished yet.
          tipOffset = Math.ceil(this.settings.$target.offset().top - window_half + this.settings.$next_tip.outerHeight()),
          right = w.width() + w.scrollLeft(),
          offsetBottom =  w.height() + tipOffset,
          bottom = w.height() + w.scrollTop(),
          top = w.scrollTop();

      if (tipOffset < top) {
        if (tipOffset < 0) {
          top = 0;
        } else {
          top = tipOffset;
        }
      }

      if (offsetBottom > bottom) {
        bottom = offsetBottom;
      }

      return [
        el.offset().top < top,
        right < el.offset().left + el.outerWidth(),
        bottom < el.offset().top + el.outerHeight(),
        w.scrollLeft() > el.offset().left
      ];
    },

    visible : function (hidden_corners) {
      var i = hidden_corners.length;

      while (i--) {
        if (hidden_corners[i]) return false;
      }

      return true;
    },

    nub_position : function (nub, pos, def) {
      if (pos === 'auto') {
        nub.addClass(def);
      } else if (pos === false || pos === 'refine-panel') {
        nub.removeClass('bottom')
              .removeClass('top')
              .removeClass('right')
              .removeClass('left');  

        nub.addClass('hide');

        if(pos === 'refine-panel') {
          $('.joyride-content-wrapper').addClass(pos);
        }

      } else {
        nub.addClass(pos);
      }
    },

    startTimer : function () {
      if (this.settings.$li.length) {
        this.settings.automate = setTimeout(function () {
          this.hide();
          this.show();
          this.startTimer();
        }.bind(this), this.settings.timer);
      } else {
        clearTimeout(this.settings.automate);
      }
    },

    end : function (abort) {
      localStorage.setItem('srpRefinementMoreTourTipDismiss', true);

      if (this.settings.cookie_monster) {
        $.cookie(this.settings.cookie_name, 'ridden', { expires: this.settings.cookie_expires, domain: this.settings.cookie_domain });
      }

      if (this.settings.timer > 0) {
        clearTimeout(this.settings.automate);
      }

      if (this.settings.modal && this.settings.expose) {
        this.un_expose();
      }

      this.settings.$next_tip.data('closed', true);

      $('.joyride-modal-bg').hide();

      if (typeof abort === 'undefined') {
        this.settings.post_step_callback(this.settings.$li.index(), this.settings.$current_tip);
        this.settings.post_ride_callback(this.settings.$li.index(), this.settings.$current_tip);
      }

      $('.joyride-tip-guide').fadeOut(this.settings.tip_animation_fade_speed, function(){
        $('.joyride-tip-guide').remove();
      });
    },

    off : function () {
      $(this.scope).off('.joyride');
      $(window).off('.joyride');
      $('.joyride-close-tip, .joyride-next-tip, .joyride-modal-bg').off('.joyride');
      $('.joyride-tip-guide, .joyride-modal-bg').remove();
      clearTimeout(this.settings.automate);
      this.settings = {};
    },

    reflow : function () {}
  };
}(jQuery, this, this.document));

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.3
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function FastClick(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],f=this,g=0,h=e.length;h>g;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(d=a.onclick,a.addEventListener("click",function(a){d(a)},!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c,d;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(deviceIsBlackBerry10&&(d=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),d[1]>=10&&d[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a,b){"use strict";return new FastClick(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;

//-->
</script>
<script type="text/javascript">
    //<!--
if(typeof istock === "undefined") {istock={};} istock.siteLang="EN";    //-->
</script>
<script type="text/javascript">
    //<!--
if(typeof istock === "undefined") {istock={};} istock.siteRegion="US";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.url="http://www.istockphoto.com/";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.baseUrl="http://www.istockphoto.com";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.cookielessUrl="http://i.istockimg.com";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.locale="en_US";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.georegional="GB";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.cookieDomain="istockphoto.com";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.restUrl = (istock.restUrl || {});istock.restUrl = "https://rest.istockphoto.com/api/v1";    //-->
</script>
<script type="text/javascript">
    //<!--
istock.serial = (istock.serial || {});istock.serial = "1464293291";    //-->
</script>
<script type="text/javascript"  style="display:none">
<!--
var mboxCopyright = "Copyright 1996-2013. Adobe Systems Incorporated. All rights reserved.";var TNT = TNT || {};TNT.a = TNT.a || {};TNT.getGlobalMboxName = function () { return "target-global-mbox";};TNT.getGlobalMboxLocation = function () { return "";};TNT.isAutoCreateGlobalMbox = function () { return false;};TNT.a.b = function () { var c = {}.toString; var d = window.targetPageParams; var e = ""; var f = []; if (typeof(d) != 'undefined' && c.call(d) === '[object Function]') { try { e = d(); } catch (g) { } if (e.length > 0) { f = e.split("&"); for (var i = 0; i < f.length; i++) { f[i] = decodeURIComponent(f[i]); } } } return f;};mboxUrlBuilder = function(h, i) { this.h = h; this.i = i; this.j = new Array(); this.k = function(l) { return l; }; this.m = null;};mboxUrlBuilder.prototype.addNewParameter = function (n, o) { this.j.push({name: n, value: o}); return this;};mboxUrlBuilder.prototype.addParameterIfAbsent = function (n, o) { if (o) { for (var p = 0; p < this.j.length; p++) { var q = this.j[p]; if (q.name === n) { return this; } } this.checkInvalidCharacters(n); return this.addNewParameter(n, o); }};mboxUrlBuilder.prototype.addParameter = function(n, o) { this.checkInvalidCharacters(n); for (var p = 0; p < this.j.length; p++) { var q = this.j[p]; if (q.name === n) { q.value = o; return this; } } return this.addNewParameter(n, o);};mboxUrlBuilder.prototype.addParameters = function(j) { if (!j) { return this; } for (var p = 0; p < j.length; p++) { var r = j[p].indexOf('='); if (r == -1 || r == 0) { continue; } this.addParameter(j[p].substring(0, r), j[p].substring(r + 1, j[p].length)); } return this;};mboxUrlBuilder.prototype.setServerType = function(s) { this.t = s;};mboxUrlBuilder.prototype.setBasePath = function(m) { this.m = m;};mboxUrlBuilder.prototype.setUrlProcessAction = function(u) { this.k = u;};mboxUrlBuilder.prototype.buildUrl = function() { var v = this.m ? this.m : '/m2/' + this.i + '/mbox/' + this.t; var w = document.location.protocol == 'file:' ? 'http:' : document.location.protocol; var l = w + "//" + this.h + v; var x = l.indexOf('?') != -1 ? '&' : '?'; for (var p = 0; p < this.j.length; p++) { var q = this.j[p]; l += x + encodeURIComponent(q.name) + '=' + encodeURIComponent(q.value); x = '&'; } return this.y(this.k(l));};mboxUrlBuilder.prototype.getParameters = function() { return this.j;};mboxUrlBuilder.prototype.setParameters = function(j) { this.j = j;};mboxUrlBuilder.prototype.clone = function() { var z = new mboxUrlBuilder(this.h, this.i); z.setServerType(this.t); z.setBasePath(this.m); z.setUrlProcessAction(this.k); for (var p = 0; p < this.j.length; p++) { z.addParameter(this.j[p].name, this.j[p].value); } return z;};mboxUrlBuilder.prototype.y = function(A) { return A.replace(/\"/g, '&quot;').replace(/>/g, '&gt;');}; mboxUrlBuilder.prototype.checkInvalidCharacters = function (n) { var B = new RegExp('(\'|")'); if (B.exec(n)) { throw "Parameter '" + n + "' contains invalid characters"; } };mboxStandardFetcher = function() { };mboxStandardFetcher.prototype.getType = function() { return 'standard';};mboxStandardFetcher.prototype.fetch = function(C) { C.setServerType(this.getType()); document.write('<' + 'scr' + 'ipt src="' + C.buildUrl() + '" language="JavaScript"><' + '\/scr' + 'ipt>');};mboxStandardFetcher.prototype.cancel = function() { };mboxAjaxFetcher = function() { };mboxAjaxFetcher.prototype.getType = function() { return 'ajax';};mboxAjaxFetcher.prototype.fetch = function(C) { C.setServerType(this.getType()); var l = C.buildUrl(); this.D = document.createElement('script'); this.D.src = l; document.body.appendChild(this.D);};mboxAjaxFetcher.prototype.cancel = function() { };mboxMap = function() { this.E = new Object(); this.F = new Array();};mboxMap.prototype.put = function(G, o) { if (!this.E[G]) { this.F[this.F.length] = G; } this.E[G] = o;};mboxMap.prototype.get = function(G) { return this.E[G];};mboxMap.prototype.remove = function(G) { this.E[G] = undefined;};mboxMap.prototype.each = function(u) { for (var p = 0; p < this.F.length; p++ ) { var G = this.F[p]; var o = this.E[G]; if (o) { var H = u(G, o); if (H === false) { break; } } }};mboxFactory = function(I, i, J) { this.K = false; this.I = I; this.J = J; this.L = new mboxList(); mboxFactories.put(J, this); this.M = typeof document.createElement('div').replaceChild != 'undefined' && (function() { return true; })() && typeof document.getElementById != 'undefined' && typeof (window.attachEvent || document.addEventListener || window.addEventListener) != 'undefined' && typeof encodeURIComponent != 'undefined'; this.N = this.M && mboxGetPageParameter('mboxDisable') == null; var O = J == 'default'; this.P = new mboxCookieManager( 'mbox' + (O ? '' : ('-' + J)), (function() { try {if (typeof (mboxCookieDomainResolver) != "undefined" && mboxCookieDomainResolver.cookiePageDomain) { return mboxCookieDomainResolver.cookiePageDomain(); } } catch (err) { } return mboxCookiePageDomain(); })()); this.N = this.N && this.P.isEnabled() && (this.P.getCookie('disable') == null); if (this.isAdmin()) { this.enable(); } this.Q(); this.R = mboxGenerateId(); this.S = mboxScreenHeight(); this.T = mboxScreenWidth(); this.U = mboxBrowserWidth(); this.V = mboxBrowserHeight(); this.W = mboxScreenColorDepth(); this.X = mboxBrowserTimeOffset(); this.Y = new mboxSession(this.R, 'mboxSession', 'session', 31 * 60, this.P); this.Z = new mboxPC('PC', 1209600, this.P); this.C = new mboxUrlBuilder(I, i); this._(this.C, O); this.ab = new Date().getTime(); this.bb = this.ab; var cb = this; this.addOnLoad(function() { cb.bb = new Date().getTime(); }); if (this.M) { this.addOnLoad(function() { cb.K = true; cb.getMboxes().each(function(db) { db.setFetcher(new mboxAjaxFetcher()); db.finalize(); }); }); if (this.N) { this.limitTraffic(100, 10368000); this.eb(); this.fb = new mboxSignaler(function(gb, j) { return cb.create(gb, j); }, this.P); } }};mboxFactory.prototype.isEnabled = function() { return this.N;};mboxFactory.prototype.getDisableReason = function() { return this.P.getCookie('disable');};mboxFactory.prototype.isSupported = function() { return this.M;};mboxFactory.prototype.disable = function(hb, ib) { if (typeof hb == 'undefined') { hb = 60 * 60; } if (typeof ib == 'undefined') { ib = 'unspecified'; } if (!this.isAdmin()) { this.N = false; this.P.setCookie('disable', ib, hb); }};mboxFactory.prototype.enable = function() { this.N = true; this.P.deleteCookie('disable');};mboxFactory.prototype.isAdmin = function() { return document.location.href.indexOf('mboxEnv') != -1;};mboxFactory.prototype.limitTraffic = function(jb, hb) {};mboxFactory.prototype.addOnLoad = function(kb) { if (this.isDomLoaded()) { kb(); } else { var lb = false; var mb = function() { if (lb) { return; } lb = true; kb(); }; this.nb.push(mb); if (this.isDomLoaded() && !lb) { mb(); } }};mboxFactory.prototype.getEllapsedTime = function() { return this.bb - this.ab;};mboxFactory.prototype.getEllapsedTimeUntil = function(ob) { return ob - this.ab;};mboxFactory.prototype.getMboxes = function() { return this.L;};mboxFactory.prototype.get = function(gb, pb) { return this.L.get(gb).getById(pb || 0);};mboxFactory.prototype.update = function(gb, j) { if (!this.isEnabled()) { return; } if (!this.isDomLoaded()) { var cb = this; this.addOnLoad(function() { cb.update(gb, j); }); return; } if (this.L.get(gb).length() == 0) { throw "Mbox " + gb + " is not defined"; } this.L.get(gb).each(function(db) { db.getUrlBuilder() .addParameter('mboxPage', mboxGenerateId()); db.load(j); });};mboxFactory.prototype.setVisitorIdParameters = function(l) { var imsOrgId = '8D1767C25245AE7F0A490D4C@AdobeOrg'; if (typeof Visitor == 'undefined' || imsOrgId.length == 0) { return; } var visitor = Visitor.getInstance(imsOrgId); if (visitor.isAllowed()) { var addVisitorValueToUrl = function(param, getter) { if (visitor[getter]) { var callback = function(value) { if (value) { l.addParameterIfAbsent(param, value); } }; var value = visitor[getter](callback); callback(value); } }; addVisitorValueToUrl('mboxMCGVID', "getMarketingCloudVisitorID"); addVisitorValueToUrl('mboxMCGLH', "getAudienceManagerLocationHint"); addVisitorValueToUrl('mboxAAMB', "getAudienceManagerBlob"); addVisitorValueToUrl('mboxMCAVID', "getAnalyticsVisitorID"); addVisitorValueToUrl('mboxMCSDID', "getSupplementalDataID"); }};mboxFactory.prototype.create = function( gb, j, qb) { if (!this.isSupported()) { return null; } var l = this.C.clone(); l.addParameter('mboxCount', this.L.length() + 1); l.addParameters(j); this.setVisitorIdParameters(l); var pb = this.L.get(gb).length(); var rb = this.J + '-' + gb + '-' + pb; var sb; if (qb) { sb = new mboxLocatorNode(qb); } else { if (this.K) { throw 'The page has already been loaded, can\'t write marker'; } sb = new mboxLocatorDefault(rb); } try { var cb = this; var tb = 'mboxImported-' + rb; var db = new mbox(gb, pb, l, sb, tb); if (this.N) { db.setFetcher( this.K ? new mboxAjaxFetcher() : new mboxStandardFetcher()); } db.setOnError(function(ub, s) { db.setMessage(ub); db.activate(); if (!db.isActivated()) { cb.disable(60 * 60, ub); window.location.reload(false); } }); this.L.add(db); } catch (vb) { this.disable(); throw 'Failed creating mbox "' + gb + '", the error was: ' + vb; } var wb = new Date(); l.addParameter('mboxTime', wb.getTime() - (wb.getTimezoneOffset() * 60000)); return db;};mboxFactory.prototype.getCookieManager = function() { return this.P;};mboxFactory.prototype.getPageId = function() { return this.R;};mboxFactory.prototype.getPCId = function() { return this.Z;};mboxFactory.prototype.getSessionId = function() { return this.Y;};mboxFactory.prototype.getSignaler = function() { return this.fb;};mboxFactory.prototype.getUrlBuilder = function() { return this.C;};mboxFactory.prototype._ = function(l, O) { l.addParameter('mboxHost', document.location.hostname) .addParameter('mboxSession', this.Y.getId()); if (!O) { l.addParameter('mboxFactoryId', this.J); } if (this.Z.getId() != null) { l.addParameter('mboxPC', this.Z.getId()); } l.addParameter('mboxPage', this.R); l.addParameter('screenHeight', this.S); l.addParameter('screenWidth', this.T); l.addParameter('browserWidth', this.U); l.addParameter('browserHeight', this.V); l.addParameter('browserTimeOffset', this.X); l.addParameter('colorDepth', this.W); l.setUrlProcessAction(function(l) { l += '&mboxURL=' + encodeURIComponent(document.location); var xb = encodeURIComponent(document.referrer); if (l.length + xb.length < 2000) { l += '&mboxReferrer=' + xb; } l += '&mboxVersion=' + mboxVersion; return l; });};mboxFactory.prototype.yb = function() { return "";};mboxFactory.prototype.eb = function() { document.write('<style>.' + 'mboxDefault' + ' { visibility:hidden; }</style>');};mboxFactory.prototype.isDomLoaded = function() { return this.K;};mboxFactory.prototype.Q = function() { if (this.nb != null) { return; } this.nb = new Array(); var cb = this; (function() { var zb = document.addEventListener ? "DOMContentLoaded" : "onreadystatechange"; var Ab = false; var Bb = function() { if (Ab) { return; } Ab = true; for (var i = 0; i < cb.nb.length; ++i) { cb.nb[i](); } }; if (document.addEventListener) { document.addEventListener(zb, function() { document.removeEventListener(zb, arguments.callee, false); Bb(); }, false); window.addEventListener("load", function(){ document.removeEventListener("load", arguments.callee, false); Bb(); }, false); } else if (document.attachEvent) { if (self !== self.top) { document.attachEvent(zb, function() { if (document.readyState === 'complete') { document.detachEvent(zb, arguments.callee); Bb(); } }); } else { var Cb = function() { try { document.documentElement.doScroll('left'); Bb(); } catch (Db) { setTimeout(Cb, 13); } }; Cb(); } } if (document.readyState === "complete") { Bb(); } })();};mboxSignaler = function(Eb, P) { this.P = P; var Fb = P.getCookieNames('signal-'); for (var p = 0; p < Fb.length; p++) { var Gb = Fb[p]; var Hb = P.getCookie(Gb).split('&'); var db = Eb(Hb[0], Hb); db.load(); P.deleteCookie(Gb); }};mboxSignaler.prototype.signal = function(Ib, gb ) { this.P.setCookie('signal-' + Ib, mboxShiftArray(arguments).join('&'), 45 * 60);};mboxList = function() { this.L = new Array();};mboxList.prototype.add = function(db) { if (db != null) { this.L[this.L.length] = db; }};mboxList.prototype.get = function(gb) { var H = new mboxList(); for (var p = 0; p < this.L.length; p++) { var db = this.L[p]; if (db.getName() == gb) { H.add(db); } } return H;};mboxList.prototype.getById = function(Jb) { return this.L[Jb];};mboxList.prototype.length = function() { return this.L.length;};mboxList.prototype.each = function(u) { if (typeof u != 'function') { throw 'Action must be a function, was: ' + typeof(u); } for (var p = 0; p < this.L.length; p++) { u(this.L[p]); }};mboxLocatorDefault = function(n) { this.n = 'mboxMarker-' + n; document.write('<div id="' + this.n + '" style="visibility:hidden;display:none">&nbsp;</div>');};mboxLocatorDefault.prototype.locate = function() { var Kb = document.getElementById(this.n); while (Kb != null) { if (Kb.nodeType == 1) { if (Kb.className == 'mboxDefault') { return Kb; } } Kb = Kb.previousSibling; } return null;};mboxLocatorDefault.prototype.force = function() { var Lb = document.createElement('div'); Lb.className = 'mboxDefault'; var Mb = document.getElementById(this.n); Mb.parentNode.insertBefore(Lb, Mb); return Lb;};mboxLocatorNode = function(Nb) { this.Kb = Nb;};mboxLocatorNode.prototype.locate = function() { return typeof this.Kb == 'string' ? document.getElementById(this.Kb) : this.Kb;};mboxLocatorNode.prototype.force = function() { return null;};mboxCreate = function(gb ) { var db = mboxFactoryDefault.create( gb, mboxShiftArray(arguments)); if (db) { db.load(); } return db;};mboxDefine = function(qb, gb ) { var db = mboxFactoryDefault.create(gb, mboxShiftArray(mboxShiftArray(arguments)), qb); return db;};mboxUpdate = function(gb ) { mboxFactoryDefault.update(gb, mboxShiftArray(arguments));};mbox = function(n, Ob, C, Pb, tb) { this.Qb = null; this.Rb = 0; this.sb = Pb; this.tb = tb; this.Sb = null; this.Tb = new mboxOfferContent(); this.Lb = null; this.C = C; this.message = ''; this.Ub = new Object(); this.Vb = 0; this.Ob = Ob; this.n = n; this.Wb(); C.addParameter('mbox', n) .addParameter('mboxId', Ob); this.Xb = function() {}; this.Yb = function() {}; this.Zb = null;};mbox.prototype.getId = function() { return this.Ob;};mbox.prototype.Wb = function() { if (this.n.length > 250) { throw "Mbox Name " + this.n + " exceeds max length of " + "250 characters."; } else if (this.n.match(/^\s+|\s+$/g)) { throw "Mbox Name " + this.n + " has leading/trailing whitespace(s)."; }};mbox.prototype.getName = function() { return this.n;};mbox.prototype.getParameters = function() { var j = this.C.getParameters(); var H = new Array(); for (var p = 0; p < j.length; p++) { if (j[p].name.indexOf('mbox') != 0) { H[H.length] = j[p].name + '=' + j[p].value; } } return H;};mbox.prototype.setOnLoad = function(u) { this.Yb = u; return this;};mbox.prototype.setMessage = function(ub) { this.message = ub; return this;};mbox.prototype.setOnError = function(Xb) { this.Xb = Xb; return this;};mbox.prototype.setFetcher = function(_b) { if (this.Sb) { this.Sb.cancel(); } this.Sb = _b; return this;};mbox.prototype.getFetcher = function() { return this.Sb;};mbox.prototype.load = function(j) { if (this.Sb == null) { return this; } this.setEventTime("load.start"); this.cancelTimeout(); this.Rb = 0; var C = (j && j.length > 0) ? this.C.clone().addParameters(j) : this.C; this.Sb.fetch(C); var cb = this; this.ac = setTimeout(function() { cb.Xb('browser timeout', cb.Sb.getType()); }, 15000); this.setEventTime("load.end"); return this;};mbox.prototype.loaded = function() { var bc = document.documentMode >= 10, cc = this, dc = function() { if (!cc.activate()) { setTimeout(function() { cc.loaded(); }, 100); } }; this.cancelTimeout(); if (bc) { setTimeout(dc, 100); } else { dc(); }};mbox.prototype.activate = function() { if (this.Rb) { return this.Rb; } this.setEventTime('activate' + ++this.Vb + '.start'); if (this.show()) { this.cancelTimeout(); this.Rb = 1; } this.setEventTime('activate' + this.Vb + '.end'); return this.Rb;};mbox.prototype.isActivated = function() { return this.Rb;};mbox.prototype.setOffer = function(Tb) { if (Tb && Tb.show && Tb.setOnLoad) { this.Tb = Tb; } else { throw 'Invalid offer'; } return this;};mbox.prototype.getOffer = function() { return this.Tb;};mbox.prototype.show = function() { this.setEventTime('show.start'); var H = this.Tb.show(this); this.setEventTime(H == 1 ? "show.end.ok" : "show.end"); return H;};mbox.prototype.showContent = function(ec) { if (ec == null) { return 0; } if (this.Lb == null || !this.Lb.parentNode) { this.Lb = this.getDefaultDiv(); if (this.Lb == null) { return 0; } } if (this.Lb != ec) { this.fc(this.Lb); this.Lb.parentNode.replaceChild(ec, this.Lb); this.Lb = ec; } this.gc(ec); this.Yb(); return 1;};mbox.prototype.hide = function() { this.setEventTime('hide.start'); var H = this.showContent(this.getDefaultDiv()); this.setEventTime(H == 1 ? 'hide.end.ok' : 'hide.end.fail'); return H;};mbox.prototype.finalize = function() { this.setEventTime('finalize.start'); this.cancelTimeout(); if (this.getDefaultDiv() == null) { if (this.sb.force() != null) { this.setMessage('No default content, an empty one has been added'); } else { this.setMessage('Unable to locate mbox'); } } if (!this.activate()) { this.hide(); this.setEventTime('finalize.end.hide'); } this.setEventTime('finalize.end.ok');};mbox.prototype.cancelTimeout = function() { if (this.ac) { clearTimeout(this.ac); } if (this.Sb != null) { this.Sb.cancel(); }};mbox.prototype.getDiv = function() { return this.Lb;};mbox.prototype.getDefaultDiv = function() { if (this.Zb == null) { this.Zb = this.sb.locate(); } return this.Zb;};mbox.prototype.setEventTime = function(hc) { this.Ub[hc] = (new Date()).getTime();};mbox.prototype.getEventTimes = function() { return this.Ub;};mbox.prototype.getImportName = function() { return this.tb;};mbox.prototype.getURL = function() { return this.C.buildUrl();};mbox.prototype.getUrlBuilder = function() { return this.C;};mbox.prototype.ic = function(Lb) { return Lb.style.display != 'none';};mbox.prototype.gc = function(Lb) { this.jc(Lb, true);};mbox.prototype.fc = function(Lb) { this.jc(Lb, false);};mbox.prototype.jc = function(Lb, kc) { Lb.style.visibility = kc ? "visible" : "hidden"; Lb.style.display = kc ? "block" : "none";};mboxOfferContent = function() { this.Yb = function() {};};mboxOfferContent.prototype.show = function(db) { var H = db.showContent(document.getElementById(db.getImportName())); if (H == 1) { this.Yb(); } return H;};mboxOfferContent.prototype.setOnLoad = function(Yb) { this.Yb = Yb;};mboxOfferAjax = function(ec) { this.ec = ec; this.Yb = function() {};};mboxOfferAjax.prototype.setOnLoad = function(Yb) { this.Yb = Yb;};mboxOfferAjax.prototype.show = function(db) { var lc = document.createElement('div'); lc.id = db.getImportName(); lc.innerHTML = this.ec; var H = db.showContent(lc); if (H == 1) { this.Yb(); } return H;};mboxOfferDefault = function() { this.Yb = function() {};};mboxOfferDefault.prototype.setOnLoad = function(Yb) { this.Yb = Yb;};mboxOfferDefault.prototype.show = function(db) { var H = db.hide(); if (H == 1) { this.Yb(); } return H;};mboxCookieManager = function mboxCookieManager(n, mc) { this.n = n; this.mc = mc == '' || mc.indexOf('.') == -1 ? '' : '; domain=' + mc; this.nc = new mboxMap(); this.loadCookies();};mboxCookieManager.prototype.isEnabled = function() { this.setCookie('check', 'true', 60); this.loadCookies(); return this.getCookie('check') == 'true';};mboxCookieManager.prototype.setCookie = function(n, o, hb) { if (typeof n != 'undefined' && typeof o != 'undefined' && typeof hb != 'undefined') { var oc = new Object(); oc.name = n; oc.value = escape(o); oc.expireOn = Math.ceil(hb + new Date().getTime() / 1000); this.nc.put(n, oc); this.saveCookies(); }};mboxCookieManager.prototype.getCookie = function(n) { var oc = this.nc.get(n); return oc ? unescape(oc.value) : null;};mboxCookieManager.prototype.deleteCookie = function(n) { this.nc.remove(n); this.saveCookies();};mboxCookieManager.prototype.getCookieNames = function(pc) { var qc = new Array(); this.nc.each(function(n, oc) { if (n.indexOf(pc) == 0) { qc[qc.length] = n; } }); return qc;};mboxCookieManager.prototype.saveCookies = function() { var rc = false; var sc = 'disable'; var tc = new Array(); var uc = 0; this.nc.each(function(n, oc) { if(!rc || n === sc) { tc[tc.length] = n + '#' + oc.value + '#' + oc.expireOn; if (uc < oc.expireOn) { uc = oc.expireOn; } } }); var vc = new Date(uc * 1000); document.cookie = this.n + '=' + tc.join('|') + '; expires=' + vc.toGMTString() + '; path=/' + this.mc;};mboxCookieManager.prototype.loadCookies = function() { this.nc = new mboxMap(); var wc = document.cookie.indexOf(this.n + '='); if (wc != -1) { var xc = document.cookie.indexOf(';', wc); if (xc == -1) { xc = document.cookie.indexOf(',', wc); if (xc == -1) { xc = document.cookie.length; } } var yc = document.cookie.substring( wc + this.n.length + 1, xc).split('|'); var zc = Math.ceil(new Date().getTime() / 1000); for (var p = 0; p < yc.length; p++) { var oc = yc[p].split('#'); if (zc <= oc[2]) { var Ac = new Object(); Ac.name = oc[0]; Ac.value = oc[1]; Ac.expireOn = oc[2]; this.nc.put(Ac.name, Ac); } } }};mboxSession = function(Bc, Cc, Gb, Dc, P) { this.Cc = Cc; this.Gb = Gb; this.Dc = Dc; this.P = P; this.Ec = false; this.Ob = typeof mboxForceSessionId != 'undefined' ? mboxForceSessionId : mboxGetPageParameter(this.Cc); if (this.Ob == null || this.Ob.length == 0) { this.Ob = P.getCookie(Gb); if (this.Ob == null || this.Ob.length == 0) { this.Ob = Bc; this.Ec = true; } } P.setCookie(Gb, this.Ob, Dc);};mboxSession.prototype.getId = function() { return this.Ob;};mboxSession.prototype.forceId = function(Fc) { this.Ob = Fc; this.P.setCookie(this.Gb, this.Ob, this.Dc);};mboxPC = function(Gb, Dc, P) { this.Gb = Gb; this.Dc = Dc; this.P = P; this.Ob = typeof mboxForcePCId != 'undefined' ? mboxForcePCId : P.getCookie(Gb); if (this.Ob != null) { P.setCookie(Gb, this.Ob, Dc); }};mboxPC.prototype.getId = function() { return this.Ob;};mboxPC.prototype.forceId = function(Fc) { if (this.Ob != Fc) { this.Ob = Fc; this.P.setCookie(this.Gb, this.Ob, this.Dc); return true; } return false;};mboxGetPageParameter = function(n) { var H = null; var Gc = new RegExp(n + "=([^\&]*)"); var Hc = Gc.exec(document.location); if (Hc != null && Hc.length >= 2) { H = Hc[1]; } return H;};mboxSetCookie = function(n, o, hb) { return mboxFactoryDefault.getCookieManager().setCookie(n, o, hb);};mboxGetCookie = function(n) { return mboxFactoryDefault.getCookieManager().getCookie(n);};mboxCookiePageDomain = function() { var mc = (/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1]; var Ic = /[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/; if (!Ic.exec(mc)) { var Jc = (/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(mc); if (Jc) { mc = Jc[0]; } } return mc ? mc: "";};mboxShiftArray = function(Kc) { var H = new Array(); for (var p = 1; p < Kc.length; p++) { H[H.length] = Kc[p]; } return H;};mboxGenerateId = function() { return (new Date()).getTime() + "-" + Math.floor(Math.random() * 999999);};mboxScreenHeight = function() { return screen.height;};mboxScreenWidth = function() { return screen.width;};mboxBrowserWidth = function() { return (window.innerWidth) ? window.innerWidth : document.documentElement ? document.documentElement.clientWidth : document.body.clientWidth;};mboxBrowserHeight = function() { return (window.innerHeight) ? window.innerHeight : document.documentElement ? document.documentElement.clientHeight : document.body.clientHeight;};mboxBrowserTimeOffset = function() { return -new Date().getTimezoneOffset();};mboxScreenColorDepth = function() { return screen.pixelDepth;};if (typeof mboxVersion == 'undefined') { var mboxVersion = 47; var mboxFactories = new mboxMap(); var mboxFactoryDefault = new mboxFactory('jupiterimages.tt.omtrdc.net', 'jupiterimages', 'default');};if (mboxGetPageParameter("mboxDebug") != null || mboxFactoryDefault.getCookieManager() .getCookie("debug") != null) { setTimeout(function() { if (typeof mboxDebugLoaded == 'undefined') { alert('Could not load the remote debug.\nPlease check your connection' + ' to Test&amp;Target servers'); } }, 60*60); document.write('<' + 'scr' + 'ipt language="Javascript1.2" src=' + '"http://admin9.testandtarget.omniture.com/admin/mbox/mbox_debug.jsp?mboxServerHost=jupiterimages.tt.omtrdc.net' + '&clientCode=jupiterimages"><' + '\/scr' + 'ipt>');};mboxScPluginFetcher = function(i, Lc) { this.i = i; this.Lc = Lc;};mboxScPluginFetcher.prototype.Mc = function(C) { C.setBasePath('/m2/' + this.i + '/sc/standard'); this.Nc(C); var l = C.buildUrl(); l += '&scPluginVersion=1'; return l;};mboxScPluginFetcher.prototype.Nc = function(C) { var Oc = [ "dynamicVariablePrefix","visitorID","vmk","ppu","charSet", "visitorNamespace","cookieDomainPeriods","cookieLifetime","pageName", "currencyCode","variableProvider","channel","server", "pageType","transactionID","purchaseID","campaign","state","zip","events", "products","linkName","linkType","resolution","colorDepth", "javascriptVersion","javaEnabled","cookiesEnabled","browserWidth", "browserHeight","connectionType","homepage","pe","pev1","pev2","pev3", "visitorSampling","visitorSamplingGroup","dynamicAccountSelection", "dynamicAccountList","dynamicAccountMatch","trackDownloadLinks", "trackExternalLinks","trackInlineStats","linkLeaveQueryString", "linkDownloadFileTypes","linkExternalFilters","linkInternalFilters", "linkTrackVars","linkTrackEvents","linkNames","lnk","eo" ]; for (var p = 0; p < Oc.length; p++) { this.Pc(Oc[p], C); } for (var p = 1; p <= 75; p++) { this.Pc('prop' + p, C); this.Pc('eVar' + p, C); this.Pc('hier' + p, C); }};mboxScPluginFetcher.prototype.Pc = function(n, C) { var o = this.Lc[n]; if (typeof(o) === 'undefined' || o === null || o === '') { return; } C.addParameter(n, o);};mboxScPluginFetcher.prototype.cancel = function() { };mboxScPluginFetcher.prototype.fetch = function(C) { C.setServerType(this.getType()); var l = this.Mc(C); this.D = document.createElement('script'); this.D.src = l; document.body.appendChild(this.D);};mboxScPluginFetcher.prototype.getType = function() { return 'ajax';};function mboxLoadSCPlugin(Lc) { if (!Lc) { return null; } Lc.m_tt = function(Lc) { var Qc = Lc.m_i('tt'); Qc.N = true; Qc.i = 'jupiterimages'; Qc['_t'] = function() { if (!this.isEnabled()) { return; } var db = this.Sc(); if (db) { var _b = new mboxScPluginFetcher(this.i, this.s); db.setFetcher(_b); db.load(); } }; Qc.isEnabled = function() { return this.N && mboxFactoryDefault.isEnabled(); }; Qc.Sc = function() { var gb = this.Tc(); var Lb = document.createElement('DIV'); return mboxFactoryDefault.create(gb, new Array(), Lb); }; Qc.Tc = function() { var Uc = this.s.events && this.s.events.indexOf('purchase') != -1; return 'SiteCatalyst: ' + (Uc ? 'purchase' : 'event'); }; }; return Lc.loadModule('tt');};mboxVizTargetUrl = function(gb ) { if (!mboxFactoryDefault.isEnabled()) { return; } var C = mboxFactoryDefault.getUrlBuilder().clone(); C.setBasePath('/m2/' + 'jupiterimages' + '/viztarget'); C.addParameter('mbox', gb); C.addParameter('mboxId', 0); C.addParameter('mboxCount', mboxFactoryDefault.getMboxes().length() + 1); var wb = new Date(); C.addParameter('mboxTime', wb.getTime() - (wb.getTimezoneOffset() * 60000)); C.addParameter('mboxPage', mboxGenerateId()); var j = mboxShiftArray(arguments); if (j && j.length > 0) { C.addParameters(j); } C.addParameter('mboxDOMLoaded', mboxFactoryDefault.isDomLoaded()); mboxFactoryDefault.setVisitorIdParameters(C); return C.buildUrl();};TNT.createGlobalMbox = function () { var Vc = "target-global-mbox"; var Wc = ("".length === 0); var Xc = ""; var Yc; if (Wc) { Xc = "mbox-" + Vc + "-" + mboxGenerateId(); Yc = document.createElement("div"); Yc.className = "mboxDefault"; Yc.id = Xc; Yc.style.visibility = "hidden"; Yc.style.display = "none"; mboxFactoryDefault.addOnLoad(function(){ document.body.insertBefore(Yc, document.body.firstChild); }); } var Zc = mboxFactoryDefault.create(Vc, TNT.a.b(), Xc); if (Zc != null) { Zc.load(); }};
//-->
</script>
<script type="text/javascript">
    //<!--
        (function($) {
            $(document).ready(function() {
                $(window).load(function() {
                    var trackingElem = document.createElement("script");
                    trackingElem.setAttribute("type", "text/javascript");
                    trackingElem.setAttribute("src", "http://nexus.ensighten.com/getty/Bootstrap.js");
                    document.getElementsByTagName("BODY")[0].appendChild(trackingElem);
                });
            });
        })(jQuery.noConflict());    //-->
</script>
<script type="text/javascript" src="http://i.istockimg.com/static/1464293291/js/angular-bundle-1-3.js"></script>        
    </head>
<body>
<div class="off-canvas-wrap" data-offcanvas>
<div class="inner-wrap">
<section id="content-root">
    <header id="content-root-header" role="global">
        <div ng-controller="NotificationCtrl" >
            <script type="text/injected" name="globalNotificationsStateData">{"COOKIE_BAR":{"startTime":"1000\/01\/01 12:00:00 AM","endTime":"2999\/01\/01 12:00:00 AM","cssClass":"warning","isEnabled":["isEuroLocale"],"key":"COOKIE_BAR","cookieAttrs":{"cookieName":"istockGlobalNotifications_COOKIE_BAR","cookieValue":"Closed","cookieExpiryDays":0},"content":"This site uses cookies. By continuing to browse iStock, you are agreeing to use our site cookies. <a href=\"\/legal\/privacy-policy\">Find out more here ><\/a>"},"SUBSCRIBE_BAR":{"startTime":"1000\/01\/01 12:00:00 AM","endTime":"2999\/01\/01 12:00:00 AM","cssClass":"info","isEnabled":false,"key":"SUBSCRIBE_BAR","cookieAttrs":{"cookieName":"istockGlobalNotifications_SUBSCRIBE_BAR","cookieValue":"Closed","cookieExpiryDays":0},"content":"Subscribe and save with our all-new image subscriptions. <a href=\"\/plans-and-pricing\">Learn more ><\/a>"},"OUTDATED_BROWSER_BAR":{"startTime":"1000\/01\/01 12:00:00 AM","endTime":"2999\/01\/01 12:00:00 AM","cssClass":"info","isEnabled":["isOutDatedBrowser"],"key":"OUTDATED_BROWSER_BAR","cookieAttrs":{"cookieName":"istockGlobalNotifications_OUTDATED_BROWSER_BAR","cookieValue":"Closed","cookieExpiryDays":0},"content":"You are using an outdated browser. For a faster, safer browsing experience, <a href=\"http:\/\/www.browser-update.org\/update.html\">upgrade for free today<\/a>."},"OPT_IN_EMAIL":{"startTime":"1000\/01\/01 12:00:00 AM","endTime":"2999\/01\/01 12:00:00 AM","cssClass":"info","isEnabled":["isNotificationCookieEnabled"],"key":"OPT_IN_EMAIL","cookieAttrs":{"cookieName":"istockGlobalNotifications_OPT_IN_EMAIL","cookieValue":"Closed","cookieExpiryDays":0},"content":"Thanks for your confirmation. You'll now receive email from iStock."}}</script>            <div class="notifications" ng-repeat="n in globalNotificationsStateData">
                <notification-bar notification="n" close-callback="n.closeCallback()"></notification-bar>
            </div>
        </div>
        
        <script type="text/injected" name="pAndPTranslation">"http:\/\/www.istockphoto.com\/plans-and-pricing"</script>        <script type="text/injected" name="isUserLoggedIn">false</script>        <script type="text/injected" name="userName">""</script>
        <section ng-controller="AcctCtrl" >
            <div id="header-container">
                <nav id="global-nav">
                    <a href="#" class="left-off-canvas-toggle mobile"><figure class="general-icon-menu"></figure></a>
                    <ul class="desktop">
                        <li><a class="header-link-photos" href="http://www.istockphoto.com/stock-photos" data-isource-track="nav=nav_Photos">
                            Photos                        </a></li>
                        <li><a class="header-link-illustrations" href="http://www.istockphoto.com/stock-illustrations" data-isource-track="nav=nav_Illustrations">
                            Illustrations                        </a></li>
                        <li><a class="header-link-video" href="http://www.istockphoto.com/footage" data-isource-track="nav=nav_Video">
                            Video                        </a></li>
                        <li><a class="header-link-audio" href="http://www.istockphoto.com/music-clips" data-isource-track="nav=nav_Audio">
                            Audio                        </a></li>
                    </ul>
                </nav>

                <section id="logo">
                    <a class="default" href="http://www.istockphoto.com/" data-isource-track="nav=head_Logo">iStock by Getty Images</a>
                    <a class="simple" href="http://www.istockphoto.com/" data-isource-track="nav=head_Logo">iStock by Getty Images</a>
                </section>

                <section id="account" ng-controller="HeaderCtrl">
                    <span>
                        <ul>
                            <div ng-show="loggedIn" ng-cloak>
                                <li class="lighter tablet-ib desktop-ib">
                                    <a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=nav_Pricing" class="plans-pricing-link">
                                        Pricing                                    </a>
                                </li>
                                <li class="divider light tablet-ib desktop-ib"></li>
                                <li id="account-action"><a href="#" class="right-off-canvas-toggle">
                                    <figure class="notification-dot" ng-if="subsExpirationStatus.isExpiring == true"></figure>
                                    <figure class="general-icon-account"><span></span></figure>
                                    <span class="desktop-i" ng-bind-html="userName"></span>
                                </a></li>
                                <li id="simple-sign-out" class="desktop-i" data-role="sign-out"><a href="http://www.istockphoto.com/logout" data-isource-track="nav=nav_logout">Sign out</a></li>
                            </div>
                            <div ng-hide="loggedIn" ng-cloak>
                                <li class="lighter desktop-ib tablet-ib">
                                    <a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=nav_Pricing" class="plans-pricing-link">
                                        Pricing                                    </a>
                                </li>
                                <li class="divider light desktop-ib tablet-ib"></li>
                                <li class="mobile-ib">
                                    <a href="#" class="right-off-canvas-toggle">
                                        <figure class="general-icon-account mobile-ib"></figure>
                                    </a>
                                </li>
                                <li class="desktop">
                                    <a href="https://secure.istockphoto.com/sign-in?returnUrl=%2Fphoto%2Fyoung-couple-sleeping-soundly-in-bed-together-gm480393818-68693681%3Fst%3Dc861898" class="sign-in-cta" data-isource-track="nav=nav_SignIn">
                                        Sign in                                    </a>
                                </li>
                                <li class="desktop">
                                    <a href="https://secure.istockphoto.com/join?returnUrl=%2Fphoto%2Fyoung-couple-sleeping-soundly-in-bed-together-gm480393818-68693681%3Fst%3Dc861898" class="join-cta" data-isource-track="nav=nav_Join">
                                        Join                                    </a>
                                </li>
                            </div>
                        </ul>
                    </span>
                </section>
            </div>

            
            <aside class="right-off-canvas-menu" off-canvas-swipe="left">
                <a href="#" class="exit-off-canvas inner desktop">
                    <figure class="general-icon-slider-close"></figure>
                </a>
                <div ng-show="loggedIn" ng-cloak>
                    <ul class="off-canvas-list" ng-if="creditsPayAsYouGo != 0">
                        <li data-role="buy-credits-expanded"><div>
                            <h4 ng-if="!corporateAccount">iStock credits</h4>
                            <h4 ng-if="corporateAccount">Corporate credits</h4>
                                                        <div class="credits">{{creditsPayAsYouGo}}</div>
                            <p ng-if="!isCorporateSlave">
                            <a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=head_BuyMoreCredits">Buy more credits</a></p>
                            </p>
                        </div></li>
                    </ul>

                    <ul class="off-canvas-list" ng-if="subsRemaining == 0 && hasActualSuspendedSubscription == true">
                        <li data-role="subscribe-expanded">
                            <div>
                                <h4>Image subscriptions</h4>
                                <figure class="general-icon-exclamation"></figure>
                                <p><a href="http://www.istockphoto.com/user_view.php" data-isource-track="nav=nav_view_subs">Subscription<br /> suspended</a></p>
                            </div>
                        </li>
                    </ul>

                    <ul class="off-canvas-list" ng-if="hasActiveSubscription == true || subsExpirationStatus.isExpiring == true">
                        <li data-role="subscribe-expanded">
                            <div>
                                <h4>Image subscriptions</h4>
                                <figure ng-if="subsExpirationStatus.isExpired == true" class="general-icon-exclamation"></figure>
                                <p class="expired-notification" ng-if="subsExpirationStatus.isExpired == true" >Your subscription has expired.<br />
                                    <a href="http://www.istockphoto.com/user_view.php" data-isource-track="nav=nav_view_subs">Reactivate</a>
                                </p>
                                <figure ng-if="subsExpirationStatus.isExpiring == true && subsExpirationStatus.isExpired == false" class="general-icon-clock"></figure>
                                <p class="expired-notification" ng-if="subsExpirationStatus.isExpiring == true && subsExpirationStatus.isExpired == false && subsExpirationStatus.daysRange != 1" >
                                    Your subscription is ending in <strong>{{subsExpirationStatus.actualDays}}</strong> days.                                    <br /><a href="http://www.istockphoto.com/user_view.php" data-isource-track="nav=nav_view_subs">Renew today</a>
                                </p>
                                <p class="expired-notification" ng-if="subsExpirationStatus.isExpiring == true && subsExpirationStatus.isExpired == false && subsExpirationStatus.daysRange == 1" >Your subscription is ending in <strong>{{subsExpirationStatus.actualDays}}</strong> day.                                    <br /><a href="http://www.istockphoto.com/user_view.php" data-isource-track="nav=nav_view_subs">Renew today</a>
                                </p>
                                <div class="credits">{{subsRemaining}}</div>
                                <p class="download-remaining">images remaining this month</p>                                <p><a href="http://www.istockphoto.com/user_view.php" data-isource-track="nav=nav_view_subs">View subscription details</a></p>
                            </div>
                        </li>
                    </ul>

                    <ul class="off-canvas-list" ng-if="creditSubs != 0">
                        <li data-role="subscribe-expanded"><div>
                            <h4>Credit subscription</h4>
                            <div class="credits">{{creditSubs}}</div>
                                <p class="download-remaining">images remaining today</p>
                        </div></li>
                    </ul>

                    <ul class="off-canvas-list" ng-if="creditsPayAsYouGo == 0 && subsRemaining == 0 && hasActualSuspendedSubscription == false">
                        <li data-role="plans-and-pricing">
                            <a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=head_plans_and_pricing">
                                Plans and pricing</a>
                        </li>
                    </ul>

                    <ul class="off-canvas-list">
                        <li data-role="lightboxes"><a href="https://secure.istockphoto.com/my-account/lightbox" data-isource-track="nav=nav_lightbox">Your lightboxes</a></li>
                        <li data-role="your-account"><a href="https://secure.istockphoto.com/user_view.php" data-isource-track="nav=nav_account">Your account</a></li>
                    </ul>

                    <ul class="off-canvas-list sign-out">
                        <li data-role="sign-out"><a href="http://www.istockphoto.com/logout" data-isource-track="nav=nav_logout">Sign out</a></li>
                    </ul>
                </div>
                <div ng-hide="loggedIn" ng-cloak>
                    <ul class="off-canvas-list sign-in">
                        <li><a href="https://secure.istockphoto.com/sign-in?returnUrl=%2Fphoto%2Fyoung-couple-sleeping-soundly-in-bed-together-gm480393818-68693681%3Fst%3Dc861898" class="sign-in-cta" data-isource-track="nav=nav_SignIn">
                            Sign in                        </a></li>
                        <li><a href="https://secure.istockphoto.com/join?returnUrl=%2Fphoto%2Fyoung-couple-sleeping-soundly-in-bed-together-gm480393818-68693681%3Fst%3Dc861898" class="join-cta" data-isource-track="nav=nav_Join">
                            Join                        </a></li>
                        <li class="mobile"><a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=nav_Pricing">
                            Plans and pricing                        </a></li>
                    </ul>
                </div>
            </aside>
        </section>

        <!-- Mobile Menu -->
        <aside class="left-off-canvas-menu" off-canvas-swipe="right">
            <a href="#" class="exit-off-canvas inner desktop">
                <figure class="general-icon-slider-close"></figure>
            </a>

            <ul class="off-canvas-list mobile">
                <li><a href="http://www.istockphoto.com/stock-photos" data-isource-track="nav=nav_Photos">
                    Photos                </a></li>
                <li><a href="http://www.istockphoto.com/stock-illustrations" data-isource-track="nav=nav_Illustrations">
                    Illustrations                </a></li>
                <li><a href="http://www.istockphoto.com/footage" data-isource-track="nav=nav_Video">
                    Video                </a></li>
                <li><a href="http://www.istockphoto.com/music-clips" data-isource-track="nav=nav_Audio">
                    Audio                </a></li>
            </ul>
        </aside>
    </header>

    <section id="adp-container" ng-app="adp">
    <search-bar use-default-search-bar     placeholderTranslations='{"PLACEHOLDERS":{"image":"Find the perfect stock photos, vectors and more...","photos":"Find the perfect stock photos...","illustrations":"Find the perfect vectors and illustrations...","video":"Find the perfect stock video clips...","audio":"Find the perfect music clips...","mobile":"Start searching..."}}'><search-file-type-selector   fileTypeTranslations='{"FILE_TYPES":{"images":"Images","photos":"Photos","illustrations":"Illustrations","video":"Video","audio":"Audio"}}'></search-file-type-selector></search-bar>    <section id="adp-content">
        <section ng-view></section>

        <script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_adultContent.html"><div><h1 data-i18n="ADULT_CONTENT_HEADER"></h1><p data-i18n="ADULT_CONTENT_WARNING"></p><button class="primary-cta" ng-click="adp.showAdultContent()" data-i18n="PROCEED"></button><div><a href="{{urlInfix}}/" data-i18n="ADULT_CONTENT_WARNING_PASS" target="_self"></a></div></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_carousel.html"><section ng-hide="localdata.totalResults < localdata.threshold || errorCode !== 0 || keywordResults < 0"><div class="carousel-content"><h2 class="carousel-text" id="carousel-title"><span ng-if="sectionTitle" ng-bind="sectionTitle"></span> <span ng-if="!sectionTitle" data-i18n="SIMILAR_FILES_TITLE_{{assetType.toUpperCase()}}"></span> <span class="link-with-right-arrow" ng-click="go(sectionSubLinkAnchor)"><a class="sub-link" target="_self"><span data-i18n="SIMILAR_FILES_SEE_ALL" ng-if="!sectionSubLink"></span> <span class="ng-scope" ng-if="sectionSubLink" ng-bind="sectionSubLink"></span> <span class="right-arrow"></span></a></span></h2><ul class="carousel"><div ng-repeat="file in currentRow"><a ng-href="{{file.assetUrl}}" ng-click="showNewFile(file.assetUrl, $event)"><li class="carousel-items"><div class="carousel-item-card" title="{{file.title}}"><div class="carousel-item-preview" ng-swipe-left="getNewRow('next')" ng-swipe-right="getNewRow('prev')"><div class="carousel-preview"><div class="icon-wrapper"><div class="video-icon" ng-show="file.assetType === 'video'"></div><div class="audio-icon" ng-show="file.assetType === 'audio'"></div><div class="editorial-icon" ng-show="file.licenseTypeID === 2 || file.isEditorial === true"></div></div><img class="preview" ng-hide="file.assetType === 'audio'" ng-src="{{file.thumbnailsUrl.mediumUrl}}"/></div></div><div class="item-title" id="clamp-title-{{file.gettyMasterId}}" ng-show="file.assetType === 'audio'" dotdotdot ng-bind="file.title"></div></div></li></a></div><div class="carousel-button-wrapper-left"><div class="carousel-button" id="carousel-show-prev-button" ng-show="prevEnabled" ng-click="getNewRow('prev')"><span>&lt;</span></div></div><div class="carousel-button-wrapper-right"><div class="carousel-button" id="carousel-show-next-button" ng-show="nextEnabled" ng-click="getNewRow('next')"><span>&gt;</span></div></div></ul></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_categories.html"><h2 class="category-links-title" id="photo-categories" data-i18n="CATEGORY_LINKS_TITLE_{{adp.asset.assetType.toUpperCase()}}"></h2><section class="category-list"><ul class="categories"><li class="category" ng-repeat="category in adp.categories.slice(0,5)" ng-click="setOmnitureCookie('category',category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li><li class="category" ng-repeat="category in adp.categories.slice(5,10)" ng-click="setOmnitureCookie('category', category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li><li class="category" ng-repeat="category in adp.categories.slice(10,15)" ng-click="setOmnitureCookie('category', category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li><li class="category" ng-repeat="category in adp.categories.slice(15,20)" ng-click="setOmnitureCookie('category', category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li><li class="category" ng-repeat="category in adp.categories.slice(20,25)" ng-click="setOmnitureCookie('category', category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li><li class="category" ng-repeat="category in adp.categories.slice(25,30)" ng-click="setOmnitureCookie('category', category.name)"><a href="{{category.link}}" target="_self" data-i18n="CATEGORY_LINK_NAME|{{category.name}}"></a></li></ul></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_clamp.html"><section class="adp-clamper-wrapper"><section class="adp-file-title-wrapper"><section class="adp-file-title adp-content-animation-fade"><h1 class="adp-clamped-headline" id="clamped-title" title="{{titlesrc}}" ng-hide="showFullTitle"><span class="adp-clamped-text">{{clampedTitle}}</span>&nbsp;<button class="adp-show-full-title-button" id="adp-show-full-title-elipsis" ng-hide="showFullTitle" ng-click="toggleShowFullTitle()" title="{{alttext}}"><span class="adp-show-full-title-text">...</span></button></h1><h1 id="asset-title" title="{{titlesrc}}"><span ng-show="showFullTitle">{{fullTitle}}</span></h1></section></section><section class="adp-file-title-keywords-wrapper" ng-hide="!showFullTitle || showKeywordsAsTitle"><h2 class="adp-file-title-keywords" id="title-keywords">{{clampedKeywords}}</h2></section></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_description.html"><section class="adp-description-section" ng-show="asset.description"><div class="adp-description-content"><h2 class="adp-description-title" data-i18n="DESCRIPTION_TITLE"></h2><div class="adp-description-field"></div></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_fileDetails.html"><section class="adp-download-section"><div ng-hide="!adp.asset.isFreeFile ||
      activeState.showExtendedLicenses ||
      availability.isDownloadable" class="adp-free-file adp-content-animation-fade"><strong>{{assetTypeConfig.freeLabel}}</strong></div><div ng-hide="adminData.permissions && adminData.permissions.freeAdminDownloadACL" class="asset-price" id="asset-price" ng-if="activeState.creditsTitle && adp.asset.isFreeFile !== true"><span>{{activeState.creditsTitle}}</span></div><div ng-show="adminData.permissions && adminData.permissions.freeAdminDownloadACL" class="asset-price" id="asset-price" ng-if="activeState.creditsTitle && adp.asset.isFreeFile !== true"><span>0 credits</span></div><section class="adp-fade-and-slide" ng-show="activeState.showExtendedLicenses && !activeState.warningBox" ng-include="'/static/js/angular/apps/adp/partials/details/_extendedLicenses.html'"></section><div class="header-wrapper adp-fade-and-slide adp-set-max-height" ng-hide="activeState.showExtendedLicenses"><h2><div class="adp-card-title" id="card-title">{{activeState.title | i18n}}</div></h2></div><div ng-show="adp.asset.assetType == 'vector'"><div id="vector-file-type" class="vector-title" data-i18n="VECTOR_ILLUSTRATION_METADATA_TYPE"></div><div id="vector-file-contents" class="vector-content" data-i18n="VECTOR_ILLUSTRATION_METADATA_CONTENT"></div></div><div class="adp-editorial-bubble" id="editorial-icon" ng-hide="activeState.showExtendedLicenses ||
      activeState.warningBox ||
      !adp.asset.isEditorial ||
      activeState.paymentSelect ||
      activeState.completeSection"><div class="adp-editorial-wrapper"><img class="adp-editorial-img" id="editorial-image" src="/static/images/blank.gif"/> <span data-i18n="EDITORIAL_USE_ONLY|{{urlInfix}}/legal/license-agreement#restricted-uses"></span> <span class="general-infotip has-tip" tooltip-placement="bottom" tooltip-html-unsafe="{{'EDITORIAL_USE_ONLY_TOOLTIP' | i18n}}"></span></div></div><div class="adp-warning-box sub-type-message" ng-show="activeState.showSubTypeMessage &&
      !activeState.focusView &&
      !activeState.showExtendedLicenses &&
      !adp.asset.isFreeFile"><span data-i18n="INCLUDED_WITH_SUBS"></span></div><section class="adp-file-type-dropdown-section" ng-show="activeState.showFileTypeDropdown &&
      activeState.fileTypeDropdownOptions &&
      !activeState.showExtendedLicenses"><select class="adp-file-type-dropdown" ng-model="selectedDropdownOption" ng-options="dropdownOption.presentationString for dropdownOption in activeState.fileTypeDropdownOptions" ng-click="updateDropdownSelection(selectedDropdownOption)"></select></section><section class="adp-fade-and-slide adp-set-max-height" ng-if="adp.asset.assetType == 'photo' || adp.asset.assetType == 'raster'" ng-show="viewState.isDownloadState() && !activeState.showExtendedLicenses"><adp-size-selector></adp-size-selector></section><section class="adp-warning-box" ng-show="activeState.warningBox" ng-include="'/static/js/angular/apps/adp/partials/details/_warningBox.html'"></section><section class="adp-download-feedback" ng-show="viewStates.completeDownload.showDropboxSyncFeedback && activeState.completeSection" ng-include="'/static/js/angular/apps/adp/partials/details/_downloadFeedback.html'"></section><section class="adp-details-fade adp-payment-select-options adp-content-animation-fade" ng-show="activeState.paymentSelect" ng-include="'/static/js/angular/apps/adp/partials/details/_paymentSelection.html'"></section><section class="adp-file-download" ng-hide="adp.asset.status === 'Rejected' || adp.asset.status === 'Deactivated'"><section class="adp-file-confirm-cancel-wrapper"><div class="adp-file-download-button-wrapper"><button class="super-cta" id="download-button" type="submit" ng-click="getCtaAction(activeState.ctaAction)" ng-bind-html="activeState.ctaTitle"></button><div class="adp-file-cancel-button-wrapper"><span ng-show="!activeState.showExtendedLicenses && (activeState.confirmSection || activeState.warningBox || activeState.focusView)"><div class="adp-confirm-close-btn" id="cancel-download-btn" ng-click="cancelPurchase()" ng-hide="activeState.focusView"></div></span></div></div></section><cms-well passthru="ADP-value-prop.page" fallback="" ng-show="!adminData.permissions"></cms-well><span ng-show="activeState.confirmSection && (purchaseState.purchaseStatus.hasSub === false)" class="adp-content-animation-fade"><div class="adp-btn-flow-text" id="license-agreement-link"><span data-i18n="LICENSE_AGREEMENT|/legal/license-agreement"></span></div></span><div ng-show="!viewStates.completeDownload.showDropboxSyncFeedback && activeState.completeSection" class="adp-content-animation-fade"><div class="adp-btn-flow-text"><span id="download-not-working" data-i18n="DOWNLOAD_NOT_WORKING|getCtaAction(activeState.ctaAction, {downloadType: 'manual'})"></span></div></div><div ng-show="viewStates.completeDownload.showDropboxSyncFeedback && activeState.completeSection" class="adp-content-animation-fade"><div class="adp-btn-flow-text"><span id="download-locally" data-i18n="DOWNLOAD_LOCALLY|getCtaAction(activeState.ctaAction, {downloadType: 'manual'})"></span></div></div><div class="adp-content-animation-fade" ng-show="activeState.redownloadSection && !adp.asset.isFreeFile"><div class="adp-btn-flow-text"><small data-i18n="ALREADY_DOWNLOAD_TEXT"></small></div></div></section><we-transfer ng-show="viewStates.completeDownload.showWeTransferCTA && activeState.completeSection && languageSupportedByWeTransfer" downloaded-file-size="downloadedFileSize" user-email-address="adp.user.emailAddress" file-type="adp.asset.assetType"></we-transfer><div ng-show="activeState.showExtendedLicenses"><span class="link-with-right-arrow" data-i18n="LEARN_MORE_LICENSE|{{urlInfix}}/help/licenses"></span></div><hr ng-hide="activeState.showExtendedLicenses || activeState.warningBox || activeState.focusView"/><section class="adp-fade-and-slide adp-set-max-height" ng-hide="activeState.showExtendedLicenses || activeState.warningBox || activeState.focusView"><div class="adp-el-text"><div id="standard-license-link" data-i18n="STANDARD_LICENSE|{{urlInfix}}/help/licenses"/><div id="extended-license-link" data-i18n="EXTENDED_LICENSE"/></div><div ng-include="'/static/js/angular/apps/adp/partials/details/_contributor.html'"></div><adp-metadata asset-id="{{adp.assetId}}" class="adp-metadata-section"></adp-metadata></section><dropbox-intro-modal ng-if="!viewStates.completeDownload.showDropboxSyncFeedback && activeState.completeSection"><section class="dropbox-intro-modal" ng-class="{'active': canBeSeen}"><div class="responsive-modal-vert"><div class="responsive-modal-hor"><div class="responsive-modal-close" ng-click="close()"></div><div class="responsive-modal-content"><div class="dropbox-intro-icon"></div><p data-i18n="SAVE_TO_DROPBOX"></p><a ng-href="{{appLink}}" ng-click="getStarted()" class="primary-cta" id="adp-dropbox-popup-get-started">{{'GET_STARTED'|i18n}}</a> <small><a href="" ng-click="dontShowMe()">{{'DO_NOT_SHOW_AGAIN'|i18n}}</a></small></div></div></div></section></dropbox-intro-modal></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_keywords.html"><h2 class="keywords-title" data-i18n="KEYWORDS_TITLE"></h2><section class="keywords"><ul class="keyword-list"><li class="keyword base-keywords" id="base-keywords" ng-repeat="(index, key) in adp.keywords.baseKeywords"><a href="{{urlInfix}}{{adp.keywords.searchUrl.replace('%s', key.split(' ').join('+').toLowerCase())}}" target="_self" class="keyword-button" id="keyword-button-{{index}}" title="Search {{key}} files" ng-click="setOmnitureCookie('keyword')">{{key}}</a></li><li class="keyword extra-keywords" id="extra-keywords" ng-repeat="(index, key) in adp.keywords.extraKeywords" ng-show="adp.keywords.showExtraKeywords"><a href="{{urlInfix}}{{adp.keywords.searchUrl.replace('%s', key.split(' ').join('+').toLowerCase())}}" target="_self" class="keyword-button" id="keyword-button-{{index}}" title="Search {{key}} files" ng-click="setOmnitureCookie('keyword')">{{key}}</a></li><li class="keyword see-all-button-wrapper"><button class="see-all-button" id="keyword-button-see-all" ng-click="adp.toggleExtraKeywords()" ng-show="adp.keywords.extraKeywords.length!=0 && !adp.keywords.showExtraKeywords"><span data-i18n="SEE_ALL_KEYWORDS"></span></button></li></ul><div class="optout-wrapper"><a href="{{optoutLink}}" target="_self" class="hollow-cta medium lighten-hover"><span data-i18n="SWITCH_TO_CLASSIC"></span></a></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_preview.html"><section class="thumbnail-wrapper"><div class="thumbnail"><div ng-switch="adp.asset.assetType.toLowerCase()"><div ng-switch-when="photo"><div ng-include="'/static/js/angular/apps/adp/partials/preview/_photo.html'"></div></div><div ng-switch-when="vector"><div ng-include="'/static/js/angular/apps/adp/partials/preview/_illustration.html'"></div></div><div ng-switch-when="raster"><div ng-include="'/static/js/angular/apps/adp/partials/preview/_illustration.html'"></div></div><div ng-switch-when="audio"><div ng-include="'/static/js/angular/apps/adp/partials/preview/_audio.html'"></div></div><div ng-switch-when="video"><div ng-include="'/static/js/angular/apps/adp/partials/preview/_video.html'"></div></div></div><lightbox asset-type="adp.asset.presentation.type" getty-ids="[adp.gettyId]" file-ids="[adp.assetId]" asset-collection="adp.asset.presentation.collection" asset-is-editorial="adp.asset.isEditorial" app-id="'adp'" user="adp.user" error="adp.error" ng-show="adp.asset.status === 'Active'"></lightbox></div></section><div ng-bind-html="adp.asset.presentation.editorialCaption" class="adp-editorial-caption" id="editorial-caption" ng-show="adp.asset.isEditorial"></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/_zoom.html"><div class="zoom-large-url" ng-click="zoomModalOpen($event)"><div id="schemaScope" itemscope itemtype="http://schema.org/ImageObject" width="{{width}}" height="{{height}}"><img alt="{{altText}}" title="{{altText}}" class="zoom-thumbnail-img" ng-src="{{src}}" id="image-thumbnail" itemprop="image"></div><div class="zoom-icon" ng-hide="touchscreen" ng-click="zoomModalOpen($event, true)"></div></div><div class="zoom-modal ng-hide" ng-click="zoomModalClose()" ng-show="zoomed"><spinner id="adp-zoom-modal-spinner" show-spinner="true"></spinner><img adp-drag ng-click="noClick($event)" ng-mousedown="setFlag('mouseDown')" ng-mouseup="removeFlag('mouseDown')" id="image-zoom" state="zoomed" ng-show="loaded"><div class="zoom-modal-close"></div></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/amp/_adminDropdownGroups.html"><dropdown label="File details" id="admin-file details-dropdown" activation-method="hover" label-class="panel-filter" show-active="true" orientation="right" ng-if="userCanViewFileDetailsSection() || userCanViewVideoInfoSection() || adminData.permissions.viewFileDownloadHistory"><div class="dropdown-content-details"><div class="content-block"><span id="amp-file-views" ng-if="adminData.permissions.fileViews">{{adminData.numOfViews}} views</span> <span id="amp-file-downloads" ng-if="adminData.permissions.downloads">{{adp.asset.downloadsCount}} downloads</span> <span ng-if="adminData.permissions.viewVideoInfo"><span id="amp-file-video-codec" ng-if="adminData.videoInfo.codec">Source Codec: {{adminData.videoInfo.codec}}</span> <span id="amp-file-video-duration" ng-if="adminData.videoInfo.duration">Length: {{adminData.videoInfo.duration}} seconds</span> <span id="amp-file-video-duration" ng-if="adminData.videoInfo.isAnamorphic">Anamorphic: {{adminData.videoInfo.isAnamorphic}}</span></span> <span id="amp-inspected-by" ng-if="adminData.permissions.inspectedBy">Inspected by <a target="_blank" href="{{urlInfix}}/profile/{{adminData.inspectorName}}">{{adminData.inspectorName}}</a></span></div><div class="separator" ng-if="(userCanViewFileDetailsSection() || userCanViewVideoInfoSection()) &&
      adminData.permissions.viewFileDownloadHistory"><hr/></div><div class="content-block" nf-if="adminData.permissions.viewFileDownloadHistory"><a id="amp-view-download-history" target="_blank" href="{{urlInfix}}/file_downloads.php?id={{adp.assetId}}">View download history</a></div></div></dropdown><dropdown label="Maintenance" id="admin-maintenance-dropdown" activation-method="hover" label-class="panel-filter" show-active="true" orientation="right" ng-if="userCanViewMaintenanceTopSection() || userCanViewMaintenanceBottomSection()"><div class="dropdown-content-details"><div class="content-block"><a id="amp-edit-file-info" target="_blank" href="{{urlInfix}}/file_closeup_edit.php?id={{adp.assetId}}" ng-if="adminData.permissions.editFileInfo">Edit file information</a> <a id="amp-apply-content-filter" ng-click="contentFilterAction()" ng-if="adminData.permissions.applyContentFilter">{{contentFilterLabel}} content filter</a></div><div class="separator" ng-if="userCanViewMaintenanceTopSection() && userCanViewMaintenanceBottomSection()"><hr/></div><div class="content-block"><a id="amp-download-original" href="{{urlInfix}}/file_view_admin.php?id={{adminData.downloadOriginFileLink}}" ng-if="adminData.permissions.downloadOriginal">Download original</a> <a id="amp-replace-file" target="_blank" href="{{urlInfix}}/file_replace.php?id={{adp.assetId}}" ng-if="adminData.permissions.replaceFile">Replace file</a> <a id="amp-reprocess-file" target="_blank" href="{{urlInfix}}/administration/file-processing/reprocess/{{adp.assetId}}" ng-if="adminData.permissions.reprocessFile">Reprocess file</a> <a id="amp-deactivate-file" target="_blank" href="{{urlInfix}}/file_status_change.php?id={{adp.assetId}}" ng-if="adminData.permissions.deactivateFile">{{activateFileLabel}} file</a></div></div></dropdown><dropdown label="Collection" id="admin-collection-dropdown" activation-method="hover" label-class="panel-filter" show-active="true" orientation="right" ng-if="userCanViewCollectionHistory() || (adminData.permissions.moveCollection && adminData.availableCollections)"><div class="dropdown-content-details"><div class="content-block" ng-if="userCanViewCollectionHistory()"><span id="amp-collection-history-current" ng-if="adminData.currentTaxonomy">Current: {{adminData.currentTaxonomy}}</span> <span id="amp-collection-history-previous" ng-if="adminData.previousTaxonomy">Previous: {{adminData.previousTaxonomy}}</span> <span id="amp-collection-history-modifyby" ng-if="adminData.modifyBy.username">Modify by <a target="_blank" href="{{urlInfix}}/user_view.php?id={{adminData.modifyBy.userId}}">{{adminData.modifyBy.username}}</a> on {{adminData.modifyDate}}</span><div id="admin-premiere-nomination" ng-if="adminData.premiereNomination"><span id="amp-collection-history-nomStatus">Nomination: {{adminData.premiereNomination.status}}</span> <span id="amp-collection-history-nomAdmin">By: <a target="_blank" href="/user_view.php?id={{adminData.premiereNomination.adminID}}">{{adminData.premiereNomination.adminName}}</a></span></div></div><div class="separator" ng-if="userCanViewCollectionHistory() && adminData.permissions.moveCollection && adminData.availableCollections"><hr/></div><div class="content-block" ng-if="adminData.permissions.moveCollection && adminData.availableCollections"><span id="amp-move-collection-label">Move to</span><select id="amp-move-collection-options" name="collection-options" ng-model="collectionSelected" ng-options="collection.name for collection in {{adminData.availableCollections}} track by collection.id"></select><button id="amp-move-collection-button" class="primary-cta" ng-click="manageMoveCollection(collectionSelected.id)">Apply</button></div></div></dropdown><dropdown label="Releases" id="admin-releases-dropdown" activation-method="hover" label-class="panel-filter" show-active="true" orientation="right" ng-if="userCanViewReleasesSection()"><div class="dropdown-content-details"><div class="content-block"><a id="amp-upload-model-release" target="_blank" href="{{urlInfix}}/file_modelrelease_upload.php?id={{adp.assetId}}" ng-if="adminData.permissions.uploadModelRelease">Upload model release</a> <a id="amp-view-model-release" target="_blank" href="{{urlInfix}}/file_modelreleaseview.php?id={{adp.assetId}}" ng-if="adminData.permissions.viewModelRelease && adminData.showModelRelease">View model release</a> <a id="amp-upload-consent-release" target="_blank" ng-if="adminData.permissions.uploadConsentRelease && adp.asset.isEditorial" href="{{urlInfix}}/administration/consent-document/upload/fileid/{{adp.assetId}}">Upload consent or other releases</a> <span ng-if="adminData.permissions.viewConsentRelease && adp.asset.isEditorial && adminData.editorialConsentDocuments" ng-repeat="document in adminData.editorialConsentDocuments"><a id="amp-view-consent-release" target="_blank" href="{{urlInfix}}/administration/file-view/consent-document/id/{{document}}">View consent or other releases</a></span></div></div></dropdown></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/amp/_adminRefineModal.html"><section class="admin-panel-mobile"><button class="primary-cta admin-button" ng-click="toogleAdminRefinePanel()">Manage file</button></section><section class="refine-modal-container" ng-class="{'active': showAdminModal}"><section id="search-refine-modal"><section class="refine-modal-top"><header><h2>Manage file</h2></header><ul class="refinement" ng-include="'/static/js/angular/apps/adp/partials/amp/_adminDropdownGroups.html'"></ul></section><footer><button class="primary-cta" ng-click="onSubmit()">&lt; <span>Back</span></button></footer></section></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/amp/_adminRefinePanel.html"><adp-admin-modal ng-show="mobilePanel"></adp-admin-modal><section class="amp-admin-panel" ng-class="{'active': !mobilePanel}"><!-- LEFT --><section class="left-section panel-filters"><div class="panel-title">Manage file</div></section><!-- RIGHT --><section class="right-section panel-filters filetypes" id="new-facet-tooltip"><ul ng-include="'/static/js/angular/apps/adp/partials/amp/_adminDropdownGroups.html'"></ul></section></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_contributor.html"><section class="adp-contributor"><div class="adp-contributor-name with-avatar"><div class="adp-contributor-avatar-holder"><img class="adp-contributor-avatar" src="/static/images/banshee/avatar-placeholder.svg"> <a ng-show="adp.asset.contributor.profilePicUrl" class="adp-contributor-avatar" ng-style="{'background-image':'url('+adp.asset.contributor.profilePicUrl + ')'}" href="{{adp.asset.contributor.portfolioUrl}}" ng-click="sendPortfolioLinkData()"></a></div><span data-i18n="CONTRIBUTOR_COPYRIGHT"></span> <a id="contributor-name" href="{{adp.asset.contributor.portfolioUrl}}" target="_self" ng-click="sendPortfolioLinkData()">{{adp.asset.contributor.username}}</a></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_downloadFeedback.html"><div class="feedback-wrapper"><p data-i18n="FEEDBACK_DROPBOX_SYNCED"></p></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_extendedLicenses.html"><section class="adp-extended-licenses"><section class="adp-license-header"><div class="adp-license-header-title"><h2 data-i18n="LICENSES_TITLE"></h2></div><div class="adp-el-close-btn" ng-click="clearLicensesAndCancelPurchase()"></div></section><section class="adp-el-data"><div class="adp-el-title"><div class="adp-el-title-licenses" data-i18n="LICENSES_COLUMN"></div><div class="adp-el-title-credits" data-i18n="CREDITS_COLUMN"></div></div><hr/><div class="adp-licenses"><div ng-repeat="license in elState.extendedLicenses"><div class="adp-el-row" id="license-{{license.licenseType}}" ng-click="licenseState.licenseClicked(license)" ng-class="{selected: elState.selectedLicenses.indexOf(license) >= 0, readonly: license.readOnly}"><div class="adp-el-row-checkbox"><div class="adp-el-checkbox" id="license-btn-{{$index}}" ng-class="{readonly: license.readOnly, active: elState.selectedLicenses.indexOf(license) >= 0}"><input type="checkbox"/></div></div><div class="adp-el-row-title">{{license.title}}</div><div id="license-price-{{license.licenseType}}" class="adp-el-row-price">{{ license.priceInCredits }}</div></div></div><hr/></div></section></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_fileSizeSelector.html"><div class="tile-selector-list" ng-repeat="size in availableSizes"><div class="tile-selector-item" ng-click="selectTile($index)" ng-class="{'selected-tile': selectedTile == $index}" ng-mouseenter="mouseTile($index)" ng-mouseleave="mouseTile(selectedTile)"><strong>{{size.photoDisplay}}</strong></div></div><div class="adp-photo-metadata-section" ng-include="'/static/js/angular/apps/adp/partials/metadata/_photoMetadata.html'" ng-show="adp.asset.assetType==='photo'"></div><div class="adp-photo-metadata-section" ng-include="'/static/js/angular/apps/adp/partials/metadata/_rasterMetadata.html'" ng-show="adp.asset.assetType==='raster'"></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_metadata.html"><section class="adp-metadata"><div id="asset-id" class="file-id metadata-row"><span data-i18n="ID_{{adp.asset.presentation.type.toUpperCase()}}"/>{{adp.assetId}}</div><ng-include src="metaDataView" ng-if="adp.asset.assetType == 'video'
   	|| adp.asset.assetType == 'audio' 
   	|| adp.asset.assetType == 'vector'"></ng-include><div id="asset-upload-date" class="file-id metadata-row" ng-if="adp.asset.approvalDate"><span data-i18n="UPLOAD_DATE"/>{{adp.asset.approvalDate * 1000 | date:'longDate'}}</div><div ng-transclude></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_paymentSelection.html"><div class="adp-payment-select-title"><strong data-i18n="HOW_TO_PAY"></strong></div><hr/><div class="adp-payment-select-row" ng-click="purchaseState.setType('sub')" ng-class="{selected: purchaseOptions.type == 'sub', disabled: purchaseOptions.subDisabled}"><div class="adp-payment-radio" ng-class="{active: purchaseOptions.type == 'sub', disabled: purchaseOptions.subDisabled}" id="adp-choose-subscription"><input type="radio"/></div><label class="adp-payment-row-title"><span data-i18n="PAYMENT_SUBS|{{adp.user.presentation.sub}}|{{adp.user.sub.downloadsRemaining}}"></span></label></div><hr/><div class="adp-payment-select-row" ng-click="purchaseState.setType('credits')" ng-class="{selected: purchaseOptions.type == 'credits'}"><div class="adp-payment-radio" ng-class="{active: purchaseOptions.type == 'credits', disabled: purchaseOptions.cost > adp.user.numCredits}" id="adp-choose-credits"><input type="radio"/></div><label class="adp-payment-row-title" ng-if="purchaseOptions.cost >= 1"><span ng-show="purchaseOptions.cost == 1 && adp.user.numCredits == 1" data-i18n="PAYMENT_1CREDITASSETUSER|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span> <span ng-show="purchaseOptions.cost == 1 && adp.user.numCredits != 1" data-i18n="PAYMENT_1CREDITASSET|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span> <span ng-show="purchaseOptions.cost != 1 && adp.user.numCredits == 1" data-i18n="PAYMENT_1CREDITUSER|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span> <span ng-show="purchaseOptions.cost != 1 && adp.user.numCredits != 1" data-i18n="PAYMENT_CREDITS|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span></label></div><hr/></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/details/_warningBox.html"><div ng-switch on="activeState.warningType"><div id="warning-no-sub-no-credits" ng-switch-when="no-sub-no-credits"><span ng-if="adp.user.numCredits != 1" data-i18n="WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_{{adp.asset.assetType.toUpperCase()}}|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span> <span ng-if="adp.user.numCredits == 1" data-i18n="WARNING_NO_SUBS_COSTCREDITS_1CREDIT_{{adp.asset.assetType.toUpperCase()}}|{{purchaseOptions.cost}}|{{adp.user.numCredits}}"></span> <span ng-if="activeState.showPromptForAdmin" class="warning-second-section" data-i18n="WARNING_SLAVE_CONTACT_YOUR_MASTER"></span></div><div id="warning-no-downloads-no-credits" ng-switch-when="no-downloads-no-credits"><span class="warning-out-of-subs" data-i18n="WARNING_OUT_OF_SUBS_DOWNLOAD"></span> <span ng-if="standardPriceInCredits != 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_NOCREDITS|{{adp.asset.presentation.collection}}|{{adp.asset.standardPriceInCredits}}"></span> <span ng-if="standardPriceInCredits == 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_1CREDIT|{{adp.asset.presentation.collection}}|{{adp.asset.standardPriceInCredits}}"></span> <span ng-if="activeState.showPromptForAdmin" class="warning-second-section" data-i18n="WARNING_SLAVE_CONTACT_YOUR_MASTER"></span></div><div id="warning-no-downloads-insufficient-credits" ng-switch-when="no-downloads-insufficient-credits"><span class="warning-out-of-subs" data-i18n="WARNING_OUT_OF_SUBS_DOWNLOAD"></span> <span ng-if="adp.user.numCredits != 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_NOCREDITS|{{adp.asset.standardPriceInCredits}}|{{adp.user.numCredits}}"></span> <span ng-if="adp.user.numCredits == 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_1CREDIT|{{adp.asset.standardPriceInCredits}}|{{adp.user.numCredits}}"></span> <span ng-if="activeState.showPromptForAdmin" class="warning-second-section" data-i18n="WARNING_SLAVE_CONTACT_YOUR_MASTER"></span></div><div id="warning-downloads-with-credits" ng-switch-when="no-downloads-with-credits"><span data-i18n="WARNING_NO_SUBS_WITH_CREDITS|{{adp.asset.presentation.collection}}"></span></div><div id="warning-wrong-sub-no-credits" ng-switch-when="wrong-sub-no-credits"><span data-i18n="WARNING_WRONG_SUBS"></span> <span ng-if="adp.user.numCredits != 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_NOCREDITS|{{adp.asset.standardPriceInCredits}}|{{adp.user.numCredits}}"></span> <span ng-if="adp.user.numCredits == 1" class="warning-second-section" data-i18n="WARNING_WRONG_SUBS_COSTCREDITS_1CREDIT|{{adp.asset.standardPriceInCredits}}|{{adp.user.numCredits}}"></span> <span ng-if="activeState.showPromptForAdmin" class="warning-second-section" data-i18n="WARNING_SLAVE_CONTACT_YOUR_MASTER"></span></div><div id="warning-wrong-sub-with-credits" ng-switch-when="wrong-sub-with-credits"><span data-i18n="WARNING_WRONG_SUBS"></span></div><div id="warning-wrong-file-type-credits" ng-switch-when="wrong-file-type-credits"><span data-i18n="WARNING_FILE_TYPE_CREDITS"></span></div><div id="warning-wrong-file-type-no-credits" ng-switch-when="wrong-file-type-no-credits-file-cost"><span data-i18n="WARNING_FILE_TYPE_CREDITS"></span> <span data-i18n="WARNING_FILE_TYPE_NO_CREDITS_FILE_COST|{{adp.asset.standardPriceInCredits}}|{{adp.user.numCredits}}" class="warning-second-section"></span> <span ng-if="activeState.showPromptForAdmin" class="warning-second-section" data-i18n="WARNING_SLAVE_CONTACT_YOUR_MASTER"></span></div></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/index.html"><adp-admin-panel ng-if="adminData.permissions"></adp-admin-panel><section class="adp-adult-content-overlay" ng-include="'/static/js/angular/apps/adp/partials/_adultContent.html'" ng-if="adp.adultContent"></section><section class="adp-layout" ng-hide="adp.adultContent"><section class="adp-file-summary adp-content-animation-fade" ng-if="!adp.contentLoading"><section class="adp-error-message adp-content-animation-fade" ng-if="adp.error.showErrorMessage"><span data-i18n="{{adp.error.errorMessage}}"></span> <span id="adp-error-code" ng-show="adp.error.errorCode.length > 0">{{adp.error.errorCode}}</span></section><section class="adp-clamper-wrapper" id="adp-clamper-wrapper" adp-clamp titlesrc="adp.asset.presentation.title" keywords="adp.keywords.topKeywords" alttext="adp.ellipsisAltText"></section><section class="adp-file-details-wrapper"><section class="adp-file-section"><section class="adp-preview"><div ng-include="'/static/js/angular/apps/adp/partials/_preview.html'"/></section></section><section class="adp-details adp-content-animation-fade" ng-if="!adp.contentLoading" ng-controller="FileDetailsCtrl"><div class="details-unavailable" ng-show="adminData.permissions && !(adp.asset.status === 'Active' || adp.asset.status === 'Unknown')"><figure class="general-icon-unavailable"></figure><div class="general-note-unavailable">{{adp.statusMessage}}</div></div><div ng-include="'/static/js/angular/apps/adp/partials/_fileDetails.html'"></div></section></section></section><section class="carousel-section adp-content-animation-fade" ng-if="!adp.contentLoading" ng-show="!adminData.permissions || adp.asset.status === 'Active'"><section id="similar-cms-section" ng-show="adp.similarFilesCMS"><cms-well passthru="ADP-below-asset-multiple.page" fallback="" callback="similarFilesCallback(result)"></cms-well></section><section id="similar-directive-section" ng-show="!adp.similarFilesCMS"><div image-carousel="" class="image-carousel" carousel-type="SIMILARFILES" data="adp.similarFiles" click-event="sendToOmniture(omnitureSimilarFileClick, adp.similarFiles.sectionTitle)" search-event="setOmnitureCookie('similarFile')" callback="similarFilesCallback(result)"></div></section></section><section class="keywords-section adp-content-animation-fade" ng-if="!adp.contentLoading"><div class="keywords-content adp-content-animation-fade" ng-include="'/static/js/angular/apps/adp/partials/_keywords.html'"/></section><section class="adp-content-animation-fade" ng-if="!adp.alreadyVisited && !adp.contentLoading"><div class="category-links-section"><div class="category-links-content adp-content-animation-fade" ng-include="'/static/js/angular/apps/adp/partials/_categories.html'"></div></div><adp-description asset="adp.asset"></adp-description></section><adp-kount session="adp.kountSession"></adp-kount></section><section ng-controller="OmnitureCtrl"></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/metadata/_audioMetadata.html"><section><div class="dimensions metadata-row"><div id="audio-tempo" class="tempo" ng-show="adp.asset.tempo" data-i18n="AUDIO_TEMPO|{{adp.asset.tempo}}"></div><div id="audio-key" class="key" ng-show="adp.asset.audioKey" data-i18n="AUDIO_KEY|{{adp.asset.audioKey}}"></div></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/metadata/_photoMetadata.html"><section class="adp-metadata"><div class="dimensions-photo metadata-row"><span id="dimensions-pixels" class="pixels">{{adp.asset.assetDimensions.widthInPixels}} &times; {{adp.asset.assetDimensions.heightInPixels}} px</span> <span class="separator"></span> <span id="dimensions-inches" class="inches">{{adp.asset.presentation.measurements.width}} &times; {{adp.asset.presentation.measurements.height}}{{adp.asset.presentation.measurements.sizeUnit}} @ {{adp.asset.presentation.measurements.dotsPer}} {{adp.asset.presentation.measurements.dotsPerUnit}}</span></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/metadata/_rasterMetadata.html"><section class="adp-metadata" ng-show="adp.asset.status === 'Active' ||
        adp.asset.status === 'PendingExecutive' || adp.asset.status === 'Pending' || adp.asset.status === 'NeedsModelRelease' ||
        adp.asset.status === 'PublishSubmitted' || adp.asset.status === 'PublishFailure'"><div ng-show="adp.asset.assetType.toLowerCase()=='raster'" class="dimensions-photo metadata-row"><span id="dimensions-pixels" class="pixels">{{adp.asset.rasterList.widthInPixels}} &times; {{adp.asset.rasterList.heightInPixels}} px</span> <span class="separator"></span> <span id="dimensions-inches" class="inches">{{adp.asset.presentation.measurements.width}} &times; {{adp.asset.presentation.measurements.height}}{{adp.asset.presentation.measurements.sizeUnit}} @ {{adp.asset.presentation.measurements.dotsPer}} {{adp.asset.presentation.measurements.dotsPerUnit}}</span></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/metadata/_vectorMetadata.html"><section ng-show="adp.asset.status === 'Active' ||
        adp.asset.status === 'PendingExecutive' || adp.asset.status === 'Pending' || adp.asset.status === 'NeedsModelRelease' ||
        adp.asset.status === 'PublishSubmitted' || adp.asset.status === 'PublishFailure'"><div ng-show="adp.asset.assetType.toLowerCase()=='vector'" class="dimensions metadata-row"></div><div ng-hide="adp.asset.assetType.toLowerCase()=='vector'"><div id="schemaScope" itemscope itemtype="http://schema.org/ImageObject"><img alt="{{adp.asset.title}} Royalty Free Stock Photo" src="{{adp.asset.fullThumbnailSet.previewUrl}}" width="380" height="122" id="ZoomImage" itemprop="image"/></div></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/metadata/_videoMetadata.html"><section ng-show="adp.asset.status === 'Active' ||
        adp.asset.status === 'PendingExecutive' || adp.asset.status === 'Pending' || adp.asset.status === 'NeedsModelRelease' ||
        adp.asset.status === 'PublishSubmitted' || adp.asset.status === 'PublishFailure'"><div class="dimensions metadata-row"><span id="video-size" data-i18n="FILE_SIZE|{{selectedDropdownOption.fileSize}}"></span></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/preview/_audio.html"><div id="schemaScope" itemscope itemtype="http://schema.org/AudioObject"><meta itemprop="uploadDate" content="{{adp.asset.approvalDate | date:'yyyy-MM-dd'}}"/><meta itemprop="downloadsCount" content="adp.asset.downloadsCount"/><meta itemprop="duration" content="adp.asset.duration"/><media-player media="audio" class="adp-audio-player" loop autoplay media-data="adp.asset.presentation.audioMetadata"><audio alt="{{adp.asset.title}} music clip"></audio><mp-waveform wave-color="#CDD3D3" progress-color="#0DA38D" height="360"></mp-waveform><div class="mp-control-bar"><div class="exclusive" id="exclusive" ng-if="adp.asset.isExclusive"><span data-i18n="ONLY_FROM_ISTOCK"></span></div><mp-scrub-bar></mp-scrub-bar><mp-play-button></mp-play-button><mp-volume></mp-volume><mp-time></mp-time><a href="{{adp.asset.presentation.audioMetadata.previewUrl}}" target="_self" alt="{{ 'MEDIA_PLAYER_DOWNLOAD_COMP' | i18n }}" title="{{ 'MEDIA_PLAYER_DOWNLOAD_COMP' | i18n }}" download><div class="download-comp"></div></a></div></media-player></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/preview/_illustration.html"><adp-zoom ng-src="{{adp.asset.fullThumbnailSet.previewUrl}}" zoom-src="{{adp.asset.fullThumbnailSet.fullZoomUrl}}" zoom-alt-text="{{adp.asset.presentation.altText}}" zoom-preview-width="{{adp.asset.assetDimensions.widthInPixels}}" zoom-preview-height="{{adp.asset.assetDimensions.heightInPixels}}" click-event="sendToOmniture(omnitureZoomClick, { asset: adp.asset })"></adp-zoom><div class="exclusive" id="exclusive" ng-if="adp.asset.isExclusive"><span data-i18n="ONLY_FROM_ISTOCK"></span></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/preview/_photo.html"><adp-zoom ng-src="{{adp.asset.fullThumbnailSet.previewUrl}}" zoom-src="{{adp.asset.fullThumbnailSet.fullZoomUrl}}" zoom-alt-text="{{adp.asset.presentation.altText}}" zoom-preview-width="{{adp.asset.assetDimensions.widthInPixels}}" zoom-preview-height="{{adp.asset.assetDimensions.heightInPixels}}" click-event="sendToOmniture(omnitureZoomClick, { asset: adp.asset })"></adp-zoom><div class="exclusive" id="exclusive" ng-if="adp.asset.isExclusive"><span data-i18n="ONLY_FROM_ISTOCK"></span></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/preview/_video.html"><div id="schemaScope" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="uploadDate" content="{{adp.asset.approvalDate | date:'yyyy-MM-dd'}}"/><meta itemprop="downloadsCount" content="adp.asset.downloadsCount"/><meta itemprop="sizeInBytes" content="adp.asset.sizeInBytes"/><img itemprop="thumbnail" ng-src="{{adp.asset.fullThumbnailSet.mediumUrl}}" alt="HD {{adp.asset.title}}" ng-hide="true"><div class="media-loader" ng-include src="'/static/js/angular/common/partials/media-player/_loader.html'"></div><media-player media="video" class="adp-video-player" loop autoplay media-data="adp.asset.presentation.videoMetadata"><video alt="{{adp.asset.title}} video" poster="{{adp.asset.fullThumbnailSet.previewUrl}}"></video><div class="mp-control-bar"><div class="exclusive" id="exclusive" ng-if="adp.asset.isExclusive"><span data-i18n="ONLY_FROM_ISTOCK"></span></div><mp-scrub-bar></mp-scrub-bar><mp-play-button></mp-play-button><mp-volume></mp-volume><mp-time></mp-time><a href="{{adp.asset.presentation.videoMetadata.previewUrl}}" target="_self" alt="{{ 'MEDIA_PLAYER_DOWNLOAD_COMP' | i18n }}" title="{{ 'MEDIA_PLAYER_DOWNLOAD_COMP' | i18n }}" download><div class="download-comp"></div></a></div></media-player></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/weTransfer/_index.html"><a class="we-transfer-button" ng-click="showWeTransferModal()"></a><section class="we-transfer-iframe"></section><section id="we-transfer-modal" class="reveal-modal" data-reveal><div class="we-transfer-container"><a href="#" class="close-reveal-modal"></a><section class="we-transfer-modal-content" ng-hide="showSuccessfulModal" ng-include="'/static/js/angular/apps/adp/partials/weTransfer/_weTransferModal.html'"></section><section class="we-transfer-successful-modal" ng-show="showSuccessfulModal" ng-include="'/static/js/angular/apps/adp/partials/weTransfer/_successfulModal.html'"></section></div></section></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/weTransfer/_successfulModal.html"><icon svg="checkmark" class="checkmark"/><div class="sent-successful-content" data-i18n="WE_TRANSFER_SUCCESSFUL_MESSAGE_FIRST_PART"></div><div class="confirmation-email" data-i18n="WE_TRANSFER_SUCCESSFUL_MESSAGE_SECOND_PART|<span>{{trimEmailAddress}}</span>"></div></script>
<script type="text/ng-template" id="/static/js/angular/apps/adp/partials/weTransfer/_weTransferModal.html"><h2 data-i18n="WE_TRANSFER_MODAL_TITLE_{{getFileTypeForTranslation()}}"></h2><form name="weTransferForm" onSubmit="return false;" fancy-inputs><div class="message-container we-transfer-request-error" ng-show="showWeTransferRequestError"><div class="message"><span data-i18n="REQUEST_ERROR|{{contactTicketUrl}}"></span></div></div><section id="to-email-input"><div class="input-container email-input" ng-class="{'invalid-input': invalidEmailMessageShown || invalidMaxLimitMessageShown}" ng-click="setInputFocus()"><div class="email-tag-list"><div class="label-container"><label for="email" data-i18n="WE_TRANSFER_PLACEHOLDER_TO"></label></div><li class="tag-item" ng-repeat="tag in emailTags track by $index"><span class="tag-text" ng-bind-html="tag"></span> <a class="remove-button" ng-click="removeEmailTag($index)"></a></li><input id="tags-input-field" name="email-field" type="text" ng-model="email" ng-trim="true" validator="emailValidationAndFormat, emailTagsUnderMaxLimit" valid-method="blur, emailInputMethod" placeholder="{{emailPlaceholder}}" ng-change="checkInputWidth()" ng-blur="checkInputWidth()" ng-keydown="handleBackspaceKey($event)"/></div></div></section><section id="message-input"><div class="input-container"><div class="label-container"><label for="message" data-i18n="WE_TRANSFER_PLACEHOLDER_MESSAGE"></label></div><textarea id="message-field" name="message" ng-model="messageData" ng-trim="false" placeholder="{{messagePlaceholder}}" maxlength="500"/>
    </div>
  </section>

  <div class="primary-cta" id="we-transfer-form-submit" ng-disabled="weTransferForm.$invalid  || emailTags.length === 0" ng-click="sendFileToWeTransfer(weTransferForm.$invalid  || emailTags.length === 0)" loading="loadingState" loading-button data-i18n="WE_TRANSFER_BUTTON">
  </div>
</form>

<div class="we-transfer-disclaimer" data-i18n="WE_TRANSFER_DISCLAIMER|https://www.wetransfer.com/legal"></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_colorPicker.html"><div class="colorpicker-wrapper"><div class="color-wheel-wrapper"><canvas class="color-wheel" color-wheel width="134" height="134"></canvas><div class="circle-cursor" style="background-color:{{cursorMove.color}}; top:{{cursorMove.Y}}px; left:{{cursorMove.X}}px" ng-show="cursorMove.showCursor"></div></div><div class="input-wrapper"><div class="reset-square" ng-click="clearColor()"><div class="line"></div></div><input class="input-hex" style="background-color:{{getHexadecimalValue()}};color:{{getTextColor(getHexadecimalValue())}}" ng-change="inputChanged()" ng-model="input" spellcheck="false" maxlength="{{inputSize()}}" placeholder="{{placeholder}}"/></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_dropdown.html"><li class="{{ labelClass }}" ng-class="{'active': isVisible}"><div class="dropdown-container"><div class="facet-title"><span class="descriptor" ng-class="{'disable': disableDropdownLabel === 'true'}"><span class="facet-file-type-label" ng-show="labelClass === 'search-file-type-selector'" data-i18n="FILE_TYPE"></span> <span ng-hide="isFileTypeExecutingSearch()" class="file-count-label">{{ label }}</span> <span ng-if="!multiGroup && showActive === 'true'" class="descriptor-active-option" ng-class="{'disable': disableDropdownLabel === 'true'}">{{ activeOption }}</span> <span ng-if="multiGroup && mobileActiveOption && showActive === 'true'" class="descriptor-active-option" ng-class="{'disable': disableDropdownLabel === 'true'}">{{mobileActiveOption}}</span></span> <span class="dropdown-arrow down"></span></div><section ng-transclude class="dropdown-content" ng-class="{'right': orientation == 'right'}"></section></div></li></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_dropdownItem.html"><li class="{{ labelClass }}"><div class="dropdown-container"><div class="dropdown-title" ng-click="dropdownToggle()"><span class="descriptor" ng-class="{'disable': disableDropdownLabel === 'true'}"><span class="dropdown-label">{{label}}</span></span> <span class="dropdown-arrow down"></span></div><section ng-transclude class="dropdown-content" ng-class="{'right': orientation === 'right'}"></section></div></li></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_refineSearch.html"><div class="search-refine-cta" id="refine-panel-container" ng-click="toggleRefinePanel()" ng-class="{ 'active': refineData.showRefinePanel }" ng-hide="!refineData.allowRefineFacets"><div class="refine-button"><span class="refine-icon"></span></div><span class="refine-text" data-i18n="REFINE"></span> <span class="badge" ng-show="showBadge()"></span></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_searchFileTypeSelector.html"><dropdown label="{{ resultCount | number }}" label-class="search-file-type-selector" activation-method="click" show-active="true" active-option="{{ displayFileType(facetGroup[selectedFileType]) }}" orientation="right"><ul class="file-type-options"><li ng-repeat="facet in facetGroup | preserveObjectOrder" ng-class="{'active': getFileTypeOptionState(facet.value)}" ng-click="fileTypeSelected(facet.value)" ng-switch on="facet.isImageSubFacet" ng-if="checkAccessibility(facet.accessibility)"><ul ng-switch-when="true"><li><a data-value="{{ facet.value }}">{{ displayFileType(facet) }}</a></li></ul><a ng-switch-default data-value="{{ facet.value }}">{{ displayFileType(facet) }}</a></li></ul></dropdown></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_searchHints.html"><section class="hints-container ng-hide" ng-show="showHints()" ng-animate="'animate'"><div class="hints"><ul class="galleries-list"><li ng-repeat="gallery in galleries | filter:query | limitTo:galleryLimit" ng-bind-html="gallery.displayString" ng-mousedown="performSearch(gallery); $event.stopPropagation();" ng-keypress="performSearch(gallery); $event.stopPropagation();"/></ul><ul class="hints-list"><li ng-repeat="hint in hints | filter:data.query | limitTo:hintLimit" ng-bind-html="hint.displayString" ng-mousedown="performSearch(hint.userString); $event.stopPropagation();" ng-keypress="performSearch(hint.userString); $event.stopPropagation();"/></ul><ul class="member-list"><li ng-repeat="member in members | filter:data.query | limitTo:memberLimit" ng-bind-html="member.displayString" ng-mousedown="performSearch(member); $event.stopPropagation()" ng-keypress="performSearch(member); $event.stopPropagation();"/></ul></div></section></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/_spinner.html"><button><div ng-show="loading" class="spinner-container"></div><div ng-transclude ng-hide="loading"></div></button></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/lightbox/_addToLightbox.html"><section class="lightbox-add-wrapper" ng-class="{'lightbox-right' : shouldDisplayOnRight()}"><header class="lightbox-title"><div class="lightbox-close" ng-click="toggleMenuOpen(false)"></div><strong data-i18n="YOUR_LIGHTBOX"></strong><div class="lightbox-close-btn close" ng-click="toggleMenuOpen(false)" ng-if="savePage"><span class="shape-group"><span class="shape shape1"></span> <span class="shape shape2"></span></span></div></header><div class="lightbox-list"><div ng-include="'/static/js/angular/common/partials/lightbox/_createLightbox.html'"></div></div><div class="lightbox-list-wrapper"><div ng-repeat="lightbox in lightboxes | limitTo: maxLightboxes"><div class="lightbox-row" data-lightbox-id="{{ lightbox.id }}" ng-click="toggleLightbox($index)" ng-class="{selected: isCheckboxSelected(lightbox.assets)}"><div id="lightbox-name-{{lightbox.name}}" class="lb-info">{{lightbox.name}} ({{lightbox.count}})</div><div class="lb-row-checkmark nothing" ng-class="{checked: isCheckboxSelected(lightbox.assets), nothing: !isCheckboxSelected(lightbox.assets)}"><span class="shape-group"><span class="shape shape1"></span> <span class="shape shape2"></span></span></div></div></div><div class="lightbox-seemore" ng-show="hideExcessBoxes" ng-click="extendLightboxList()"><a><span data-i18n="SEE_ALL_LIGHTBOXES"></span> <span class="lightbox-chevron"></span></a></div></div></section></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/lightbox/_createLightbox.html"><form ng-submit="addNewLightbox()"><div class="lightbox-new-name-wrapper"><input type="text" placeholder="{{lightboxPlaceholder | i18n}}" ng-model="editing.newLightboxName" id="lightbox-new-name"></div><div class="lightbox-create-btn-wrapper"><button class="primary-cta" type="submit" id="lightbox-create-btn" data-i18n="LIGHTBOX_CREATE_BUTTON"></button></div></form></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/lightbox/_lightboxButton.html"><div ng-class="{'lightbox-open': menuOpen, 'lightbox-created': lightboxCreated, 'save-multiple-files': savePage}" class="lightbox-wrapper"><div class="lightbox-btn" id="lightbox-btn" ng-click="displayMenu()" ng-class="{close: menuOpen, plus: !lightboxCreated && !alreadySaved && !menuOpen, checked: lightboxCreated || (alreadySaved && !menuOpen)}" title="{{ menuOpen ? '' : lighboxTooltip }}"><span ng-if="savePage" data-i18n="SAVE_PAGE"></span> <span ng-if="!savePage" class="shape-group"><span class="shape shape1"></span> <span class="shape shape2"></span></span></div><div class="lb-content-animation-fade" ng-if="menuOpen"><div ng-switch on="lightboxes.length > 0"><div ng-switch-when="true"><div ng-include="'/static/js/angular/common/partials/lightbox/_addToLightbox.html'"></div></div><div ng-switch-when="false" class="lightbox-create-wrapper" ng-class="{'lightbox-right' : shouldDisplayOnRight()}"><header class="lightbox-title"><div class="lightbox-close" ng-click="toggleMenuOpen(false)"></div><strong data-i18n="YOUR_LIGHTBOX"></strong></header><div ng-include="'/static/js/angular/common/partials/lightbox/_createLightbox.html'"></div></div></div></div><div class="lb-content-animation-fade" ng-if="lightboxCreated && !menuOpen"><div class="lightbox-added" id="lightbox-added-id">{{lightboxUpdatedText}}</div><div class="shape-group-wrapper checked"><span ng-if="savePage" class="shape-group"><span class="shape shape1"></span> <span class="shape shape2"></span></span></div></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_audio.html"><div class="audio-container" ng-transclude></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_audioInfoPane.html"><div class="audio-text-container"><div class="audio-info-text"><div class="audio-info-group"><span class="title">{{ result.title }}</span> <a class="contributor" target="_self" ng-href="{{ getUserPortfolioUri(result.contributor.username) }}">{{ result.contributor.username }}</a></div><mp-time class="time" duration="result.audio.duration"></mp-time></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_loader.html"><div class="loader-dimmer"></div><div class="dots-loader-no-background"><div class="dot one"></div><div class="dot two"></div><div class="dot three"></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_playButton.html"><div class="mp-play-container" ng-click="onPlayPause()"><div class="mp-play-icon" ng-class="playerState"></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_scrubBar.html"><div class="scrub-bar"><div class="scrubber-drag-mask"></div><div class="scrubber"></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_time.html"><div class="time-container"><span class="progress" ng-show="currentTime && !isStopped">{{currentTime*1000 | date: 'mm:ss'}} /</span> <span class="duration">{{mediaLength*1000 | date:'mm:ss'}}</span></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_video.html"><div class="video-container" ng-transclude></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/media-player/_volume.html"><div class="volume-container"><div title="{{ 'MEDIA_PLAYER_MUTE_VOLUME' | i18n }}" alt="{{ 'MEDIA_PLAYER_MUTE_VOLUME' | i18n }}" class="volume-icon-container"><div class="volume-icon high-volume" ng-click="toggleMute()"></div></div><div class="volume-scrub-bar-container"><div class="volume-scrubber-drag-mask"></div><div class="volume-scrub-bar"><div class="scrubber"><div class="knob"></div></div></div></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/search-bar/_asynchSearchBar.html"><div class="search-container"><headroom enabled="peeking" offset="peekingOffset"><refine-search class="refine-search"></refine-search><div class="search-bar-container"><div class="search-bar"><sb-asynch data="searchData"></sb-asynch></div><ng-include src="'/static/js/angular/common/partials/_searchHints.html'"></ng-include></div><search-file-type-selector class="file-type-selector-container" result-count="{{searchData.searchResponse.totalResults}}" srp></search-file-type-selector></headroom><div class="search-bar-placeholder" ng-if="peeking"/></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/search-bar/_sbAsynch.html"><div class="search-bar"><div class="search-icon" ng-click="searchSubmit()"></div><div class="search-input"><keyword-tags ng-model="searchData.searchTermsInUse" pending-tags="searchData.searchResponse.pendingKeywords" ng-if="searchData.searchResponse"></keyword-tags><input class="search-bar-input" id="search-bar-input" type="search" autocomplete="off" autocorrect="off" spellcheck="false" class="{{data.query.length > 0 ? 'content' : ''}}" placeholder="{{setPlaceholder()}}" ng-model="data.query" ng-focus="focus(data.query)" ng-blur="blur()" ng-keyup="keyUp($event, data.query)" ng-keydown="keyDown($event, data.query)" ng-click="$event.stopPropagation();"/></div><div class="search-clear" ng-hide="data.query==''"><a ng-click="clearQuery()"><div class="search-clear-icon"></div></a></div></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/search-bar/_sbDefault.html"><div class="search-icon" ng-click="searchSubmit()"></div><div class="search-input"><input class="search-bar-input" id="search-bar-input" type="search" autocomplete="off" autocorrect="off" spellcheck="false" class="{{data.query.length > 0 ? 'content' : ''}}" placeholder="{{setPlaceholder()}}" ng-model="data.query" ng-focus="focus(data.query)" ng-blur="blur()" ng-keyup="keyUp($event, data.query)" ng-keydown="keyDown($event, data.query)" ng-click="$event.stopPropagation();"/></div><div class="search-clear" ng-hide="data.query==''"><a ng-click="clearQuery()"><div class="search-clear-icon"></div></a></div></script>
<script type="text/ng-template" id="/static/js/angular/common/partials/search-bar/_searchBar.html"><div class="search-container"><headroom enabled="peeking" offset="peekingOffset"><div class="search-bar-container"><div class="search-bar"><sb-default></sb-default></div><ng-include src="'/static/js/angular/common/partials/_searchHints.html'"></ng-include></div><section ng-transclude class="search-result-options"></section></headroom><div class="search-bar-placeholder" ng-if="peeking"/></div></script>
        <script type="text/injected" name="token">null</script>        <script type="text/injected" name="guid">"{C7F8B87B-F5A3-503A-1C50-9A3D893A51E9}"</script>        <script type="text/injected" name="showSimilarFilesCMS">true</script>        <script type="text/injected" name="ensightenEnabled">true</script>        <script type="text/injected" name="stage">false</script>        <script type="text/injected" name="assetId">"68693681"</script>        <script type="text/injected" name="profilePicUrl">"\/generic_image_view\/160920"</script>        <script type="text/injected" name="keywords">["sleep","people"]</script>        <script type="text/injected" name="adultContent">null</script>        <script type="text/injected" name="segmentString">"941|United Kingdom|0"</script>        <script type="text/injected" name="referer">""</script>        <script type="text/injected" name="callingUrl">"www.istockphoto.com\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898"</script>        <script type="text/injected" name="languageSupportedByWeTransfer">"en"</script>        <script type="text/injected" name="adminData">null</script>        <script type="text/injected" name="useCanonicalUrls">false</script>        <script type="text/injected" name="useAssetService">true</script>    </section>
</section>
</section>
<div id="content-root-footer" role="global">
            <div class="plans-and-pricing-ribbon">
            Incredible stock. Flexible pricing. <a href="http://www.istockphoto.com/plans-and-pricing">Buy credits or subscribe today.</a>
        </div>
        <footer role="global">
        <script type="text/injected" name="modalStatus">null</script>        <script type="text/injected" name="countrySitesData">{"US":{"countryName":"United States","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true},{"languageName":"Espa\u00f1ol","url":"http:\/\/www.istockphoto.com\/us\/es\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"ES","defaultLanguage":false}]},"CA":{"countryName":"Canada","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/ca\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true},{"languageName":"Fran\u00e7ais","url":"http:\/\/www.istockphoto.com\/ca\/fr\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"FR","defaultLanguage":false}]},"GB":{"countryName":"United Kingdom","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/gb\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"AU":{"countryName":"Australia","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/au\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"DE":{"countryName":"Deutschland","supportedLanguages":[{"languageName":"Deutsch","url":"http:\/\/www.istockphoto.com\/de\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"DE","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/de\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"FR":{"countryName":"France","supportedLanguages":[{"languageName":"Fran\u00e7ais","url":"http:\/\/www.istockphoto.com\/fr\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"FR","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/fr\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"NL":{"countryName":"Netherlands","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/nl\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"CH":{"countryName":"Schweiz","supportedLanguages":[{"languageName":"Deutsch","url":"http:\/\/www.istockphoto.com\/ch\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"DE","defaultLanguage":true},{"languageName":"Fran\u00e7ais","url":"http:\/\/www.istockphoto.com\/ch\/fr\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"FR","defaultLanguage":false},{"languageName":"Italiano","url":"http:\/\/www.istockphoto.com\/ch\/it\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"IT","defaultLanguage":false},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/ch\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"IT":{"countryName":"Italia","supportedLanguages":[{"languageName":"Italiano","url":"http:\/\/www.istockphoto.com\/it\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"IT","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/it\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"AT":{"countryName":"\u00d6sterreich","supportedLanguages":[{"languageName":"Deutsch","url":"http:\/\/www.istockphoto.com\/at\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"DE","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/at\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"SE":{"countryName":"Sweden","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/se\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"ES":{"countryName":"Espa\u00f1a","supportedLanguages":[{"languageName":"Espa\u00f1ol","url":"http:\/\/www.istockphoto.com\/es\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"ES","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/es\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"BE":{"countryName":"Belgique","supportedLanguages":[{"languageName":"Fran\u00e7ais","url":"http:\/\/www.istockphoto.com\/be\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"FR","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/be\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"PT":{"countryName":"Portugal","supportedLanguages":[{"languageName":"Portugu\u00eas","url":"http:\/\/www.istockphoto.com\/pt\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"PT","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/pt\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"PL":{"countryName":"Polska","supportedLanguages":[{"languageName":"Polski","url":"http:\/\/www.istockphoto.com\/pl\/zdj\u0119cie\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"PL","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/pl\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"JP":{"countryName":"\u65e5\u672c","supportedLanguages":[{"languageName":"\u65e5\u672c\u8a9e","url":"http:\/\/www.istockphoto.com\/jp\/\u30b9\u30c8\u30c3\u30af\u30d5\u30a9\u30c8\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"JA","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/jp\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"BR":{"countryName":"Brasil","supportedLanguages":[{"languageName":"Portugu\u00eas do Brasil","url":"http:\/\/www.istockphoto.com\/br\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"PT","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/br\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"TR":{"countryName":"Turkey","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/tr\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"RU":{"countryName":"\u0420\u043e\u0441\u0441\u0438\u044f","supportedLanguages":[{"languageName":"\u0420\u0443\u0441\u0441\u043a\u0438\u0439","url":"http:\/\/www.istockphoto.com\/ru\/\u0444\u043e\u0442\u043e\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"RU","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/ru\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"KR":{"countryName":"\ub300\ud55c\ubbfc\uad6d","supportedLanguages":[{"languageName":"\ud55c\uad6d\uc5b4","url":"http:\/\/www.istockphoto.com\/kr\/\uc0ac\uc9c4\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"KO","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/kr\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"MX":{"countryName":"M\u00e9xico","supportedLanguages":[{"languageName":"Espa\u00f1ol","url":"http:\/\/www.istockphoto.com\/mx\/foto\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"ES","defaultLanguage":true},{"languageName":"English","url":"http:\/\/www.istockphoto.com\/mx\/en\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":false}]},"IN":{"countryName":"India","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/in\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"HK":{"countryName":"Hong Kong","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/hk\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"NZ":{"countryName":"New Zealand","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/nz\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"DK":{"countryName":"Denmark","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/dk\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"NO":{"countryName":"Norway","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/no\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"FI":{"countryName":"Finland","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/fi\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"ZA":{"countryName":"South Africa","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/za\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"IE":{"countryName":"Ireland","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/ie\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"SG":{"countryName":"Singapore","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/sg\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"IL":{"countryName":"Israel","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/il\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"AE":{"countryName":"UAE","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/ae\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"TH":{"countryName":"Thailand","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/th\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]},"MY":{"countryName":"Malaysia","supportedLanguages":[{"languageName":"English","url":"http:\/\/www.istockphoto.com\/my\/photo\/young-couple-sleeping-soundly-in-bed-together-gm480393818-68693681?st=c861898&redirect=true","languageCode":"EN","defaultLanguage":true}]}}</script>
        <div class="links">
            <div id="what-we-sell">
                <ul>
                    <li class="footer-category-title">What we sell</li>
                    <li><a href="http://www.istockphoto.com/stock-photos" data-isource-track="nav=nav_Photos">Photos</a></li>
                    <li><a href="http://www.istockphoto.com/stock-illustrations" data-isource-track="nav=nav_Illustrations"> Illustrations</a></li>
                    <li><a href="http://www.istockphoto.com/footage" data-isource-track="nav=nav_Video">Video</a></li>
                    <li><a href="http://www.istockphoto.com/music-clips" data-isource-track="nav=nav_Audio">Audio</a></li>
                </ul>
            </div>

            <div id="company"><ul>
                <li class="footer-category-title">Company</li>
                <li><a href="/about-us" data-isource-track="nav_About_us" target="_blank">About us</a></li><li><a href="http://press.gettyimages.com/" data-isource-track="foot_Press" target="_blank">Press</a></li><li><a href="http://www.gettyimagesjobs.com/" data-isource-track="nav_Careers" target="_blank">Careers</a></li><li><a href="http://www.gettyimagesaffiliates.com/" data-isource-track="nav_Affiliates" target="_blank">Affiliates</a></li><li><a href="http://www.istockphoto.com/sell-stock-photos.php" data-isource-track="nav_sellStock" target="_blank">Sell stock</a></li>            </ul></div>

            <div id="ways-to-pay"><ul>
                <li class="footer-category-title">Ways to pay</li>
                <li><a href="http://www.istockphoto.com/plans-and-pricing" data-isource-track="nav=footer_plans_and_pricing">Plans and pricing</a></li>
                <li><a href="http://www.istockphoto.com/corporate-accounts.php" data-isource-track="nav=nav_Corporate_accounts">Corporate accounts</a></li>
                <li><a href="http://www.istockphoto.com/promo-code" data-isource-track="nav=nav_promo_code">iStock promo codes</a></li>
            </ul></div>

            <div id="resources"><ul>
                <li class="footer-category-title">Resources</li>
                                <li><a href="http://www.istockphoto.com/articles.php" data-isource-track="nav=nav_Articles">Articles</a></li>
                                    <li><a href="http://content.istockphoto.com/partners/" target="_blank" data-isource-track="nav=nav_Partners">Partners</a></li>
                                <li><a href="https://itunes.apple.com/us/app/istockphoto/id377716883?mt=8&ign-mpt=uo%3D4" target="_blank" data-isource-track="nav_Tools_Apps">Download iOS app</a></li>
            </ul></div>

            <div id="need-help"><ul>
                <li class="footer-category-title">Need help?</li>
                <li id="lpChatFooter"></li>
                <li>Phone support:                     <p><a href="tel:++44(0)2032272713" class="tel">+44 (0) 203 227 2713</a></p>
                </li>
                <li>
                    International toll-free:                     <p><a href="tel:+0080066646664" class="tel">00 800 6664 6664</a></p>
                </li>
                <div class="contact-us">
                    <li><a href="http://www.istockphoto.com/contact_ticket.php" data-isource-track="nav=nav_Contact_us">
                        Contact us                    </a></li>

                    
                    <li><a href="http://www.istockphoto.com/faq.php" data-isource-track="nav=nav_FAQ">
                        FAQ                    </a></li>
                </div>
            </ul></div>
        </div>

        <div class="footer-metadata">
            <div class="footer-locale" ng-controller="LocaleCtrl" ng-cloak>
                <locale-picker
                    ng-if="state.countrySitesData.modalDisplayData"
                    class="desktop"
                    type="desktop"
                    country-data="state.countrySitesData.modalDisplayData"
                    activate-modal="state.modalStatus"
                    current-country="state.currentCountry"
                    default-region="{{state.countrySitesData.defaultRegion}}"
                    header-title="state.title"
                ></locale-picker>
                <div class="locale-button">
                  <span class="language-name" ng-if="!state.countrySitesData.singleCountry" ng-click="activateModal(true)">{{state.countrySitesData.languageData.languageName}}</span>
                  <span class="footer-flag" ng-class="getFlagClass()" ng-click="activateModal()"></span>
                </div>
            </div>

            <div class="social-links"><ul>
                <li><a href="http://www.facebook.com/istock"  class=" social fb" data-isource-track="nav_Facebook" target="_blank"></a></li>
                <li><a href="http://www.twitter.com/iStock" class="social tw" data-isource-track="nav_Twitter" target="_blank"></a></li>
                <li><a href="http://plus.google.com/118211792181745570694?prsrc=3" class="social gl" data-isource-track="nav_GooglePlus" target="_blank"></a></li>
                <li><a href="https://instagram.com/istockbygettyimages" class="social ig" data-isource-track="nav_Instagram" target="_blank"></a></li>
            </ul></div>

            <div class="legal-links">
                <ul>
                    <li><a href="http://www.istockphoto.com/help/licenses" data-isource-track="nav=nav_Licenses">License information</a></li>
                    <li><a href="http://www.istockphoto.com/legal/license-agreement" data-isource-track="nav=nav_Legal_Agreement">Legal agreements</a></li>
                    <li><a href="http://www.istockphoto.com/legal/terms-of-use" data-isource-track="nav=nav_Terms_of_use">Terms of use</a></li>
                    <li class="last-legal-link"><a href="http://www.istockphoto.com/legal/privacy-policy" data-isource-track="nav=nav_Privacy_policy">Privacy policy</a></li>
                </ul>
                <div class="clearfix"></div>
                <hr>
                <div class="copy-right">&copy;2016 iStockphoto LP. <span>The iStock design is a trademark of iStockphoto LP.</span></div>
            </div>
        </div>
    </footer>
</div>

<a class="exit-off-canvas"></a>
</div>
</div>
<script>
		window.timestamps.cssEnd = Math.round((new Date()).getTime());;
</script>
<script type="text/javascript">//<!--
var translations = {"SELECT_BIG_WEB":"Big Web","SELECT_SMALL_WEB":"Small Web","SELECT_HD":"HD","SELECT_NATIVE_4K":"4K","SELECT_ULTRAHD_4K":"UHD","TITLE_PHOTO":"{0} - Stock image","TITLE_RASTER":"{0} - Illustration","TITLE_VECTOR":"{0} - Illustration","TITLE_AUDIO":"{0} - Music clip","TITLE_VIDEO":"{0} - Stock video","ALT_TEXT_PHOTO":"{0} royalty-free stock photo","ALT_TEXT_RASTER":"{0} royalty-free stock illustration","ALT_TEXT_VECTOR":"{0} royalty-free stock vector art","ALT_TEXT_AUDIO":"{0} royalty-free stock music clip","ALT_TEXT_VIDEO":"{0} royalty-free stock video","PHOTO":"Photo","VIDEO":"Video","VECTOR":"Vector","AUDIO":"Audio","RASTER":"Illustration","STANDARD_LICENSE":"Includes our <a href=\"{0}\" target=\"_blank\">standard license<\/a>.","EXTENDED_LICENSE":"Add an <a id=\"show-extended-licenses\" ng-click=\"licenseState.openLicenseTable()\"> extended license<\/a>.","FREE_PHOTO":"Free photo of the week","FREE_VECTOR":"Free illustration of the month","FREE_VIDEO":"Free video of the month","FREE_AUDIO":"Free audio of the month","FREE_RASTER":"Free photo of the week","NEED_CREDITS_TITLE":"You need credits","BUY_CREDITS_BUTTON":"Buy credits","OUT_OF_DOWNLOADS_TITLE":"You're out of downloads","CONFIRM_DOWNLOAD_BUTTON":"Confirm download","REDOWNLOAD_TITLE":"Re-download for free","DOWNLOAD_COMPLETE_TITLE":"Download complete","FREE_DOWNLOAD_CTA_TITLE":"Free download","PHOTO_CTA_TITLE":"Download this photo","VIDEO_CTA_TITLE":"Download this video clip","RASTER_CTA_TITLE":"Download this illustration","VECTOR_CTA_TITLE":"Download this illustration","AUDIO_CTA_TITLE":"Download this audio clip","ESSENTIALS_COLLECTION":"Essentials collection","SIGNATURE_COLLECTION":"Signature collection","ESSENTIALS_DOWNLOAD_TITLE":"Essentials download","SIGNATURE_DOWNLOAD_TITLE":"Signature download","CREDIT_DOWNLOAD_BUTTON":"<span>{0}<\/span> credit download","ONE_CREDIT_DOWNLOAD_TITLE":"1 credit","CREDIT_DOWNLOAD_TITLE":"{0} credits","DOWNLOAD_PHOTO":"Download photo","DOWNLOAD_VIDEO":"Download video","DOWNLOAD_RASTER":"Download illustration","DOWNLOAD_VECTOR":"Download illustration","DOWNLOAD_AUDIO":"Download audio","ONLY_FROM_ISTOCK":"Only from iStock","EDITORIAL_USE_ONLY":"This image is for <a href=\"{0}\" target=\"_blank\">editorial use only<\/a>","EDITORIAL_USE_ONLY_TOOLTIP":"Editorial use only photos don't have any model or property releases, which means they can't be used for commercial, promotional, advertorial or endorsement purposes. This type of content is intended to be used in connection with events that are newsworthy or of general interest (for example, in a blog, textbook, newspaper or magazine article).","INCLUDED_WITH_SUBS":"Included with your subscription","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_PHOTO":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_ILLUSTRATION":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_VECTOR":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_VIDEO":"This video clip costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_AUDIO":"This music clip costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_NOCREDITS_RASTER":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_PHOTO":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_ILLUSTRATION":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_VECTOR":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_VIDEO":"This video clip costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_AUDIO":"This music clip costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_NO_SUBS_COSTCREDITS_1CREDIT_RASTER":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_OUT_OF_SUBS_DOWNLOAD":"It looks like you're out of subscription downloads for the month.","WARNING_OUT_OF_SUBS_DOWNLOAD_1CREDIT":"You can always download this {0} image for <strong>{1}<\/strong> credit.","WARNING_OUT_OF_SUBS_DOWNLOAD_CREDITS":"You can always download this {0} image for <strong>{1}<\/strong> credits.","WARNING_NO_SUBS_WITH_CREDITS":"It looks like you're out of downloads for the month. You can still download this {0} image with credits.","WARNING_WRONG_SUBS":"This image is only available with a Signature subscription or credit download.","WARNING_FILE_TYPE_CREDITS":"This {{adp.asset.assetType}} clip is only available as a credit download.","WARNING_FILE_TYPE_NO_CREDITS_FILE_COST":"This {{adp.asset.assetType}} clip costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_WRONG_SUBS_COSTCREDITS_NOCREDITS":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credits in your account.","WARNING_WRONG_SUBS_COSTCREDITS_1CREDIT":"This image costs <strong>{0}<\/strong> credits but you've only got <strong>{1}<\/strong> credit in your account.","WARNING_SLAVE_CONTACT_YOUR_MASTER":"Please contact your administrator.","FEEDBACK_DROPBOX_SYNCED":"Your download will be saved to your Dropbox.","SAVE_TO_DROPBOX":"Save your downloads to Dropbox","GET_STARTED":"Get started","DO_NOT_SHOW_AGAIN":"Don't show me again","DOWNLOAD_LOCALLY":"To download it locally, <a ng-click=\"{0}\">get it here<\/a>.","LICENSES_TITLE":"Add licenses","LICENSES_COLUMN":"Licenses","CREDITS_COLUMN":"Credits","LICENSE_STANDARD":"Standard (included)","LICENSE_MULTI-SEAT":"Multi-Seat (unlimited)","LICENSE_UNLIMITED":"Unlimited Reproduction \/ Print Runs","LICENSE_PRODUCTS":"Products for Resale","LICENSE_ELECTRONIC":"Electronic Items for Resale (unlimited run)","LICENSE_EXTENDED":"Extended Legal Guarantee covers up to $250,000","HOW_TO_PAY":"How would you like to pay?","PAYMENT_SUBS":"<strong>{0} subscription<\/strong> <div>({1} downloads remaining)<\/div>","PAYMENT_1CREDITASSETUSER":"<strong>{0} credit<\/strong> <div>({1} credit available)<\/div>","PAYMENT_1CREDITASSET":"<strong>{0} credit<\/strong> <div>({1} credits available)<\/div>","PAYMENT_1CREDITUSER":"<strong>{0} credits<\/strong> <div>({1} credit available)<\/div>","PAYMENT_CREDITS":"<strong>{0} credits<\/strong> <div>({1} credits available)<\/div>","LICENSE_AGREEMENT":"<small>By clicking \u201cConfirm download\u201d you agree that you\u2019ve read and agree to all applicable <a href=\"{0}\" target=\"_blank\">license agreements<\/a> for this download.<\/small>","DOWNLOAD_NOT_WORKING":"Download not working? <a ng-click=\"{0}\">Get it here<\/a>.","ALREADY_DOWNLOAD_TEXT":"You've already downloaded this file.","LEARN_MORE_LICENSE":"<p>Not sure what license you need? <a href=\"{0}\" target=\"_blank\" >Learn more<span class=\"right-arrow\"><\/span><\/a> <\/p>","ADULT_CONTENT_HEADER":"Adult content warning","ADULT_CONTENT_WARNING":"The content that you are about to view may contain nudity or mature themes that are only suitable for adult audiences.","ADULT_CONTENT_WARNING_PASS":"No thanks, take me to iStock.com","PROCEED":"Proceed","CONTRIBUTOR_PHOTO":"Stock photo","CONTRIBUTOR_VECTOR":"Stock vector","CONTRIBUTOR_RASTER":"Stock illustration","CONTRIBUTOR_AUDIO":"Stock audio clip","CONTRIBUTOR_VIDEO":"Stock video clip","CONTRIBUTOR_COPYRIGHT":"Copyright:","KEYWORDS_TITLE":"Keywords","SEE_ALL_KEYWORDS":"See all<span class=\"arrow\"><\/span>","DESCRIPTION_TITLE":"Description","VECTOR_ILLUSTRATION_METADATA_TYPE":"Vector illustration (EPS)","VECTOR_ILLUSTRATION_METADATA_CONTENT":"Includes large JPEG (min. 1900 x 2800 px)","AUDIO_TEMPO":"Tempo: {0} bpm","AUDIO_KEY":"Key: {0}","FILE_SIZE":"File Size: <span class=\"file-size-detail\">{0} MB<\/span>","UPLOAD_DATE":"Upload date:","ID_PHOTO":"Stock photo ID:","ID_VECTOR":"Stock vector ID:","ID_RASTER":"Stock illustration ID:","ID_AUDIO":"Stock audio ID:","ID_VIDEO":"Stock video ID:","SIMILAR_FILES_TITLE_PHOTO":"Similar images","SIMILAR_FILES_TITLE_RASTER":"Similar images","SIMILAR_FILES_TITLE_VECTOR":"Similar images","SIMILAR_FILES_TITLE_VIDEO":"Similar videos","SIMILAR_FILES_TITLE_AUDIO":"Similar audio clips","SIMILAR_FILES_SEE_ALL":"See all","CATEGORY_LINKS_TITLE_PHOTO":"Browse top photo categories","CATEGORY_LINKS_TITLE_VECTOR":"Browse top illustration categories","CATEGORY_LINKS_TITLE_RASTER":"Browse top illustration categories","CATEGORY_LINKS_TITLE_VIDEO":"Browse top video categories","CATEGORY_LINKS_TITLE_AUDIO":"Browse top audio categories","CATEGORY_LINK_NAME":"{0}","NOT_WORKING_ERROR":"Try again in a bit. If it's still not working, <a href=\"{0}\">contact us<\/a>.","API_ERROR":"Unable to complete your request at this time. Please try again later or <a href={0}>contact us<\/a> if the issue continues.","DOWNLOAD_ERROR":"Your download failed because of a problem on our end.","LICENSE_ERROR":"We can't show you extended licenses right now.","DOWNLOAD_COMP":"Download comp","PAGE_TITLE_TYPE_PHOTO":"stock photo","PAGE_TITLE_TYPE_ILLUSTRATION":"stock illustration","PAGE_TITLE_TYPE_VECTOR":"stock vector art","PAGE_TITLE_TYPE_VIDEO":"stock video","PAGE_TITLE_TYPE_FLASH":"Flash animation","PAGE_TITLE_TYPE_AUDIO":"Music Clip","PAGE_TITLE_TYPE_OTHER":"stock","META_DESCRIPTION_PHOTO":"Download this {0} photo now. And search more of the web's best library of royalty-free stock images from iStock.","META_DESCRIPTION_RASTER":"Download this {0} illustration now. And search more of the web's best library of royalty-free stock illustrations from iStock.","META_DESCRIPTION_VECTOR":"Download this {0} vector illustration now. And search more of the web's best library of royalty-free vector art from iStock.","META_DESCRIPTION_AUDIO":"Download the {0} music clip now. And search more of the web's best library of royalty-free stock audio files from iStock.","META_DESCRIPTION_VIDEO":"Download this {0} video now. And search more of the web's best library of royalty-free stock video footage from iStock.","META_DESCRIPTION_EDITORIAL":"Download this {0} picture for editorial use now. And search more of the web's best library of celebrity photos and news images from iStock.","META_TITLE_PHOTO":"{0}","META_TITLE_RASTER":"{0}","META_TITLE_VECTOR":"{0}","META_TITLE_AUDIO":"{0}","META_TITLE_VIDEO":"{0}","META_TITLE_EDITORIAL":"{0}","MEDIA_PLAYER_DOWNLOAD_COMP":"Download comp","MEDIA_PLAYER_MUTE_VOLUME":"Mute","ALT_TEXT_ELLIPSIS":"See full title","SWITCH_TO_CLASSIC":"Switch to classic view","ERROR_EMAIL":"Must be a valid email address.","EMAIL_MAX_LIMIT":"You can only send to 5 recipients at a time.","REQUEST_ERROR":"Unable to complete your request at this time. Please try again later or <a href={0}>contact us<\/a> if the issue continues.","WE_TRANSFER_MODAL_TITLE_IMAGE":"Send your image with <span class=\"we-transfer-logo\"><\/span>","WE_TRANSFER_MODAL_TITLE_VIDEO":"Send your video clip with <span class=\"we-transfer-logo\"><\/span>","WE_TRANSFER_MODAL_TITLE_AUDIO":"Send your audio clip with <span class=\"we-transfer-logo\"><\/span>","WE_TRANSFER_PLACEHOLDER_TO":"To","WE_TRANSFER_PLACEHOLDER_MESSAGE":"Message","WE_TRANSFER_DISCLAIMER":"By sending this file, you are agreeing to <a href=\"{0}\" target=\"_blank\">WeTransfer Terms of Services and Privacy Policy<\/a>.","WE_TRANSFER_SUCCESSFUL_MESSAGE_FIRST_PART":"You did it! You successfully sent your file with <span class=\"we-transfer-logo\"><\/span>","WE_TRANSFER_SUCCESSFUL_MESSAGE_SECOND_PART":"Expect a confirmation email at {0} shortly.","WE_TRANSFER_BUTTON":"Transfer","CAROUSEL_XSELL_TITLE_ESSENTIALS_IMAGE":"Explore Essentials \u2013 everyday images at our lowest price","CAROUSEL_XSELL_TITLE_ESSENTIALS_VIDEO":"Explore Essentials \u2013 everyday video at our lowest price","CAROUSEL_XSELL_TITLE_ESSENTIALS_AUDIO":"Explore Essentials \u2013 everyday audio at our lowest price","CAROUSEL_XSELL_TITLE_SIGNATURE_IMAGE":"Discover Signature \u2013 elevate your work with our best images","CAROUSEL_XSELL_TITLE_SIGNATURE_VIDEO":"Discover Signature \u2013 elevate your work with our best videos","CAROUSEL_XSELL_TITLE_SIGNATURE_AUDIO":"Discover Signature \u2013 elevate your work with our best audio","ADD_TO_LIGHTBOX":"Add to lightbox","LIGHTBOX":"Lightbox: {0}","YOUR_LIGHTBOX":"Your lightboxes","SEE_ALL_LIGHTBOXES":"See all lightboxes","LIGHTBOX_PLACEHOLDER":"Lightbox name","LIGHTBOX_CREATE_BUTTON":"Create","LIGHTBOX_EMPTY_NAME":"My Favorites {0}","SAVED_TO_LIGHTBOXNAME":"Saved to {0}","ADDED_TO_LIGHTBOXNAME":"Added to {0}","REMOVED_FROM_LIGHTBOXNAME":"Removed from {0}","LIGHTBOX_ERROR":"We can't complete your lightbox request right now.","COUNTRY_SITES_COUNTRY_HEADER":"Choose your country","COUNTRY_SITES_LANGUAGE_HEADER":"Choose your language","COUNTRY_SITES_CHANGE_COUNTRY":"Change country","COUNTRY_SITES_NORTH_SOUTH_AMERICA":"North and South America","COUNTRY_SITES_EUROPE":"Europe","COUNTRY_SITES_ASIA_PACIFIC":"Asia Pacific","COUNTRY_SITES_AFRICA_MIDDLE_EAST":"Africa and Middle East","COOKIE_BAR":"This site uses cookies. By continuing to browse iStock, you are agreeing to use our site cookies. <a href=\"\/legal\/privacy-policy\">Find out more here ><\/a>","SUBSCRIBE_BAR":"Subscribe and save with our all-new image subscriptions. <a href=\"\/plans-and-pricing\">Learn more ><\/a>","OUTDATED_BROWSER_BAR":"You are using an outdated browser. For a faster, safer browsing experience, <a href=\"http:\/\/www.browser-update.org\/update.html\">upgrade for free today<\/a>.","OPT_IN_EMAIL":"Thanks for your confirmation. You'll now receive email from iStock."};
//--></script><script  style="display:none">
<!--

(function(){'use strict';var app=angular.module('isLocalization',[]),replaceText,EVENT_RESOURCE_FILE_LOADED='isLocalize:resourceFileLoaded',EVENT_REQUESTED_RESOURCE_NOT_FOUND='isLocalize:resourceFileNotFound',EVENT_DEFAULT_RESOURCE_NOT_FOUND='isLocalize:CouldNotFindDefault';replaceText=function(str,replacements){var i,target;for(i=0;i<replacements.length;i++){target='{'+(i)+'}';str=str.replace(target,replacements[i].toString().replace('$','$$$$'));}
return str;};app.provider('isLocalize',function(){this.baseUrl='/';this.language='en-us';this.cache={};this.loadResourceOnInit=false;this.$get=['$http','$rootScope','$window','$filter',function($http,$rootScope,$window){var defaultBaseUrl=this.baseUrl,defaultLanguage=this.language,defaultCache=this.cache,deriveLanguage,localize;deriveLanguage=function(){var isAndroidDevice=/android.*\W(\w\w)-(\w\w)\W/i,nav=$window.navigator,language;if(nav.userAgent&&nav.userAgent.match(isAndroidDevice)){language=nav.userAgent.match(isAndroidDevice);}else{language=nav.userLanguage||nav.language;}
return language;};localize={url:null,baseUrl:defaultBaseUrl,language:defaultLanguage,dictionary:[],cache:defaultCache,loadDictionary:function(lang,dictionary){var fromCache=false;if(!this.cache[this.language]){this.language=lang;this.dictionary=dictionary;this.cache[lang]=dictionary;}else{if(lang){this.language=lang;}
this.dictionary=this.cache[this.language];fromCache=true;}
$rootScope.$broadcast(EVENT_RESOURCE_FILE_LOADED,fromCache);},requestResourceFile:function(){if(this.cache[this.language]){return this.loadDictionary();}
var url=this.url||this.inferUrl(),successFn,errorFn,options;options={method:'GET',url:url,cache:false};successFn=this._consumeResourceFile.bind(this);errorFn=function(){if(this.language!=='default'){this.language='default';this.requestResourceFile();$rootScope.$broadcast(EVENT_REQUESTED_RESOURCE_NOT_FOUND);}else{$rootScope.$broadcast(EVENT_DEFAULT_RESOURCE_NOT_FOUND);}}.bind(this);$http(options).success(successFn).error(errorFn);},inferUrl:function(){return[this.baseUrl,'locale_',this.language.toLowerCase(),'.json'].join('');},getLocalizedString:function(key){var value='',i;if(Array.isArray(this.dictionary)&&this.dictionary.length>0){for(i=0;i<this.dictionary.length;i++){if(this.dictionary[i].key===key){value=this.dictionary[i].value;break;}}}
return value;},setLanguage:function(lang){this.language=lang;this.url=this.inferUrl();this.requestResourceFile();},_consumeResourceFile:function(data){this.loadDictionary(this.language,data);}};if(this.loadResourceOnInit===true){localize.requestResourceFile();}
return localize;}];this.setOptions=function(options){for(var key in options){if(options.hasOwnProperty(key)&&key in this){this[key]=options[key];}}};});app.filter('i18n',['isLocalize',function(isLocalize){return function(key){var args=Array.prototype.slice.call(arguments,1),text=isLocalize.getLocalizedString(key);if(text!==''&&args.length>0){text=replaceText(text,args);}
return text;};}]);app.directive('i18n',['isLocalize','$compile',function(isLocalize,$compile){var i18nDirective={restrict:'A',link:function(scope,elm,attrs){scope.$on(EVENT_RESOURCE_FILE_LOADED,function(){i18nDirective.updateText(scope,elm,attrs.i18n);});attrs.$observe('i18n',function(){i18nDirective.updateText(scope,elm,attrs.i18n);});},updateText:function(scope,el,token){var values=token.split('|'),tag;if(values.length>=1){tag=isLocalize.getLocalizedString(values[0]);if(tag!==''){if(values.length>1){values.shift();tag=replaceText(tag,values);}
el.html(tag);el.removeAttr('data-i18n');if(tag.indexOf('ng-click')>-1){$compile(el)(scope);}}}}};return i18nDirective;}]);}());
//-->
</script>
<script  style="display:none">
<!--

(function(){'use strict';angular.module('common.utils',[]);})();(function(){'use strict';var app=angular.module('common.utils');app.factory('validate',[function(){var _isArray,_isArrayLike,_isArrayOfStrings,_isArrayOfStringsNonWhiteSpace,_isBoolean,_isDefined,_isFunction,_isFacetObjectWithTextTerm,_isImage,_isInArray,_isInstanceOf,_isNull,_isNullOrUndefined,_isNumber,_isNumberGreaterThanZero,_isNotNull,_isObject,_isString,_isStringNotWhiteSpace,_isUndefined;_isArray=function(data){return angular.isArray(data);};_isArrayLike=function(data){return angular.isArrayLike(data);};_isArrayOfStrings=function(data){var isValid=_isArray(data),i;isValid=isValid&&data.length>0;if(isValid){for(i=0;i<data.length;i++){if(!_isString(data[i])){isValid=false;break;}}}
return isValid;};_isArrayOfStringsNonWhiteSpace=function(data){var isValid=_isArray(data),i;isValid=isValid&&data.length>0;if(isValid){for(i=0;i<data.length;i++){if(!_isStringNotWhiteSpace(data[i])){isValid=false;break;}}}
return isValid;};_isBoolean=function(data){return typeof data==='boolean';};_isDefined=function(data){return(angular.isDefined(data));};_isFacetObjectWithTextTerm=function(data){var isValid=_isObject(data);isValid=isValid&&(data.hasOwnProperty('text'));isValid=isValid&&(_isArrayOfStringsNonWhiteSpace(data.text));return isValid;};_isFunction=function(data){return angular.isFunction(data);};_isImage=function(data){return(_isDefined(data)&&(data instanceof HTMLImageElement));};_isInstanceOf=function(object,type){if(_isUndefined(object)){return false;}else{return(object instanceof type);}};_isInArray=function(needle,hayStack){var key,isInArray=false;if(_isArray(hayStack)){for(key in hayStack){if(hayStack[key]===needle){isInArray=true;break;}}}
return isInArray;};_isNull=function(data){return(data===null);};_isNullOrUndefined=function(data){return(_isNull(data)||_isUndefined(data));};_isNumber=function(data){return angular.isNumber(data);};_isNumberGreaterThanZero=function(data){return(_isNumber(data)&&data>0);};_isNotNull=function(data){return(!_isNull(data));};_isObject=function(data){return angular.isObject(data)&&_isNotNull(data);};_isString=function(data){return angular.isString(data);};_isStringNotWhiteSpace=function(data){var isValid=_isString(data);isValid=isValid&&(data.trim()!=='');return isValid;};_isUndefined=function(data){return angular.isUndefined(data);};return{isArray:_isArray,isArrayLike:_isArrayLike,isArrayOfStrings:_isArrayOfStrings,isArrayOfStringsNonWhiteSpace:_isArrayOfStringsNonWhiteSpace,isBoolean:_isBoolean,isDefined:_isDefined,isFacetObjectWithTextTerm:_isFacetObjectWithTextTerm,isFunction:_isFunction,isImage:_isImage,isInArray:_isInArray,isInstanceOf:_isInstanceOf,isNumber:_isNumber,isNull:_isNull,isNullOrUndefined:_isNullOrUndefined,isNumberGreaterThanZero:_isNumberGreaterThanZero,isNotNull:_isNotNull,isObject:_isObject,isString:_isString,isStringNotWhiteSpace:_isStringNotWhiteSpace,isUndefined:_isUndefined};}]);}());(function(){'use strict';var app=angular.module('common.utils');app.factory('fifoCache',['validate',function(validate){var _getLockerPerDriver,_getLockerPerNameSpace,_reduceCountToThreshold,_fitInLockerSpace,_getOldestKey,_get,_put,_validDrivers=['local','session'];_getLockerPerDriver=function(locker,driver){var lockerPerDriver=locker,errorMessage='The argument for <driver> was invalid. '+'Allowed values are \'local\' or \'session\'.';if(validate.isDefined(driver)){if(validate.isInArray(driver,_validDrivers)){lockerPerDriver=locker.driver(driver);}else{throw new Error(errorMessage);}}
return lockerPerDriver;};_getLockerPerNameSpace=function(lockerPerDriver,namespace){var lockerPerNameSpace=lockerPerDriver,errorMessage='The argument for <namespace> must be undefined or a string. ';if(validate.isDefined(namespace)){if(validate.isStringNotWhiteSpace(namespace)){lockerPerNameSpace=lockerPerDriver.namespace(namespace);}else{throw new Error(errorMessage);}}
return lockerPerNameSpace;};_getOldestKey=function(keySet){var pointer={timestamp:Date.now()},key,oldestKey;for(key in keySet){if(keySet[key].timestamp<pointer.timestamp){pointer=keySet[key];oldestKey=key;}}
return oldestKey;};_reduceCountToThreshold=function(lockerSpace,threshold){var keySet,oldestKey,numLockerItems=lockerSpace.count();if(numLockerItems>=threshold){keySet=lockerSpace.all();oldestKey=_getOldestKey(keySet);lockerSpace.forget(oldestKey);_reduceCountToThreshold(lockerSpace,threshold);}};_fitInLockerSpace=function(lockerSpace,key,value){var keySet,oldestKey;try{lockerSpace.put(key,value);}catch(err){keySet=lockerSpace.all();oldestKey=_getOldestKey(keySet);lockerSpace.forget(oldestKey);if(lockerSpace.count()>0){_fitInLockerSpace(lockerSpace,key,value);}}};_get=function(locker,key,defaultValue,namespace,driver){var _locker;if(locker.supported()===false){return;}
_locker=_getLockerPerDriver(locker,driver);_locker=_getLockerPerNameSpace(_locker,namespace);return _locker.get(key,defaultValue);};_put=function(locker,key,value,threshold,namespace,driver){var _locker;if(locker.supported()===false){return;}
_locker=_getLockerPerDriver(locker,driver);_locker=_getLockerPerNameSpace(_locker,namespace);if(validate.isNumberGreaterThanZero(threshold)){if(_locker.count()>=threshold){_locker.forget(key);_reduceCountToThreshold(_locker,threshold);}}
_fitInLockerSpace(_locker,key,value);};return{get:_get,put:_put};}]);}());(function(){'use strict';var NS='common.controllers';angular.module(NS,[]);}());(function(){'use strict';angular.module('common.controllers').controller('OmnitureCtrl',['$scope','omnitureService','OMNITURE_EVENTS',function($scope,omnitureService,OMNITURE_EVENTS){$scope.$on(OMNITURE_EVENTS.CTA_CLICK,function(event,ctaText){omnitureService.ctaClick(ctaText);});$scope.$on(OMNITURE_EVENTS.ADP.ADP_LOAD,function(event,args){omnitureService.adpPageLoad(args);});$scope.$on(OMNITURE_EVENTS.ADP.CAROUSELS_LOAD,function(event,args){omnitureService.adpCarouselsLoad(args);});$scope.$on(OMNITURE_EVENTS.ADP.CAROUSELS_SEE_ALL_CLICK,function(event,args){omnitureService.adpCarouselSeeAllClick(args);});$scope.$on(OMNITURE_EVENTS.ADP.FILE_DOWNLOAD,function(event,args){omnitureService.adpDownload(args);});$scope.$on(OMNITURE_EVENTS.LB_TOGGLE,function(event,args){omnitureService.toggleLightbox(args);});$scope.$on(OMNITURE_EVENTS.LB_ADD,function(event,args){omnitureService.addToLightbox(args);});$scope.$on(OMNITURE_EVENTS.LB_CREATE,function(event,args){omnitureService.createLightbox(args);});$scope.$on(OMNITURE_EVENTS.LB_SAVE_PAGE,function(event,args){omnitureService.savePageToLightbox(args);});$scope.$on(OMNITURE_EVENTS.ADP.SIMILAR_FILE_CLICK,function(event,args){omnitureService.similarFileClick(args);});$scope.$on(OMNITURE_EVENTS.ADP.PORTFOLIO_LINK_CLICK,function(event,args){omnitureService.portfolioLinkClick(args);});$scope.$on(OMNITURE_EVENTS.ADP.FILE_ZOOM_CLICK,function(event,args){omnitureService.fileZoomClick(args);});$scope.$on(OMNITURE_EVENTS.SRP.SCROLL_TO_TOP_ARROW,function(event,args){omnitureService.scrollToTopArrowClick(args);});}]);}());(function(){'use strict';var NS='common.constants';angular.module(NS,[]);}());(function(){'use strict';var APP=angular.module('common.constants');APP.constant('ERROR_MESSAGING',{LIGHTBOX_ERROR:'LIGHTBOX_ERROR',DROPBOX_ERROR:{DROPBOX_ALREADY_CONNECTED:'DROPBOX_ALREADY_CONNECTED',OAUTH_TOKEN_BROKEN:'OAUTH_TOKEN_BROKEN',API_LIMIT_ERROR:'API_LIMIT_ERROR',SERVER_ERROR:'SERVER_ERROR',STORAGE_FULL:'STORAGE_FULL',ERROR:'ERROR'}});})();(function(){'use strict';angular.module('common.constants').constant('OMNITURE_EVENTS',{CTA_CLICK:'cta-click',LB_CREATE:'lb-create',LB_ADD:'lb-add',LB_TOGGLE:'lb-toggle',LB_SAVE_PAGE:'lb-save-page',ADP:{ADP_LOAD:'adp-load',SIMILAR_FILE_CLICK:'adp-similar-file-click',FILE_ZOOM_CLICK:'adp-file-zoom-click',FILE_DOWNLOAD:'adp-file-download',CAROUSELS_LOAD:'adp-carousels-load',PORTFOLIO_LINK_CLICK:'adp-portfolio-link-click',CAROUSELS_SEE_ALL_CLICK:'adp-carousels-see-all-click'},SRP:{SRP_SEARCH_UPDATE:'srp-search-update',RELATED_TERMS_RESULTS:'related-terms-results',SCROLL_TO_TOP_ARROW:'scroll-to-top-arrow'}});}());(function(){'use strict';angular.module('common.constants').constant('MEDIAPLAYER_STATES',{PLAY:'play',PAUSE:'pause',STOP:'stop'});}());(function(){'use strict';angular.module('common.constants').constant('ABSTRACT_TYPE',{'photos':1,'photo':1,'flash':4,'illustrations':7,'vector':7,'video':8,'audio':9});}());(function(){'use strict';angular.module('common.constants').value('SEARCH_STATE',{EXECUTING_SEARCH:true}).constant('SEARCH',{FORMATTED_KEY:'f',FACET_PREFERENCES:{perPage:100,filterContent:false,exclude:false,pageNumber:1},MAX_RESULTS_CACHE_TIME:86400000,MAX_CACHED_RESULT_COUNT:10,EVENT_TRIGGER:'triggerSearchEvent',PAGE_CHANGED:'pageChangedEvent'});})();(function(){'use strict';angular.module('common.constants').constant('LIGHTBOX_EVENTS',{LB_REMOVED_EVENT:'lightbox-removed',LB_OPEN_EVENT:'lightbox-opened',LB_CLOSE_EVENT:'lightbox-closed'});}());(function(){'use strict';angular.module('common.constants').constant('PRELOAD_IMAGES',{LOADING:'loading',COMPLETE:'complete',ERROR:'error',TIMEOUT:'timedOut'});})();(function(){'use strict';angular.module('common.services',['restangular']).config(['RestangularProvider',function(RestangularProvider){RestangularProvider.setBaseUrl('/api/');RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setResponseExtractor(function(response){if(response.data&&response.status){return response.data;}
return response;});}]);}());(function(){'use strict';angular.module('common.services').factory('mediaPlayerService',[function(){var self,mediaPlayerCache={};self={_register:function(mediaPlayerScope){mediaPlayerCache[mediaPlayerScope.$id]=mediaPlayerScope;},_unregister:function(mediaPlayerId){delete mediaPlayerCache[mediaPlayerId];},playMedia:function(mediaPlayerId){angular.forEach(mediaPlayerCache,function(mediaPlayer){if(mediaPlayer.$id!==mediaPlayerId){mediaPlayer.state.stop(true);}});mediaPlayerCache[mediaPlayerId].state.play();},getCache:function(){return mediaPlayerCache;}};return self;}]);}());(function(i){'use strict';var NS='common.services';angular.module(NS).constant('url',i.url);}(istock));(function(){'use strict';angular.module('common.services').factory('authorizationService',['OptionsRestangular','$q',function(OptionsRestangular,$q){var AUTH_ENDPOINT='authorization',_refreshToken,_signInUser,response;_refreshToken=function(){var deferred=$q.defer(),restangular;restangular=OptionsRestangular.getPhpRestConfig().one(AUTH_ENDPOINT,1);restangular.put().then(function(data){response=data;deferred.resolve(response);}).catch(function(error){deferred.reject(error);});return deferred.promise;};_signInUser=function(identity,credential,eloqua){var deferred=$q.defer(),data={identity:identity,credential:credential,eloqua:eloqua},restangular;restangular=OptionsRestangular.getPhpRestConfig().one(AUTH_ENDPOINT);restangular.customPOST(data).then(function(response){deferred.resolve(response);}).catch(function(error){deferred.reject(error);});return deferred.promise;};return{refreshToken:_refreshToken,signInUser:_signInUser};}]);}());(function(i){'use strict';var NS='common.services';angular.module(NS).constant('cookielessUrl',i.cookielessUrl);}(istock));(function(i){'use strict';var NS='common.services';angular.module(NS).constant('cacheKey',i.cachekey);}(istock));(function(){'use strict';angular.module('common.services').factory('dropdownService',[function(){var self,dropdownCache={};self={_register:function(dropdownScope,callback){var container={};container.dropdownScope=dropdownScope;container.callback=callback;dropdownCache[dropdownScope.$id]=container;},_unregister:function(dropdownId){delete dropdownCache[dropdownId];},show:function(dropdownId){if(self.validate(dropdownId)){angular.forEach(dropdownCache,function(dropdown){if(dropdown.dropdownScope&&dropdown.dropdownScope.$id!==dropdownId){self.hide(dropdown.dropdownScope.$id);}});if(dropdownCache[dropdownId].dropdownScope){dropdownCache[dropdownId].dropdownScope.isVisible=true;if(dropdownCache[dropdownId].callback){dropdownCache[dropdownId].callback();}}}},hide:function(dropdownId){if(self.validate(dropdownId)){if(dropdownCache[dropdownId].dropdownScope){dropdownCache[dropdownId].dropdownScope.isVisible=false;if(dropdownCache[dropdownId].callback){dropdownCache[dropdownId].callback();}}}},toggle:function(dropdownId){if(self.validate(dropdownId)){if(dropdownCache[dropdownId].dropdownScope&&dropdownCache[dropdownId].dropdownScope.isVisible){self.hide(dropdownId);}else{self.show(dropdownId);}}},getCache:function(){return dropdownCache;},validate:function(dropdownId){if(dropdownId&&dropdownCache&&dropdownCache[dropdownId]){return true;}
return false;}};return self;}]);}());(function(){'use strict';angular.module('common.services').service('formValidationService',['VATService','formFieldsValidatorService',function(VATService,formFieldsValidatorService){var expressions,defaultMsgKey,descriptions,usZipMatchState,doesZipMatchState=true;usZipMatchState=function(){var result=doesZipMatchState;doesZipMatchState=true;return result;};expressions={required:/^.+$/,number:/^\d*$/,alphanumeric:/^[a-zA-Z0-9]+$/,onlyLetters:/^\D+$/,vat:VATService.validate,usZip:/^\d{5}([\-\s]?\d{4})?$/,usZipMatchState:usZipMatchState,cdnZip:/^[ABCEGHJKLMNPRSTVXYabceghjklmnprstvxy]\d[A-Za-z][ -]?\s*\d[A-Za-z]\d$/,alphanumericKatakana:/^[\u30A0-\u30FFA-z0-9 ]+$/,requiredSelect:function(selectedItem){return selectedItem;},emailValidation:function(emailValue){return formFieldsValidatorService.emailValidation(emailValue);},cpfCnpjNumber:/^([0-9]{11}|[0-9]{14}|\d{3}\.\d{3}\.\d{3}-\d{2}|\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2})$/};descriptions={required:'This is a required field, can not be blank',number:'Numbers only',onlyLetters:'Anything EXCEPT for numbers (\\D regex flag)',vat:'Valid VAT codes',usZip:'American ZIP codes',usZipMatchState:'Zip code must match state',cdnZip:'Canadian Postal Codes',alphanumeric:'lower and uppercase letters and nubers 0-9',alphanumericKatakana:'katacana characters only',requiredSelect:'Validates that the element is in the select box',emailValidation:'Has to be an email address',cpfCnpjNumber:'Brazilian Individual or Company ID Code'};defaultMsgKey={required:{error:'ERROR_REQUIRED'},requiredSelect:{error:'ERROR_REQUIRED'},emailValidation:{error:'ERROR_EMAIL'},number:{error:'ERROR_NUMBER'},onlyLetters:{error:'ERROR_ONLY_LETTERS'},vat:{error:'ERROR_VAT'},usZip:{error:'ERROR_US_ZIP'},usZipMatchState:{error:'ERROR_US_ZIP_MATCH_STATE'},cdnZip:{error:'ERROR_CDN_ZIP'},alphanumeric:{error:'ERROR_ALPHANUMERIC'},alphanumericKatakana:{error:'ERROR_ALPHA_NUMERIC_KATAKANA'},cpfCnpjNumber:{error:'ERROR_CPF_CPNJ_NUMBER'}};this.allExpressions=function(){return expressions;};this.allDescriptions=function(){return descriptions;};this.setExpression=function(obj){angular.extend(expressions,obj);};this.getExpression=function(expr){return expressions[expr];};this.setDefaultMsgKey=function(obj){angular.extend(defaultMsgKey,obj);};this.getDefaultMsgKey=function(msg){return defaultMsgKey[msg];};this.process=function(type,value){var validation=this.getExpression(type),validationType=validation.constructor;if(validationType===Function){return validation(value);}else if(validationType===RegExp){return value!==undefined&&validation.test(value);}};this.setZipMatchState=function(match){doesZipMatchState=match;};}]);}());(function(){'use strict';angular.module('common.services').factory('cartService',['$q','Restangular',function($q,Restangular){var CART_ENDPOINT='carts',USERS_ENDPOINT='users',_getCart,_getDeferred,_deleteItem,_deleteItemForUser,_deleteItemFromSessionCart,_transferSessionCartToUserCart,cartService;_getDeferred=function(){return $q.defer();};_getCart=function(postdata){return Restangular.all(CART_ENDPOINT).post(postdata);};_deleteItem=function(deleteData){if(deleteData.newUser){return cartService.deleteSessionCartItem(deleteData);}else{return cartService.deleteItemForUser(deleteData);}};_deleteItemForUser=function(deleteData){return Restangular.one(USERS_ENDPOINT,deleteData.userId).one(CART_ENDPOINT+'/'+deleteData.type).withHttpConfig({timeout:3000}).customDELETE(deleteData.assetId);};_deleteItemFromSessionCart=function(deleteData){return Restangular.one(CART_ENDPOINT+'/'+deleteData.type).withHttpConfig({timeout:3000}).customDELETE(deleteData.assetId,{type:deleteData.type});};_transferSessionCartToUserCart=function(putData){return Restangular.one(CART_ENDPOINT,putData.userId).put(putData,{type:'credits'});};cartService={getDeferred:_getDeferred,getCart:_getCart,deleteItem:_deleteItem,deleteItemForUser:_deleteItemForUser,deleteSessionCartItem:_deleteItemFromSessionCart,transferSessionToCart:_transferSessionCartToUserCart};return cartService;}]);}());(function(){'use strict';angular.module('common.services').factory('orderService',['Restangular','$q','OptionsRestangular',function(Restangular,$q,OptionsRestangular){var ORDERS_ENDPOINT='orders',USERS_ENDPOINT='users',cart={items:[],subInfo:{}},currencyInfo={},taxes={},subTotal={},convertedTotal={},total={},specialCodes={},periodicBillingOptions={},self;self={encodeOrder:function(order){var params=[];params.push('id'+'='+encodeURIComponent(order.userId));params.push('type'+'='+encodeURIComponent(order.type));params.push('companyname'+'='+encodeURIComponent(order.billingInformation.companyName));params.push('countrycode'+'='+encodeURIComponent(order.billingInformation.country.GettyCountryCode));params.push('countryname'+'='+encodeURIComponent(order.billingInformation.country.ENName));params.push('postalcode'+'='+encodeURIComponent(order.billingInformation.postalCode));params.push('stateprov'+'='+encodeURIComponent(order.billingInformation.stateProv));params.push('city'+'='+encodeURIComponent(order.billingInformation.city));if(typeof order.billingInformation.notes!==undefined){params.push('notesjob'+'='+encodeURIComponent(order.billingInformation.notes.job));params.push('notesordernum'+'='+encodeURIComponent(order.billingInformation.notes.orderNumber));params.push('notesorderedby'+'='+encodeURIComponent(order.billingInformation.notes.orderedBy));}
if(typeof order.specialCodes.promoCode!==undefined){params.push('promocode'+'='+encodeURIComponent(order.specialCodes.promoCode));params.push('vat'+'='+encodeURIComponent(order.specialCodes.vat));}
return params.join('&');},createOrder:function(order,billingInfoUpdated){if(order.paymentInformation.type==='paypal'&&order.paymentInformation.token===undefined){var param=self.encodeOrder(order);billingInfoUpdated.then(function(){window.location.href='/credit-paypal/index/?'+param;});return $q.reject({isPaypalRedirrect:true});}
return OptionsRestangular.getPhpRestConfig(true).all(ORDERS_ENDPOINT).post(order);},getOrder:function(orderId,userId,type){return Restangular.one(USERS_ENDPOINT,userId).one(ORDERS_ENDPOINT).customGET(orderId,{type:type});},setCurrencyInfo:function(info){currencyInfo=info;return currencyInfo;},getItemsNotPendingDelete:function(){return cart.items.filter(function(arg){return arg.pendingDelete===false;});},getCurrencyInfo:function(){return currencyInfo;},setSpecialCodes:function(sc){specialCodes=sc;return specialCodes;},getSpecialCodes:function(){return specialCodes;},setPeriodicBillingOptions:function(options){periodicBillingOptions=options;return periodicBillingOptions;},getPeriodicBillingOptions:function(){return periodicBillingOptions;},setTaxes:function(t){taxes=t;return taxes;},getTaxes:function(){return taxes;},setSubTotal:function(st){subTotal=st;return st;},getSubTotal:function(){return subTotal;},setConvertedTotal:function(ct){convertedTotal=ct;},getConvertedTotal:function(){return convertedTotal;},setTotal:function(t){total=t;},getTotal:function(){return total;},deleteItem:function(item){var index=cart.item.indexOf(item);if(index<0){return undefined;}
return cart.item.splice(index,1);},addItem:function(item){return cart.items.push(item);},getItems:function(){return cart.items;},clearItems:function(){cart.items=[];return cart.items;},containsAnnualSubscription:function(){if(this.getPeriodicBillingOptions()===undefined){return false;}
return this.getItems().length===1&&this.getItems()[0].type==='sub'&&Object.keys(this.getPeriodicBillingOptions()).length>1;},isTaxInclusive:function(){if(this.getCurrencyInfo().code==='BRL'){return true;}
return false;}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('preferenceService',['$q','accountService','facetStateService','OptionsRestangular','authorizationService','$injectedData','locker',function($q,accountService,facetStateService,OptionsRestangular,authorizationService,$injectedData,locker){var PREFERENCE_ENDPOINT='user/preference',self;self={defaultSearchPreferences:{'removeAdultContent':false,'excludeEditorial':false,'showDetails':false,'resultsPerPage':100},attemptedRefreshes:0,initSearchPreferences:function(preferences){var deferred=self._getDeferred(),filterContent;if(!preferences){preferences=self.defaultSearchPreferences;if(facetStateService.getFacet('perPage')!==0){preferences.resultsPerPage=facetStateService.getFacet('perPage');}
if(facetStateService.getActiveValues('editorial').length){preferences.excludeEditorial=facetStateService.getActiveValues('editorial')[0]==='false';}
if(facetStateService.getActiveValues('filterContent').length){filterContent=facetStateService.getActiveValues('filterContent');preferences.removeAdultContent=(filterContent[0]==='false');}
self.setPreferences(preferences);}
facetStateService.setFacet('perPage',parseInt(preferences.resultsPerPage));facetStateService.setFacetOption('editorial',false,preferences.excludeEditorial);facetStateService.setFacetOption('filterContent',false,preferences.removeAdultContent);facetStateService.showFileDetails=preferences.showDetails||false;deferred.resolve(preferences);return deferred.promise;},getPreferences:function(){var deferred=self._getDeferred();if(accountService.isLoggedIn()===false){if(locker.supported()===false){deferred.resolve();return deferred.promise;}
deferred.resolve(locker.get('preferences'));}else{OptionsRestangular.getJavaRestConfig().one(PREFERENCE_ENDPOINT).get().then(deferred.resolve).catch(function(response){if(response.status&&response.status===401){authorizationService.refreshToken().then(function(data){$injectedData.token=data.token;}).catch(function(){self.updatePreference(self.defaultSearchPreferences);}).finally(function(){self.attemptedRefreshes++;if(self.attemptedRefreshes>1){self.updatePreference(self.defaultSearchPreferences);}else{self.initSearchPreferences();}});}else{self.updatePreference(self.defaultSearchPreferences);}});}
return deferred.promise;},setPreferences:function(prefs){var deferred=self._getDeferred();if(accountService.isLoggedIn()===false){if(locker.supported()===false){deferred.resolve();return deferred.promise;}
prefs=angular.toJson(prefs);deferred.resolve(locker.put('preferences',prefs));}else{OptionsRestangular.getJavaRestConfig().one(PREFERENCE_ENDPOINT).customPUT(prefs).then(function(response){deferred.resolve(response);},function(response){deferred.reject(response);});}},updatePreference:function(prefs){self.setPreferences(prefs);facetStateService.setFacet('perPage',prefs.resultsPerPage);facetStateService.setFacetOption('editorial',false,prefs.excludeEditorial);facetStateService.setFacetOption('filterContent',false,prefs.removeAdultContent);},getPreferenceFacetMapping:function(){return{'removeAdultContent':'filterContent','excludeEditorial':'editorial','resultsPerPage':'perPage'};},_getDeferred:function(){return $q.defer();}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('userService',['Restangular','$q','urlBuilder',function(Restangular,$q,urlBuilder){var USERS_ENDPOINT='users',lastUser,expiredStatus,activeStatus,suspendedStatus,self={getUser:function(userId,isBillingRequest,bypassCache){var params=null,cacheControl={};if(isBillingRequest){params={'isBillingRequest':true,'nocache':new Date().getTime()};}
if(bypassCache){cacheControl={'Cache-Control':'no-cache'};}
return Restangular.one(USERS_ENDPOINT,userId).get(params,cacheControl).then(function(user){lastUser=user;return user;});},currentUser:function(){return lastUser;},setCurrentUser:function(user){lastUser=user;},updateBillingInfo:function(userId,address){return Restangular.one(USERS_ENDPOINT,userId).customPUT({address:address});},activeSubscription:function(userId){if(typeof activeStatus==='undefined'){activeStatus=Restangular.one(USERS_ENDPOINT,userId).one('subscriptions').one('active').get();}
return activeStatus;},hasActualSuspendedSubscription:function(userId){if(typeof suspendedStatus==='undefined'){suspendedStatus=Restangular.one(USERS_ENDPOINT,userId).one('subscriptions').one('actual_suspended').get();}
return suspendedStatus;},createUser:function(email,password,country,optin,options){var deferred=$q.defer(),payload={email:email,password:password,country:country,optin:optin,logIn:true},elqOptions;if(options){elqOptions={elqFormName:options.elqFormName,siteId:options.siteId,customerGUID:options.customerGUID,cookieWrite:options.cookieWrite};angular.extend(payload,payload,elqOptions);}
Restangular.all(USERS_ENDPOINT).post(payload).then(deferred.resolve,deferred.reject);return deferred.promise;},isAlreadyUser:function(userEmail){var deferred=$q.defer(),params={'email':encodeURIComponent(userEmail)};Restangular.one(USERS_ENDPOINT).head(params).then(function(){deferred.resolve(true);},function(){deferred.reject(false);});return deferred.promise;},subscriptionExpirationStatus:function(userId){if(typeof expiredStatus==='undefined'){expiredStatus=Restangular.one(USERS_ENDPOINT,userId).one('subscriptions').one('expiration_status').get();}
return expiredStatus;},getProfileUri:function(username){var baseUrl='/profile/'+encodeURIComponent(username.toLowerCase()),siteInfix=urlBuilder.getUrlInfix();if(siteInfix){return siteInfix.toLowerCase()+baseUrl;}else{return baseUrl;}
return'/profile/'+encodeURIComponent(username.toLowerCase());},getPortfolioUri:function(username){return'/portfolio/'+encodeURIComponent(username.toLowerCase());}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('countryService',['Restangular','$q','siteRegion',function(Restangular,$q,siteRegion){var COUNTRIES_ENDPOINT='countries',getCountries,getSupportedSubCountries,getCurrentCountryCode,countries,paypalBannedCountries=['China'],supportedCountries,currentCountryCode;getCountries=function(){var deferred;if(countries===undefined){return Restangular.all(COUNTRIES_ENDPOINT).getList().then(function(data){countries=data;return countries;});}
deferred=$q.defer();deferred.resolve(countries);return deferred.promise;};getSupportedSubCountries=function(){var deferred;if(supportedCountries===undefined){return Restangular.all(COUNTRIES_ENDPOINT).getList({noSubEmbargo:true}).then(function(data){supportedCountries=data;return supportedCountries;});}
deferred=$q.defer();deferred.resolve(supportedCountries);return deferred.promise;};getCurrentCountryCode=function(){var deferred;if(currentCountryCode===undefined){currentCountryCode={};currentCountryCode.countryCode=angular.uppercase(siteRegion);}
deferred=$q.defer();deferred.resolve(currentCountryCode);return deferred.promise;};return{getCountries:getCountries,getSupportedSubCountries:getSupportedSubCountries,paypalBannedCountries:paypalBannedCountries,getCurrentCountryCode:getCurrentCountryCode};}]);}());(function(){'use strict';var module=angular.module('common.services'),serviceFn;serviceFn=function($window){return{to:function(url){$window.location.href=url;}};};module.factory('redirect',['$window',serviceFn]);}());(function(i){'use strict';var NS='common.services';angular.module(NS).constant('baseUrl',i.baseUrl);}(istock));(function(i){'use strict';var NS='common.services';angular.module(NS).constant('restUrl',i.restUrl);}(istock));(function(){'use strict';var hintSvc,HINT_ENDPOINT='search-hints';hintSvc=function(OptionsRestangular,$q){var _getHints,_handleHints,cache={},fromCache=true,startTime=-1,requestTime=-1,version=0,language='en_US',currentQuery='',previousDeferred=null;_handleHints=function(response){if(!response){return;}
requestTime=Math.round((new Date()).getTime())-startTime;if(response.hasOwnProperty('language')){language=response.language;}
if(response.hasOwnProperty('version')){version=response.version;}
if(response.hasOwnProperty('from-cache')){fromCache=response['from-cache'];}
var deferred=$q.defer(),namespace='',suggestions={galleries:[],hints:[],members:[],version:version,requestTime:requestTime,source:namespace,cache:fromCache,language:language,startTime:startTime},pattern=new RegExp('('+currentQuery.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&')+')','ig'),contributorPattern=new RegExp('(.+:)','ig'),highlight='<span class="hint-highlight">$1</span>',contributor='<span class="contributor">$1</span>',hints=response;if(response.version===1&&response.query){namespace=response.query.substring(0,3);cache[namespace]=response;}
if('gallerynames'in hints){hints.gallerynames.forEach(function(gallery,index){var galleryData=hints.gallerynamedata[index],displayString=gallery.replace(pattern,highlight);galleryData.galleryString=gallery;galleryData.displayString=displayString.replace(contributorPattern,contributor);suggestions.galleries.push(galleryData);});}
if('suggestions'in hints){hints.suggestions.forEach(function(hint,index){var hintData=hints.data[index];hintData.userString=hint;hintData.displayString=hint.replace(pattern,highlight);suggestions.hints.push(hintData);});}
if('membernames'in hints){hints.membernames.forEach(function(member,index){var memberData=hints.membernamedata[index],displayString=member.replace(pattern,highlight);memberData.userString=member;memberData.displayString=displayString.replace(contributorPattern,contributor);suggestions.members.push(memberData);});}
deferred.resolve(suggestions);return deferred.promise;};_getHints=function(){var deferred=$q.defer(),namespace;startTime=Math.round((new Date()).getTime());if(previousDeferred){previousDeferred.resolve(null);previousDeferred=null;}
if(typeof currentQuery==='undefined'||currentQuery.length<1){deferred.reject('Query is undefined or too short');}else{if(version<2){namespace=currentQuery.substring(0,3);}else{namespace=currentQuery;}
if(namespace in cache){deferred.resolve(cache[namespace]);fromCache=true;previousDeferred=null;}else{fromCache=false;previousDeferred=deferred;OptionsRestangular.getSearchConfig().one(HINT_ENDPOINT,[namespace,version]).withHttpConfig({ignoreLoadingBar:true,timeout:deferred.promise}).get().then(function(response){if(response){deferred.resolve(response);}}).finally(function(){previousDeferred=null;});}}
return deferred.promise;};return{getHints:function(query){var deferred=$q.defer();currentQuery=query;_getHints().then(_handleHints).then(deferred.resolve)
['catch'](deferred.reject);return deferred.promise;}};};angular.module('common.services').factory('hints',['OptionsRestangular','$q',hintSvc]);}());(function(){'use strict';var urlBuilderSvc;urlBuilderSvc=function($q,$interpolate,$injectedData,urlSvc,fileTypeStorageService,ABSTRACT_TYPE){var _handleInput,_getUrl,_getSearchUrl,portfolioUrl=$interpolate('{{baseUrl}}/portfolio/{{string}}'),lightboxUrl=$interpolate('{{baseUrl}}/search/lightbox/{{lightboxId}}'),fileIdUrl=$interpolate('{{baseUrl}}/search/text/{{text}}{{fileTypes}}');_getUrl=function(term,pattern){var deferred=$q.defer(),url;url=pattern(term).replace(/([^:]\/)\/+/g,'$1');deferred.resolve(url);return deferred.promise;};_getSearchUrl=function(term,fileTypes){var deferred=$q.defer(),searchUrl,slug,fileType='PAGE_SRP_PHOTO';if(term.fileType==='photos'){fileType='PAGE_SRP_PHOTO';}else if(term.fileType==='illustrations'){fileType='PAGE_SRP_ILLUSTRATION';}else if(term.fileType==='videos'){fileType='PAGE_SRP_VIDEO';}else if(term.fileType==='music'){fileType='PAGE_SRP_AUDIO';}
slug=window.istock.urls.translatedUrls[fileType].split('/')[1];searchUrl=$interpolate('{{baseUrl}}/'+slug+'/{{text}}');_getUrl(term,searchUrl).then(function(url){if(fileTypes==='photos,illustrations'){url+='?facets={"34":["'+ABSTRACT_TYPE.photos+'","'+
ABSTRACT_TYPE.illustrations+'"],"35":["'+term.text+'"]}';}
deferred.resolve(url);});return deferred.promise;};_handleInput=function(query,fileTypes,source){var deferred=$q.defer(),searchTerm={text:null,fileTypes:null,disambiguation:null,source:null,baseUrl:urlSvc,fileType:fileTypeStorageService.getFileTypeForUrl(fileTypes)},tmp;if(typeof query==='object'&&query.hasOwnProperty('userId')){_getUrl(query,portfolioUrl).then(deferred.resolve);}else if(typeof query==='object'&&query.hasOwnProperty('lightboxId')){_getUrl(query,lightboxUrl).then(deferred.resolve);}else if(typeof query==='number'){searchTerm.text=query;searchTerm.fileTypes='/filetypes/'+fileTypes;_getUrl(searchTerm,fileIdUrl).then(deferred.resolve);}else{if(typeof query==='string'){tmp=encodeURIComponent(query);query={string:tmp.replace(/%20/g,'+')};}else{tmp=encodeURIComponent(query.string);query.string=tmp.replace(/%20/g,'+');}
searchTerm.text=query.string;if(typeof fileTypes==='string'&&fileTypes!==''){searchTerm.fileTypes='/filetypes/'+fileTypes;}
if(source){searchTerm.source='/source/'+source;}
_getSearchUrl(searchTerm,fileTypes).then(deferred.resolve);}
return deferred.promise;};return{build:function(query,fileTypes,source){var deferred=$q.defer();if(!query||query.length===0){deferred.reject('input not defined');}else{_handleInput(query,fileTypes,source).then(deferred.resolve);}
return deferred.promise;},buildCountryUrl:function(path,secure){if(secure){return window.istock.urls.secure+path;}else{return window.istock.urls.unsecure+path;}},getTranslatedUrl:function(key){var urlTemplate='',i;if(window.istock.urls.translatedUrls[key]){urlTemplate=window.istock.urls.translatedUrls[key];if(arguments.length>1){for(i=1;i<arguments.length;++i){urlTemplate=urlTemplate.replace(/%s|%d/,arguments[i]);}}}
return urlTemplate;},getUrlInfix:function(slash){var infix=window.istock.urls.urlInfix||'';slash=typeof slash!=='undefined'?slash:true;if(slash&&infix){infix='/'+infix;}
return infix;},buildUrl:function(path,secure){if(secure===true){return $injectedData.uris.secure+path;}else{return $injectedData.uris.unsecure+path;}},buildReturnUrl:function(pageType,previousUrl,previousUrlWithInfix){var urlInfix=this.getUrlInfix();if(previousUrlWithInfix===true){return urlInfix+'/'+pageType+'?returnUrl='+window.encodeURIComponent(previousUrl);}
return urlInfix+'/'+pageType+'?returnUrl='+window.encodeURIComponent(urlInfix+previousUrl);}};};angular.module('common.services').factory('urlBuilder',['$q','$interpolate','$injectedData','url','fileTypeStorageService','ABSTRACT_TYPE',urlBuilderSvc]);}());(function(){'use strict';angular.module('common.services').factory('facetService',['$filter',function($filter){var audioFacets=function(){var keys={'any':'ANY','undefined':'UNDEFINED','A':'A','A major':'A_MAJOR','A minor':'A_MINOR','A flat':'A_FLAT','A flat major':'A_FLAT_MAJOR','A flat minor':'A_FLAT_MINOR','B':'B','B major':'B_MAJOR','B minor':'B_MINOR','B flat':'B_FLAT','B flat major':'B_FLAT_MAJOR','B flat minor':'B_FLAT_MINOR','C':'C','C major':'C_MAJOR','C minor':'C_MINOR','C sharp':'C_SHARP','C sharp major':'C_SHARP_MAJOR','C sharp minor':'C_SHARP_MINOR','D':'D','D major':'D_MAJOR','D minor':'D_MINOR','E':'E','E major':'E_MAJOR','E minor':'E_MINOR','E flat':'E_FLAT','E flat major':'E_FLAT_MAJOR','E flat minor':'E_FLAT_MINOR','F':'F','F major':'F_MAJOR','F minor':'F_MINOR','F sharp':'F_SHARP','F sharp major':'F_SHARP_MAJOR','F sharp minor':'F_SHARP_MINOR','G':'G','G major':'G_MAJOR','G minor':'G_MINOR'},facets={};angular.forEach(keys,function(value,key){facets[key]={display:$filter('i18n')(value),accessibility:'public',value:key};});return facets;},self={config:{abstractType:{facets:{images:{display:$filter('i18n')('IMAGES'),accessibility:'public',value:'images'},photos:{display:$filter('i18n')('PHOTOS'),accessibility:'public',value:'photos'},illustrations:{display:$filter('i18n')('ILLUSTRATIONS'),accessibility:'public',value:'illustrations'},video:{display:$filter('i18n')('VIDEO'),accessibility:'public',value:'video'},audio:{display:$filter('i18n')('AUDIO'),accessibility:'public',value:'audio'},all:{display:$filter('i18n')('ALL'),accessibility:'private',value:'all'}},type:''},order:{facets:{bestMatch:{display:$filter('i18n')('BEST_MATCH'),accessibility:'public',value:'bestMatch'},bestMatchAlternate:{display:$filter('i18n')('BEST_MATCH_ALTERNATE'),accessibility:'private',value:'bestMatchAlternate'},new:{display:$filter('i18n')('NEW'),accessibility:'public',value:'new'},mostPopular:{display:$filter('i18n')('MOST_POPULAR'),accessibility:'public',value:'yearPopular'}},subFacets:{monthPopular:{display:$filter('i18n')('THIS_MONTH'),accessibility:'public',value:'monthPopular'},yearPopular:{display:$filter('i18n')('THIS_YEAR'),accessibility:'public',value:'yearPopular'},allTimePopular:{display:$filter('i18n')('ALL_TIME'),accessibility:'public',value:'allTimePopular'}},standardFacets:{bestMatch:{display:$filter('i18n')('BEST_MATCH'),accessibility:'public',value:'bestMatch'},new:{display:$filter('i18n')('NEW'),accessibility:'public',value:'new'},monthPopular:{display:$filter('i18n')('MOST_POPULAR_THIS_MONTH'),accessibility:'public',value:'monthPopular'},yearPopular:{display:$filter('i18n')('MOST_POPULAR_THIS_YEAR'),accessibility:'public',value:'yearPopular'},allTimePopular:{display:$filter('i18n')('MOST_POPULAR_ALL_TIME'),accessibility:'public',value:'allTimePopular'}},type:'single',default:'bestMatch',forceInclude:true},date:{facets:{allTimes:{display:$filter('i18n')('ALL_TIME'),accessibility:'public',value:'allTimes'},oneDay:{display:$filter('i18n')('TODAY'),accessibility:'public',value:'oneDay'},oneWeek:{display:$filter('i18n')('THIS_WEEK'),accessibility:'public',value:'oneWeek'},oneMonth:{display:$filter('i18n')('THIS_MONTH'),accessibility:'public',value:'oneMonth'},threeMonths:{display:$filter('i18n')('PAST_THREE_MONTHS'),accessibility:'public',value:'threeMonths'},sixMonths:{display:$filter('i18n')('PAST_SIX_MONTHS'),accessibility:'public',value:'sixMonths'}},groupName:$filter('i18n')('UPLOAD_DATE'),groupNameMobile:$filter('i18n')('UPLOAD_DATE_MOBILE'),default:'allTimes',type:'single'},editorial:{facets:{creative:{display:$filter('i18n')('CREATIVE'),accessibility:'public',value:false},editorial:{display:$filter('i18n')('EDITORIAL'),accessibility:'public',value:true,class:'icon editorial'}},type:'multi-null-complete'},collectionPrice:{facets:{essentials:{display:$filter('i18n')('ESSENTIALS'),subtitle:'- '+$filter('i18n')('LOWEST_PRICE'),accessibility:'public',value:'essentials'},signature:{display:$filter('i18n')('SIGNATURE'),subtitle:'- '+$filter('i18n')('BEST_QUALITY'),accessibility:'public',value:'signature'}},type:'switch'},exclusiveContributor:{facets:{onlyFromiStock:{display:$filter('i18n')('ONLY_FROM_ISTOCK'),accessibility:'public',value:true}},type:'multi'},showPeople:{facets:{people:{display:$filter('i18n')('PEOPLE'),accessibility:'public',value:true,class:'icon people'},noPeople:{display:$filter('i18n')('NO_PEOPLE'),accessibility:'public',value:false,class:'icon no-people'}},type:'multi-null-complete'},orientation:{facets:{horizontal:{display:$filter('i18n')('LANDSCAPE'),accessibility:'public',value:'horizontal',class:'icon horizontal'},vertical:{display:$filter('i18n')('PORTRAIT'),accessibility:'public',value:'vertical',class:'icon vertical'},square:{display:$filter('i18n')('SQUARE'),accessibility:'public',value:'square',class:'icon square'}},type:'multi-null-complete'},aspectRatioVideo:{facets:{'4:3':{display:'4:3',accessibility:'public',value:'4:3'},'16:9':{display:'16:9',accessibility:'public',value:'16:9'}},type:'multi-null-complete'},videoSize:{facets:{'hd1080':{display:'HD 1080',accessibility:'public',value:'hd1080'},'hd720':{display:'HD 720',accessibility:'public',value:'hd720'},'pal':{display:'SD PAL',accessibility:'public',value:'pal'},'ntsc':{display:'SD NTSC',accessibility:'public',value:'ntsc'},'dv':{display:'SD DV',accessibility:'public',value:'dv'}},type:'multi-null-complete'},videoSizeCondensed:{facets:{'hd':{display:'HD',accessibility:'public',value:'hd',mapping:['hd1080','hd720'],hiddenFacetIsActive:false},'sd':{display:'SD',accessibility:'public',value:'sd',mapping:['pal','ntsc','dv'],hiddenFacetIsActive:false}},type:'multi-null-complete'},tempo:{facets:{'all':{display:$filter('i18n')('ANY'),accessibility:'public',value:'all'},'very slow':{display:$filter('i18n')('VERY_SLOW'),subtitle:'(0 - 79 bpm)',accessibility:'public',value:'very slow'},'slow':{display:$filter('i18n')('SLOW'),subtitle:'(80 - 119 bpm)',accessibility:'public',value:'slow'},'medium':{display:$filter('i18n')('MEDIUM'),subtitle:'(120 - 139 bpm)',accessibility:'public',value:'medium'},'fast':{display:$filter('i18n')('FAST'),subtitle:'(140 - 159 bpm)',accessibility:'public',value:'fast'},'very fast':{display:$filter('i18n')('VERY_FAST'),subtitle:'(160+)',accessibility:'public',value:'very fast'}},type:'single',default:'all'},audioKey:{facets:audioFacets(),type:'audioKey',default:'all'},audioPrice:{facets:{'basic':{display:$filter('i18n')('BASIC'),accessibility:'public',value:'basic'},'moderate':{display:$filter('i18n')('MODERATE'),accessibility:'public',value:'moderate'},'detailed':{display:$filter('i18n')('DETAILED'),accessibility:'public',value:'detailed'},'complex':{display:$filter('i18n')('COMPLEX'),accessibility:'public',value:'complex'},'elaborate':{display:$filter('i18n')('ELABORATE'),accessibility:'public',value:'elaborate'}},type:'multi-null-complete'},photoSize:{facets:{'xsmall':{display:'',accessibility:'hidden',subtitle:'',value:'xsmall'},'small':{display:'',accessibility:'hidden',subtitle:'',value:'small'},'medium':{display:'',accessibility:'hidden',subtitle:'',value:'medium'},'large':{display:'',accessibility:'hidden',subtitle:'',value:'large'},'xl':{display:$filter('i18n')('XL'),accessibility:'public',subtitle:$filter('i18n')('MIN_4200_PX'),value:'xl'},'2xl':{display:$filter('i18n')('2XL'),accessibility:'public',subtitle:$filter('i18n')('MIN_4900_PX'),value:'xxl'},'3xl':{display:$filter('i18n')('3XL'),accessibility:'public',subtitle:$filter('i18n')('MIN_5500_PX'),value:'xxxl'}},groupName:$filter('i18n')('SIZE'),type:'multi-null-complete'},color:{type:'color'},filterContent:{type:'single',default:'true',forceInclude:true}},getConfig:function(){return self.config;},getFacetGroup:function(facetName){return self.config[facetName];}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('facetStateService',['$location','$rootScope','facetService','SEARCH',function($location,$rootScope,facetService,SEARCH){var self={facetState:{text:[],pageNumber:1,perPage:100,abstractType:{photos:false,illustrations:false,video:false,audio:false},date:{allTimes:false,oneHour:false,oneDay:false,oneWeek:false,oneMonth:false,threeMonths:false,sixMonths:false},order:{bestMatch:false,bestMatchAlternate:false,new:false,allTimePopular:false,monthPopular:false,yearPopular:false},editorial:{true:false,false:false},collectionPrice:{essentials:false,signature:false},exclusiveContributor:{true:false,false:false},showPeople:{true:false,false:false},filterContent:{true:true,false:false},orientation:{horizontal:false,vertical:false,square:false},aspectRatioVideo:{'4:3':false,'16:9':false},videoSize:{hd1080:false,hd720:false,pal:false,ntsc:false,dv:false},tempo:{all:false,'very slow':false,slow:false,medium:false,fast:false,'very fast':false},audioKey:{'all':false,'undefined':false,'A':false,'A major':false,'A minor':false,'A flat':false,'A flat major':false,'A flat minor':false,'B':false,'B major':false,'B minor':false,'B flat':false,'B flat major':false,'B flat minor':false,'C':false,'C major':false,'C minor':false,'C sharp':false,'C sharp major':false,'C sharp minor':false,'D':false,'D major':false,'D minor':false,'E':false,'E major':false,'E minor':false,'E flat':false,'E flat major':false,'E flat minor':false,'F':false,'F major':false,'F minor':false,'F sharp':false,'F sharp major':false,'F sharp minor':false,'G':false,'G major':false,'G minor':false},audioPrice:{basic:false,moderate:false,detailed:false,complex:false,elaborate:false},subscriptionCollection:{standard:false},color:'',portfolioID:[],lightboxID:[],additionalAudio:'',adminSearch:false,fileCollection:{essentials:false,vetta:false,value:false,signature:false,'signature+':false},fileIdSet:[],noCache:{true:false,false:false},photoSize:{'xsmall':false,'small':false,'medium':false,'large':false,'xl':false,'xxl':false,'xxxl':false},loginToken:'',keywordLanguage:'',deduplicate:[],gettyMasterIdSet:[],exclusiveEditorsPickVetta:{onlyFromIstock:false,editorsPick:false,vetta:false},filterVector:{true:false,false:false},countryID:'',editorsPick:{true:false,false:false},textDisambiguation:[],copySpace:[],timeSignature1:'',timeSignature2:'',decoration:[],priceLevel:[],searchId:'',activeStatus:'',bestMatchMix:[],vectorPrice:[],similarity:[],shuffleFiletypeCycle:'',userPartition:'',shufflePriceLevelCycle:'',keywordRankAdjustment:'',latestFiles:''},cachedFacets:null,photosFacets:['photoSize'],imagesFacets:['editorial','showPeople','orientation','color','photoSize'],audioFacets:['tempo','audioKey','audioPrice','additionalAudio','timeSignature1','timeSignature2'],videoFacets:['aspectRatioVideo','videoSize'],filterFacets:['editorial','collectionPrice','exclusiveContributor','showPeople','orientation','photoSize','aspectRatioVideo','videoSize','tempo','audioKey','audioPrice','color'],noOptionArrayFacets:['text','fileIdSet','deduplicate','gettyMasterIdSet','priceLevel','textDisambiguation','copySpace','decoration','bestMatchMix','vectorPrice','similarity','lightboxID','portfolioID'],defaultFacets:['order','date'],showFileDetails:false,cachedSearchId:'',initialized:false,dirty:false,initFromFacets:function(facets){angular.copy(self.defaultState,self.facetState);angular.forEach(facets,function(facetValue,facetName){if(facetName!=='additionalAudio'){self.clearFacetGroup(facetName);}
if(angular.isArray(facetValue)){if(facetName==='text'){self.setFacet(facetName,self.formatKeywords(facetValue.join(' ')));}else if(self.noOptionArrayFacets.indexOf(facetName)!==-1){self.setFacet(facetName,facetValue);}else{angular.forEach(facetValue,function(filterValue){filterValue=self.mapLegacyFacetValue(filterValue);if(filterValue==='audio'){self.setFacet('additionalAudio','true');}
self.setFacetOption(facetName,filterValue,true);});}}else if(angular.isObject(self.facetState[facetName])){self.setFacetOption(facetName,facetValue,true);}else if(facetName!==SEARCH.FORMATTED_KEY){self.setFacet(facetName,facetValue);}});},initDefaultValues:function(){var list=self.defaultFacets,def;list.forEach(function(facetName){def=facetService.getFacetGroup(facetName).default;if(def&&self.getActiveValues(facetName).length===0){self.setFacetOption(facetName,def,true);}});angular.copy(self.facetState,self.defaultState);self.initialized=true;},isInitialized:function(){return self.initialized;},getFacet:function(name){return self.facetState[name];},getOptionState:function(name,value){return self.facetState[name][value];},toggleFacet:function(name,value){self.facetState[name][value]=!self.facetState[name][value];self.dirty=true;},setFacet:function(name,value){if(typeof self.facetState[name]===typeof value){if('text'===name){value=self.formatKeywords(value.join(' '));}
if(!angular.equals(self.facetState[name],value)){self.facetState[name]=value;self.dirty=true;if(name==='pageNumber'){self.applySearchId();}}}else{throw new TypeError();}},setFacetOption:function(name,option,value,dirty){var facetGroup=facetService.getFacetGroup(name),setDirty=(typeof dirty==='undefined')?true:dirty;if(typeof self.facetState[name][option]===typeof value){if(self.isSingleFacet(facetGroup)){if(option===true){self.facetState[name]['false']=false;}else if(option===false){self.facetState[name]['true']=false;}else{angular.forEach(self.facetState[name],function(facetOptionValue,facetOption){self.facetState[name][facetOption]=false;});}}else if(self.isSwitchFacet(facetGroup)){angular.forEach(self.facetState[name],function(facetOptionValue,facetOption){if(facetOption===option){self.facetState[name][facetOption]=value;}else{self.facetState[name][facetOption]=false;}});}
self.facetState[name][option]=value;if(setDirty){self.dirty=true;}}else{throw new TypeError();}},clearFacetGroup:function(name,setDirty){if(self.noOptionArrayFacets.indexOf(name)!==-1||name==='searchId'){self.clearFacet(name);}else{angular.forEach(self.facetState[name],function(value,key){self.setFacetOption(name,key,false,setDirty);});}},clearFacet:function(name){if(self.noOptionArrayFacets.indexOf(name)!==-1){self.facetState[name]=[];}else if(name==='searchId'){self.facetState[name]='';}},setFileTypeFacet:function(fileTypeSelected){angular.forEach(self.facetState.abstractType,function(value,key){self.facetState.abstractType[key]=false;});self.facetState.additionalAudio='';self.facetState.pageNumber=1;self.clearFileTypeFacetGroups(fileTypeSelected);if(fileTypeSelected==='images'){self.facetState.abstractType.photos=true;self.facetState.abstractType.illustrations=true;}else if(fileTypeSelected==='all'){self.facetState.abstractType.photos=true;self.facetState.abstractType.illustrations=true;self.facetState.abstractType.video=true;self.facetState.abstractType.audio=true;self.facetState.additionalAudio='true';}else{self.facetState.abstractType[fileTypeSelected]=true;if(fileTypeSelected==='audio'){self.facetState.additionalAudio='true';}}
self.dirty=true;},clearFileTypeFacetGroups:function(fileTypeSelected){if(fileTypeSelected==='images'||fileTypeSelected==='photos'||fileTypeSelected==='illustrations'){self.clearFileTypeFacets(self.audioFacets);self.clearFileTypeFacets(self.videoFacets);if(fileTypeSelected==='images'){self.clearFileTypeFacets(self.photosFacets);}
if(fileTypeSelected==='illustrations'){self.clearFacetGroup('editorial',false);self.clearFacetGroup(self.photosFacets,false);}}else if(fileTypeSelected==='video'){self.clearFileTypeFacets(self.imagesFacets);self.clearFileTypeFacets(self.audioFacets);}else if(fileTypeSelected==='audio'){self.clearFileTypeFacets(self.imagesFacets);self.clearFileTypeFacets(self.videoFacets);}else{self.clearAllFileTypeFacets();}},clearFileTypeFacets:function(fileType){angular.forEach(fileType,function(value){self.clearFacetGroup(value,false);});},clearAllFileTypeFacets:function(){self.clearFileTypeFacets(self.imagesFacets);self.clearFileTypeFacets(self.videoFacets);self.clearFileTypeFacets(self.audioFacets);self.clearFacetGroup('collectionPrice',false);self.clearFacetGroup('exclusiveContributor',false);self.clearFacetGroup('order',false);self.facetState.pageNumber=1;angular.forEach(self.facetState.order,function(value,key){if(key==='bestMatch'){self.facetState.order[key]=true;}else{self.facetState.order[key]=false;}});},clearAltViewFacets:function(){self.setFacet('portfolioID',[]);self.setFacet('lightboxID',[]);},setFileTypeToDefault:function(){self.clearFacetGroup('abstractType');self.setFacet('additionalAudio','');self.toggleFacet('abstractType','photos');self.toggleFacet('abstractType','illustrations');},getActiveValues:function(nameAry){var result=[];if(!angular.isArray(nameAry)){nameAry=nameAry.split(',');}
angular.forEach(nameAry,function(name){if(typeof self.facetState[name]!=='object'){result.push(self.facetState[name]);}else{angular.forEach(self.facetState[name],function(value,key){if(self.facetState[name][key]===true){result.push(key);}});}});return result;},mapLegacyFacetValue:function(value){if(value==='videos'){value='video';}else if(value==='music'){value='audio';}
return value;},allOptionsActive:function(name){var allSelected=true,facetGroup=facetService.getFacetGroup(name).facets;angular.forEach(self.facetState[name],function(value,key){if(!(facetGroup.hasOwnProperty(key)&&facetGroup[key].accessibility==='hidden')&&(self.facetState[name][key]===false)){allSelected=false;}});return allSelected;},activateAllOptions:function(name){angular.forEach(self.facetState[name],function(value,key){self.setFacetOption(name,key,true);});},hasActiveFacets:function(list){var hasActiveValues=false,activeValue=[];if(!angular.isArray(list)){list=list.split(',');}
list.forEach(function(facetName){activeValue=self.getActiveValues(facetName);if(!self.isOnlyDefaultSet(facetName)&&((activeValue.length>0)&&(activeValue.indexOf('')===-1))){hasActiveValues=true;return;}});return hasActiveValues;},isOnlyDefaultSet:function(name){var active=self.getActiveValues(name),def,facetGroup;if(self.facetState[name]&&active.length===1){facetGroup=facetService.getFacetGroup(name);if(facetGroup){def=facetGroup.default;}
if(def&&active[0]===def){return true;}}
return false;},build:function(forceInclude){var facets={};angular.forEach(self.facetState,function(value,filterName){var facetGroup=facetService.getFacetGroup(filterName);if(!angular.isArray(value)&&!angular.isObject(value)&&value){facets[filterName]=value;}else{angular.forEach(value,function(facetValue,facetType){var singleFacetType,isFacetDefault,shouldInclude;if(self.isNoOptionFacet(filterName)){self.setArrayFacet(facets,filterName,facetValue);}
singleFacetType=self.isSingleFacet(facetGroup);if(singleFacetType){isFacetDefault=self.isFacetDefault(facetGroup,facetType);shouldInclude=self.shouldInclude(facetGroup,facetType,forceInclude);if(facetValue===true&&(!isFacetDefault||shouldInclude)){facets[filterName]=facetType;}}else if(!singleFacetType&&facetValue===true){self.setArrayFacet(facets,filterName,facetType);}});}});self.cachedFacets=angular.copy(facets);return facets;},setArrayFacet:function(facets,name,value){if(!facets[name]){facets[name]=[];}
facets[name].push(value);},shouldInclude:function(facetGroup,value,forceInclude){return(typeof facetGroup!=='undefined'&&(forceInclude===true||'forceInclude'in facetGroup));},isFacetDefault:function(facetGroup,value){return(typeof facetGroup!=='undefined'&&'default'in facetGroup&&facetGroup.default===value);},isDefaultPref:function(filterName,value){var DEFAULTS=SEARCH.FACET_PREFERENCES;return(filterName in DEFAULTS&&DEFAULTS[filterName]===value);},isNoOptionFacet:function(filterName){return self.noOptionArrayFacets.indexOf(filterName)!==-1;},isSingleFacet:function(facetGroup){return(typeof facetGroup!=='undefined'&&'type'in facetGroup&&facetGroup.type==='single');},isSwitchFacet:function(facetGroup){return(typeof facetGroup!=='undefined'&&'type'in facetGroup&&facetGroup.type==='switch');},formatKeywords:function(keywordString){var keywords,ret=[],booleans=['NOT','OR'];if(keywordString.indexOf('+')!==-1){keywords=keywordString.split('+');}else{keywords=keywordString.split(' ');}
angular.forEach(keywords,function(word,index){if(booleans.indexOf(word.toUpperCase())!==-1&&index+1<keywords.length){ret.push([word.toUpperCase(),keywords[index+1]].join(' '));keywords.splice(index+1,1);}else{ret.push(word);}});if(ret[0]){return[ret.join(' ')];}
return[];},getCachedFacets:function(){if(self.cachedFacets===null){self.build();}
return self.cachedFacets;},correctSpelling:function(suggestion,misspelled){var tempText=[];angular.forEach(self.facetState.text,function(keyword){tempText.push(keyword.replace(misspelled,suggestion));});self.setFacet('text',tempText);},isDirty:function(){return self.dirty;},resetDirty:function(){self.dirty=false;},setSearchId:function(id){self.cachedSearchId=id;self.applySearchId();},unsetSearchId:function(){self.facetState.searchId='';},applySearchId:function(){if(self.cachedSearchId){if(self.facetState.pageNumber>1){self.facetState.searchId=self.cachedSearchId;}else{self.facetState.searchId='';}}}};self.defaultState=angular.copy(self.facetState);return self;}]);}());(function(i){'use strict';var NS='common.services',CONSTANT='siteLang',constant;constant=i.siteLang;angular.module(NS).constant(CONSTANT,constant);}(istock));(function(i){'use strict';var NS='common.services',CONSTANT='siteRegion',constant;constant=i.siteRegion;angular.module(NS).constant(CONSTANT,constant);}(istock));(function(){'use strict';angular.module('common.services').factory('spinnerService',[function(){var self,spinnerCache={};self={_register:function(spinnerScope){if(spinnerCache[spinnerScope.id]){spinnerCache[spinnerScope.id]=angular.extend(spinnerScope,spinnerCache[spinnerScope.id]);}else{spinnerCache[spinnerScope.id]=spinnerScope;}},_unregister:function(spinnerId){delete spinnerCache[spinnerId];},_unregisterGroup:function(spinnerGroup){var spinnerId;for(spinnerId in spinnerCache){if(spinnerCache[spinnerId].group===spinnerGroup){delete spinnerCache[spinnerId];}}},show:function(spinnerId){if(!spinnerCache[spinnerId]){spinnerCache[spinnerId]={};}
spinnerCache[spinnerId].showSpinner=true;},hide:function(spinnerId){if(!spinnerCache[spinnerId]){spinnerCache[spinnerId]={};}
spinnerCache[spinnerId].showSpinner=false;},showGroup:function(spinnerGroup){var spinnerId;for(spinnerId in spinnerCache){if(spinnerCache[spinnerId].group===spinnerGroup){this.show(spinnerId);}}},hideGroup:function(spinnerGroup){var spinnerId;for(spinnerId in spinnerCache){if(spinnerCache[spinnerId].group===spinnerGroup){this.hide(spinnerId);}}},getCache:function(){return spinnerCache;}};return self;}]);}());(function(translations){'use strict';var NS='common.services',key,formattedTranslations=[];for(key in translations){if(translations.hasOwnProperty(key)){formattedTranslations.push({key:key,value:translations[key],description:''});}}
angular.module(NS).constant('translations',formattedTranslations);}(window.translations));(function(){'use strict';angular.module('common.services').factory('VATService',[function(){var invalidCodes=[],regex,regexPatterns=['(AT)?U[0-9]{8}','(BE)?0[0-9]{9}','(BG)?[0-9]{9,10}','(CY)?[0-9]{8}L','(CZ)?[0-9]{8,10}','(DE)?[0-9]{9}','(DK)?[0-9]{8}','(EE)?[0-9]{9}','(EL|GR)?[0-9]{9}','(ES)?[0-9A-Z][0-9]{7}[0-9A-Z]','(FI)?[0-9]{8}','(FR)?[0-9A-Z]{2}[0-9]{9}','(GB)?([0-9]{9}([0-9]{3})?|[A-Z]{2}[0-9]{3})','(HU)?[0-9]{8}','(IE)?[0-9]S[0-9]{5}L','(IT)?[0-9]{11}','(LT)?([0-9]{9}|[0-9]{12})','(LU)?[0-9]{8}','(LV)?[0-9]{11}','(MT)?[0-9]{8}','(NL)?[0-9]{9}B[0-9]{2}','(PL)?[0-9]{10}','(PT)?[0-9]{9}','(RO)?[0-9]{2,10}','(SE)?[0-9]{12}','(SI)?[0-9]{8}','(SK)?[0-9]{10}'],vatHintText='';return{validate:function(vatCode){var isValid,i;if(!vatCode){return false;}
for(i=0;i<invalidCodes.length;i++){if(invalidCodes[i]===vatCode){return false;}}
regex=new RegExp('^('+regexPatterns.join('|')+')$');isValid=regex.test(vatCode);if(!isValid&&vatCode){isValid=regex.test(vatCode.replace(/ /g,''));}
return isValid;},clearInvalidCodes:function(){invalidCodes.length=0;},addInvalidVat:function(vatCode){invalidCodes[invalidCodes.length]=vatCode;},setVatHintText:function(text){vatHintText=text;},getVatHintText:function(){return vatHintText;}};}]);}());(function(){'use strict';angular.module('common.services').factory('omnitureService',['$window','$timeout','fileTypeStorageService','$location','$injectedData',function($window,$timeout,fileTypeStorageService,$location,$injectedData){var _commonPageLoad,_adpPageLoad,_getRequestedServers,_getCarouselDataSource,_adpCarouselsLoad,_adpCarouselSeeAllClick,_carouselTypeSanitized,_ctaClick,_adpDownload,_fileZoomClick,_savePageToLightbox,_toggleLightbox,_createLightbox,_addToLightbox,_similarFileClick,_portfolioLinkClick,_setSubsProp,_findDaysBetween,_adpDropboxCtaClick,_srpPageLoad,_toggleRefinePanel,_playAudioFile,_checkCookie,_getCookie,_deleteCookie,_unisporkalRegistrationEvent,_srpSearchDetails='pageName,channel,server,prop1,eVar1,prop3,eVar3,prop4,eVar4,'+'prop5,eVar5,eVar6,prop7,eVar7,prop11,eVar11,prop12,eVar12,prop13,prop14,eVar14,'+'prop15,eVar15,prop16,eVar16,prop18,prop28,eVar28,prop31,eVar31,prop38,eVar38,prop39,eVar39,prop40,eVar40,'+'prop41,eVar41,prop44,eVar44,prop45,prop53,eVar53,prop60,prop70,prop73,prop74,prop75',_signInJoinPageLoad,_scrollToTopArrowClick,_weTransferModalOpen,_weTransferRequestSent,imageCarouselData=[],carouselLoadTimeout=null,carouselDataSource='';_commonPageLoad=function(){var joinEnd='JOIN_END',signInCookie='SIGNIN_COOKIE';s.server=istock.baseUrl;if(s.prop3){s.prop3=istock.locale+'|'+s.prop3;}else{s.prop3=istock.locale;}
s.eVar3=istock.locale;s.prop5=$window.location.href;s.eVar7=s.prop7=s.getPreviousValue(s.pageName,'gpv_07');s.prop18=s.getPercentPageViewed();s.eVar28=s.prop28=s.getDaysSinceLastVisit('s_lv');if(s.prop40===undefined||s.prop40===null){s.prop40=s.eVar40='Authenticated';}
if(s.prop41===undefined||s.prop41===null){s.prop41=s.eVar41='Client';}
s.prop70='D=s_vi';if($window.timestamps){var temp74;s.prop73=$window.timestamps.serverEnd-$window.timestamps.serverStart;temp74=$window.timestamps.cssEnd-$window.timestamps.htmlStart+s.prop73;s.prop74=temp74+'|'+($window.timestamps.htmlEnd-$window.timestamps.cssEnd+temp74);if(!s.prop75){s.prop75='null';}
s.prop75=s.prop75+'|render:'+($window.timestamps.htmlEnd-$window.timestamps.serverStart);}
if(_checkCookie(joinEnd)){if(s.events){s.events+=',event21';}else{s.events='event21';}
_deleteCookie(joinEnd);}
_unisporkalRegistrationEvent();if(_checkCookie(signInCookie)){if(s.events){s.events+=',event32';}else{s.events='event32';}
_deleteCookie(signInCookie);}};_unisporkalRegistrationEvent=function(){var unisporkalNewRegistrationCookie='new_registration',unisporkalTrackingCookie='trk-event',registrationEventHandledCookie='registration_event_handled';if(_getCookie(registrationEventHandledCookie)){return;}
if(_getCookie(unisporkalNewRegistrationCookie)){var registerEventValue=_getCookie(unisporkalTrackingCookie);if(registerEventValue){if(s.events){s.events+=','+registerEventValue;}else{s.events=registerEventValue;}
document.cookie=registrationEventHandledCookie+'=true;domain=.istockphoto.com;path=/';}}};_ctaClick=function(ctaTitle){ctaTitle=ctaTitle.replace(/\s+/g,'');ctaTitle=ctaTitle.replace(/<\/?[^>]+(>|$)/g,'');s.linkTrackVars='events,prop65';s.linkTrackEvents='event45';s.events='event45';s.tl(true,'o',ctaTitle);};_adpPageLoad=function(args){var asset=args.asset,user=args.user,assetId=args.assetId,name='iStock|Product|'+asset.presentation.type+'FCP',segmentString=args.segmentString,classification='Creative',assetClickedFromSRP,typesSelectedSRP,regexSRP=new RegExp('st='),similarFilesServerRequest=args.similarFilesSource;s.pageName=s.eVar5=name;s.channel='Product';s.events='event3';if(asset.presentation.editorialCaption){classification='Editorial';}
s.eVar13=[classification,asset.presentation.type,asset.presentation.bestMatchCollection].join('|');s.prop26=new Date(asset.approvalDate);s.eVar39=segmentString;assetClickedFromSRP=localStorage.getItem('assetClickedFromSRP');if(assetClickedFromSRP){assetClickedFromSRP=angular.fromJson(assetClickedFromSRP);s.prop44=assetClickedFromSRP.column+':'+assetClickedFromSRP.row;localStorage.removeItem('assetClickedFromSRP');}
s.eVar47=_getRequestedServers();carouselDataSource='ADP_'+asset.source.toUpperCase()+'|Same_'+
similarFilesServerRequest.toUpperCase()+'|Sim_LUST';s.eVar48=carouselDataSource;s.prop56=assetId;s.prop65='iStockADP_New';if(asset.isAdultContent){s.prop61=s.eVar61='Adult';}
if(user){s.prop4=s.eVar4=user.userId;s.prop58=s.eVar58=user.numCredits;if(user.hasSub){_setSubsProp(user);}}
_commonPageLoad();typesSelectedSRP=fileTypeStorageService.getFileType();if(typesSelectedSRP&&regexSRP.test(s.prop5)){s.prop16=s.eVar16=typesSelectedSRP.join('|');}
s.t();};_getRequestedServers=function(type){var serverRequest='LUST',adpString='ADP_',sameString='Same_',similarString='Sim_LUST',omnitureString;if(!!($injectedData.useAssetService)){serverRequest='AS';}
if(!type){omnitureString=adpString+serverRequest+'|'+sameString+serverRequest+'|'+similarString;}else if(type==='KEYWORDS'){omnitureString='Sim_LUST';}else if(type==='SIMILARFILES'){omnitureString=sameString+serverRequest;}
return omnitureString;};_getCarouselDataSource=function(type){var searchTerm='',dataSources=carouselDataSource.split('|'),counter=0;if(type==='KEYWORDS'){searchTerm='Sim';}else if(type==='SIMILARFILES'){searchTerm='Same';}else{return'';}
while(dataSources[counter].indexOf(searchTerm)<0){counter++;}
return dataSources[counter];};_adpCarouselsLoad=function(args){var carouselType=_carouselTypeSanitized(args.carouselType);if(imageCarouselData.indexOf(carouselType)>-1){return;}
imageCarouselData.push(carouselType);var imageCarouselOmnitureString=imageCarouselData.join('|');s.prop62=imageCarouselOmnitureString;if(carouselLoadTimeout!==null){$timeout.cancel(carouselLoadTimeout);}
carouselLoadTimeout=$timeout(function(){s.t();carouselLoadTimeout=null;},2000);};_carouselTypeSanitized=function(carouselType){var carouselTypeCleansed='';switch(carouselType){case'KEYWORDS':carouselTypeCleansed='SimilarImages';break;case'SIMILARFILES':carouselTypeCleansed='SameSeries';break;case'XSELL':carouselTypeCleansed='CrossSell';break;}
return carouselTypeCleansed;};_adpCarouselSeeAllClick=function(args){s.events='event44';s.prop62=_carouselTypeSanitized(args.carouselType);s.linkTrackVars='events,prop62';s.linkTrackEvents='event44';if(args.carouselType==='KEYWORDS'||args.carouselType==='SIMILARFILES'){s.linkTrackVars+=',eVar47,eVar48';s.eVar47=_getRequestedServers(args.carouselType);s.eVar48=_getCarouselDataSource(args.carouselType);}
s.tl(true,'o','SeeAllClick');};_adpDropboxCtaClick=function(requestTitle){s.linkTrackEvents=s.events='event28';s.tl(true,'o',requestTitle);};_srpPageLoad=function(){_commonPageLoad();s.t();};_adpDownload=function(args){var asset=args.asset,user=args.user,assetId=args.assetId,downloadInfo=args.downloadInfo,creditsRemaining=args.creditsRemaining,segmentString=args.segmentString,classification='Creative';s.events='event4';s.prop59='adp|download';s.eVar39=segmentString;if(asset.presentation.editorialCaption){classification='Editorial';}
s.eVar13=[classification,asset.presentation.type,asset.presentation.bestMatchCollection].join('|');s.prop72=assetId;s.prop58=s.eVar58=creditsRemaining;if(downloadInfo.acquiredWithCredits){s.eVar62='Credits';s.events='event4,event23';s.products=';;;;event23='+downloadInfo.creditBurned+';;';}else{s.eVar62='Subscription';s.products=';SUBISTOCK1M';_setSubsProp(user);if(user.sub.autoRenewal===true){s.prop24+='|on';}else if(user.sub.autoRenewal===false){s.prop24+='|off';}}
if(downloadInfo.creditBurned===0&&!downloadInfo.acquiredUnderSubscription){s.events='event33';}
s.linkTrackVars='events,products,prop24,prop59,eVar13,eVar39,prop72,prop58,eVar62,prop65';s.linkTrackEvents='event4,event23,event33';s.tl('DownloadConfirm','o','DownloadConfirm');};_fileZoomClick=function(args){var asset=args.asset,classification='Creative';if(asset.presentation.editorialCaption){classification='Editorial';}
s.eVar13=[classification,asset.presentation.type,asset.presentation.bestMatchCollection].join('|');s.prop23='Zoom';s.linkTrackVars='prop23,eVar13,prop65';s.tl('ImageZoomADP','o','ImageZoomADP');};_toggleLightbox=function(args){var assetId=args.assetId,classification='Creative',assetIsEditorial=args.assetIsEditorial,assetType=args.assetType,assetCollection=args.assetCollection,appId=args.appId;if(appId==='srp'){if(assetIsEditorial){classification='Editorial';}
s.eVar13=[classification,assetType,assetCollection].join('|');s.prop56=assetId;s.linkTrackVars='prop56,eVar13';s.linkTrackVars+=','+_srpSearchDetails;s.events='event6,event62';s.linkTrackEvents='event6,event62';s.tl(true,'o','SRP-LightboxModalLoad');}};_createLightbox=function(args){var lightboxName=args.name,assetId=args.assetId||null,appId=args.appId;s.events='event5,event6';s.prop10=s.eVar10=lightboxName;s.linkTrackVars='events,prop10,eVar10,eVar13,prop65';if(assetId){s.prop56=assetId;s.linkTrackVars+=',prop56';}
s.linkTrackEvents='event5,event6';if(appId==='srp'){s.linkTrackVars+=','+_srpSearchDetails;s.tl(true,'o','SRP-AddCreateLightbox');}else{s.tl('LightboxCreate','o','LightboxCreate');}};_addToLightbox=function(args){var assetType=args.assetType,assetCollection=args.assetCollection,assetId=args.assetId,assetIsEditorial=args.assetIsEditorial,appId=args.appId,lightboxName=args.name,classification='Creative';s.prop10=s.eVar10=lightboxName;s.events='event5';s.prop72=s.prop56=assetId;if(assetIsEditorial){classification='Editorial';}
if(assetCollection==='Essentials'){assetCollection='Main';}
s.eVar13=[classification,assetType,assetCollection].join('|');s.linkTrackVars='events,prop10,prop72,eVar10,eVar13,prop65,prop56';s.linkTrackEvents='event5';if(appId==='srp'){s.linkTrackVars+=','+_srpSearchDetails;s.tl(true,'o','SRP-AddToLightbox');}else{s.tl('LightboxAdd','o','LightboxAdd');}};_savePageToLightbox=function(args){var lightboxName=args.name;s.prop10=s.eVar10=lightboxName;s.events='event37';s.linkTrackVars='events,prop10,eVar10';s.linkTrackEvents='event37';s.tl(true,'o','Save page');};_similarFileClick=function(args){s.events='event44';s.prop62=_carouselTypeSanitized(args.carouselType);s.linkTrackVars='events,prop62,prop65';s.linkTrackEvents='event44';if(args.carouselType==='KEYWORDS'||args.carouselType==='SIMILARFILES'){s.linkTrackVars+=',eVar47,eVar48';s.eVar47=_getRequestedServers(args.carouselType);s.eVar48=_getCarouselDataSource(args.carouselType);}
s.tl(true,'o','SimilarFileClick');};_portfolioLinkClick=function(args){s.pageName='iStock|Product|'+args.asset.presentation.type+'FCP';s.events='event28';s.channel=s.prop1=s.prop2='Product';s.prop4=args.asset.contributor.id;s.prop17=args.asset.contributor.username;s.prop56=args.assetId;s.linkTrackVars='events,channel,prop1,prop2,prop4,prop17,prop56,prop37,evar20';s.linkTrackEvents='event28';s.tl(true,'o','CopyrightName');};_setSubsProp=function(user){var daysRemaining,dlRemaining=user.sub.downloadsRemaining,expiryTimestamp=user.sub.expires,dlTotal=user.sub.downloadCount;daysRemaining=_findDaysBetween(expiryTimestamp);s.prop24=dlRemaining+'|'+dlTotal+'|'+daysRemaining;};_findDaysBetween=function(expiry){var dayMs=1000*60*60*24,difference,todayDate,futureDate;todayDate=new Date(Date.now()).getTime();futureDate=new Date(expiry).getTime();difference=futureDate-todayDate;return Math.round(difference/dayMs);};_toggleRefinePanel=function(refinePanelOpen){var name='SRP-RefinePanelClose';if(refinePanelOpen){name='SRP-RefinePanelOpen';}
s.linkTrackVars+=','+_srpSearchDetails;s.tl(true,'o',name);};_playAudioFile=function(){s.linkTrackVars+=','+_srpSearchDetails;s.tl(true,'o','AudioSRP-PlayFile');};_signInJoinPageLoad=function(){_commonPageLoad();s.t();};_checkCookie=function(name){var cookieValue=_getCookie(name);return(cookieValue!=='');};_getCookie=function(name){var cookieName=name+'=',cookieList=document.cookie.split(';'),i=0,cookie='';for(i=0;i<cookieList.length;i++){cookie=cookieList[i];while(cookie.charAt(0)===' '){cookie=cookie.substring(1);}
if(cookie.indexOf(cookieName)===0){return cookie.substring(cookieName.length,cookie.length);}}
return'';};_deleteCookie=function(name){document.cookie=name+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC ;domain=.istockphoto.com;path=/';};_scrollToTopArrowClick=function(eventName){s.linkTrackVars='events,prop4,prop11';s.linkTrackEvents=s.events='event28';s.tl(true,'o',eventName);};_weTransferModalOpen=function(){s.channel=s.prop1=s.eVar1=s.prop2=s.eVar2='Product';s.events='event28';s.linkTrackVars='events,channel,prop1,prop2,prop4,prop56,prop37,eVar20';s.linkTrackEvents='event28';s.tl(true,'o','WeTransfer');};_weTransferRequestSent=function(message){s.channel=s.prop1=s.eVar1=s.prop2=s.eVar2='Product';s.events='event49';s.prop19=message;s.linkTrackVars='events,channel,prop1,prop2,prop4,prop19,prop56,prop37,eVar20';s.linkTrackEvents='event49';s.tl(true,'o',message);};return{adpDownload:_adpDownload,adpPageLoad:_adpPageLoad,getRequestedServers:_getRequestedServers,getCarouselDataSource:_getCarouselDataSource,adpCarouselsLoad:_adpCarouselsLoad,adpCarouselSeeAllClick:_adpCarouselSeeAllClick,commonPageLoad:_commonPageLoad,addToLightbox:_addToLightbox,createLightbox:_createLightbox,ctaClick:_ctaClick,fileZoomClick:_fileZoomClick,savePageToLightbox:_savePageToLightbox,toggleLightbox:_toggleLightbox,similarFileClick:_similarFileClick,portfolioLinkClick:_portfolioLinkClick,adpDropboxCtaClick:_adpDropboxCtaClick,srpPageLoad:_srpPageLoad,toggleRefinePanel:_toggleRefinePanel,playAudioFile:_playAudioFile,srpSearchDetails:_srpSearchDetails,signInJoinPageLoad:_signInJoinPageLoad,checkCookie:_checkCookie,getCookie:_getCookie,deleteCookie:_deleteCookie,unisporkalRegistrationEvent:_unisporkalRegistrationEvent,scrollToTopArrowClick:_scrollToTopArrowClick,weTransferModalOpen:_weTransferModalOpen,weTransferRequestSent:_weTransferRequestSent};}]);}());(function(){'use strict';angular.module('common.services').factory('marketingTrackingService',['$document',function($document){var _signInLoad,_signInSuccess,_joinLoad,_joinSuccess,_signInJoinToggle;_signInLoad=function(){$document.trigger('marketing.signInLoad');};_signInSuccess=function(){$document.trigger('marketing.signInSuccess');};_joinLoad=function(){$document.trigger('marketing.joinLoad');};_joinSuccess=function(){$document.trigger('marketing.joinSuccess');};_signInJoinToggle=function(){$document.trigger('marketing.signInJoinToggle');};return{signInLoad:_signInLoad,signInSuccess:_signInSuccess,joinLoad:_joinLoad,joinSuccess:_joinSuccess,signInJoinToggle:_signInJoinToggle};}]);}());(function(){'use strict';angular.module('common.services').factory('accountService',['$q','ipCookie','OptionsRestangular','$injectedData','authorizationService',function($q,ipCookie,OptionsRestangular,$injectedData,authorizationService){var ACCOUNT_ENDPOINT='user/account',CONTRIBUTOR_ENDPOINT='portfolio-banner/userid',SUBTYPE_COOKIE='subtype',defer,accountData,attemptedRefreshes=0,self={getAccount:function(){var result;defer=$q.defer();if(!self.isLoggedIn()){defer.resolve(null);}else{if($injectedData.accountInfo){result=$injectedData.accountInfo;self.handleCookie(result);defer.resolve(result);attemptedRefreshes=0;}else{OptionsRestangular.getJavaRestConfig().one(ACCOUNT_ENDPOINT).get().then(function(account){self.setAccountData(account);defer.resolve(accountData);attemptedRefreshes=0;}).catch(function(error){if(error.status===401&&attemptedRefreshes<=1){attemptedRefreshes++;authorizationService.refreshToken().then(function(data){$injectedData.token=data.data.token;self.getAccount();}).catch(function(){accountData=error;defer.reject(error);});}else{accountData=error;defer.reject(error);}});}}
return defer.promise;},setAccountData:function(account){var result=account;result.hasSub=account.hasSubscription;result.numCredits=account.creditBalance;result.userId=account.istockUserId;if(account.hasSubscription){result.sub={type:account.subscriptionInfo.collectionName,downloadsRemaining:account.subscriptionInfo.downloadCountRemaining,downloadCount:account.subscriptionInfo.downloadCount,expires:account.subscriptionInfo.expiration,sku:account.subscriptionInfo.sku,duration:account.subscriptionInfo.duration,autoRenewal:account.subscriptionInfo.isAutoRenew};}
self.handleCookie(result);accountData=result;},getAccountData:function(){return accountData;},isLoggedIn:function(){return OptionsRestangular.userLoggedIn();},handleCookie:function(result){if(result.hasSub){if(!ipCookie(SUBTYPE_COOKIE)||(ipCookie(SUBTYPE_COOKIE)&&ipCookie(SUBTYPE_COOKIE)!==result.sub.type)){ipCookie(SUBTYPE_COOKIE,result.sub.type,{path:'/',expires:7});}}else if(ipCookie(SUBTYPE_COOKIE)){ipCookie.remove(SUBTYPE_COOKIE);}},getSubTypeCookie:function(){return ipCookie(SUBTYPE_COOKIE);},getContributorAccount:function(id){defer=$q.defer();OptionsRestangular.getPhpRestConfig().one(CONTRIBUTOR_ENDPOINT,id).get().then(function(response){defer.resolve(response);}).catch(function(error){defer.reject(error);});return defer.promise;}};return self;}]);}());(function(){'use strict';var APP=angular.module('common.services');APP.factory('OptionsRestangular',['Restangular','$injectedData','siteLang','siteRegion','resultsService','languageService',function(Restangular,$injectedData,siteLang,siteRegion,resultsService,languageService){var self={getQueryString:function(param){var href=window.location.href,reg=new RegExp('[?&]'+param+'=([^&#]*)','i'),string=reg.exec(href);if(string&&string[1]){return string[1];}
return null;},getJavaRestConfig:function(referer){return Restangular.withConfig(function(RestangularConfigurer){var headers={'Content-Type':'application/json','Accept-Language':languageService.getIETFCode(istock.siteLang),'X-Istock-Search-Token':self.getQueryString('st')||resultsService.getSearchToken(),'X-Search':!!($injectedData.useAssetService)};if($injectedData.token){headers.Authorization='Bearer '+$injectedData.token;headers['X-Istock-Auth']=$injectedData.token;}
if($injectedData.guid){headers['X-Istock-VID']=$injectedData.guid;}
headers['X-Istock-Region']=siteRegion;if(referer){headers['X-Previous-Url']=referer;}
RestangularConfigurer.setBaseUrl(istock.restUrl);RestangularConfigurer.setDefaultHeaders(headers);RestangularConfigurer.setDefaultHttpFields({cache:true});});},getJavaRestWithDescription:function(referer){return Restangular.withConfig(function(RestangularConfigurer){var headers={'Content-Type':'application/json','Accept-Language':languageService.getIETFCode(istock.siteLang),'X-Istock-Search-Token':self.getQueryString('st')||resultsService.getSearchToken(),'X-Istock-Include-Description':true,'X-Search':!!($injectedData.useAssetService)};if($injectedData.token){headers.Authorization='Bearer '+$injectedData.token;headers['X-Istock-Auth']=$injectedData.token;}
if($injectedData.guid){headers['X-Istock-VID']=$injectedData.guid;}
headers['X-Istock-Region']=siteRegion;if(referer){headers['X-Previous-Url']=referer;}
RestangularConfigurer.setBaseUrl(istock.restUrl);RestangularConfigurer.setDefaultHeaders(headers);RestangularConfigurer.setDefaultHttpFields({cache:true});});},getPhpRestConfig:function(sendLanguageHeader){return Restangular.withConfig(function(RestangularConfigurer){var headers={'Content-Type':'application/json'};if(sendLanguageHeader){headers['Accept-Language']=languageService.formatRegionLanguageCode(siteLang,siteRegion);}
RestangularConfigurer.setBaseUrl('/api/');RestangularConfigurer.setDefaultHeaders(headers);RestangularConfigurer.setDefaultHttpFields({cache:true});});},userLoggedIn:function(){return $injectedData.token!==null&&$injectedData.token!==undefined;},getJavaFullResponseConfig:function(referer){return Restangular.withConfig(function(RestangularConfigurer){var headers={'Content-Type':'application/json','Accept-Language':languageService.getIETFCode(istock.siteLang),'X-Istock-Search-Token':self.getQueryString('st')||resultsService.getSearchToken()};if($injectedData.token){headers.Authorization='Bearer '+$injectedData.token;headers['X-Istock-Auth']=$injectedData.token;}
if($injectedData.guid){headers['X-Istock-VID']=$injectedData.guid;}
headers['X-Istock-Region']=siteRegion;if(referer){headers['X-Previous-Url']=referer;}
RestangularConfigurer.setBaseUrl(istock.restUrl);RestangularConfigurer.setDefaultHeaders(headers);RestangularConfigurer.setFullResponse(true);RestangularConfigurer.setDefaultHttpFields({cache:true});});},getSearchConfig:function(){return Restangular.withConfig(function(RestangularConfigurer){var headers={'Content-Type':'application/json'};if(siteLang&&siteRegion){headers['Accept-Language']=languageService.formatCountryLanguage(siteLang,siteRegion);}
RestangularConfigurer.setDefaultHeaders(headers);});}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('gettyMasterIdService',['$q','OptionsRestangular',function($q,OptionsRestangular){var CONVERT_ID_ENDPOINT='assets/convert/afid',cachedData={},_getMasterId;_getMasterId=function(assetId){var defer=$q.defer();if(!(assetId in cachedData)){OptionsRestangular.getJavaRestConfig().one(CONVERT_ID_ENDPOINT,assetId).get().then(function(gettyObject){cachedData[assetId]=gettyObject;defer.resolve(cachedData[assetId]);},function(error){defer.reject(error);});}else{defer.resolve(cachedData[assetId]);}
return defer.promise;};return{getMasterId:_getMasterId};}]);}());(function(){'use strict';angular.module('common.services').factory('colorService',[function(){var self={isHexadecimalValue:function(hex){return/(^#?[0-9A-Fa-f]{6}$)/i.test(hex);},formatHexadecimalValue:function(hex){if(!self.isHexadecimalValue(hex)){return hex;}
return hex.replace('#','').toUpperCase();},getMostVisibleColor:function(hexadecimal,light,dark){if(!self.isHexadecimalValue(hexadecimal)){return light;}
var hex=self.formatHexadecimalValue(hexadecimal),r=parseInt(hex.substr(0,2),16),g=parseInt(hex.substr(2,2),16),b=parseInt(hex.substr(4,2),16),yiq=((r*299)+(g*587)+(b*114))/1000;return(yiq>=128)?dark:light;},rgbToHex:function(R,G,B){return'#'+self.toHex(R)+self.toHex(G)+self.toHex(B);},toHex:function(value){var hex='00';if(value===null||value<=0){return hex;}
hex=value.toString(16).toUpperCase();if(hex.length===1){hex='0'+hex;}
return hex;}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('categoriesService',['urlBuilder',function(urlBuilder){var self={categories:{'animals and pets':{urlTranslation:{'en_US':'animals+or+pets','de_DE':'tier+or+haustier','es_ES':'animal+or+animales+domésticos','fr_FR':'faune+ou+animaux+familiers','it_IT':'animale+or+animale+domestico','ja_JP':'動物+or+ペット','ko_KR':'동물+or+애완 동물','pl_PL':'zwierzę+or+pieszczochy','pt_BR':'animal+or+pet','pt_PT':'animal+or+pet','ru_RU':'животное+or+балует'}},'animals':{urlTranslation:{'en_US':'animals','de_DE':'tier','es_ES':'animal','fr_FR':'faune','it_IT':'animale','ja_JP':'動物','ko_KR':'동물','pl_PL':'zwierzę','pt_BR':'animal','pt_PT':'animal','ru_RU':'животное'}},'pets':{urlTranslation:{'en_US':'pets','de_DE':'haustier','es_ES':'animales+domésticos','fr_FR':'animaux+familiers','it_IT':'animale+domestico','ja_JP':'ペット','ko_KR':'애완 동물','pl_PL':'pieszczochy','pt_BR':'pet','pt_PT':'pet','ru_RU':'балует'}},'dogs':{urlTranslation:{'en_US':'dogs','de_DE':'hund','es_ES':'perro','fr_FR':'chien','it_IT':'cane','ja_JP':'犬','ko_KR':'축산','pl_PL':'dobytek','pt_BR':'criacão','pt_PT':'criacão','ru_RU':'фермерское+животное'}},'wild animals':{urlTranslation:{'en_US':'wild+animals','de_DE':'wildtier','es_ES':'salvaje','fr_FR':'faune+sauvage','it_IT':'selvaggio','ja_JP':'野生の生き物','ko_KR':'야외+동물','pl_PL':'dzika+fauna','pt_BR':'selvagem','pt_PT':'selvagem','ru_RU':'дикая+фауна'}},'architecture and buildings':{urlTranslation:{'en_US':'architecture','de_DE':'architektionisch','es_ES':'arquitectura','fr_FR':'architecture','it_IT':'architettura','ja_JP':'構築物','ko_KR':'건축','pl_PL':'architektura','pt_BR':'arquitetura','pt_PT':'arquitetura','ru_RU':'архитектура'}},'architecture':{urlTranslation:{'en_US':'architecture','de_DE':'architektionisch','es_ES':'arquitectura','fr_FR':'architecture','it_IT':'architettura','ja_JP':'構築物','ko_KR':'건축','pl_PL':'architektura','pt_BR':'arquitetura','pt_PT':'arquitetura','ru_RU':'архитектура'}},'arts abstract':{urlTranslation:{'en_US':'arts+abstract','de_DE':'kunst+abstrakt','es_ES':'arte+abstracto','fr_FR':'art+abstrait','it_IT':'arte+astratto','ja_JP':'美術+抽象的','ko_KR':'예술+추상적인','pl_PL':'sztuka+abstrakcyjny','pt_BR':'arte+abstrato','pt_PT':'arte+abstrato','ru_RU':'искусство+реферат'}},'beauty and health':{urlTranslation:{'en_US':'beauty+and+health','de_DE':'schönheit+and+gesundheit','es_ES':'belleza+and+salud','fr_FR':'beauté+et+santé','it_IT':'bellezza+and+salute','ja_JP':'美しさ+and+健康','ko_KR':'아름다움+and+피트니스','pl_PL':'piękno+and+zdrowy','pt_BR':'beleza+and+saúde','pt_PT':'beleza+and+saúde','ru_RU':'красота+and+здоровый'}},'beauty':{urlTranslation:{'en_US':'beauty','de_DE':'schönheit','es_ES':'belleza','fr_FR':'beauté','it_IT':'bellezza','ja_JP':'美しさ','ko_KR':'아름다움','pl_PL':'piękno','pt_BR':'beleza','pt_PT':'beleza','ru_RU':'красота'}},'body':{urlTranslation:{'en_US':'body','de_DE':'koerperteile','es_ES':'parte+del+cuerpo+humano','fr_FR':'corps','it_IT':'anatomia+umana','ja_JP':'人間の身体各部','ko_KR':'인체','pl_PL':'ludzkie+ciało','pt_BR':'corpo+humano','pt_PT':'corpo+humano','ru_RU':'человеческое+тело'}},'fashion':{urlTranslation:{'en_US':'fashion','de_DE':'mode','es_ES':'moda','fr_FR':'secteur+de+la+mode','it_IT':'moda','ja_JP':'ファッション','ko_KR':'패션','pl_PL':'fason','pt_BR':'moda+e+roupas','pt_PT':'moda+e+roupas','ru_RU':'мода'}},'medicine':{urlTranslation:{'en_US':'medicine','de_DE':'medikament','es_ES':'medicina','fr_FR':'médicament','it_IT':'medicina','ja_JP':'医薬品','ko_KR':'약','pl_PL':'medycyna','pt_BR':'remédio','pt_PT':'remédio','ru_RU':'медицина'}},'business':{urlTranslation:{'en_US':'business','de_DE':'geschaeftsleben','es_ES':'negocio','fr_FR':'affaires','it_IT':'affari','ja_JP':'びじねすこんせぷと','ko_KR':'비즈니스','pl_PL':'handlowy','pt_BR':'negócios','pt_PT':'negócios','ru_RU':'бизнес'}},'concepts and ideas':{urlTranslation:{'en_US':'concepts','de_DE':'konzepte','es_ES':'conceptos','fr_FR':'concepts','it_IT':'concetti','ja_JP':'コンセプト','ko_KR':'개념','pl_PL':'pojęcia','pt_BR':'conceitos','pt_PT':'conceitos','ru_RU':'концепции'}},'feelings and emotions':{urlTranslation:{'en_US':'emotions','de_DE':'gefühl','es_ES':'emoción+humana','fr_FR':'émotive','it_IT':'emozione','ja_JP':'ふるまい','ko_KR':'행위','pl_PL':'zachowanie','pt_BR':'comportamento','pt_PT':'emoção+humana','ru_RU':'поведение'}},'healthy lifestyle':{urlTranslation:{'en_US':'healthy+lifestyle','de_DE':'gesundheit','es_ES':'salud','fr_FR':'santé','it_IT':'salute','ja_JP':'健康','ko_KR':'피트니스','pl_PL':'zdrowy','pt_BR':'saúde','pt_PT':'saúde','ru_RU':'здоровый+обычай'}},'food and drink':{urlTranslation:{'en_US':'food+and+drink','de_DE':'essen+und+trinken','es_ES':'comida+y+bebida','fr_FR':'alimentation+et+boisson','it_IT':'cibo+e+bevande','ja_JP':'飲食','ko_KR':'음식과+음료','pl_PL':'jadło+i+pijają','pt_BR':'comida+e+bebida','pt_PT':'comida+e+bebida','ru_RU':'пища+и+пьют'}},'food':{urlTranslation:{'en_US':'food','de_DE':'essen','es_ES':'comida','fr_FR':'alimentation','it_IT':'cibo','ja_JP':'飲食','ko_KR':'음식과','pl_PL':'jadło','pt_BR':'comida','pt_PT':'comida','ru_RU':'пища'}},'holidays':{urlTranslation:{'en_US':'holidays','de_DE':'feiertag','es_ES':'celebraciones+públicas','fr_FR':'évènement+public','it_IT':'festa','ja_JP':'祝賀行事','ko_KR':'holidays','pl_PL':'święto','pt_BR':'holidays','pt_PT':'feriado','ru_RU':'праздник'}},'celebration':{urlTranslation:{'en_US':'holidays','de_DE':'feiertag','es_ES':'celebraciones+públicas','fr_FR':'évènement+public','it_IT':'festa','ja_JP':'祝賀行事','ko_KR':'holidays','pl_PL':'święto','pt_BR':'holidays','pt_PT':'feriado','ru_RU':'праздник'}},'health care':{urlTranslation:{'en_US':'healthcare','de_DE':'gesundheitsfuersorge','es_ES':'medico','fr_FR':'médecine','it_IT':'medicina','ja_JP':'薬と健康管理','ko_KR':'치료','pl_PL':'zdrowy','pt_BR':'saudáveis','pt_PT':'saudáveis','ru_RU':'здоровый'}},'lifestyle':{urlTranslation:{'en_US':'lifestyle','de_DE':'lebensstil','es_ES':'estilos+de+vida','fr_FR':'style+de+vie','it_IT':'stili+di+vita','ja_JP':'ライフスタイル','ko_KR':'생활+방식','pl_PL':'życie','pt_BR':'estilo+de+vida','pt_PT':'estilos+de+vida','ru_RU':'стиль+живущего'}},'babies':{urlTranslation:{'en_US':'babies','de_DE':'baby','es_ES':'bebé','fr_FR':'bébé','it_IT':'infante','ja_JP':'赤ちゃん','ko_KR':'아기','pl_PL':'niemowlę','pt_BR':'bebê','pt_PT':'bebê','ru_RU':'младенец'}},'children':{urlTranslation:{'en_US':'children','de_DE':'kind','es_ES':'niño','fr_FR':'enfant','it_IT':'bambino','ja_JP':'子供','ko_KR':'아이','pl_PL':'dziecko','pt_BR':'criança','pt_PT':'criança','ru_RU':'ребенок'}},'family':{urlTranslation:{'en_US':'families','de_DE':'familie','es_ES':'familias','fr_FR':'famille','it_IT':'famiglia','ja_JP':'家族','ko_KR':'가족','pl_PL':'rodzina','pt_BR':'família','pt_PT':'familia','ru_RU':'семья'}},'medicine and science':{urlTranslation:{'en_US':'medicine+science','de_DE':'medikament+or+wissenschaft','es_ES':'medicina+or+ciencia','fr_FR':'médicament+ou+science','it_IT':'medicina+or+scienza','ja_JP':'医薬品+or+科学','ko_KR':'약+or+과학','pl_PL':'medycyna+or+nauka','pt_BR':'remédio+or+ciência','pt_PT':'remédio+or+ciência','ru_RU':'медицина+or+наука'}},'medical':{urlTranslation:{'en_US':'medical','de_DE':'medizin','es_ES':'medico','fr_FR':'médecine','it_IT':'medicina','ja_JP':'薬と健康管理','ko_KR':'치료','pl_PL':'medyczny','pt_BR':'saudável','pt_PT':'medicina','ru_RU':'медицинский'}},'research':{urlTranslation:{'en_US':'research','de_DE':'forschen','es_ES':'Investigación','fr_FR':'recherche','it_IT':'ricerca','ja_JP':'研究','ko_KR':'연구','pl_PL':'badanie','pt_BR':'pesquisa','pt_PT':'pesquisa','ru_RU':'исследование'}},'nature':{urlTranslation:{'en_US':'nature','de_DE':'natur','es_ES':'naturaleza','fr_FR':'nature','it_IT':'natura','ja_JP':'自然','ko_KR':'자연','pl_PL':'natura','pt_BR':'natureza','pt_PT':'natureza','ru_RU':'природа'}},'flowers':{urlTranslation:{'en_US':'flowers','de_DE':'blume','es_ES':'flor','fr_FR':'fleur','it_IT':'fiore','ja_JP':'ハナヲツケナガラ','ko_KR':'꽃','pl_PL':'kwiat','pt_BR':'flor','pt_PT':'flor','ru_RU':'цветок'}},'landscapes':{urlTranslation:{'en_US':'landscapes','de_DE':'landschaft','es_ES':'paisaje','fr_FR':'paysage','it_IT':'paesaggio','ja_JP':'自然の風景','ko_KR':'풍경','pl_PL':'krajobraz','pt_BR':'paisagem','pt_PT':'paisagem','ru_RU':'пейзаж'}},'people':{urlTranslation:{'en_US':'people','de_DE':'menschen','es_ES':'personas','fr_FR':'personne','it_IT':'persone','ja_JP':'人','ko_KR':'사람','pl_PL':'ludzie','pt_BR':'pessoas','pt_PT':'pessoas','ru_RU':'люди'}},'sports':{urlTranslation:{'en_US':'sports','de_DE':'sport','es_ES':'deportes','fr_FR':'sport','it_IT':'sport','ja_JP':'スポーツ','ko_KR':'스포츠','pl_PL':'zabawa','pt_BR':'esporte','pt_PT':'desporto','ru_RU':'спорт'}},'fitness':{urlTranslation:{'en_US':'fitness','de_DE':'durchtrainiertem','es_ES':'entrenamientos','fr_FR':'exercice+physique','it_IT':'riscaldamento','ja_JP':'わーくあうと','ko_KR':'운동','pl_PL':'fizyczny+ruch','pt_BR':'exercitam','pt_PT':'malhação','ru_RU':'личная+пригодность+обучение'}},'technology':{urlTranslation:{'en_US':'technology','de_DE':'technologie','es_ES':'tecnología','fr_FR':'technologie','it_IT':'tecnologia','ja_JP':'ギジュツ','ko_KR':'기술','pl_PL':'technologia','pt_BR':'tecnologia','pt_PT':'tecnologia','ru_RU':'технология'}},'travel':{urlTranslation:{'en_US':'travel','de_DE':'reisen','es_ES':'viajes','fr_FR':'voyage','it_IT':'viaggi','ja_JP':'旅行','ko_KR':'여행','pl_PL':'przesuw','pt_BR':'viagem','pt_PT':'viagem','ru_RU':'путешествие'}},'landmarks':{urlTranslation:{'en_US':'landmarks','de_DE':'sehenswürdigkeit','es_ES':'lugar+de+interés','fr_FR':'lieu+touristique','it_IT':'luogo+d\'interesse','ja_JP':'観光地','ko_KR':'유명한+장소','pl_PL':'miejsce+zainteresowania','pt_BR':'ponto+tturístico','pt_PT':'lugar+de+interesse','ru_RU':'место+представляющее+интерес'}}},translate:function(category){var str=category.toLowerCase(),url='',categoryInfo=self.categories[str];if(istock.locale&&categoryInfo){url=categoryInfo.urlTranslation[istock.locale];}
if(url===''){url=str.replace(/\s/g,'+');}
return url;},categoryUrl:function(category){var baseUrl='/royalty-free/'+self.translate(category),siteInfix=urlBuilder.getUrlInfix();if(siteInfix){return siteInfix.toLowerCase()+baseUrl;}else{return baseUrl;}}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('assetService',['$q','OptionsRestangular',function($q,OptionsRestangular){var ASSETS_ENDPOINT='assets',rest,cachedData={},_getDeferred,_getAsset;_getAsset=function(gettyId,hasCookie,user){var defer=$q.defer(),referer=document.referrer;if(!(gettyId in cachedData)){if(!hasCookie&&user===null){rest=OptionsRestangular.getJavaRestWithDescription(referer);}else{rest=OptionsRestangular.getJavaRestConfig(referer);}
rest.one(ASSETS_ENDPOINT,gettyId).get().then(function(asset){cachedData[gettyId]=asset;defer.resolve(cachedData[gettyId]);},function(error){defer.reject(error);});}else{defer.resolve(cachedData[gettyId]);}
return defer.promise;};return{getAsset:_getAsset,getDeferred:_getDeferred};}]);}());(function(){'use strict';angular.module('common.services').factory('legacyFacetService',['facetStateService',function(facetStateService){var self={facetMapping:{0:'searchId',2:'lightboxID',3:'portfolioID',4:'color',5:'copySpace',6:'activeStatus',7:'fileCollection',9:'filterContent',12:'showPeople',15:'tempo',16:'audioKey',17:'timeSignature1',18:'timeSignature2',19:'date',20:'orientation',21:'exclusiveContributor',25:'order',26:'bestMatchMix',30:'perPage',34:'abstractType',35:'text',36:'textDisambiguation',39:'pageNumber',40:'noCache',41:'photoSize',42:'vectorPrice',44:'videoSize',45:'audioPrice',46:'priceLevel',47:'editorsPick',50:'fileIdSet',51:'decoration',52:'subscriptionCollection',53:'loginToken',54:'keywordLanguage',55:'deduplicate',56:'gettyMasterIdSet',57:'similarity',420:'exclusiveEditorsPickVetta',1002:'countryID',1003:'additionalAudio',1004:'editorial',1006:'shuffleFiletypeCycle',1008:'adminSearch',1009:'userPartition',1010:'shufflePriceLevelCycle',1012:'aspectRatioVideo',3001:'latestFiles',3003:'filterVector',3004:'keywordRankAdjustment',3005:'collectionPrice'},optionsMapping:{editorsPick:{0:'false',1:'true'},noCache:{0:'false',1:'true'},filterVector:{0:'false',1:'true'},exclusiveEditorsPickVetta:{1:'onlyFromIstock',2:'editorsPick',4:'vetta'},photoSize:{1:'xl',2:'large',3:'medium',4:'small',10:'xxl',35:'xsmall',85:'xxxl'},fileCollection:{2:'essentials',4:'vetta',8:'value',9:'signature',16:'signature+'},abstractType:{1:'photos',7:'illustrations',8:'video',9:'audio'},order:{4:'new',6:'bestMatch',7:'yearPopular',10:'bestMatchAlternate',12:'allTimePopular',13:'monthPopular'},editorial:{0:false,1:true},collectionPrice:{1:'essentials',2:'signature'},exclusiveContributor:{0:false,1:true},showPeople:{0:false,1:true},filterContent:{0:false,1:true},orientation:{1:'vertical',2:'square',4:'horizontal'},aspectRatioVideo:{1:'4:3',2:'16:9'},videoSize:{18:'ntsc',21:'pal',23:'hd1080',24:'hd720',33:'dv'},tempo:{1:'all',2:'very slow',3:'slow',4:'medium',5:'fast',6:'very fast'},audioKey:{0:'all',1:'undefined',2:'A',3:'A major',4:'A minor',5:'A flat',6:'A flat major',7:'A flat minor',8:'B',9:'B major',10:'B minor',11:'B flat',12:'B flat major',13:'B flat minor',14:'C',15:'C major',16:'C minor',17:'C sharp',18:'C sharp major',19:'C sharp minor',20:'D',21:'D major',22:'D minor',23:'E',24:'E major',25:'E minor',26:'E flat',27:'E flat major',28:'E flat minor',29:'F',30:'F major',31:'F minor',32:'F sharp',33:'F sharp major',34:'F sharp minor',35:'G',36:'G major',37:'G minor'},audioPrice:{68:'basic',75:'moderate',102:'detailed',77:'complex',79:'elaborate'},subscriptionCollection:{standard:'standard'},date:{1:'oneHour',2:'oneDay',3:'oneWeek',4:'oneMonth',5:'threeMonths',6:'sixMonths'}},initFromLegacyFacets:function(legacyFacets){var name='',option='',tempArray=[];angular.forEach(legacyFacets,function(value,key){name=self.facetMapping[key];if(angular.isArray(facetStateService.getFacet(name))&&!angular.isArray(value)){tempArray.push(value);value=tempArray;tempArray=[];}
if(self.optionsMapping[name]){if(angular.isArray(value)){angular.forEach(value,function(v){option=self.optionsMapping[name][v];if(option!==undefined){facetStateService.setFacetOption(name,option,true);}});}else{option=self.optionsMapping[name][value];if(option!==undefined){facetStateService.setFacetOption(name,option,true);}}}else if(name!==undefined){switch(typeof facetStateService.getFacet(name)){case'number':value=Number(value);break;case'boolean':value=value==='true';break;}
facetStateService.setFacet(name,value);}});self.setAppropriateAbstractFileType();},setAppropriateAbstractFileType:function(){var images=facetStateService.hasActiveFacets(facetStateService.imagesFacets),audio=facetStateService.hasActiveFacets(facetStateService.audioFacets),video=facetStateService.hasActiveFacets(facetStateService.videoFacets),abstractType=facetStateService.getFacet('abstractType'),fileType=facetStateService.getActiveValues('abstractType');if(fileType.length===1){if((fileType.indexOf('photos')!==-1||fileType.indexOf('illustrations')!==-1)&&(audio||video)){facetStateService.clearFileTypeFacetGroups('images');abstractType.audio=false;abstractType.video=false;}else{if(fileType.indexOf('video')!==-1&&(images||audio)){facetStateService.clearFileTypeFacetGroups('video');abstractType.audio=false;abstractType.photos=false;abstractType.illustrations=false;}else if(fileType.indexOf('audio')!==-1&&(images||video)){facetStateService.clearFileTypeFacetGroups('audio');abstractType.video=false;abstractType.photos=false;abstractType.illustrations=false;}}}else{if(images+audio+video>1){facetStateService.setFileTypeToDefault();facetStateService.clearFileTypeFacetGroups('images');}else if(images){abstractType.photos=true;abstractType.illustrations=true;abstractType.video=false;abstractType.audio=false;}else if(audio){abstractType.audio=true;abstractType.photos=false;abstractType.illustrations=false;abstractType.video=false;}else if(video){abstractType.video=true;abstractType.audio=false;abstractType.photos=false;abstractType.illustrations=false;}else{if(fileType.length>1){facetStateService.setFileTypeToDefault();}}}}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('dropboxService',['$q','OptionsRestangular','dropboxErrorHandlerService',function($q,OptionsRestangular,dropboxErrorHandlerService){var DROPBOX_ENDPOINT='oauthclient/dropbox',DROPBOX_ASSETPUSH_ENDPOINT='user/preference/assetpush';return{getAuthenticationUrl:function(dropboxKey,state,redirectUri){var metaLang=angular.element('html').attr('lang').split('-')[0].toLowerCase();return['https://www.dropbox.com/1/oauth2/authorize','?response_type=code&client_id=',dropboxKey,'&redirect_uri=',redirectUri,'&locale=',metaLang,'&state=',state].join('');},connectAccount:function(code,redirectUri){var unencodedDropboxData={'code':code,'redirect_uri':redirectUri},params,str=[],deferred=$q.defer();for(params in unencodedDropboxData){if(params!==undefined){str.push(encodeURIComponent(params)+'='+encodeURIComponent(unencodedDropboxData[params]));}}
str=str.join('&');OptionsRestangular.getJavaRestConfig().one(DROPBOX_ENDPOINT).customPOST(str,null,null,{'Content-Type':'application/x-www-form-urlencoded'}).then(function(response){if(response.status===201){deferred.resolve({'connected':true,'timeStamp':response.data});}},function(error){deferred.reject({'connected':false,'error':error,'message':dropboxErrorHandlerService.getErrorMessage(error.status)});});return deferred.promise;},disconnectAccount:function(){var deferred=$q.defer();OptionsRestangular.getJavaRestConfig().one(DROPBOX_ENDPOINT).remove().then(function(response){if(response.status===200){deferred.resolve({'disconnected':true});}},function(error){deferred.reject({'disconnected':false,'error':error,'message':dropboxErrorHandlerService.getErrorMessage(error.status)});});return deferred.promise;},getAccountStatus:function(){var deferred=$q.defer();OptionsRestangular.getJavaRestConfig().one(DROPBOX_ENDPOINT).get().then(function(response){if(response.status===200){deferred.resolve({'connected':true});}},function(error){if(error.status===404){deferred.resolve({'connected':false});}else{deferred.reject({'connected':false,'message':dropboxErrorHandlerService.getErrorMessage(error.status)});}});return deferred.promise;},setAssetPushStatus:function(backUpFutureDownloads,daysBack){var settings={'Dropbox':{'backUpFutureDownloads':backUpFutureDownloads,'daysBack':daysBack}},deferred=$q.defer();OptionsRestangular.getJavaRestConfig().one(DROPBOX_ASSETPUSH_ENDPOINT).customPUT(settings).then(function(response){if(response.status===200){deferred.resolve({'updated':true});}},function(error){deferred.reject({'updated':false,'message':dropboxErrorHandlerService.getErrorMessage(error.status)});});return deferred.promise;},getAssetPushStatus:function(){var deferred=$q.defer();OptionsRestangular.getJavaRestConfig().one(DROPBOX_ASSETPUSH_ENDPOINT).get().then(function(response){if(response.status===200){deferred.resolve({'error':false,'daysBack':response.data.Dropbox.daysBack,'downloadsFromDate':response.data.Dropbox.backUpFutureLastSet,'lastUpdateDate':response.data.Dropbox.daysBackSettingLastSet});}},function(error){deferred.resolve({'error':true,'message':dropboxErrorHandlerService.getErrorMessage(error.status)});});return deferred.promise;},getErrorMessages:function(statusCodes){return dropboxErrorHandlerService.getErrorMessages(statusCodes);}};}]);}());(function(){'use strict';angular.module('common.services').factory('dropboxErrorHandlerService',['ERROR_MESSAGING','$filter',function(ERROR_MESSAGING,$filter){var self={getErrorMessage:function(statusCode){var errorMessage='';switch(statusCode){case 400:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.DROPBOX_ALREADY_CONNECTED,statusCode);break;case 403:case 401:case 502:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.OAUTH_TOKEN_BROKEN,statusCode);break;case 429:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.API_LIMIT_ERROR,'/contact_ticket',statusCode);break;case 507:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.STORAGE_FULL,statusCode);break;case 404:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.SERVER_ERROR,'/contact_ticket',statusCode);break;default:errorMessage=$filter('i18n')(ERROR_MESSAGING.DROPBOX_ERROR.ERROR,'/contact_ticket');}
return errorMessage;},getErrorMessages:function(statusCodes){var message=[];angular.forEach(statusCodes,function(statusCode){message.push(self.getErrorMessage(statusCode));});return message.join('<br><br>');}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('imagePreloadService',['$q','$timeout','PRELOAD_IMAGES',function($q,$timeout,PRELOAD_IMAGES){var _getPreLoadingImage;_getPreLoadingImage=function(srcUrl,timoutValue){var deferred=$q.defer(),promise,image=new Image(),preLoadingImage={state:PRELOAD_IMAGES.LOADING,image:image},_init,_timer,_loadComplete,_loadError,_timeOut,_dispose;_loadComplete=function(){preLoadingImage.state=PRELOAD_IMAGES.COMPLETE;_dispose();deferred.resolve(preLoadingImage);};_loadError=function(){preLoadingImage.state=PRELOAD_IMAGES.ERROR;preLoadingImage.image=null;_dispose();deferred.resolve(preLoadingImage);};_timeOut=function(){if(image!==null){preLoadingImage.state=PRELOAD_IMAGES.TIMEOUT;preLoadingImage.image=null;_dispose();deferred.resolve(preLoadingImage);}};_dispose=function(){if(typeof _timer!=='undefined'&&_timer!==null){$timeout.cancel(_timer);_timer=null;}
if((typeof image!=='undefined')&&image!==null){image.removeEventListener('load',_loadComplete,true);image.removeEventListener('error',_loadError,true);image=null;}};_init=function(){image.addEventListener('load',_loadComplete,true);image.addEventListener('error',_loadError,true);image.src=srcUrl;if(image.complete){preLoadingImage.state=PRELOAD_IMAGES.COMPLETE;promise=$q.when(preLoadingImage);_dispose();}else{promise=deferred.promise;_timer=$timeout(_timeOut,timoutValue);}};_init();return promise;};return{getPreLoadingImage:_getPreLoadingImage};}]);}());(function(){'use strict';var RENDER_DELAY=100,DOCUMENT_DELAY=2000;angular.module('common.services').factory('lazyImageService',['$document','$window','$timeout',function($document,$window,$timeout){var renderDelay=RENDER_DELAY,documentDelay=DOCUMENT_DELAY,documentHeight=$document.height(),win=angular.element($window),isWatchingWindow=false,renderTimer=null,documentTimer=null,self={enabled:false,images:[],prioritizeFirstBatch:false,addImage:function(element,onLoad,tag){var image={source:null,isRendered:false,height:null,element:element,tag:tag||'src',onLoad:onLoad};self.images.push(image);if(!renderTimer){self.startRenderTimer();}
if(!isWatchingWindow){self.startWatchingWindow();}
return image;},removeImage:function(image){var index=self.images.indexOf(image);if(index!==-1){self.images.splice(index,1);}
if(self.images.length===0){self.clearRenderTimer();self.stopWatchingWindow();}},checkDocumentHeight:function(){var currentDocumentHeight=$document.height();if(renderTimer||currentDocumentHeight===documentHeight){return;}
documentHeight=currentDocumentHeight;self.startRenderTimer();},checkImages:function(){var visible=[],hidden=[],windowHeight=win.height(),scrollTop=win.scrollTop(),topFoldOffset=scrollTop,bottomFoldOffset=(topFoldOffset+windowHeight);angular.forEach(self.images,function(image){if(self.isVisible(image,topFoldOffset,bottomFoldOffset)){visible.push(image);}else{hidden.push(image);}});var visibleCount=visible.length;angular.forEach(visible,function(img){self.render(img);if(self.prioritizeFirstBatch){img.element.load(function(){visibleCount--;if(visibleCount===0){angular.forEach(self.images,function(img){self.render(img);});self.images=[];self.clearRenderTimer();self.stopWatchingWindow();}});}});self.images=hidden;self.clearRenderTimer();if(self.images.length===0){self.stopWatchingWindow();}},clearRenderTimer:function(){if(renderTimer){$timeout.cancel(renderTimer);renderTimer=null;}},startRenderTimer:function(){if(renderTimer===null){renderTimer=$timeout(self.checkImages,renderDelay);}},startWatchingWindow:function(){if(!isWatchingWindow){isWatchingWindow=true;win.on('resize.lazySrc',self.windowChanged);win.on('scroll.lazySrc',self.windowChanged);documentTimer=$timeout(self.checkDocumentHeight,documentDelay);}},stopWatchingWindow:function(){if(isWatchingWindow){isWatchingWindow=false;win.off('resize.lazySrc');win.off('scroll.lazySrc');$timeout.cancel(documentTimer);}},windowChanged:function(){if(renderTimer===null){self.startRenderTimer();}},isVisible:function(image,topFoldOffset,bottomFoldOffset){var top,bottom;if(!image.element.is(':visible')){return false;}
if(image.height===null){image.height=image.element.height();}
top=image.element.offset().top;bottom=(top+image.height);return(((top<=bottomFoldOffset)&&(top>=topFoldOffset))||((bottom<=bottomFoldOffset)&&(bottom>=topFoldOffset))||((top<=topFoldOffset)&&(bottom>=bottomFoldOffset)));},render:function(image){image.isRendered=true;self.renderSource(image);},setSource:function(image,newSource){image.source=newSource;if(!self.enabled||image.isRendered){self.renderSource(image);}},renderSource:function(imageData){var image;if(self.enabled){image=new Image();image.onload=imageData.onLoad;image.src=imageData.source;}
imageData.element.attr(imageData.tag,imageData.source);}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('flattenService',[function(){var flatten,unflatten,isObject,SEPARATOR='.';isObject=function(value){var type=Object.prototype.toString.call(value);return(type==='[object Object]'||type==='[object Array]');};flatten=function(target){var output={},step;step=function(obj,prev){Object.keys(obj).forEach(function(key){var value=obj[key],newKey=key;if(prev){newKey=[prev,key].join(SEPARATOR);}
if(isObject(value)&&Object.keys(value).length){return step(value,newKey);}
output[newKey]=value;});};step(target);return output;};unflatten=function(target){var result={},getKey;if(!isObject(target)){return target;}
getKey=function(key){var parsedKey=Number(key);if(isNaN(parsedKey)||key.indexOf(SEPARATOR)!==-1){return key;}else{return parsedKey;}};Object.keys(target).forEach(function(key){var keys=key.split(SEPARATOR),key1=getKey(keys.shift()),key2=getKey(keys[0]),container=result;while(typeof key2!=='undefined'){if(typeof container[key1]==='undefined'){if(typeof key2==='number'){container[key1]=[];}else{container[key1]={};}}
container=container[key1];if(keys.length>0){key1=getKey(keys.shift());key2=getKey(keys[0]);}}
container[key1]=unflatten(target[key]);});return result;};return{flatten:flatten,unflatten:unflatten};}]);}());(function(){'use strict';angular.module('common.services').factory('hashService',[function(){var hashCode;hashCode=function(str){var hash=0,i,chr,len;if(str.length===0){return hash;}
for(i=0,len=str.length;i<len;i++){chr=str.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0;}
return hash;};return{hashCode:hashCode};}]);}());(function(){'use strict';angular.module('common.services').factory('boomerangService',['$q','$window','accountService',function($q,$window,accountService){var methods,timers=[];methods={initBoomerang:function(target,targetURLContains){if($window.BOOMR&&target){var IstockTimingConfig={},isLoggedIn=accountService.isLoggedIn()||false,pluginObject={'is_complete':function(){return checkDone();}};$window.BOOMR.plugins.iStockNG=pluginObject;$window.BOOMR.addVar('ng_is_logged_in',(isLoggedIn)?1:0);if(targetURLContains!==undefined){IstockTimingConfig.targetElementsURLContains=targetURLContains;IstockTimingConfig.pageType=target;}
$window.BOOMR.init({'beacon_url':'/boomerang/'+target,log:null,IstockTiming:IstockTimingConfig});}},startRoundTripTimer:function(timerName){if($window.BOOMR&&$window.BOOMR.plugins&&$window.BOOMR.plugins.RT){$window.BOOMR.plugins.RT.startTimer(timerName);}},endRoundTripTimer:function(timerName){if($window.BOOMR&&$window.BOOMR.plugins&&$window.BOOMR.plugins.RT){$window.BOOMR.plugins.RT.endTimer(timerName);}},createTimer:function(type,subtype,startTime){var deferred=$q.defer(),timer={type:type,subtype:subtype,st:startTime||new Date().valueOf(),end:null};timers.push(timer);deferred.promise.then(function(value){timer.end=value||new Date().valueOf();checkTimeEnd();},function(){var i=timers.indexOf(timer);timers.splice(i,1);checkTimeEnd();});return{finish:function(value){deferred.resolve(value);},cancel:function(reason){deferred.reject(reason);},promise:deferred.promise};},getTimers:function(){return timers;}};function checkTimeEnd(){if(!checkDone()){return false;}
$window.BOOMR.addVar('ng_data',JSON.stringify(timers));$window.BOOMR.sendBeacon();return true;}
function checkDone(){for(var i=0;i<timers.length;i++){var timer=timers[i];if(!timer.st||!timer.end){return false;}}
return true;}
return methods;}]);}());(function(){'use strict';angular.module('common.services').factory('formFieldsValidatorService',['$window','$location','userService','urlBuilder',function($window,$location,userService,urlBuilder){var self={getRedirectUrl:function(){var redirectUrl=$window.location.pathname;return $location.protocol()+'://'+$location.host()+
urlBuilder.buildReturnUrl('sign-in',redirectUrl,true);},checkUserEmailNotExists:function(email){if(email){return userService.isAlreadyUser(email).then(function(status){return!status;},function(){return true;});}
return true;},checkPasswordLength:function(password){var valid=true;if(password){if(password.length<8){valid=false;}}else{valid=false;}
return valid;},checkPasswordCharacters:function(password){var valid=true;if(password){if((password.search(/\d/)===-1)||(password.search(/[a-z]|[A-Z]/)===-1)){valid=false;}}else{valid=false;}
return valid;},checkSpacesInPassword:function(password){var valid=true;if(password){if(/^\s/.test(password)||/\s$/.test(password)){valid=false;}}else{valid=false;}
return valid;},checkEmailNotInPassword:function(email,password){var valid=true,beforeSymbol='',foundEmailInPassword=false;if(email){if(password){beforeSymbol=email.split('@',1)[0];foundEmailInPassword=(password.indexOf(beforeSymbol)>-1);valid=!foundEmailInPassword;}else{valid=false;}}
return valid;},checkCountrySelected:function(country){return country&&angular.isDefined(country.ID);},emailValidation:function(emailValue){var emailRegex,response=false;if(!emailValue){return true;}
if(emailValue!==undefined){emailRegex=new RegExp(['^[-a-z0-9~!$%^&*_=+}{\\\'?]+(\\.[-a-z0-9~!$%^&*_=+}{\\\'?]+)*','@([a-z0-9_][-a-z0-9_]*(\\.[-a-z0-9_]+)*\\.','(aero|arpa|biz|com|coop|edu|gov|info|int|mil','|museum|name|net|org|pro|travel|mobi|[a-z][a-z])','|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(:[0-9]{1,5})?$'].join(''));response=emailRegex.test(emailValue.toLowerCase());}
return response;}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('lightboxService',['$q','OptionsRestangular','arrayHelperService',function($q,OptionsRestangular,arrayHelperService){var LIGHTBOX_ENDPOINT='favorites',ASSETS_ENDPOINT='assets',SEARCH_ENDPOINT='search',defers={},self={searchedBoxes:{favorites:[]},defaultNameCount:0,incrementDefaultNameCount:function(){self.defaultNameCount++;return self.defaultNameCount;},getLightboxInfo:function(lightboxId){var deferred=$q.defer();OptionsRestangular.getJavaRestConfig().one(LIGHTBOX_ENDPOINT).withHttpConfig({ignoreLoadingBar:true}).customGET(lightboxId).then(function(response){deferred.resolve(response);},function(response){deferred.reject(response);});return deferred.promise;},searchLightboxes:function(assets,pageNumber,itemsPerPage,includeAll){var deferred=$q.defer(),data;data={pageNumber:pageNumber,itemsPerPage:itemsPerPage,includeAll:includeAll,assets:assets};OptionsRestangular.getJavaRestConfig().one(LIGHTBOX_ENDPOINT).one(SEARCH_ENDPOINT).withHttpConfig({ignoreLoadingBar:true}).customPOST(data).then(function(response){deferred.resolve(response);if(includeAll){self.searchedBoxes=response;}},function(response){deferred.reject(response);});return deferred.promise;},createLightbox:function(newName){var data={name:newName};if(!(newName in defers)){defers[newName]=$q.defer();self.searchLightboxes([],1,1,true).then(function(){OptionsRestangular.getJavaFullResponseConfig().one(LIGHTBOX_ENDPOINT).withHttpConfig({ignoreLoadingBar:true}).customPOST(data).then(function(response){var location=response.headers('Location'),lightboxId=parseInt(location.substr(location.lastIndexOf('/')+1));self.searchedBoxes.favorites.unshift({name:newName,id:lightboxId,assets:[]});defers[newName].resolve(lightboxId);},function(){defers[newName].reject();});}).catch(function(){defers[newName].reject();});}
return defers[newName].promise;},addToLightbox:function(lightboxId,gettyMasterIds){var deferred=$q.defer(),referer=document.referrer;self.searchLightboxes([],1,1,true).then(function(){OptionsRestangular.getJavaRestConfig(referer).one(LIGHTBOX_ENDPOINT,lightboxId).all(ASSETS_ENDPOINT).withHttpConfig({ignoreLoadingBar:true}).customPOST(gettyMasterIds).then(function(){for(var i=0;i<self.searchedBoxes.favorites.length;++i){if(self.searchedBoxes.favorites[i].id===lightboxId&&!arrayHelperService.containsArray(self.searchedBoxes.favorites[i].assets,gettyMasterIds)){self.searchedBoxes.favorites[i].assets=arrayHelperService.unique(self.searchedBoxes.favorites[i].assets.concat(gettyMasterIds));self.searchedBoxes.favorites.unshift(self.searchedBoxes.favorites.splice(i,1)[0]);break;}}
deferred.resolve();},function(response){deferred.reject(response);});});return deferred.promise;},removeFromLightbox:function(lightboxId,gettyMasterIds){var deferred=$q.defer();self.searchLightboxes([],1,1,true).then(function(){OptionsRestangular.getJavaRestConfig().one(LIGHTBOX_ENDPOINT,lightboxId).one(ASSETS_ENDPOINT).withHttpConfig({ignoreLoadingBar:true}).customPUT({toRemove:gettyMasterIds}).then(function(){for(var i=0;i<self.searchedBoxes.length;++i){if(self.searchedBoxes[i].id===lightboxId&&!arrayHelperService.containsArray(self.searchedBoxes.favorites[i].assets,gettyMasterIds)){arrayHelperService.removeFromArray(self.searchedBoxes.favorites[i].assets,gettyMasterIds);break;}}
deferred.resolve();},function(response){deferred.reject(response);});});return deferred.promise;}};return self;}]);}());(function(){'use strict';angular.module('common.services').factory('fileTypeStorageService',['ABSTRACT_TYPE','locker',function(ABSTRACT_TYPE,locker){var _convertToAbstractId,_convertFromAbstractId,_getFileType,_setFileType,fileTypeStorageService,_getFileTypeForUrl;_convertToAbstractId=function(abstractType){var abstractId=null;if(ABSTRACT_TYPE.hasOwnProperty(abstractType)){abstractId=ABSTRACT_TYPE[abstractType].toString();}
return abstractId;};_convertFromAbstractId=function(abstractId){var key,abstractType='';for(key in ABSTRACT_TYPE){if(ABSTRACT_TYPE[key].toString()===abstractId){abstractType=key;break;}}
return abstractType;};_getFileType=function(){var fileTypes=[],legacyFileTypes,fileTypeName;if(locker.supported()){legacyFileTypes=angular.fromJson(locker.driver('session').namespace('global').get('typesSelected'));}
angular.forEach(legacyFileTypes,function(value){fileTypeName=_convertFromAbstractId(value);if(fileTypeName){fileTypes.push(fileTypeName);}});return fileTypes;};_setFileType=function(fileTypes){var activeLegacyFileTypes=[],fileTypeName;angular.forEach(fileTypes,function(fileType){fileTypeName=_convertToAbstractId(fileType);if(fileTypeName){activeLegacyFileTypes.push(fileTypeName);}});if(locker.supported()){locker.driver('session').namespace('global').put('typesSelected',angular.toJson(activeLegacyFileTypes));}};_getFileTypeForUrl=function(fileTypes){var fileType='photos';if(typeof fileTypes==='object'){if(fileTypes.hasOwnProperty('illustrations')&&fileTypes.illustrations===true){fileType='illustrations';if(fileTypes.hasOwnProperty('photos')&&fileTypes.photos===true){fileType='photos,illustrations';}}else if(fileTypes.hasOwnProperty('video')&&fileTypes.video===true){fileType='videos';}else if(fileTypes.hasOwnProperty('music')&&fileTypes.music===true){fileType='audio';}}else{if(fileTypes){if(fileTypes.indexOf('photos')>-1&&fileTypes.indexOf('illustrations')>-1){fileType='photos';}else if(fileTypes.indexOf('video')>-1){fileType='videos';}else if(fileTypes.indexOf('audio')>-1){fileType='music';}else{fileType=fileTypes;}}}
return fileType;};fileTypeStorageService={getFileType:_getFileType,setFileType:_setFileType,getFileTypeForUrl:_getFileTypeForUrl};return fileTypeStorageService;}]);}());(function(){'use strict';angular.module('common.services').factory('weTransferService',['$q','OptionsRestangular',function($q,OptionsRestangular){var WETRANSFER_ENDPOINT='wetransfer',_getDeferred,_sendToWeTransfer;_sendToWeTransfer=function(params){var defer=$q.defer();OptionsRestangular.getJavaFullResponseConfig().one(WETRANSFER_ENDPOINT).customPOST(params).then(function(response){defer.resolve(response);},function(error){defer.reject(error);});return defer.promise;};return{sendToWeTransfer:_sendToWeTransfer,getDeferred:_getDeferred};}]);}());(function(){'use strict';angular.module('common.services').factory('arrayHelperService',[function(){var _unique,_containsArray,_removeFromArray,_smartJoin,arrayHelperService;_unique=function(array){var uniqueValues={},result=[],i=0;for(i;i<array.length;i++){if(!uniqueValues[array[i]]){uniqueValues[array[i]]=true;result.push(array[i]);}}
return result;};_containsArray=function(containerArray,array){var result=true,i=0;if(array.length===0){result=false;}else if(containerArray.length<array.length){result=false;}else{for(i;i<array.length;i++){if(containerArray.indexOf(array[i])<0){result=false;break;}}}
return result;};_removeFromArray=function(array,itemsToRemove){angular.forEach(itemsToRemove,function(itemToRemove){var index=array.indexOf(itemToRemove);if(index>=0){array.splice(index,1);}});};_smartJoin=function smartJoin(array,joiner){var s='';for(var i in array){if(array[i]||array[i]===0){s=s+((s!=='')?joiner:'')+array[i];}}
return s;};arrayHelperService={unique:_unique,containsArray:_containsArray,removeFromArray:_removeFromArray,smartJoin:_smartJoin};return arrayHelperService;}]);}());(function(){'use strict';angular.module('common.services').factory('kountService',['OptionsRestangular',function(OptionsRestangular){var KOUNT_ENDPOINT='kount/session',_getKountSession;_getKountSession=function(){return OptionsRestangular.getJavaRestConfig().one(KOUNT_ENDPOINT).get();};return{getKountSession:_getKountSession};}]);}());(function(){'use strict';angular.module('common.services').factory('resultsService',[function(){var self={searchResponse:'',searchId:'',searchToken:'',setSearchToken:function(token){self.searchToken=token;},getSearchToken:function(){return self.searchToken;},setSearchResponse:function(response){self.searchResponse=response;},getSearchId:function(){return self.searchId;},setSearchId:function(id){self.searchId=id;},getResults:function(){return self.searchResponse.results;},getTotalResults:function(){var totalResults=self.searchResponse.totalResults;if(typeof totalResults==='undefined'||totalResults===null){return 0;}else{return totalResults;}}};return self;}]);}());;(function(){'use strict';angular.module('common.services').factory('mobileUIService',['$window',function($window){var body=angular.element($window.document.body),lastPos=0;return{disableBodyScrolling:function(){lastPos=angular.element($window).scrollTop();body.addClass('mobile-no-scroll');angular.element($window).scrollTop(lastPos);body.css('margin-top','-'+lastPos+'px');},enableBodyScrolling:function(){body.removeClass('mobile-no-scroll');body.css('margin-top','');if(lastPos){angular.element($window).scrollTop(lastPos);}
lastPos=0;}};}]);})();(function(){'use strict';angular.module('common.services').factory('languageService',[function(){var _getIETFCode,_formatRegionLanguageCode,_formatCountryLanguage;_getIETFCode=function(strCode,ignoreBrazil){if(!ignoreBrazil&&strCode.indexOf('PT_BR')>-1){return strCode;}
if(strCode.indexOf('_')>-1){return strCode.split('_')[0];}
return strCode;};_formatRegionLanguageCode=function(languageCode,regionCode){var formattedCode='';if(angular.isString(regionCode)&&angular.isString(languageCode)&&languageCode&&regionCode){formattedCode=_getIETFCode(languageCode.toLowerCase(),true)+'_'+regionCode.toUpperCase();}
return formattedCode;};_formatCountryLanguage=function(languageCode,regionCode){var formattedCode='';if(angular.isString(regionCode)&&angular.isString(languageCode)&&languageCode&&regionCode){if(languageCode.toLowerCase().indexOf('pt')!==-1){languageCode='pt';}
formattedCode=regionCode.toUpperCase()+'/'+_getIETFCode(languageCode.toLowerCase(),true);}
return formattedCode;};return{getIETFCode:_getIETFCode,formatRegionLanguageCode:_formatRegionLanguageCode,formatCountryLanguage:_formatCountryLanguage};}]);}());(function(){'use strict';angular.module('common.services').factory('countrySitesService',['$q','$injectedData',function($q,$injectedData){var _getCountrySitesData,countrySitesData,_getPlansAndPricingTranslation,pAndPTranslation;_getCountrySitesData=function(){var deferred=$q.defer();if(countrySitesData===undefined){countrySitesData=$injectedData.countrySitesData;}
if(angular.isUndefined(countrySitesData)||countrySitesData===null){deferred.reject('Could not retrieve country sites data');}else{deferred.resolve(countrySitesData);}
return deferred.promise;};_getPlansAndPricingTranslation=function(){var deferred=$q.defer();if(pAndPTranslation===undefined){pAndPTranslation=$injectedData.pAndPTranslation;}
if(angular.isUndefined(pAndPTranslation)||pAndPTranslation===null){deferred.reject('Could not retrieve country sites data');}else{deferred.resolve(pAndPTranslation);}
return deferred.promise;};return{getCountrySitesData:_getCountrySitesData,getPlansAndPricingTranslation:_getPlansAndPricingTranslation};}]);}());(function(){'use strict';angular.module('common.services').factory('veerService',['OptionsRestangular','$q',function(OptionsRestangular,$q){var VEER_ENDPOINT='veer',_checkUser;_checkUser=function(identity){var deferred=$q.defer(),data={identity:identity},restangular;restangular=OptionsRestangular.getPhpRestConfig().one(VEER_ENDPOINT);restangular.customPOST(data).then(function(response){deferred.resolve(response);}).catch(function(error){deferred.reject(error);});return deferred.promise;};return{checkUser:_checkUser};}]);}());(function(){'use strict';var NS='common.directives';angular.module(NS,['ngDebounce','common.services']);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpAudioInfoPane',[function(){return{restrict:'E',require:'^mediaPlayer',templateUrl:'/static/js/angular/common/partials/media-player/_audioInfoPane.html',link:function(scope,elem,attrs,ctrl){scope.result=ctrl.getResultData();}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mediaPlayer',['MEDIAPLAYER_STATES','mediaPlayerService',function(MEDIAPLAYER_STATES,mediaPlayerService){return{restrict:'E',scope:{media:'=',mediaData:'='},transclude:true,templateUrl:function(elem,attrs){return['/static/js/angular/common/partials/media-player/_',attrs.media,'.html'].join('');},controller:function($scope){var t=this;$scope.state={currentState:MEDIAPLAYER_STATES.STOP,currentTime:0,loop:false,mutedVolume:'1.0',previewUrl:'',timeLeft:0,totalTime:0,volume:'1.0'};this.inferType=function(media){var type;switch(media){case'audio':type='audio/mp3';break;case'video':type='video/mp4';break;}
return type;};this.getSource=function(media){var previewUrl;switch(media){case'audio':previewUrl=['/audio_mp3_preview.php?id=',$scope.mediaData.fileId].join('');break;case'video':previewUrl=$scope.mediaData.previewUrl;break;}
$scope.state.previewUrl=previewUrl;return $scope.state.previewUrl;};this.getPreviewUrl=function(){return $scope.state.previewUrl;};this.setState=function(newState){if(newState&&newState!==$scope.state.currentState){$scope.state.currentState=newState;}};this.play=function(){$scope.mediaElement[0].play();t.setState(MEDIAPLAYER_STATES.PLAY);};this.pause=function(){$scope.mediaElement[0].pause();t.setState(MEDIAPLAYER_STATES.PAUSE);};this.stop=function(hardStop){if($scope.state.loop&&!hardStop){$scope.mediaElement[0].currentTime=0;$scope.mediaElement[0].play();}else if(!$scope.mediaElement[0].paused||$scope.mediaElement[0].currentTime!==0){$scope.mediaElement[0].pause();$scope.mediaElement[0].currentTime=0;this.setState(MEDIAPLAYER_STATES.STOP);}};this.playToggle=function(){if($scope.mediaElement[0].paused){mediaPlayerService.playMedia($scope.$id);}else{this.pause();}};this.getVolume=function(){return $scope.state.volume;};this.setVolume=function(value){$scope.state.volume=value;$scope.mediaElement[0].volume=value;};this.muteVolume=function(){$scope.state.mutedVolume=$scope.state.volume;$scope.state.setVolume(0.0);};this.restoreVolume=function(){$scope.state.setVolume($scope.state.mutedVolume);};this.seekTime=function(value){$scope.mediaElement[0].currentTime=value;$scope.state.currentTime=value;};this.getResultData=function(){return $scope.mediaData;};this.getDuration=function(){var duration=$scope.state.totalTime;if(!duration){if($scope.mediaData.audio&&$scope.mediaData.audio.duration){duration=$scope.mediaData.audio.duration;}else{duration=$scope.mediaElement[0].duration;}
$scope.state.totalTime=duration;}
return duration;};this.onUpdateTime=function(event){var duration=t.getDuration();$scope.state.currentTime=event.target.currentTime;if(t.getDuration()!==Infinity){$scope.state.timeLeft=duration-event.target.currentTime;}
$scope.$apply();};this.onComplete=function(){t.stop();};this.canPlay=function(){var loader=angular.element('.dots-loader-no-background'),dimmer=angular.element('.loader-dimmer'),parent=angular.element('.media-loader');loader.fadeOut('slow');dimmer.fadeOut('slow',parent.remove);};$scope.state=this;},link:function(scope,elem,attrs,ctrl){var canPlay;scope.mediaElement=elem.find(attrs.media);if(attrs.loop!==undefined){scope.state.loop=true;}
scope.$watch('mediaData',function(data){if(data&&scope.mediaElement[0].canPlayType){scope.type=ctrl.inferType(attrs.media);canPlay=scope.mediaElement[0].canPlayType(scope.type);if(canPlay==='maybe'||canPlay==='probably'){scope.mediaElement.attr('src',scope.state.getSource(attrs.media));scope.mediaElement.attr('type',scope.type);}}});if(attrs.playOnHover!==undefined&&attrs.hoverTrigger){elem.closest(attrs.hoverTrigger)[0].addEventListener('mouseover',ctrl.play,false);elem.closest(attrs.hoverTrigger)[0].addEventListener('mouseout',ctrl.pause,false);}
if(attrs.autoplay!==undefined){scope.mediaElement[0].addEventListener('loadedmetadata',ctrl.playToggle,false);}
scope.mediaElement[0].addEventListener('loadedmetadata',ctrl.onUpdateTime,false);scope.mediaElement[0].addEventListener('loadedmetadata',ctrl.setVolume(1.0),false);scope.mediaElement[0].addEventListener('timeupdate',ctrl.onUpdateTime,false);scope.mediaElement[0].addEventListener('ended',ctrl.onComplete,false);scope.mediaElement[0].addEventListener('canplay',ctrl.canPlay,false);mediaPlayerService._register(scope);}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpPlayButton',['MEDIAPLAYER_STATES','omnitureService',function(MEDIAPLAYER_STATES,omnitureService){return{restrict:'E',require:'^mediaPlayer',templateUrl:'/static/js/angular/common/partials/media-player/_playButton.html',link:function(scope,elem,attrs,ctrl){scope.onPlayPause=function(){ctrl.playToggle();if(scope.playerState.play){omnitureService.playAudioFile();}};scope.changeIcon=function(newState){switch(newState){case MEDIAPLAYER_STATES.PLAY:scope.playerState={pause:true};break;case MEDIAPLAYER_STATES.PAUSE:case MEDIAPLAYER_STATES.STOP:scope.playerState={play:true};break;}};scope.playerState={play:true};scope.$watch(function(){return ctrl.currentState;},function(newState,oldState){if(newState!==oldState){scope.changeIcon(newState);}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpScrubBar',['$document',function($document){return{restrict:'E',require:'^mediaPlayer',templateUrl:'/static/js/angular/common/partials/media-player/_scrubBar.html',link:function(scope,elem,attrs,ctrl){var scrubber=elem.find('.scrub-bar'),dragMask=elem.find('.scrubber-drag-mask');scope.updateTime=function updateTime(newCurrentTime){var scrubberElem=elem.find('.scrubber'),percentTime;if(typeof newCurrentTime==='number'&&ctrl.getDuration()){percentTime=100*(newCurrentTime/ctrl.getDuration());scrubberElem.css('width',percentTime+'%');}else{scrubberElem.css('width',0);}};scope.scrubSeek=function scrubSeek(event){var scrubberWidth=scrubber.width(),clickOffset,scrubberPercent;if(event.offsetX===undefined){clickOffset=event.pageX-elem.find('.scrub-bar').offset().left;}else{clickOffset=event.offsetX;}
scrubberPercent=clickOffset/scrubberWidth;scope.updateTime(ctrl.getDuration()*scrubberPercent);ctrl.seekTime(ctrl.getDuration()*scrubberPercent);};scope.$watch(function(){return ctrl.currentTime;},function(newVal){scope.updateTime(newVal);});scope.scrubberMouseup=function scrubberMouseup(event){scope.scrubSeek(event);dragMask.unbind('mouseout',scope.scrubberMouseup);$document.unbind('mousemove',scope.scrubSeek);$document.unbind('mouseup',scope.scrubberMouseup);};dragMask.on('mousedown',function(event){event.preventDefault();dragMask.on('mouseout',scope.scrubberMouseup);$document.on('mousemove',scope.scrubSeek);$document.on('mouseup',scope.scrubberMouseup);});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpTime',['MEDIAPLAYER_STATES',function(MEDIAPLAYER_STATES){return{restrict:'E',require:'^mediaPlayer',templateUrl:'/static/js/angular/common/partials/media-player/_time.html',scope:{duration:'='},link:function(scope,elem,attrs,ctrl){scope.isStopped=true;scope.mediaLength=0;if(scope.duration!==undefined){scope.mediaLength=scope.duration;}
scope.$watch(function(){return ctrl.totalTime;},function(totalTime){if(totalTime!==Infinity&&totalTime!==undefined&&!isNaN(totalTime)){scope.mediaLength=totalTime;}});scope.$watch(function(){return ctrl.currentTime;},function(newVal){scope.currentTime=newVal;});scope.$watch(function(){return ctrl.currentState;},function(newState){switch(newState){case MEDIAPLAYER_STATES.PLAY:case MEDIAPLAYER_STATES.PAUSE:scope.isStopped=false;break;case MEDIAPLAYER_STATES.STOP:scope.isStopped=true;break;}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpVolume',['$document',function($document){return{restrict:'E',require:'^mediaPlayer',templateUrl:'/static/js/angular/common/partials/media-player/_volume.html',link:function(scope,elem,attrs,ctrl){var scrubber=elem.find('.volume-scrub-bar'),dragMask=elem.find('.volume-scrubber-drag-mask');scope.adjustVolume=function adjustVolume(event){var scrubberWidth=scrubber.width(),clickOffset,scrubberPercent;if(event.offsetX===undefined){clickOffset=event.pageX-scrubber.offset().left;}else{clickOffset=event.offsetX;}
scrubberPercent=clickOffset/scrubberWidth;if(scrubberPercent>1.0){scrubberPercent=1.0;}else if(scrubberPercent<0.0){scrubberPercent=0.1;}
scope.updateVolume(scrubberPercent);ctrl.setVolume(scrubberPercent);};scope.updateVolume=function updateVolume(newVolume){var scrubberElem=elem.find('.scrubber'),iconElem=elem.find('.volume-icon'),volumePercent=newVolume*100;scrubberElem.css('width',volumePercent+'%');iconElem.removeClass('high-volume low-volume mute-volume');if(volumePercent===0){iconElem.addClass('mute-volume');}else if(volumePercent<50.0){iconElem.addClass('low-volume');}else{iconElem.addClass('high-volume');}};scope.toggleMute=function toggleMute(){if(ctrl.volume===0.0){scope.updateVolume(ctrl.mutedVolume);ctrl.restoreVolume();}else{scope.updateVolume(0.0);ctrl.muteVolume();}};scope.volumeMouseup=function volumeMouseup(event){scope.adjustVolume(event);dragMask.unbind('mouseout',scope.volumeMouseup);$document.unbind('mousemove',scope.adjustVolume);$document.unbind('mouseup',scope.volumeMouseup);};dragMask.on('mousedown',function(event){event.preventDefault();dragMask.on('mouseout',scope.volumeMouseup);$document.on('mousemove',scope.adjustVolume);$document.on('mouseup',scope.volumeMouseup);});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mpWaveform',[function(){return{restrict:'E',require:'^mediaPlayer',link:function(scope,elem,attrs,ctrl){var wavesurfer;elem.css('display','block');scope.$watch(function(){return ctrl.getPreviewUrl();},function(previewUrl){var options=angular.extend({container:elem[0]},attrs);options.interact=false;options.cursorColor='#666e6e';wavesurfer=WaveSurfer.create(options);if(previewUrl!==''){wavesurfer.load(previewUrl,attrs.data||null);}});scope.$watch(function(){return ctrl.currentTime;},function(newTime){wavesurfer.seekTo(newTime/ctrl.totalTime);});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('notificationBar',['cookielessUrl',function(cookielessUrl){return{restrict:'E',replace:true,scope:{notification:'=',closeCallback:'&?'},template:['<section class="notification-bar {{ notification.type }}">','<span class="text" data-i18n="{{ notification.content }}"></span><span class="close">','<a class="close" ng-click="removeBar()">','<img src="',cookielessUrl,'/static/images/blank.gif" class="general-icon-x" />','</a>','</span>','</section>'].join(''),controller:function($scope,$element){$scope.removeBar=function(){if(typeof($scope.closeCallback)==='function'){$scope.closeCallback();}
jQuery($element.parent()).slideUp('500ms',function(){$element.parent().remove();});};}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('dropdown',['$document','dropdownService','SEARCH_STATE',function($document,dropdownService,SEARCH_STATE){return{restrict:'E',scope:{activationMethod:'@',label:'@',labelClass:'@',activeOption:'@',orientation:'@',disableDropdownLabel:'@',multiGroup:'@',mobileActiveOption:'@'},templateUrl:'/static/js/angular/common/partials/_dropdown.html',transclude:true,link:function(scope,element){scope.showActive='true';scope.isVisible=false;dropdownService._register(scope);scope.dropdownToggle=function(_isVisible){dropdownService.toggle(scope.$id);scope.isVisible=_isVisible;};scope.isFileTypeExecutingSearch=function(){if(scope.labelClass==='search-file-type-selector'){return SEARCH_STATE.EXECUTING_SEARCH;}
return;};if(scope.activationMethod==='hover'){if(Modernizr.touch){element.on('click',function(event){if(event.target.tagName.toLowerCase()!=='select'){scope.dropdownToggle(!scope.isVisible);}});}else{element.on('mouseenter',function(){scope.dropdownToggle(true);scope.$apply();}).on('mouseleave',function(event){if(event.target.tagName.toLowerCase()!=='select'){scope.dropdownToggle(false);scope.$apply();}});}}else{element.on('click',function(){scope.dropdownToggle(!scope.isVisible);}).on('mouseleave',function(event){if(event.target.tagName.toLowerCase()!=='select'){scope.dropdownToggle(false);scope.$apply();}});}}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('dropdownItem',['$document','dropdownService',function($document,dropdownService){return{restrict:'E',scope:{activationMethod:'@',label:'@',labelClass:'@',orientation:'@',disableDropdownLabel:'@',translate:'=',expanded:'@',translationKey:'@',locator:'@'},templateUrl:'/static/js/angular/common/partials/_dropdownItem.html',transclude:true,link:function(scope,element){scope.isVisible=false;dropdownService._register(scope,function(){if(scope.isVisible){element.addClass('active');}else{element.removeClass('active');}});scope.dropdownToggle=function(){dropdownService.toggle(scope.$id);};scope.setVisibleStatus=function(){if(scope.expanded&&scope.expanded===scope.label){scope.dropdownToggle();}};scope.addTranslation=function(){var elem=element.find(scope.locator);if(elem){elem.attr('data-i18n',scope.translationKey);}};if(scope.activationMethod==='hover'){if(Modernizr.touch){element.on('click',function(){scope.dropdownToggle();});}else{element.on('mouseenter',function(){scope.dropdownToggle();}).on('mouseleave',function(){scope.dropdownToggle();});}}
if(scope.activationMethod==='click'){$document.bind('click',function(event){var clickedElementChild=element.find(event.target).length;if(clickedElementChild>0){return;}});}
if(scope.translate){scope.addTranslation();}
scope.setVisibleStatus();}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('validator',['$compile','$animate','formValidationService',function($compile,$animate,formValidationService){return{restrict:'A',require:'ngModel',scope:true,link:function(scope,element,attrs,ctrl){scope.elementName=element[0].name;scope.deregistrationFuncs=[];scope.shouldValidate=true;scope.optional=false;scope.setValidity=function(name,valid){if(scope.optional===true){if(valid){element.removeClass('ng-warning');if(name.length>0){element.removeClass(['ng-',name,'-warning'].join(''));}}else{element.addClass('ng-warning');if(name.length>0){element.addClass(['ng-',name,'-warning'].join(''));}}}else{ctrl.$setValidity(name,valid);}};scope.setupListeners=function(validators){var modelWatch,eventListener,validMethods,watch;if(attrs.optional===''||attrs.optional==='true'){scope.optional=true;}
ctrl.$validate=function(){scope.updateValidation(validators);};if(attrs.validateIf){watch=scope.$watch(attrs.validateIf,function(){if(scope.$eval(attrs.validateIf)){scope.shouldValidate=true;}else{scope.shouldValidate=false;scope.removeMessage();}},true);scope.deregistrationFuncs.push(watch);}
scope.$on('form-submit',function(){scope.updateValidation(validators);});if(typeof attrs.validMethod!=='undefined'){validMethods=attrs.validMethod.split(/\s*,\s*/);validMethods.forEach(function(validMethod){if(validMethod==='blur'||validMethod==='change'){element.bind(validMethod+'.validate',function(){scope.$apply(function(){if(ctrl.$pristine){return;}
scope.updateValidation(validators);});});}else if(validMethod==='emailInputMethod'){element.bind('keydown keypress',function(event){if(event.keyCode===32||event.keyCode===44||event.keyCode===13||event.keyCode===9||event.keyCode===188){scope.$apply(function(){if(ctrl.$pristine){return;}
scope.updateValidation(validators);});}});}else if(validMethod!=='submit'){modelWatch=scope.$watch(attrs.ngModel,function(){scope.updateValidation(validators);});scope.deregistrationFuncs.push(modelWatch);}});}
eventListener=scope.$on(ctrl.$name+'submit',function(){scope.updateValidation(validators);});scope.deregistrationFuncs.push(eventListener);if(attrs.validMethod!=='submit'&&!ctrl.$pristine){scope.updateValidation(validators);}};scope.deregisterListeners=function(){element.unbind('blur.validate');element.unbind('change.validate');scope.deregistrationFuncs.forEach(function(deregFunc){deregFunc();});scope.deregistrationFuncs=[];};scope.onValidatorChange=function(newVal){var validatorList;if(!newVal){return;}
validatorList=attrs.validator.split(/\s*,+\s*/);scope.deregisterListeners();scope.setupListeners(validatorList);};scope.removeMessage=function(){var inputContainer=element.closest('.input-container'),messageContainer=inputContainer.parent().find('.message-container'),message=messageContainer.find('.message');scope.setValidity(ctrl.$name,true);if(message.children().not('.'+element.attr('name')).length>0){message.find('.'+element.attr('name')).remove();}else{if(messageContainer.length>0){$animate.leave(messageContainer);}}};scope.addMessage=function(container,translationKey){var domElement='<span class="'+element.attr('name')+'" data-error="'+ctrl.$name+'" data-i18n= "'+translationKey+'">'+'</span>',compiledElement=$compile(domElement)(scope);container.append(compiledElement);};scope.showErrors=function(haveErrors,invalidValidator,isPromise){var translationKey,inputContainer=element.closest('.input-container'),messageContainer=inputContainer.parent().find('.message-container'),message=messageContainer.find('.message');if(haveErrors){if(messageContainer.length===0){messageContainer=angular.element('<div class="message-container"></div>');message=angular.element('<div class="message"></div>');messageContainer.append(message);$animate.enter(messageContainer,'',inputContainer);}
message.find('.'+element.attr('name')).remove();translationKey=attrs[invalidValidator+'ErrorMessageKey']||formValidationService.getDefaultMsgKey(invalidValidator).error;scope.addMessage(message,translationKey);}else{if(isPromise===false||(isPromise===true&&invalidValidator!==undefined)){scope.removeMessage();}}};scope.updateValidation=function(validators){if(scope.shouldValidate===false){return;}
var haveErrors=false,inputValue=ctrl.$viewValue,isPromise=false,invalidValidator;validators.forEach(function(validator){var isValid=formValidationService.process(validator,inputValue);if(typeof isValid==='object'&&!haveErrors){isValid.then(function(status){scope.setValidity(ctrl.$name,status);ctrl.$setViewValue(ctrl.$viewValue);scope.showErrors(!status,validator,true);if(attrs.afterValidation){scope.$eval(attrs.afterValidation);}},function(){scope.setValidity(ctrl.$name,false);ctrl.$setViewValue(ctrl.$viewValue);scope.showErrors(true,validator,true);if(attrs.afterValidation){scope.$eval(attrs.afterValidation);}});isValid=true;isPromise=true;}
if(!haveErrors&&!isValid){haveErrors=true;invalidValidator=validator;scope.setValidity(ctrl.$name,false);ctrl.$setViewValue(ctrl.$viewValue);isPromise=false;}});scope.showErrors(haveErrors,invalidValidator,isPromise);if(attrs.afterValidation){scope.$eval(attrs.afterValidation);}};attrs.$observe('validator',scope.onValidatorChange);}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('headroom',function(){return{restrict:'E',scope:{tolerance:'=',offset:'=',classes:'=',enabled:'='},link:function(scope,element){scope.$on('destroy',function(){scope.headroom.destroy();});scope.$watch('enabled',function(newVal){if(newVal&&scope.headroom===undefined){scope.initHeadroom();}});scope.initHeadroom=function(){var options={};angular.forEach(Headroom.options,function(value,key){options[key]=scope[key]||Headroom.options[key];});options.offset=180;if(scope.offset){options.offset=scope.offset;}
options.onTop=function(){element.removeClass('searchbar-pinned');};scope.headroom=new Headroom(element[0],options).init();};}};});}());(function(){'use strict';var module=angular.module('common.directives');module.directive('fancyInputs',[function(){return{restrict:'A',require:'^form',scope:true,link:function(scope,element,attrs,ctrl){var inputNameList,unregister;scope.formClass=attrs.fancyInputsClass||'fancy-inputs';scope.inputFilledClass=attrs.fancyInputsFilledClass||'input-filled';scope.inputElemList=[];element.addClass(scope.formClass);if(attrs.fancyInputs){inputNameList=attrs.fancyInputs.split(' ');}
scope.addInputFilledClass=function(elem){var inputEl=angular.element(elem),inputTagID='tags-input-field';if(!inputNameList||(inputNameList&&inputNameList.indexOf(inputEl.attr('name'))!==-1)){scope.inputElemList.push(inputEl);inputEl.on('input blur keyup change click',function(){if(inputEl.val().trim().length>0){inputEl.parent().addClass(scope.inputFilledClass);}else{if(inputEl.context.id!==inputTagID||(inputEl.context.id===inputTagID&&angular.element('.tag-item').length===0)){inputEl.parent().removeClass(scope.inputFilledClass);}}
unregister();});}};angular.forEach(element.find('input'),function(elem){scope.addInputFilledClass(elem);});angular.forEach(element.find('textarea'),function(elem){scope.addInputFilledClass(elem);});unregister=scope.$watch(function(){return ctrl.$dirty;},function(newValue,oldValue){if(newValue!==oldValue){angular.forEach(scope.inputElemList,function(elem){elem.parent().addClass(scope.inputFilledClass);});unregister();}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('focusInput',[function(){return{restrict:'A',scope:true,link:function(scope,element,attrs){element.on('click',function(){jQuery('#'+attrs.focusInput).focus();});}};}]);}());(function(){'use strict';angular.module('common.directives').directive('prettyPrice',function(){return{restrict:'E',transclude:true,scope:{symbol:'@',isPrefixSymbol:'@',shortName:'@',showShortName:'@'},template:['<span class="symbol" ng-show="isPrefixSymbol">{{ symbol }}</span>','<span class="amount" ng-transclude></span>','<span class="symbol" ng-hide="isPrefixSymbol">{{ symbol }}</span>','<span ng-show="showShortName">{{ shortName }}</span>'].join('')};});}());(function(){'use strict';var module=angular.module('common.directives');module.directive('loadingButton',function(){return{restrict:'A',transclude:true,scope:{loading:'='},template:['<span ng-transclude></span><div class="loader">','<div class="circle"></div><div class="circle"></div><div class="circle"></div>','</div>'].join(''),link:function(scope,element){scope.$watch('loading',function(val){if(val===true){element.addClass('loading');}else{element.removeClass('loading');}});}};});}());(function(){  'use strict';  var module=angular.module('common.directives');  module.directive('searchFileTypeSelector',['OMNITURE_EVENTS','facetService','facetStateService','$rootScope','fileTypeStorageService',function(OMNITURE_EVENTS,facetService,facetStateService,$rootScope,fileTypeStorageService){    return{      restrict:'E',scope:{resultCount:'@',fileType:'@'},templateUrl:'/static/js/angular/common/partials/_searchFileTypeSelector.html',controller:function($scope,$element,$attrs){$scope.fileTypeTranslations={};if($attrs.hasOwnProperty('filetypetranslations')){$scope.fileTypeTranslations=$scope.$eval($attrs.filetypetranslations).FILE_TYPES;}
$scope.setDefaultAbstractTypes=function(){facetStateService.toggleFacet('abstractType','photos');facetStateService.toggleFacet('abstractType','illustrations');facetStateService.setFacet('additionalAudio','');};$rootScope.$on('setFileTypeSelected',function(e,data){var sizesSelected,typesSelectedPrevious=[];sizesSelected=facetStateService.getActiveValues('photoSize');if(facetStateService.allOptionsActive('photoSize')||sizesSelected.length===0){try{if(!(typesSelectedPrevious=localStorage.getItem('typesSelectedPrevious'))){return;}}catch(e){}
if(typesSelectedPrevious.indexOf('photos')>-1&&typesSelectedPrevious.indexOf('illustrations')>-1){data.fileType='images';}else if(typesSelectedPrevious.indexOf('photos')>-1&&typesSelectedPrevious.indexOf('illustrations')===-1){data.fileType='photos';}else{data.fileType='images';}
try{localStorage.removeItem('typesSelectedPrevious');}catch(e){}}
$scope.fileTypeSelected(data.fileType);});$scope.initializeFileTypeSelection=function(){var initialValue=[];if($scope.fileType){facetStateService.clearFacetGroup('abstractType');if($scope.fileType==='images'){$scope.setDefaultAbstractTypes();}else{facetStateService.toggleFacet('abstractType',$scope.fileType);}}else if(facetStateService.getActiveValues('abstractType').length===0){initialValue=fileTypeStorageService.getFileType();if(initialValue&&initialValue.length){if(initialValue.length===1){facetStateService.toggleFacet('abstractType',initialValue[0]);if(initialValue[0]==='audio'){facetStateService.setFacet('additionalAudio','true');}}else{$scope.setDefaultAbstractTypes();}}else{$scope.setDefaultAbstractTypes();}}};$scope.fileTypeSelected=function(value){facetStateService.setFileTypeFacet(value);fileTypeStorageService.setFileType(facetStateService.getActiveValues('abstractType'));$scope.selectedFileType=value;$scope.$emit(OMNITURE_EVENTS.SRP.SRP_SEARCH_UPDATE,'fileType',$scope.selectedFileType);$rootScope.$broadcast('fileTypeChanged');};$scope.initializeFileTypeSelection();},      link:function(scope,element,attrs){var totalNumberOfAbstractType=Object.keys(facetStateService.getFacet('abstractType')).length,lightboxID=facetStateService.getFacet('lightboxID'),portfolioID=facetStateService.getFacet('portfolioID'),adminSearch=facetStateService.getFacet('adminSearch'),legacyFileSearch=facetStateService.getFacet('gettyMasterIdSet').length||facetStateService.getFacet('fileIdSet').length,onSRP=attrs.hasOwnProperty('srp');scope.facetGroup=facetService.getFacetGroup('abstractType').facets;scope.facetGroup.photos.isImageSubFacet=true;scope.facetGroup.illustrations.isImageSubFacet=true;scope.$watch(function(){return facetStateService.getActiveValues('abstractType');},function(newActiveValue){if(newActiveValue.length===totalNumberOfAbstractType){if(lightboxID.length||portfolioID.length||adminSearch||legacyFileSearch){scope.selectedFileType='all';}else{scope.selectedFileType='images';}}else if(newActiveValue.length===1){scope.selectedFileType=newActiveValue;}else{scope.selectedFileType='images';}},true);scope.getFileTypeOptionState=function(value){return scope.selectedFileType.toString()===value;};scope.checkAccessibility=function(accessibility){var lightboxID=facetStateService.getFacet('lightboxID'),portfolioID=facetStateService.getFacet('portfolioID'),adminSearch=facetStateService.getFacet('adminSearch'),legacyFileSearch=facetStateService.getFacet('gettyMasterIdSet').length||facetStateService.getFacet('fileIdSet').length;if(accessibility==='private'){if(onSRP&&(lightboxID.length||portfolioID.length||adminSearch||legacyFileSearch)){return true;}
return false;}
return true;};scope.displayFileType=function(facet){if(!facet){return'';}else if(facet.display&&facet.display.length){return facet.display;}else{return scope.fileTypeTranslations[facet.value];}};      }
    };    }]);}());(function(){  'use strict';  var module=angular.module('common.directives');  module.directive('scrollTo',[function(){    return{      restrict:'A',scope:'true',      link:function(scope){scope.$on('scrollTo',function(event,scrollElement){angular.element('html, body').stop().animate({scrollTop:scrollElement.offset().top},1000,'easeOutQuart');});      }
    };  }]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('spinner',['spinnerService',function(spinnerService){return{restrict:'E',replace:true,scope:{id:'@',group:'@?',showSpinner:'@?',type:'@?'},template:['<span class="ouroboros-spinner {{type}}" ng-show="showSpinner">','<span class="left"><span class="animation"></span></span>','<span class="right"><span class="animation"></span></span>','</span>'].join(''),controller:function($scope){spinnerService._register($scope);}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('affix',function($window){return function(scope,element,attrs){var winElem=angular.element($window),item;if(scope._stickyElements===undefined){scope._stickyElements=[];winElem.bind('scroll.affix',function(){var winTop=winElem.scrollTop(),i,item;for(i=0;i<scope._stickyElements.length;i++){item=scope._stickyElements[i];item.scroll(winTop);}});winElem.bind('resize',function(){var i,item,winTop=winElem.scrollTop(),winBottom=winElem.scrollTop()+winElem.height();for(i=0;i<scope._stickyElements.length;i++){item=scope._stickyElements[i];item.resize(winTop,winBottom);}});winElem.bind('load',function(){var i,item;for(i=0;i<scope._stickyElements.length;i++){item=scope._stickyElements[i];item.isFixed=item.element.hasClass('affix');if(!item.isFixed){item.start=item.element.offset().top;}else if(angular.isElement(item.placeholder)){item.start=item.placeholder.offset().top;}}});}
item={element:element,isFixed:element.hasClass('affix'),placeholder:attrs.useplaceholder!==undefined,placeholderClass:attrs.placeholderclass||'',start:element.offset().top,useBottomAnchor:attrs.bottomanchor!==undefined,bottomAnchor:angular.element(attrs.bottomanchor),scroll:function(winScrollTop){var diff;if(!this.isFixed&&winScrollTop>this.start){this.element.css('width',this.element.outerWidth()+'px');this.element.css('left',this.element.offset().left+'px');this.element.addClass('affix');this.isFixed=true;if(this.placeholder===true){this.placeholder=angular.element('<div class="affix-placeholder '+this.placeholderClass+'"></div>').css('height',item.element.outerHeight()+'px').insertBefore(item.element);}}else if(this.isFixed&&winScrollTop<=this.start){this.element.removeClass('affix');this.element.css('width','');this.element.css('left','');this.element.css('margin-top','');this.isFixed=false;if(angular.isElement(this.placeholder)){this.placeholder.remove();this.placeholder=true;}}
if(this.isFixed&&this.useBottomAnchor){diff=(this.bottomAnchor.offset().top)-(winScrollTop+this.element.outerHeight());if(diff<0){this.element.css('margin-top',diff+'px');}else{this.element.css('margin-top','');}}},resize:function(winScrollTop){this.element.removeClass('affix');this.element.css('width','');this.element.css('left','');this.isFixed=false;if(angular.isElement(this.placeholder)){this.placeholder.remove();this.placeholder=true;}
this.scroll(winScrollTop);}};scope.$watch(function(){return[element[0].clientWidth,element[0].clientHeight].join('x');},function(){item.resize(winElem.scrollTop());});scope._stickyElements.push(item);};});}());(function(){'use strict';var module=angular.module('common.directives');module.directive('mbox',[function(){return{restrict:'E',scope:true,transclude:true,template:'<div id="{{campaign}}" ng-transclude></div>',link:function(scope,element,attrs){scope.otherAttrs={};scope.init=function(){if(!attrs.campaign||typeof attrs.campaign!=='string'){console.log('mbox attr "campaign" is required.');return false;}
scope.campaign=attrs.campaign;window.mboxDefine(scope.campaign,scope.campaign);angular.forEach(attrs,function(value,key){var closureFunction=function(){var theKey=key;return function(value){scope.update(false,value,theKey);};};if(key!=='campaign'&&key.charAt(0)!=='$'){scope.otherAttrs[key]=value;attrs.$observe(key,closureFunction());}});return true;};scope.update=function(isFirstTime,value,key){var updateArgs=[scope.campaign],theKey,hasEmptyValues=false,hasChanged=true;if(!isFirstTime){hasChanged=(value!==scope.otherAttrs[key]);scope.otherAttrs[key]=value;}
for(theKey in scope.otherAttrs){if(scope.otherAttrs.hasOwnProperty(theKey)){if(!scope.otherAttrs[theKey]){hasEmptyValues=true;break;}
if(scope.otherAttrs[theKey]!=='null'){updateArgs.push(theKey+'='+scope.otherAttrs[theKey]);}}}
if(!hasEmptyValues&&hasChanged){window.mboxUpdate.apply(this,updateArgs);}};if(scope.init()){scope.update(true);}}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('replaceWith',['$debounce','$compile',function($debounce,$compile){var triggerReady=$debounce(function(){angular.element(document).triggerHandler('replaceWith:ready');},20,false);return{restrict:'A',link:function(scope,element,attrs){var jsVar=null;if(attrs.replaceWith!==''){scope.$watch(function(){try{jsVar=eval(attrs.replaceWith);}catch(e){}
return jsVar;},function(newval){if(typeof newval==='string'){element.html($compile('<span>'+newval+'</span>')(scope));triggerReady();}});}
triggerReady();element.bind('refresh',function(){scope.$digest();});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('removeItem',[function(){return{restrict:'A',scope:{callbackFunction:'&removeCallback'},compile:function(tElement,tAttrs){var prependedElement,ngshow='';if(tAttrs.removeItem){ngshow='ng-show="'+tAttrs.removeItem+'"';}
prependedElement=tElement.prepend('<div class="remove-item-wrapper"><div class="remove-item" '+
ngshow+'></div></div>');return{post:function postLink(scope,element){var removeElement;removeElement=angular.element(element.find('.remove-item'));removeElement.on('click',function(){element.hide(function(){scope.callbackFunction({removeData:{}});});});}};}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('highlightChange',[function(){return{restrict:'A',scope:true,link:function(scope,element,attrs){scope.$watch(attrs.highlightChange,function(oldValue,newValue){if(newValue){element.stop(true,true).effect('highlight',{color:'#ffd900'},1500);}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('cmsWell',['$http','$location','$compile','$injectedData','boomerangService',function($http,$location,$compile,$injectedData,boomerangService){return{restrict:'E',scope:{passthru:'@',fallback:'&',callback:'&'},link:function(scope,element,attrs){var boomerangEvent=null,referer=document.referrer;if(scope.passthru){var url='/cms/angular?passthru='+scope.passthru;if($injectedData.assetId){url+='&assetid='+$injectedData.assetId;}
if($injectedData.callingUrl){url+='&callingurl='+$injectedData.callingUrl;}
if(referer){url+='&referer='+referer;}
if($location.search().cmsDisable){url+='&cmsDisable';}
boomerangEvent=boomerangService.createTimer('cms-well_load',scope.passthru);$http.get(url).success(function(data){if(data.length<=0){if(scope.callback){scope.callback({result:'callback'});}else{element.html(attrs.fallback);}}else{data=$compile(data.Content)(scope.$parent);element.html(data);if(scope.callback){scope.callback({result:'CMS'});}}
boomerangEvent.finish();}).error(function(){boomerangEvent.cancel();if(scope.callback){scope.callback({result:'callback'});}else{element.html(attrs.fallback);}});}else{if(scope.callback){scope.callback({result:'callback'});}else{element.html(attrs.fallback);}}}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('dotdotdot',function(){return function(scope,element){element.dotdotdot();};});}());(function(){'use strict';var m=angular.module('common.services');m.directive('script',function($injectedData){return{restrict:'E',compile:function(el,attrs){if(attrs.type!=='text/injected'){return;}
var data=angular.fromJson(el.text());if(attrs.hasOwnProperty('name')){$injectedData[attrs.name]=data;}else{angular.extend($injectedData,data);}}};});m.value('$injectedData',{});}());(function(){'use strict';var module=angular.module('common.directives');module.directive('iterateOver',['$compile',function($compile){return{restrict:'A',link:function(scope,element,attrs){var jsVar=null,iter=null;if(attrs.iterateOver!==''&&attrs.flexkey!==''){scope.$watch(function(){try{jsVar=eval(attrs.iterateOver);iter=eval(attrs.flexkey);}catch(e){}
if(Array.isArray(iter)&&iter.length>0){for(var i=0;i<iter.length;i++){if(iter[i].active){return jsVar[iter[i].sku];}}}
if(jsVar===null){return null;}
return jsVar['default'];},function(newval){if(typeof newval==='string'){element.html($compile('<span>'+newval+'</span>')(scope));}});}}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('dropboxIntroModal',['ipCookie','$timeout','urlBuilder','omnitureService',function(ipCookie,$timeout,urlBuilder,omnitureService){return{restrict:'E',link:function(scope){var cookieName='dropboxIntroModalHide',userClosed=false;scope.canBeSeen=false;scope.appLink=urlBuilder.buildCountryUrl('account/apps',true);$timeout(function(){scope.setCanBeSeen();},100);scope.$on('closeDropboxModal',function(){scope.close();});scope.dontShowMe=function(){var expires='',d=new Date(),years=10;d.setTime(d.getTime()+(years*365*24*60*60*1000));expires=d.toUTCString();document.cookie=cookieName+'='+true+';expires='+
expires+';domain=.istockphoto.com;path=/';omnitureService.adpDropboxCtaClick('DontShowDropbox');scope.close();};scope.getStarted=function(){omnitureService.adpDropboxCtaClick('GetStartedDropbox');};scope.close=function(){userClosed=true;scope.canBeSeen=false;};scope.setCanBeSeen=function(){if(userClosed){scope.canBeSeen=!userClosed;}else{scope.canBeSeen=!ipCookie(cookieName);}};}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('lazySrc',['$window','$document','lazyImageService',function($window,$document,lazyImageService){function link($scope,element,attributes){var parentLi=element.closest('li'),image,target;if(attributes.lazyTag){target=attributes.lazyTag;}
image=lazyImageService.addImage(element,function(){parentLi.removeClass('loading');},target);attributes.$observe('lazySrc',function(src){if(src!==null){if(lazyImageService.enabled){parentLi.addClass('loading');}
lazyImageService.setSource(image,src);}});$scope.$on('$destroy',function(){lazyImageService.removeImage(image);});}
return{link:link,restrict:'A'};}]);}());(function(){'use strict';var MAX_LIGHTBOX_COUNT=3,module=angular.module('common.directives');module.directive('lightbox',['OMNITURE_EVENTS','ERROR_MESSAGING','LIGHTBOX_EVENTS','SEARCH','lightboxService','$animate','$timeout','$window','$filter','$location','$rootScope','ipCookie','arrayHelperService','urlBuilder',function(OMNITURE_EVENTS,ERROR_MESSAGING,LIGHTBOX_EVENTS,SEARCH,lightboxService,$animate,$timeout,$window,$filter,$location,$rootScope,ipCookie,arrayHelperService,urlBuilder){return{restrict:'E',scope:{assetType:'=',assetCollection:'=',gettyIds:'=',fileIds:'=',assetLicense:'=',assetIsEditorial:'=',appId:'=',user:'=',error:'='},templateUrl:'/static/js/angular/common/partials/lightbox/_lightboxButton.html',link:function(scope,element,attrs){scope.savePage=attrs.hasOwnProperty('savePage');scope.maxLightboxes=MAX_LIGHTBOX_COUNT;scope.lightboxCreated=false;scope.lightboxUpdatedText='';scope.lighboxTooltip=$filter('i18n')('ADD_TO_LIGHTBOX');scope.lightboxPlaceholder='LIGHTBOX_PLACEHOLDER';scope.menuOpen=false;scope.hideExcessBoxes=false;scope.lightboxes=[];scope.editing={newLightboxName:''};scope.error={showErrorMessage:false,errorMessage:''};scope.alreadySaved=false;scope.isCheckboxSelected=function(lightboxAssets){return arrayHelperService.containsArray(lightboxAssets,scope.gettyIds);};scope.toggleLightbox=function(index){var lightbox=scope.lightboxes[index],oldCount,newCount,promise,updatedText;if(arrayHelperService.containsArray(lightbox.assets,scope.gettyIds)){promise=lightboxService.removeFromLightbox(lightbox.id,scope.gettyIds);scope.error.showErrorMessage=false;arrayHelperService.removeFromArray(lightbox.assets,scope.gettyIds);lightbox.count-=scope.gettyIds.length;updatedText=$filter('i18n')('REMOVED_FROM_LIGHTBOXNAME',lightbox.name);}else{promise=lightboxService.addToLightbox(lightbox.id,scope.gettyIds).then(function(){oldCount=lightbox.assets.length;scope.error.showErrorMessage=false;lightbox.assets=arrayHelperService.unique(lightbox.assets.concat(scope.gettyIds));newCount=lightbox.assets.length;lightbox.count+=(newCount-oldCount);scope.sendToOmniture(OMNITURE_EVENTS.LB_ADD,{lightboxName:lightbox.name});});updatedText=$filter('i18n')('ADDED_TO_LIGHTBOXNAME',lightbox.name);}
scope.toggleMenuOpen(false,true);scope.showLightboxUpdated(updatedText);promise.catch(function(){scope.displayError();});};scope.clearLightboxCache=function(){for(var i=0;i<localStorage.length;i++){if(localStorage.key(i).indexOf('lightbox-')>-1){localStorage.removeItem(localStorage.key(i));}}};scope.processLightboxes=function(serviceBoxes,assets,pageNumber,itemsPerPage,includeAll){scope.lightboxes=angular.copy(serviceBoxes.favorites);scope.error.showErrorMessage=false;scope.hideExcessBoxes=false;if(serviceBoxes.totalResults>MAX_LIGHTBOX_COUNT){scope.hideExcessBoxes=true;}
lightboxService.searchLightboxes(assets,pageNumber,itemsPerPage,includeAll).then(function(serviceBoxes){scope.lightboxes=angular.copy(serviceBoxes.favorites);scope.alreadySaved=false;if(scope.lightboxes.length>0&&scope.lightboxes[0].assets.length>0){scope.alreadySaved=true;}
scope.error.showErrorMessage=false;}).catch(function(){scope.displayError();});};scope.retrieveLightboxes=function(assets,pageNumber,itemsPerPage,includeAll){var localStorageKey;localStorageKey='lightbox-'+JSON.stringify({pageNumber:pageNumber,itemsPerPage:itemsPerPage,includeAll:includeAll,assets:assets});if(!localStorage.getItem(localStorageKey)){lightboxService.searchLightboxes([],pageNumber,itemsPerPage,includeAll).then(function(serviceBoxes){scope.processLightboxes(serviceBoxes,assets,pageNumber,itemsPerPage,includeAll);}).catch(function(){scope.displayError();});}else{scope.processLightboxes(angular.fromJson(localStorage.getItem(localStorageKey)),assets,pageNumber,itemsPerPage,includeAll);}};scope.displayMenu=function(){if(scope.user){if(!scope.menuOpen){scope.toggleMenuOpen(true,false);}else{scope.toggleMenuOpen(false,true);}}else{var redirectUrl=$location.url(),userCookie='u_c',searchQuery;ipCookie('lightbox_referrer',true,{path:'/',secure:true,expires:5,expirationUnit:'minutes'});searchQuery=$window.location.search;if(searchQuery.indexOf('facets')<0){redirectUrl='/'+scope.assetType.toLowerCase()+redirectUrl;}
if(ipCookie(userCookie)){$window.location=urlBuilder.buildReturnUrl('sign-in',redirectUrl);}else{$window.location=urlBuilder.buildReturnUrl('join',redirectUrl);}}};scope.addNewLightbox=function(){var lightboxName=scope.editing.newLightboxName,generatedName;if(lightboxName===''){generatedName=scope.generateLightboxName();lightboxName=$filter('i18n')('LIGHTBOX_EMPTY_NAME',generatedName);scope.editing.newLightboxName=lightboxName;}
scope.createLightboxReq(lightboxName).then(function(lightboxId){scope.lightboxAddReq(lightboxId,lightboxName).catch(function(){scope.displayError();});}).catch(function(){scope.displayError();});scope.clearLightboxCache();scope.toggleMenuOpen(false,true);scope.showLightboxUpdated($filter('i18n')('SAVED_TO_LIGHTBOXNAME',lightboxName));};scope.createLightboxReq=function(lightboxName){return lightboxService.createLightbox(lightboxName).then(function(newId){scope.error.showErrorMessage=false;scope.sendToOmniture(OMNITURE_EVENTS.LB_CREATE,{lightboxName:lightboxName});return newId;});};scope.lightboxAddReq=function(lightboxId,lightboxName){return lightboxService.addToLightbox(lightboxId,scope.gettyIds).then(function(){scope.sendToOmniture(OMNITURE_EVENTS.LB_ADD,{lightboxName:lightboxName});});};scope.generateLightboxName=function(){var date=new Date(),days=[date.getMonth()+1,date.getDate(),date.getFullYear()];return'('+days.join('/')+')-'+lightboxService.incrementDefaultNameCount();};scope.extendLightboxList=function(){scope.hideExcessBoxes=false;lightboxService.searchLightboxes([],1,3,true).then(function(serviceBoxes){scope.hideAddDialog();scope.lightboxes=angular.copy(serviceBoxes.favorites);scope.error.showErrorMessage=false;scope.maxLightboxes=serviceBoxes.totalResults;if(scope.savePage){$timeout(scope.positionRelativeToTop,0);}
lightboxService.searchLightboxes(scope.gettyIds,1,3,true).then(function(serviceBoxes){scope.lightboxes=angular.copy(serviceBoxes.favorites);scope.error.showErrorMessage=false;}).catch(function(){scope.displayError();});}).catch(function(){scope.displayError();});};scope.toggleMenuOpen=function(open,ignoreRetrieval){if(open!==undefined){scope.menuOpen=open;}else{scope.menuOpen=!scope.menuOpen;}
if(!ignoreRetrieval){scope.retrieveLightboxes(scope.gettyIds,1,3,false);}
if(scope.menuOpen){scope.setupModalOutClick();scope.editing.newLightboxName='';$rootScope.$broadcast(LIGHTBOX_EVENTS.LB_OPEN_EVENT,{fileId:scope.fileIds});scope.sendToOmniture(OMNITURE_EVENTS.LB_TOGGLE);if(scope.savePage){$timeout(scope.positionRelativeToTop,0);}}else{scope.maxLightboxes=MAX_LIGHTBOX_COUNT;scope.hideExcessBoxes=false;scope.clearModalOutClick();}};scope.hideAddDialog=function(){var lightboxListEl=element.find('.lightbox-wrapper.save-multiple-files .lightbox-add-wrapper');if(!Breakpoints.isMatched({name:'SMALL_BREAKPOINT'})){lightboxListEl.css('display','none');}};scope.positionRelativeToTop=function(){var lightboxListEl=element.find('.lightbox-wrapper.save-multiple-files .lightbox-add-wrapper'),lightboxBtn=element.find('.lightbox-btn'),separation=10,top=-lightboxBtn.height()-lightboxListEl.height()-separation;if(!Breakpoints.isMatched({name:'SMALL_BREAKPOINT'})){lightboxListEl.css('top',top+'px');lightboxListEl.css('display','block');}};scope.shouldDisplayOnRight=function(){var lightboxListEl=element.find('.lightbox-add-wrapper,.lightbox-create-wrapper'),lightboxBtn=element.find('.lightbox-btn'),lightboxOffsetLeft;lightboxOffsetLeft=lightboxBtn.offset().left-lightboxListEl.width();return(lightboxOffsetLeft<0);};scope.showLightboxUpdated=function(text){scope.lightboxUpdatedText=text;scope.lightboxCreated=true;$timeout(function(){scope.lightboxCreated=false;scope.alreadySaved=true;},2000);};scope.sendToOmniture=function(event,args){var omnitureArgs={};if(event===OMNITURE_EVENTS.LB_ADD&&scope.savePage){event=OMNITURE_EVENTS.LB_SAVE_PAGE;}
switch(event){case OMNITURE_EVENTS.LB_TOGGLE:omnitureArgs=scope.prepareToggleEvent();break;case OMNITURE_EVENTS.LB_ADD:omnitureArgs=scope.prepareAddEvent(args);break;case OMNITURE_EVENTS.LB_SAVE_PAGE:omnitureArgs=scope.prepareAddPageEvent(args);break;case OMNITURE_EVENTS.LB_CREATE:omnitureArgs=scope.prepareCreateEvent(args);break;}
if(omnitureArgs){$rootScope.$broadcast(event,omnitureArgs);}};scope.prepareAddEvent=function(lightboxArgs){var args=null;if(!scope.savePage){args={assetType:scope.assetType,assetCollection:scope.assetCollection,assetId:scope.fileIds[0],assetIsEditorial:scope.assetLicense==='Editorial'||scope.assetIsEditorial,appId:scope.appId,name:lightboxArgs.lightboxName};}
return args;};scope.prepareAddPageEvent=function(lightboxArgs){var args=null;if(scope.savePage){args={name:lightboxArgs.lightboxName};}
return args;};scope.prepareToggleEvent=function(){var args=null;if(!scope.savePage){args={assetId:scope.fileIds[0],assetIsEditorial:(scope.assetLicense==='Editorial'||scope.assetIsEditorial),assetType:scope.assetType,assetCollection:scope.assetCollection,appId:scope.appId};}
return args;};scope.prepareCreateEvent=function(lightboxArgs){var args={appId:scope.appId,name:lightboxArgs.lightboxName};if(!scope.savePage){args.assetId=scope.fileIds[0];}
return args;};scope.displayError=function(){scope.error.showErrorMessage=true;scope.error.errorMessage=ERROR_MESSAGING.LIGHTBOX_ERROR;};scope.setupModalOutClick=function(){$timeout(function(){$window.onclick=function(event){var targetEl=angular.element(event.target),lightboxListEl=angular.element('.lightbox-add-wrapper'),lightboxAddEl=angular.element('.lightbox-create-wrapper');if((!lightboxListEl.is(targetEl)&&lightboxListEl.has(targetEl).length===0)&&(!lightboxAddEl.is(targetEl)&&lightboxAddEl.has(targetEl).length===0)){if(scope.menuOpen){scope.toggleMenuOpen(false,true);}}};});};scope.clearModalOutClick=function(){$window.onclick=null;};}};}]);}());(function(){'use strict';var module=angular.module('common.directives'),DARK='#000000',LIGHT='#D1D1D1',DEFAULT='# HEX';module.directive('colorPicker',['$timeout','colorService','facetStateService',function($timeout,colorService,facetStateService){var currentFacetColor;return{restrict:'E',scope:{facetColor:'=',change:'&'},templateUrl:'/static/js/angular/common/partials/_colorPicker.html',controller:function($scope){$scope.placeholder=DEFAULT;$scope.input='';$scope.cursorMove={color:'',X:0,Y:0,showCursor:false};if($scope.facetColor&&$scope.facetColor!==''){$scope.input='#'+colorService.formatHexadecimalValue($scope.facetColor);}
$scope.$watch(function(){return facetStateService.isInitialized();},function(){$scope.facetColor=colorService.formatHexadecimalValue(facetStateService.getFacet('color'));$scope.input=facetStateService.getFacet('color');});this.setColorSelection=function(hex){$scope.facetColor=colorService.formatHexadecimalValue(hex);$scope.input=hex;$scope.$apply();$scope.change();};this.setCursor=function(color,X,Y){$scope.cursorMove.color=color;$scope.cursorMove.X=X;$scope.cursorMove.Y=Y;$scope.$apply();};this.showCursor=function(show){$scope.cursorMove.showCursor=show;$scope.$apply();};$scope.clearColor=function(){$timeout(function(){$scope.input='';$scope.facetColor='';$scope.cursorMove.showCursor=false;$scope.$apply();$scope.change();});};$scope.getTextColor=function(hex){if(colorService.isHexadecimalValue(hex)){return colorService.getMostVisibleColor(hex,LIGHT,DARK);}else{return LIGHT;}};$scope.getHexadecimalValue=function(){var hex='';if(colorService.isHexadecimalValue($scope.input)){if($scope.input.indexOf('#')===-1){hex='#';}
hex+=$scope.input;}
return hex;};$scope.inputChanged=function(){if(colorService.isHexadecimalValue($scope.input)){$timeout(function(){$scope.facetColor=colorService.formatHexadecimalValue($scope.input);$scope.$apply();$scope.change();$scope.cursorMove.showCursor=false;});}};$scope.inputSize=function(){var size=6;if($scope.input.indexOf('#')!==-1){size=7;}
return size;};},link:function($scope){$scope.$watch('facetColor',function(newValue){if(currentFacetColor!==newValue){currentFacetColor=newValue;}});$scope.$watch(function(){return currentFacetColor;},function(newValue){var newInputValue='';if(newValue&&newValue!==''){newInputValue='#'+colorService.formatHexadecimalValue(newValue);}
if($scope.input!==newInputValue){$scope.input=newInputValue;$scope.cursorMove.showCursor=false;}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives'),RADIUS=67;module.directive('colorWheel',['$document','colorService',function($document,colorService){return{restrict:'A',require:'^colorPicker',link:function(scope,element,attrs,colorPickerCtrl){var ctx=element[0].getContext('2d'),img=new Image(),mousedown=false;img.src='/static/images/banshee/colorpicker/Color-Picker.png';img.onload=function(){ctx.drawImage(img,0,0);};element.on('mouseenter',function(){toggleMouseEvents(true);});element.on('mouseleave',function(){mousedown=false;toggleMouseEvents(false);});element.on('mousedown',function(event){var hex='',position=convertPosition(event);if(distance(position.X,position.Y)>RADIUS){return;}
mousedown=true;hex=getHexValue(position.X,position.Y);colorPickerCtrl.setCursor(hex,translateXCoordinate(position.X),translateYCoordinate(position.Y));colorPickerCtrl.showCursor(true);toggleMouseEvents(true);});function mousemove(event){var position=convertPosition(event),d=0,hex='';if(!mousedown){return;}
if(position.X<0){position.X=0;}
if(position.Y<0){position.Y=0;}
d=distance(position.X,position.Y);if(d>RADIUS){position.X=closestPointWithinWheel(d,position.X);position.Y=closestPointWithinWheel(d,position.Y);}
hex=getHexValue(position.X,position.Y);colorPickerCtrl.setCursor(hex,translateXCoordinate(position.X),translateYCoordinate(position.Y));}
function mouseup(event){if(mousedown){var position=convertPosition(event),hex=getHexValue(position.X,position.Y);mousedown=false;colorPickerCtrl.setColorSelection(hex);toggleMouseEvents(false);}}
function toggleMouseEvents(on){if(on){$document.on('mousemove',mousemove);$document.on('mouseup',mouseup);}else{$document.off('mousemove',mousemove);$document.off('mouseup',mouseup);}}
function convertPosition(event){var newPosition={X:event.offsetX,Y:event.offsetY};if(newPosition.X===undefined||newPosition.Y===undefined){newPosition.X=event.pageX-angular.element(event.target).offset().left;newPosition.Y=event.pageY-angular.element(event.target).offset().top;}
return newPosition;}
function getHexValue(x,y){var rgb=[],hex='';if(x<0||y<0){return'#000000';}
rgb=ctx.getImageData(x,y,1,1).data;hex=colorService.rgbToHex(rgb[0],rgb[1],rgb[2]);return hex;}
function distance(x,y){return Math.sqrt(Math.pow(RADIUS-x,2)+Math.pow(RADIUS-y,2));}
function closestPointWithinWheel(distance,p){var angle=Math.abs(RADIUS-p)/distance,newDistance=angle*(distance-RADIUS),newPoint=(p<RADIUS)?p+newDistance:p-newDistance;return newPoint;}
function translateXCoordinate(x){return x+(element.parent().outerWidth()-element.outerWidth())/2;}
function translateYCoordinate(y){return y+(element.parent().outerHeight()-element.outerHeight())/2;}}};}]);}());;(function(){'use strict';var module=angular.module('common.directives');module.directive('blurBackground',['$window',function($window){return{scope:{src:'@',blur:'@'},restrict:'E',link:function(scope,element){var lastRenderedInputs={blur:null,src:null},blurAmount=0.2;scope.$watch('src',function(){render();});scope.$watch('blur',function(){if(scope.blur===''){blurAmount=0.2;}else{blurAmount=Number(scope.blur);}
render();});function render(){if(!scope.src){element.removeAttr('style');return;}
if(lastRenderedInputs.src===scope.src&&lastRenderedInputs.blur===scope.blur){return;}
lastRenderedInputs.src=scope.src;lastRenderedInputs.blur=scope.blur;var image=new Image();image.onload=function(){var canvas,scale=200/Math.sqrt((image.naturalWidth*image.naturalHeight));image.width=image.naturalWidth*scale;image.height=image.naturalHeight*scale;canvas=$window.document.createElement('canvas');$window.StackBlur.stackBlurImage(this,canvas,Math.round(this.width*blurAmount),false);element.css({'background-image':'url('+canvas.toDataURL()+')'});};image.src=scope.src;}}};}]);})();(function(){'use strict';var directiveFn,GALLERY_LIMIT=1,HINT_LIMIT=7,MEMBER_LIMIT=4,ARROW_INDEX=-1,KEYED_VALUE='',isOmnitureLoaded=false;directiveFn=function($q,$window,$filter,$location,$timeout,hints){return{restrict:'E',transclude:true,templateUrl:function(elem,attrs){if(attrs.hasOwnProperty('useDefaultSearchBar')){return'/static/js/angular/common/partials/search-bar/_searchBar.html';}else{return'/static/js/angular/common/partials/search-bar/_asynchSearchBar.html';}},scope:{peekingOffset:'@',searchData:'='},link:function($scope,element,attrs){var keyDownQuery='',hintsTimeout=null;$scope.galleryLimit=attrs.galleryLimit||GALLERY_LIMIT;$scope.hintLimit=attrs.hintLimit||HINT_LIMIT;$scope.memberLimit=attrs.memberLimit||MEMBER_LIMIT;$scope.data={query:''};$scope.hints=[];$scope.galleries=[];$scope.members=[];$scope.peeking=attrs.hasOwnProperty('peeking');$scope.useDefault=attrs.hasOwnProperty('useDefaultSearchBar');$scope.data.placeholderTranslations='';$scope.initialLoad=false;if(attrs.hasOwnProperty('placeholdertranslations')){var placeholderTranslations=$scope.$eval(attrs.placeholdertranslations);$scope.data.placeholderTranslations=placeholderTranslations.PLACEHOLDERS;}
$scope.$on('focus',function(e,query){$scope.triggerQuery(query);element.find('.search-bar').addClass('focus');element.find('.search-file-type-selector').addClass('focus');});$scope.$on('blur',function(){element.find('.search-bar').removeClass('focus');element.find('.search-file-type-selector').removeClass('focus');});$scope.keyDown=function(e,query){var KEY_BACKSPACE=8,KEY_RETURN=13,LIS=element.find('.hints li');if(e.keyCode===KEY_RETURN){if(ARROW_INDEX<0){$scope.$broadcast('performSearchRequest',{doSearch:ARROW_INDEX<0,query:query});}else{setTimeout(function(){LIS.eq(ARROW_INDEX).triggerHandler('mousedown');},0);}}
if(e.keyCode&&e.keyCode===KEY_BACKSPACE){keyDownQuery=query;}};$scope.keyUp=function(e,query){var KEY_UP=38,KEY_DOWN=40,LIS=element.find('.hints li'),MAX=LIS.length-1,thisLi,stripTags;LIS.removeClass('active');switch(e.keyCode){case KEY_UP:ARROW_INDEX--;if(ARROW_INDEX<-1){ARROW_INDEX=-1;}
break;case KEY_DOWN:ARROW_INDEX++;if(ARROW_INDEX>MAX){ARROW_INDEX=MAX;}
break;default:KEYED_VALUE=query;ARROW_INDEX=-1;}
if(e.keyCode===KEY_UP||e.keyCode===KEY_DOWN){if(ARROW_INDEX<0){$scope.$broadcast('changeInputValue',KEYED_VALUE);}else{thisLi=LIS.eq(ARROW_INDEX);thisLi.addClass('active');stripTags=String(thisLi.html()).replace(/<[^>]+>/gm,'');$scope.$broadcast('changeInputValue',stripTags);}}};$scope.performSearch=function(hint){$scope.$broadcast('performSearch',hint);};$scope.$on('searchPerformed',function(){$scope.clearHints();});$scope.$on('performSearchResponse',function(event,data){if(data.doSearch){$scope.performSearch(data.query);}else{setTimeout(function(){element.find('.hints li').eq(ARROW_INDEX).triggerHandler('click');},0);}});$scope.$watch('data.query',function(query){if($scope.initialLoad){$scope.initialLoad=false;}else{$scope.triggerQuery(query);}});$scope.triggerQuery=function(query){if(typeof query==='string'&&query.length<1){$scope.clearHints();return undefined;}
$scope.$broadcast('decorateInput');if(hintsTimeout){$timeout.cancel(hintsTimeout);}
hintsTimeout=$timeout(function(){hintsTimeout=null;hints.getHints(query).then(function(data){if(!data){$scope.hints=[];$scope.members=[];$scope.galleries=[];return;}
$scope.galleries=data.galleries;$scope.hints=data.hints;$scope.members=data.members;$scope.version=data.version;$scope.requestTime=data.requestTime;$scope.fromCache=data.cache;$scope.keyword=data.source;$scope.language=data.language;$scope.startTime=data.startTime;})
['finally'](function(){$scope.$broadcast('undecorateInput');$scope.displayTime=Math.round((new Date()).getTime())-$scope.startTime;});},200);};$scope.clearHints=function(){$window.setTimeout(function(){$scope.galleries=[];$scope.hints=[];$scope.members=[];$scope.$broadcast('undecorateInput');$scope.$apply();},10);};$scope.$on('triggerOmniture',function(e,data){if(!isOmnitureLoaded){jQuery(document).on('omniture:trackingLoaded',function(){isOmnitureLoaded=true;jQuery(document).trigger('omniture:autoSuggest',$scope.getOmnitureString(data));});}else{jQuery(document).trigger('omniture:autoSuggest',$scope.getOmnitureString(data));}});$scope.getOmnitureString=function(item){var omnitureString,time=0,time1=0,time2=0,index=-1,isGallery=false,isContributor=false,hasHints=$scope.hasHints();if(hasHints){omnitureString=$scope.version;}else{omnitureString=0;}
if($scope.fromCache){omnitureString+='|1|';}else{omnitureString+='|0|';}
if(hasHints){time=($scope.requestTime-($scope.requestTime%100))/100;time1=($scope.displayTime-($scope.displayTime%100))/100;var clickTime=Math.round((new Date()).getTime())-$scope.startTime;time2=(clickTime-(clickTime%100))/100;}
omnitureString+=time+'*'+time1+'*'+time2+'|';isContributor=item.hasOwnProperty('userId');isGallery=item.hasOwnProperty('lightboxId');if(isGallery){index=$scope.galleries.indexOf(item);omnitureString+=index+'|2|';}else if(isContributor){index=$scope.members.indexOf(item);omnitureString+=index+'|1|';}else{index=$scope.hints.indexOf(item);omnitureString+=index+'|0|';}
if(hasHints){omnitureString+=$scope.language+'|'+$scope.keyword;}else{omnitureString+='en_US|'+item;}
return omnitureString;};$scope.showHints=function(){return $scope.hasHints()&&element.find('.search-bar').hasClass('focus');};$scope.hasHints=function(){var flag=false,queryLower='',i;if(typeof $scope.data.query!=='undefined'){queryLower=$scope.data.query.toLowerCase();}
if(queryLower.length&&(('galleries'in $scope&&$scope.galleries.length>0)||('hints'in $scope&&$scope.hints.length>0)||('members'in $scope&&$scope.members.length>0))){for(i in $scope.galleries){if($scope.galleries.hasOwnProperty(i)){var gallery=$scope.galleries[i].string;if(gallery.toLowerCase().indexOf($scope.query)>-1){flag=true;}}}
for(i in $scope.hints){if($scope.hints.hasOwnProperty(i)){if($scope.hints[i].string.toLowerCase().indexOf(queryLower)>-1){flag=true;}}}
for(i in $scope.members){if($scope.members.hasOwnProperty(i)&&$scope.members[i].string.toLowerCase().indexOf(queryLower)>-1){flag=true;}}
return flag;}
return false;};if($window.addEventListener){$window.addEventListener('click',function(){$scope.clearHints();});}
$scope.searchSubmit=function(e){var query=$scope.data.query||element.find('.search-bar-input').val();if(query){$scope.performSearch(query);if(e){e.stopPropagation();}}};}};};angular.module('common.directives').directive('searchBar',['$q','$window','$filter','$location','$timeout','hints',directiveFn]);jQuery(document).on('omniture:trackingLoaded',function(){isOmnitureLoaded=true;});}());(function(){'use strict';var module=angular.module('common.directives');module.directive('sbAsynch',['facetStateService','$timeout',function(facetStateService,$timeout){return{restrict:'E',templateUrl:'/static/js/angular/common/partials/search-bar/_sbAsynch.html',link:function($scope,element,attrs){$scope.placeHolder='';$scope.placeHolderMobile='';$scope.searchData=$scope.$eval(attrs.data);$scope.initialLoad=true;if($scope.searchData.searchTermsInUse&&$scope.searchData.searchTermsInUse[0]){$scope.data.query=$scope.searchData.searchTermsInUse.join(' ');}else{$scope.data.query='';}
$scope.focus=function(){$scope.$emit('focus',$scope.data.query);};$scope.blur=function(){$scope.$emit('blur');};$scope.$on('performSearchRequest',function(event,data){$scope.$emit('performSearchResponse',{doSearch:(data.doSearch||$scope.isAlternateView()),query:data.query});});$scope.$on('changeInputValue',function(event,keyedValue){element.find('input').val(keyedValue);});$scope.$on('decorateInput',function(){element.find('input').addClass('loading');});$scope.$on('undecorateInput',function(){element.find('input').removeClass('loading');});$scope.clearQuery=function(){if($scope.isAlternateView()){facetStateService.setFacet('text',[]);}
$scope.data.query='';$timeout(function(){angular.element('#search-bar-input').focus();},0,false);};$scope.$on('performSearch',function(event,data){$scope.performSearch(data);});$scope.performSearch=function(hint){if(typeof hint==='string'){hint=hint.replace(/["\(\)\{\}\[\]]+/g,'');}
$scope.$emit('triggerOmniture',hint);if(hint.length===0&&!$scope.isAlternateView()){return;}else{facetStateService.setFacet('pageNumber',1);facetStateService.clearFacetGroup('searchId');if(facetStateService.getFacet('gettyMasterIdSet').length||facetStateService.getFacet('fileIdSet').length){facetStateService.clearFacetGroup('gettyMasterIdSet');facetStateService.clearFacetGroup('fileIdSet');if(facetStateService.allOptionsActive('abstractType')){facetStateService.setFileTypeToDefault();}}
if(typeof hint==='object'){if(!angular.isUndefined(hint.userId)&&hint.userId!==null){$scope.searchData.singleView.clearSingleAlternateView();facetStateService.setFacet('portfolioID',[hint.userId]);$scope.searchData.singleView.setAlternateView('portfolio',{state:true,name:hint.string},hint.userId);facetStateService.activateAllOptions('abstractType');facetStateService.setFacet('additionalAudio','true');}else{$scope.searchData.singleView.clearSingleAlternateView();facetStateService.setFacet('lightboxID',[hint.lightboxId]);$scope.searchData.singleView.setAlternateView('lightbox',{state:true,name:hint.string},hint.lightboxId);facetStateService.activateAllOptions('abstractType');facetStateService.setFacet('additionalAudio','true');}}else if(hint.search(/lean ?in ?collection ?/i)!==-1){$scope.searchData.singleView.clearSingleAlternateView();facetStateService.setFacet('lightboxID',[15518390]);$scope.searchData.singleView.setAlternateView('lightbox',{state:true,name:'Lean In Collection'},15518390);facetStateService.activateAllOptions('abstractType');facetStateService.setFacet('additionalAudio','true');hint=hint.replace(/lean ?in ?collection ?/i,'');}
if(!$scope.searchData.searchResponse.pendingKeywords){$scope.searchData.searchResponse.pendingKeywords=[];}
if(!hint||typeof hint==='object'){facetStateService.setFacet('text',[]);$scope.searchData.searchResponse.keywordTerms=[];$scope.data.query='';}else if(facetStateService.getFacet('text').join(' ')!==hint){$scope.searchData.searchResponse.pendingKeywords.push(hint);facetStateService.setFacet('text',[hint]);$scope.data.query=hint;}else{$timeout(function(){angular.element('#search-bar-input').blur();},0,false);}
if(Breakpoints.isMatched({name:'SMALL_BREAKPOINT'})||Breakpoints.isMatched({name:'MEDIUM_BREAKPOINT'})){if(typeof hint!=='object'){$scope.data.query=hint;}}
$scope.$emit('searchPerformed');}};$scope.setPlaceholder=function(){return $scope.placeHolder;};$scope.isAlternateView=function(){return facetStateService.getFacet('portfolio')||facetStateService.getFacet('lightboxID').length;};angular.element(window).bind('pageshow',function(event){if(event.originalEvent.persisted){$timeout(function(){angular.element('input').val($scope.data.query);},100,false);}});}};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('sbDefault',['urlBuilder','facetStateService','redirect','$timeout','$filter','fileTypeStorageService',function(urlBuilder,facetStateService,redirect,$timeout,$filter,fileTypeStorageService){return{restrict:'E',templateUrl:'/static/js/angular/common/partials/search-bar/_sbDefault.html',link:function($scope,element,attrs){$scope.placeHolder='';$scope.placeHolderMobile='';$scope.source=attrs.source||null;var placeholderSelection={};if($scope.data.placeholderTranslations){placeholderSelection=$scope.data.placeholderTranslations;$scope.placeHolderMobile=placeholderSelection.mobile;}else{placeholderSelection={'image':$filter('i18n')('PERFECT_IMAGES'),'photos':$filter('i18n')('PERFECT_PHOTOS'),'illustrations':$filter('i18n')('PERFECT_ILLUSTRATIONS'),'video':$filter('i18n')('PERFECT_VIDEOS'),'audio':$filter('i18n')('PERFECT_AUDIO')};$scope.placeHolderMobile=$filter('i18n')('SEARCHING');}
$scope.focus=function(query){$scope.$emit('focus',query);};$scope.blur=function(){$scope.$emit('blur');};$scope.$on('performSearchRequest',function(event,data){$scope.$emit('performSearchResponse',data);});$scope.$on('changeInputValue',function(event,keyedValue){element.find('input').val(keyedValue);});$scope.$on('decorateInput',function(){element.find('input').addClass('loading');});$scope.$on('undecorateInput',function(){element.find('input').removeClass('loading');});$scope.clearQuery=function(){$scope.data.query='';$timeout(function(){angular.element('#search-bar-input').focus();},0,false);};$scope.$on('fileTypeChanged',function(){$scope.performSearch($scope.data.query);});$scope.$on('performSearch',function(event,data){$scope.performSearch(data);});$scope.performSearch=function(hint){var activeFileTypes=facetStateService.getActiveValues('abstractType');if(typeof hint==='string'){hint=hint.replace(/["\(\)\{\}\[\]]+/g,'');}
$scope.$emit('triggerOmniture',hint);fileTypeStorageService.setFileType(activeFileTypes);urlBuilder.build(hint,activeFileTypes.join(),$scope.source).then(function(url){if(typeof hint==='string'){hint={userString:hint};}
$scope.data.query=hint.userString;$scope.$emit('searchPerformed');redirect.to(url);});};$scope.initBreakpoints=function(){Breakpoints.on({name:'LESSTHAN800_BREAKPOINT',el:jQuery('#content-root')[0],matched:function(){$scope.setPlaceholder();$scope.$apply();}});Breakpoints.on({name:'GREATERTHAN800_BREAKPOINT',el:jQuery('#content-root')[0],matched:function(){$scope.setPlaceholder();$scope.$apply();}});};$timeout($scope.initBreakpoints);$scope.setPlaceholder=function(){var filetype=facetStateService.getActiveValues('abstractType');if(Breakpoints.isMatched({name:'LESSTHAN800_BREAKPOINT',el:jQuery('#content-root')[0]})){$scope.placeHolder=$scope.placeHolderMobile;}else{if(filetype.length>1||filetype.length===0){$scope.placeHolder=placeholderSelection.image;}else{$scope.placeHolder=placeholderSelection[filetype[0]];}}
return $scope.placeHolder;};}};}]);}());(function(){'use strict';var directiveFn;directiveFn=function($rootScope,$timeout,facetStateService,locker,omnitureService,mobileUIService){return{restrict:'E',templateUrl:'/static/js/angular/common/partials/_refineSearch.html',controller:function($scope){$scope.toggleRefinePanel=function(){$scope.refineData.showRefinePanel=!($scope.refineData.showRefinePanel);omnitureService.toggleRefinePanel($scope.refineData.showRefinePanel);if(!$scope.refineData.refinePanelMobile&&locker.supported()){locker.driver('local').namespace('srp').put($scope.refineData.REFINE_LOCAL_STORAGE_NAME,$scope.refineData.showRefinePanel);}};$scope.showBadge=function(){var filterFacets=angular.copy(facetStateService.filterFacets),index=filterFacets.indexOf('collectionPrice');if(index>-1){filterFacets.splice(index,1);}
return facetStateService.hasActiveFacets(filterFacets);};$scope.$watchGroup(['refineData.refinePanelMobile','refineData.showRefinePanel'],function(){$rootScope.$emit('syncRefinePanel',$scope.refineData);});$rootScope.$on('syncRefinePanel',function(event,args){$scope.refineData.showRefinePanel=args.showRefinePanel;});},link:function($scope){$scope.refineData={showRefinePanel:false,refinePanelMobile:false,allowRefineFacets:true,REFINE_LOCAL_STORAGE_NAME:'srpRefinementVisible'};$scope.refineData.allowRefineFacets=!facetStateService.allOptionsActive('abstractType');$scope.$watch(function(){if(locker.supported){return locker.driver('local').namespace('srp').get($scope.refineData.REFINE_LOCAL_STORAGE_NAME);}else{return false;}},function(showRefineVar){$scope.refineData.showRefinePanel=showRefineVar;});$scope.showAndHideRefinePanel=function(){if(!$scope.refineData.allowRefineFacets){$scope.refineData.showRefinePanel=false;}else{if($scope.refineData.refinePanelMobile){$scope.refineData.showRefinePanel=false;}else if(locker.supported()){$scope.refineData.showRefinePanel=locker.driver('local').namespace('srp').get($scope.refineData.REFINE_LOCAL_STORAGE_NAME,false);}}};$scope.showAndHideRefineButton=function(){var element=jQuery('.search-container');if($scope.refineData.allowRefineFacets===false){element.addClass('hide-refine-section');}else{element.removeClass('hide-refine-section');}};$scope.$watch(function(){return facetStateService.allOptionsActive('abstractType');},function(allOptionsActive){$scope.refineData.allowRefineFacets=!allOptionsActive;$scope.showAndHideRefineButton();$scope.showAndHideRefinePanel();},true);$scope.$watch('refineData.showRefinePanel',function(newValue){if(newValue&&$scope.refineData.refinePanelMobile){mobileUIService.disableBodyScrolling();}else{mobileUIService.enableBodyScrolling();}});$timeout(function(){if(!$scope.refineData.refinePanelMobile&&$scope.refineData.allowRefineFacets){if(locker.supported()){$scope.refineData.showRefinePanel=locker.driver('local').namespace('srp').get($scope.refineData.REFINE_LOCAL_STORAGE_NAME,false);}}},0);$scope.initBreakpoints=function(){$scope.refineData.refinePanelMobile=false;Breakpoints.on({name:'MEDIUM_DOWN_BREAKPOINT',el:jQuery('.srp-container')[0],matched:function(){$scope.refineData.refinePanelMobile=true;$scope.refineData.showRefinePanel=false;angular.element('#refine-arrow-open').addClass('small-size');$scope.$apply();},exit:function(){$scope.refineData.refinePanelMobile=false;angular.element('#refine-arrow-open').removeClass('small-size');$scope.$apply();}});};$timeout($scope.initBreakpoints);}};};angular.module('common.directives').directive('refineSearch',['$rootScope','$timeout','facetStateService','locker','omnitureService','mobileUIService',directiveFn]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('killClick',[function(){var _link=function(scope,element){jQuery(element).click(function(event){event.preventDefault();});};return{link:_link,restrict:'A'};}]);}());(function(){'use strict';var module=angular.module('common.directives');module.directive('icon',['$compile','$http','$templateCache',function($compile,$http,$templateCache){return{restrict:'E',scope:{svg:'@',html:'@'},link:function(scope,element,attrs){var templateUrl,iconPartialsLocation='/static/js/angular/common/partials/icon/';if(attrs.svg!==undefined){templateUrl=iconPartialsLocation+attrs.svg+'.svg';}else if(attrs.html!==undefined){templateUrl=iconPartialsLocation+attrs.html+'.html';}
if(templateUrl!==undefined){element.addClass('icon-directive');$http.get(templateUrl,{cache:$templateCache}).success(function(html){element.html(html);}).then(function(){element.html($compile(element.html())(scope));});}else{return;}}};}]);}());(function(){'use strict';angular.module('common.filters',[]);})();(function(){'use strict';var search=angular.module('common.filters');search.filter('preserveObjectOrder',[function(){return function(input){var array=[],objectKey;if(!angular.isObject(input)){return input;}
for(objectKey in input){if(objectKey){array.push(input[objectKey]);}}
return array;};}]);}());(function(){'use strict';var module=angular.module('common.filters');module.filter('truncate',[function(){return function(text,length,end){if(isNaN(length)){length=30;}
if(end===undefined){end='...';}
if(text.length<=length||text.length-end.length<=length){return text;}else{length=length-(end.length);return String(text).substring(0,length)+end;}};}]);}());BOOMR_start=new Date().getTime();function BOOMR_check_doc_domain(domain){var test;if(!domain){if(window.parent===window||!document.getElementById("boomr-if-as")){return;}
domain=document.domain;}
if(domain.indexOf(".")===-1){return;}
try{test=window.parent.document;return;}
catch(err){document.domain=domain;}
try{test=window.parent.document;return;}
catch(err){domain=domain.replace(/^[\w\-]+\./,"");}
BOOMR_check_doc_domain(domain);}
BOOMR_check_doc_domain();(function(w){var impl,boomr,d,myurl,createCustomEvent,dispatchEvent,visibilityState,visibilityChange;if(w.parent!==w&&document.getElementById("boomr-if-as")&&document.getElementById("boomr-if-as").nodeName.toLowerCase()==="script"){w=w.parent;myurl=document.getElementById("boomr-if-as").src;}
d=w.document;if(!w.BOOMR){w.BOOMR={};}
BOOMR=w.BOOMR;if(BOOMR.version){return;}
BOOMR.version="0.9";BOOMR.window=w;if(!BOOMR.plugins){BOOMR.plugins={};}
(function(){try{if(new w.CustomEvent("CustomEvent")!==undefined){createCustomEvent=function(e_name,params){return new w.CustomEvent(e_name,params);};}}
catch(ignore){}
try{if(!createCustomEvent&&d.createEvent&&d.createEvent("CustomEvent")){createCustomEvent=function(e_name,params){var evt=d.createEvent("CustomEvent");params=params||{cancelable:false,bubbles:false};evt.initCustomEvent(e_name,params.bubbles,params.cancelable,params.detail);return evt;};}}
catch(ignore){}
if(!createCustomEvent&&d.createEventObject){createCustomEvent=function(e_name,params){var evt=d.createEventObject();evt.type=evt.propertyName=e_name;evt.detail=params.detail;return evt;};}
if(!createCustomEvent){createCustomEvent=function(){return undefined;};}}());dispatchEvent=function(e_name,e_data,async){var ev=createCustomEvent(e_name,{"detail":e_data});if(!ev){return;}
function dispatch(){if(d.dispatchEvent){d.dispatchEvent(ev);}
else if(d.fireEvent){d.fireEvent("onpropertychange",ev);}}
if(async){BOOMR.setImmediate(dispatch);}
else{dispatch();}};if(typeof document.hidden!=="undefined"){visibilityState="visibilityState";visibilityChange="visibilitychange";}
else if(typeof document.mozHidden!=="undefined"){visibilityState="mozVisibilityState";visibilityChange="mozvisibilitychange";}
else if(typeof document.msHidden!=="undefined"){visibilityState="msVisibilityState";visibilityChange="msvisibilitychange";}
else if(typeof document.webkitHidden!=="undefined"){visibilityState="webkitVisibilityState";visibilityChange="webkitvisibilitychange";}
impl={beacon_url:"",beacon_type:"AUTO",site_domain:w.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",strip_query_string:false,onloadfired:false,handlers_attached:false,events:{"page_ready":[],"page_unload":[],"before_unload":[],"dom_loaded":[],"visibility_changed":[],"before_beacon":[],"onbeacon":[],"xhr_load":[],"click":[],"form_submit":[]},public_events:{"before_beacon":"onBeforeBoomerangBeacon","onbeacon":"onBoomerangBeacon","onboomerangloaded":"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(type){return function(ev){var target;if(!ev){ev=w.event;}
if(ev.target){target=ev.target;}
else if(ev.srcElement){target=ev.srcElement;}
if(target.nodeType===3){target=target.parentNode;}
if(target&&target.nodeName.toUpperCase()==="OBJECT"&&target.type==="application/x-shockwave-flash"){return;}
impl.fireEvent(type,target);};},fireEvent:function(e_name,data){var i,handler,handlers;e_name=e_name.toLowerCase();if(!this.events.hasOwnProperty(e_name)){return false;}
if(this.public_events.hasOwnProperty(e_name)){dispatchEvent(this.public_events[e_name],data);}
handlers=this.events[e_name];for(i=0;i<handlers.length;i++){try{handler=handlers[i];handler.fn.call(handler.scope,data,handler.cb_data);}
catch(err){BOOMR.addError(err,"fireEvent."+e_name+"<"+i+">");}}
return true;}};boomr={t_lstart:null,t_start:BOOMR_start,t_end:null,url:myurl,utils:{objectToString:function(o,separator,nest_level){var value=[],k;if(!o||typeof o!=="object"){return o;}
if(separator===undefined){separator="\n\t";}
if(!nest_level){nest_level=0;}
if(Object.prototype.toString.call(o)==="[object Array]"){for(k=0;k<o.length;k++){if(nest_level>0&&o[k]!==null&&typeof o[k]==="object"){value.push(this.objectToString(o[k],separator+(separator==="\n\t"?"\t":""),nest_level-1));}
else{if(separator==="&"){value.push(encodeURIComponent(o[k]));}
else{value.push(o[k]);}}}
separator=",";}
else{for(k in o){if(Object.prototype.hasOwnProperty.call(o,k)){if(nest_level>0&&o[k]!==null&&typeof o[k]==="object"){value.push(encodeURIComponent(k)+"="+
this.objectToString(o[k],separator+(separator==="\n\t"?"\t":""),nest_level-1));}
else{if(separator==="&"){value.push(encodeURIComponent(k)+"="+encodeURIComponent(o[k]));}
else{value.push(k+"="+o[k]);}}}}}
return value.join(separator);},getCookie:function(name){if(!name){return null;}
name=" "+name+"=";var i,cookies;cookies=" "+d.cookie+";";if((i=cookies.indexOf(name))>=0){i+=name.length;cookies=cookies.substring(i,cookies.indexOf(";",i));return cookies;}
return null;},setCookie:function(name,subcookies,max_age){var value,nameval,savedval,c,exp;if(!name||!impl.site_domain){BOOMR.debug("No cookie name or site domain: "+name+"/"+impl.site_domain);return false;}
value=this.objectToString(subcookies,"&");nameval=name+"="+value;c=[nameval,"path=/","domain="+impl.site_domain];if(max_age){exp=new Date();exp.setTime(exp.getTime()+max_age*1000);exp=exp.toGMTString();c.push("expires="+exp);}
if(nameval.length<500){d.cookie=c.join("; ");savedval=this.getCookie(name);if(value===savedval){return true;}
BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+value+"\n"+savedval);}
else{BOOMR.warn("Cookie too long: "+nameval.length+" "+nameval);}
return false;},getSubCookies:function(cookie){var cookies_a,i,l,kv,gotcookies=false,cookies={};if(!cookie){return null;}
if(typeof cookie!=="string"){BOOMR.debug("TypeError: cookie is not a string: "+typeof cookie);return null;}
cookies_a=cookie.split("&");for(i=0,l=cookies_a.length;i<l;i++){kv=cookies_a[i].split("=");if(kv[0]){kv.push("");cookies[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]);gotcookies=true;}}
return gotcookies?cookies:null;},removeCookie:function(name){return this.setCookie(name,{},-86400);},cleanupURL:function(url){if(!url){return"";}
if(impl.strip_query_string){return url.replace(/\?.*/,"?qs-redacted");}
return url;},hashQueryString:function(url,stripHash){if(!url){return url;}
if(!url.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof url);return"";}
if(url.match(/^\/\//)){url=location.protocol+url;}
if(!url.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+url);return"";}
if(stripHash){url=url.replace(/#.*/,"");}
if(!BOOMR.utils.MD5){return url;}
return url.replace(/\?([^#]*)/,function(m0,m1){return"?"+(m1.length>10?BOOMR.utils.MD5(m1):m1);});},pluginConfig:function(o,config,plugin_name,properties){var i,props=0;if(!config||!config[plugin_name]){return false;}
for(i=0;i<properties.length;i++){if(config[plugin_name][properties[i]]!==undefined){o[properties[i]]=config[plugin_name][properties[i]];props++;}}
return(props>0);},addObserver:function(el,config,timeout,callback,callback_data,callback_ctx){var o={observer:null,timer:null};if(!window.MutationObserver||!callback||!el){return null;}
function done(mutations){var run_again=false;if(o.timer){clearTimeout(o.timer);o.timer=null;}
if(callback){run_again=callback.call(callback_ctx,mutations,callback_data);if(!run_again){callback=null;}}
if(!run_again&&o.observer){o.observer.disconnect();o.observer=null;}
if(typeof run_again==="number"&&run_again>0){o.timer=setTimeout(done,run_again);}}
o.observer=new MutationObserver(done);if(timeout){o.timer=setTimeout(done,o.timeout);}
o.observer.observe(el,config);return o;},addListener:function(el,type,fn){if(el.addEventListener){el.addEventListener(type,fn,false);}else if(el.attachEvent){el.attachEvent("on"+type,fn);}},removeListener:function(el,type,fn){if(el.removeEventListener){el.removeEventListener(type,fn,false);}else if(el.detachEvent){el.detachEvent("on"+type,fn);}},pushVars:function(form,vars,prefix){var k,i,l=0,input;for(k in vars){if(vars.hasOwnProperty(k)){if(Object.prototype.toString.call(vars[k])==="[object Array]"){for(i=0;i<vars[k].length;++i){l+=BOOMR.utils.pushVars(form,vars[k][i],k+"["+i+"]");}}else{input=document.createElement("input");input.type="hidden";input.name=(prefix?(prefix+"["+k+"]"):k);input.value=(vars[k]===undefined||vars[k]===null?"":vars[k]);form.appendChild(input);l+=encodeURIComponent(input.name).length+encodeURIComponent(input.value).length+2;}}}
return l;},sendData:function(form,method){var input=document.createElement("input"),urls=[impl.beacon_url];form.method=method;form.id="beacon_form";form.enctype="application/x-www-form-urlencoded";if(impl.secondary_beacons&&impl.secondary_beacons.length){urls.push.apply(urls,impl.secondary_beacons);}
function remove(id){var el=document.getElementById(id);if(el){el.parentNode.removeChild(el);}}
function submit(){var iframe,name="boomerang_post-"+encodeURIComponent(form.action)+"-"+Math.random();try{iframe=document.createElement('<iframe name="'+name+'">');}
catch(ignore){iframe=document.createElement("iframe");}
form.action=urls.shift();form.target=iframe.name=iframe.id=name;iframe.style.display=form.style.display="none";iframe.src="javascript:false";remove(iframe.id);remove(form.id);document.body.appendChild(iframe);document.body.appendChild(form);form.submit();if(urls.length){BOOMR.setImmediate(submit);}
setTimeout(function(){remove(iframe.id);},10000);}
submit();}},init:function(config){var i,k,properties=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string","secondary_beacons"];BOOMR_check_doc_domain();if(!config){config={};}
for(i=0;i<properties.length;i++){if(config[properties[i]]!==undefined){impl[properties[i]]=config[properties[i]];}}
if(config.log!==undefined){this.log=config.log;}
if(!this.log){this.log=function(){};}
for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(config[k]&&config[k].hasOwnProperty("enabled")&&config[k].enabled===false){impl.disabled_plugins[k]=1;continue;}
if(impl.disabled_plugins[k]){if(!config[k]||!config[k].hasOwnProperty("enabled")||config[k].enabled!==true){continue;}
delete impl.disabled_plugins[k];}
if(typeof this.plugins[k].init==="function"){try{this.plugins[k].init(config);}
catch(err){BOOMR.addError(err,k+".init");}}}}
if(impl.handlers_attached){return this;}
if(!impl.onloadfired&&(config.autorun===undefined||config.autorun!==false)){if(d.readyState&&d.readyState==="complete"){BOOMR.loadedLate=true;this.setImmediate(BOOMR.page_ready,null,null,BOOMR);}
else{if(w.onpagehide||w.onpagehide===null){BOOMR.utils.addListener(w,"pageshow",BOOMR.page_ready);}
else{BOOMR.utils.addListener(w,"load",BOOMR.page_ready);}}}
BOOMR.utils.addListener(w,"DOMContentLoaded",function(){impl.fireEvent("dom_loaded");});(function(){var forms,iterator;if(visibilityChange!==undefined){BOOMR.utils.addListener(d,visibilityChange,function(){impl.fireEvent("visibility_changed");});BOOMR.subscribe("visibility_changed",function(){BOOMR.lastVisibilityEvent[BOOMR.visibilityState()]=BOOMR.now();});}
BOOMR.utils.addListener(d,"mouseup",impl.xb_handler("click"));forms=d.getElementsByTagName("form");for(iterator=0;iterator<forms.length;iterator++){BOOMR.utils.addListener(forms[iterator],"submit",impl.xb_handler("form_submit"));}
if(!w.onpagehide&&w.onpagehide!==null){BOOMR.utils.addListener(w,"unload",function(){BOOMR.window=w=null;});}}());impl.handlers_attached=true;return this;},page_ready:function(ev){if(!ev){ev=w.event;}
if(!ev){ev={name:"load"};}
if(impl.onloadfired){return this;}
impl.fireEvent("page_ready",ev);impl.onloadfired=true;return this;},setImmediate:function(fn,data,cb_data,cb_scope){var cb=function(){fn.call(cb_scope||null,data,cb_data||{});cb=null;};if(w.setImmediate){w.setImmediate(cb);}
else if(w.msSetImmediate){w.msSetImmediate(cb);}
else if(w.webkitSetImmediate){w.webkitSetImmediate(cb);}
else if(w.mozSetImmediate){w.mozSetImmediate(cb);}
else{setTimeout(cb,10);}},now:(function(){try{if("performance"in window&&window.performance&&window.performance.now){return function(){return Math.round(window.performance.now()+window.performance.timing.navigationStart);};}}
catch(ignore){}
return Date.now||function(){return new Date().getTime();};}()),visibilityState:(visibilityState===undefined?function(){return"visible";}:function(){return d[visibilityState];}),lastVisibilityEvent:{},subscribe:function(e_name,fn,cb_data,cb_scope){var i,handler,ev,unload_handler;e_name=e_name.toLowerCase();if(!impl.events.hasOwnProperty(e_name)){return this;}
ev=impl.events[e_name];for(i=0;i<ev.length;i++){handler=ev[i];if(handler&&handler.fn===fn&&handler.cb_data===cb_data&&handler.scope===cb_scope){return this;}}
ev.push({"fn":fn,"cb_data":cb_data||{},"scope":cb_scope||null});if(e_name==="page_ready"&&impl.onloadfired){this.setImmediate(fn,null,cb_data,cb_scope);}
if(e_name==="page_unload"||e_name==="before_unload"){unload_handler=function(evt){if(fn){fn.call(cb_scope,evt||w.event,cb_data);}};if(e_name==="page_unload"){if(w.onpagehide||w.onpagehide===null){BOOMR.utils.addListener(w,"pagehide",unload_handler);}
else{BOOMR.utils.addListener(w,"unload",unload_handler);}}
BOOMR.utils.addListener(w,"beforeunload",unload_handler);}
return this;},addError:function(err,src,extra){var str;if(typeof err!=="string"){str=String(err);if(str.match(/^\[object/)){str=err.name+": "+(err.description||err.message).replace(/\r\n$/,"");}
err=str;}
if(src!==undefined){err="["+src+":"+BOOMR.now()+"] "+err;}
if(extra){err+=":: "+extra;}
if(impl.errors[err]){impl.errors[err]++;}
else{impl.errors[err]=1;}},addVar:function(name,value){if(typeof name==="string"){impl.vars[name]=value;}
else if(typeof name==="object"){var o=name,k;for(k in o){if(o.hasOwnProperty(k)){impl.vars[k]=o[k];}}}
return this;},removeVar:function(arg0){var i,params;if(!arguments.length){return this;}
if(arguments.length===1&&Object.prototype.toString.apply(arg0)==="[object Array]"){params=arg0;}
else{params=arguments;}
for(i=0;i<params.length;i++){if(impl.vars.hasOwnProperty(params[i])){delete impl.vars[params[i]];}}
return this;},hasVar:function(name){return impl.vars.hasOwnProperty(name);},requestStart:function(name){var t_start=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+name,t_start);return{loaded:function(data){BOOMR.responseEnd(name,t_start,data);}};},responseEnd:function(name,t_start,data){console.log('BOOMerang >>>>>>>>>>>> '+JSON.stringify(name));if(typeof name==="object"&&name.url){impl.fireEvent("xhr_load",name);}
else{BOOMR.plugins.RT.startTimer("xhr_"+name,t_start);impl.fireEvent("xhr_load",{"name":"xhr_"+name,"data":data});}},sendBeacon:function(){var k,form,furl,img,length,errors=[];BOOMR.debug("Checking if we can send beacon");for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue;}
if(!this.plugins[k].is_complete()){BOOMR.debug("Plugin "+k+" is not complete, deferring beacon send");return false;}}}
impl.vars.pgu=BOOMR.utils.cleanupURL(d.URL.replace(/#.*/,""));if(!impl.vars.u){impl.vars.u=impl.vars.pgu;}
if(impl.vars.pgu===impl.vars.u){delete impl.vars.pgu;}
impl.vars.v=BOOMR.version;if(BOOMR.visibilityState()){impl.vars["vis.st"]=BOOMR.visibilityState();if(BOOMR.lastVisibilityEvent.visible){impl.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible;}
if(BOOMR.lastVisibilityEvent.hidden){impl.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden;}}
if(w!==window){impl.vars["if"]="";}
for(k in impl.errors){if(impl.errors.hasOwnProperty(k)){errors.push(k+(impl.errors[k]>1?" (*"+impl.errors[k]+")":""));}}
if(errors.length>0){impl.vars.errors=errors.join("\n");}
impl.errors={};impl.fireEvent("before_beacon",impl.vars);BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(impl.vars));if(!impl.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return true;}
form=document.createElement("form");length=BOOMR.utils.pushVars(form,impl.vars);impl.fireEvent("onbeacon",impl.vars);if(!length){return this;}
BOOMR.utils.sendData(form,impl.beacon_type==="AUTO"?(length>2000?"POST":"GET"):"POST");return true;}};delete BOOMR_start;if(typeof BOOMR_lstart==="number"){boomr.t_lstart=BOOMR_lstart;delete BOOMR_lstart;}
else if(typeof BOOMR.window.BOOMR_lstart==="number"){boomr.t_lstart=BOOMR.window.BOOMR_lstart;}
(function(){var make_logger;if(typeof console==="object"&&console.log!==undefined){boomr.log=function(m,l,s){console.log(s+": ["+l+"] "+m);};}
make_logger=function(l){return function(m,s){this.log(m,l,"boomerang"+(s?"."+s:""));return this;};};boomr.debug=make_logger("debug");boomr.info=make_logger("info");boomr.warn=make_logger("warn");boomr.error=make_logger("error");}());(function(){var ident;for(ident in boomr){if(boomr.hasOwnProperty(ident)){BOOMR[ident]=boomr[ident];}}
if(!BOOMR.xhr_excludes){BOOMR.xhr_excludes={};}}());dispatchEvent("onBoomerangLoaded",{"BOOMR":BOOMR},true);}(window));(function(w){var d=w.document,impl;BOOMR=BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(BOOMR.plugins.RT){return;}
impl={onloadfired:false,unloadfired:false,visiblefired:false,initialized:false,complete:false,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:true,navigationType:0,navigationStart:undefined,responseStart:undefined,t_start:undefined,cached_t_start:undefined,t_fb_approx:undefined,r:undefined,r2:undefined,basic_timers:{t_done:1,t_resp:1,t_page:1},addedVars:[],updateCookie:function(params,timer){var t_end,t_start,subcookies,k;if(!this.cookie){return false;}
subcookies=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{};if(typeof params==="object"){for(k in params){if(params.hasOwnProperty(k)){if(params[k]===undefined){if(subcookies.hasOwnProperty(k)){delete subcookies[k];}}
else{if(k==="nu"||k==="r"){params[k]=BOOMR.utils.hashQueryString(params[k],true);}
subcookies[k]=params[k];}}}}
t_start=BOOMR.now();if(timer){subcookies[timer]=t_start;}
BOOMR.debug("Setting cookie (timer="+timer+")\n"+BOOMR.utils.objectToString(subcookies),"rt");if(!BOOMR.utils.setCookie(this.cookie,subcookies,this.cookie_exp)){BOOMR.error("cannot set start cookie","rt");return false;}
t_end=BOOMR.now();if(t_end-t_start>50){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "
+t_start+" -> "+t_end,"rt");}
return true;},initFromCookie:function(){var url,subcookies;subcookies=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie));if(!subcookies){return;}
subcookies.s=Math.max(+subcookies.ul||0,+subcookies.cl||0);BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(subcookies),"rt");if(subcookies.s&&(subcookies.r||subcookies.nu)){this.r=subcookies.r;url=BOOMR.utils.hashQueryString(d.URL,true);BOOMR.debug(this.r+" =?= "+this.r2,"rt");BOOMR.debug(subcookies.s+" <? "+(+subcookies.cl+15),"rt");BOOMR.debug(subcookies.nu+" =?= "+url,"rt");if(!this.strict_referrer||(subcookies.nu&&subcookies.nu===url&&subcookies.s<+subcookies.cl+15)||(subcookies.s===+subcookies.ul&&this.r===this.r2)){this.t_start=subcookies.s;if(+subcookies.hd>subcookies.s){this.t_fb_approx=parseInt(subcookies.hd,10);}}
else{this.t_start=this.t_fb_approx=undefined;}}
this.updateCookie({s:undefined,r:undefined,nu:undefined,ul:undefined,cl:undefined,hd:undefined});},getBoomerangTimings:function(){var res,k,urls,url,startTime,data;function trimTiming(time,st){var timeMs=Math.round(time?time:0),startTimeMs=Math.round(st?st:0);timeMs=(timeMs===0?0:(timeMs-startTimeMs));return timeMs?timeMs:"";}
if(BOOMR.t_start){BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start);BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end);BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart);BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart);}}
try
{if(window.performance&&window.performance.getEntriesByName){urls={"rt.bmr":BOOMR.url};for(url in urls){if(urls.hasOwnProperty(url)&&urls[url]){res=window.performance.getEntriesByName(urls[url]);if(!res||res.length===0){continue;}
res=res[0];startTime=trimTiming(res.startTime,0);data=[startTime,trimTiming(res.responseEnd,startTime),trimTiming(res.responseStart,startTime),trimTiming(res.requestStart,startTime),trimTiming(res.connectEnd,startTime),trimTiming(res.secureConnectionStart,startTime),trimTiming(res.connectStart,startTime),trimTiming(res.domainLookupEnd,startTime),trimTiming(res.domainLookupStart,startTime),trimTiming(res.redirectEnd,startTime),trimTiming(res.redirectStart,startTime)].join(",").replace(/,+$/,"");BOOMR.addVar(url,data);impl.addedVars.push(url);}}}}
catch(e)
{BOOMR.addError(e,"rt.getBoomerangTimings");}},checkPreRender:function(){if(BOOMR.visibilityState()!=="prerender"){return false;}
BOOMR.plugins.RT.startTimer("t_load",this.navigationStart);BOOMR.plugins.RT.endTimer("t_load");BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart);BOOMR.plugins.RT.startTimer("t_postrender");return true;},initFromNavTiming:function(){var ti,p,source;if(this.navigationStart){return;}
p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;if(p&&p.navigation){this.navigationType=p.navigation.type;}
if(p&&p.timing){ti=p.timing;}
else if(w.chrome&&w.chrome.csi&&w.chrome.csi().startE){ti={navigationStart:w.chrome.csi().startE};source="csi";}
else if(w.gtbExternal&&w.gtbExternal.startE()){ti={navigationStart:w.gtbExternal.startE()};source="gtb";}
if(ti){BOOMR.addVar("rt.start",source||"navigation");this.navigationStart=ti.navigationStart||ti.fetchStart||undefined;this.responseStart=ti.responseStart||undefined;if(navigator.userAgent.match(/Firefox\/[78]\./)){this.navigationStart=ti.unloadEventStart||ti.fetchStart||undefined;}}
else{BOOMR.warn("This browser doesn't support the WebTiming API","rt");}
return;},validateLoadTimestamp:function(t_now,data){var t_done=t_now;if(data&&data.timing&&data.timing.loadEventEnd){t_done=data.timing.loadEventEnd;}
else if(BOOMR.loadedLate){if(w.performance&&w.performance.timing){if(w.performance.timing.loadEventStart&&w.performance.timing.loadEventStart<BOOMR.t_end){t_done=w.performance.timing.loadEventStart;}}
else{t_done=BOOMR.t_lstart||BOOMR.t_start||t_now;}}
return t_done;},setPageLoadTimers:function(ename,t_done,data){var t_resp_start;if(ename!=="xhr"){impl.initFromCookie();impl.initFromNavTiming();if(impl.checkPreRender()){return false;}}
if(ename==="xhr"){if(data&&data.timing){t_resp_start=data.timing.responseStart;}}
else if(impl.responseStart){t_resp_start=impl.responseStart;}
else if(impl.timers.hasOwnProperty("t_page")){BOOMR.plugins.RT.endTimer("t_page");}
else if(impl.t_fb_approx){t_resp_start=impl.t_fb_approx;}
if(t_resp_start){BOOMR.plugins.RT.endTimer("t_resp",t_resp_start);if(impl.timers.t_load){BOOMR.plugins.RT.setTimer("t_page",impl.timers.t_load.end-t_resp_start);}
else{BOOMR.plugins.RT.setTimer("t_page",t_done-t_resp_start);}}
if(impl.timers.hasOwnProperty("t_postrender")){BOOMR.plugins.RT.endTimer("t_postrender");BOOMR.plugins.RT.endTimer("t_prerender");}
return true;},setSupportingTimestamps:function(t_start){if(t_start){BOOMR.addVar("rt.tstart",t_start);}
if(typeof impl.t_start==="number"&&impl.t_start!==t_start){BOOMR.addVar("rt.cstart",impl.t_start);}
BOOMR.addVar("rt.bstart",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.addVar("rt.blstart",BOOMR.t_lstart);}
BOOMR.addVar("rt.end",impl.timers.t_done.end);},determineTStart:function(ename,data){var t_start;if(ename==="xhr"){if(data&&data.name&&impl.timers[data.name]){t_start=impl.timers[data.name].start;}
else if(data&&data.timing&&data.timing.requestStart){t_start=data.timing.requestStart;}
BOOMR.addVar("rt.start","manual");}
else if(impl.navigationStart){t_start=impl.navigationStart;}
else if(impl.t_start&&impl.navigationType!==2){t_start=impl.t_start;BOOMR.addVar("rt.start","cookie");}
else if(impl.cached_t_start){t_start=impl.cached_t_start;}
else{BOOMR.addVar("rt.start","none");t_start=undefined;}
BOOMR.debug("Got start time: "+t_start,"rt");impl.cached_t_start=t_start;return t_start;},page_ready:function(){this.onloadfired=true;},check_visibility:function(){if(BOOMR.visibilityState()==="visible"){impl.visiblefired=true;}
if(impl.visibilityState==="prerender"&&BOOMR.visibilityState()!=="prerender"){BOOMR.plugins.RT.done(null,"visible");}
impl.visibilityState=BOOMR.visibilityState();},page_unload:function(edata){BOOMR.debug("Unload called with "+BOOMR.utils.objectToString(edata)+" when unloadfired = "+this.unloadfired,"rt");if(!this.unloadfired){BOOMR.plugins.RT.done(edata,"unload");}
this.updateCookie({"r":d.URL},edata.type==="beforeunload"?"ul":"hd");this.unloadfired=true;},_iterable_click:function(name,element,etarget,value_cb){var value;if(!etarget){return;}
BOOMR.debug(name+" called with "+etarget.nodeName,"rt");while(etarget&&etarget.nodeName.toUpperCase()!==element){etarget=etarget.parentNode;}
if(etarget&&etarget.nodeName.toUpperCase()===element){BOOMR.debug("passing through","rt");value=value_cb(etarget);this.updateCookie({"nu":value},"cl");BOOMR.addVar("nu",BOOMR.utils.cleanupURL(value));impl.addedVars.push("nu");}},onclick:function(etarget){impl._iterable_click("Click","A",etarget,function(t){return t.href;});},onsubmit:function(etarget){impl._iterable_click("Submit","FORM",etarget,function(t){var v=t.getAttribute("action")||d.URL||"";return v.match(/\?/)?v:v+"?";});},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded");},clear:function(vars){if(impl.addedVars&&impl.addedVars.length>0){BOOMR.removeVar(impl.addedVars);impl.addedVars=[];}}};BOOMR.plugins.RT={init:function(config){BOOMR.debug("init RT","rt");if(w!==BOOMR.window){w=BOOMR.window;}
d=w.document;BOOMR.utils.pluginConfig(impl,config,"RT",["cookie","cookie_exp","strict_referrer"]);impl.r=impl.r2=BOOMR.utils.hashQueryString(d.referrer,true);impl.initFromCookie();impl.getBoomerangTimings();if(impl.initialized){return this;}
impl.complete=false;impl.timers={};impl.check_visibility();BOOMR.subscribe("page_ready",impl.page_ready,null,impl);BOOMR.subscribe("visibility_changed",impl.check_visibility,null,impl);BOOMR.subscribe("page_ready",this.done,"load",this);BOOMR.subscribe("xhr_load",this.done,"xhr",this);BOOMR.subscribe("dom_loaded",impl.domloaded,null,impl);BOOMR.subscribe("page_unload",impl.page_unload,null,impl);BOOMR.subscribe("click",impl.onclick,null,impl);BOOMR.subscribe("form_submit",impl.onsubmit,null,impl);BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this);BOOMR.subscribe("onbeacon",impl.clear,null,impl);impl.initialized=true;return this;},startTimer:function(timer_name,time_value){if(timer_name){if(timer_name==="t_page"){this.endTimer("t_resp",time_value);}
impl.timers[timer_name]={start:(typeof time_value==="number"?time_value:BOOMR.now())};}
return this;},endTimer:function(timer_name,time_value){if(timer_name){impl.timers[timer_name]=impl.timers[timer_name]||{};if(impl.timers[timer_name].end===undefined){impl.timers[timer_name].end=(typeof time_value==="number"?time_value:BOOMR.now());}}
return this;},setTimer:function(timer_name,time_delta){if(timer_name){impl.timers[timer_name]={delta:time_delta};}
return this;},addTimersToBeacon:function(vars,source){var t_name,timer,t_other=[];for(t_name in impl.timers){if(impl.timers.hasOwnProperty(t_name)){timer=impl.timers[t_name];if(typeof timer.delta!=="number"){if(typeof timer.start!=="number"){timer.start=impl.cached_t_start;}
timer.delta=timer.end-timer.start;}
if(isNaN(timer.delta)){continue;}
if(impl.basic_timers.hasOwnProperty(t_name)){BOOMR.addVar(t_name,timer.delta);impl.addedVars.push(t_name);}
else{t_other.push(t_name+"|"+timer.delta);}}}
if(t_other.length){BOOMR.addVar("t_other",t_other.join(","));impl.addedVars.push("t_other");}
if(source==="beacon"){impl.timers={};impl.complete=false;}},done:function(edata,ename){try{BOOMR.debug("Called done with "+BOOMR.utils.objectToString(edata,undefined,1)+", "+ename,"rt");}
catch(err){BOOMR.debug("Called done with "+err+", "+ename,"rt");}
var t_start,t_done,t_now=BOOMR.now(),subresource=false;impl.complete=false;t_done=impl.validateLoadTimestamp(t_now,edata);if(ename==="load"||ename==="visible"||ename==="xhr"){if(!impl.setPageLoadTimers(ename,t_done,edata)){return this;}}
t_start=impl.determineTStart(ename,edata);if(edata&&edata.data){edata=edata.data;}
if(ename==="xhr"&&edata){subresource=edata.subresource;}
this.endTimer("t_done",t_done);BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld","http.errno","http.method","xhr.sync");impl.setSupportingTimestamps(t_start);this.addTimersToBeacon();BOOMR.addVar("r",BOOMR.utils.cleanupURL(impl.r));if(impl.r2!==impl.r){BOOMR.addVar("r2",BOOMR.utils.cleanupURL(impl.r2));}
if(ename==="xhr"&&edata){if(edata&&edata.data){edata=edata.data;}}
if(ename==="xhr"&&edata){subresource=edata.subresource;if(edata.url){BOOMR.addVar("u",BOOMR.utils.cleanupURL(edata.url.replace(/#.*/,"")));impl.addedVars.push("u");}
if(edata.status&&(edata.status<-1||edata.status>=400)){BOOMR.addVar("http.errno",edata.status);}
if(edata.method&&edata.method!=="GET"){BOOMR.addVar("http.method",edata.method);}
if(edata.headers){BOOMR.addVar("http.hdr",edata.headers);}
if(edata.synchronous){BOOMR.addVar("xhr.sync",1);}
if(edata.initiator){BOOMR.addVar("http.initiator",edata.initiator);}
impl.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator");}
if(subresource){BOOMR.addVar("rt.subres",1);impl.addedVars.push("rt.subres");}
impl.updateCookie();if(ename==="unload"){BOOMR.addVar("rt.quit","");if(!impl.onloadfired){BOOMR.addVar("rt.abld","");}
if(!impl.visiblefired){BOOMR.addVar("rt.ntvu","");}}
impl.complete=true;BOOMR.sendBeacon();return this;},is_complete:function(){return impl.complete;}};}(window));(function(){BOOMR=BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(BOOMR.plugins.NavigationTiming){return;}
var impl={complete:false,xhr_done:function(edata){var w=BOOMR.window,res,data={},k;if(!edata){return;}
if(edata.data){edata=edata.data;}
if(edata.url&&w.performance&&w.performance.getEntriesByName){res=w.performance.getEntriesByName(edata.url);if(res&&res.length>0){res=res[0];data={nt_red_st:res.redirectStart,nt_red_end:res.redirectEnd,nt_fet_st:res.fetchStart,nt_dns_st:res.domainLookupStart,nt_dns_end:res.domainLookupEnd,nt_con_st:res.connectStart,nt_con_end:res.connectEnd,nt_req_st:res.requestStart,nt_res_st:res.responseStart,nt_res_end:res.responseEnd};if(res.secureConnectionStart){data.nt_ssl_st=res.secureConnectionStart;}
for(k in data){if(data.hasOwnProperty(k)&&data[k]){data[k]+=w.performance.timing.navigationStart;}}}}
if(edata.timing){res=edata.timing;if(!data.nt_req_st){data.nt_req_st=res.requestStart;}
if(!data.nt_res_st){data.nt_res_st=res.responseStart;}
if(!data.nt_res_end){data.nt_res_end=res.responseEnd;}
data.nt_domint=res.domInteractive;data.nt_domcomp=res.domComplete;data.nt_load_st=res.loadEventEnd;data.nt_load_end=res.loadEventEnd;}
for(k in data){if(data.hasOwnProperty(k)&&!data[k]){delete data[k];}}
BOOMR.addVar(data);try{impl.addedVars.push.apply(impl.addedVars,Object.keys(data));}catch(ignore){}
this.complete=true;BOOMR.sendBeacon();},done:function(){var w=BOOMR.window,p,pn,pt,data;if(this.complete){return this;}
impl.addedVars=[];p=w.performance||w.msPerformance||w.webkitPerformance||w.mozPerformance;if(p&&p.timing&&p.navigation){BOOMR.info("This user agent supports NavigationTiming.","nt");pn=p.navigation;pt=p.timing;data={nt_red_cnt:pn.redirectCount,nt_nav_type:pn.type,nt_nav_st:pt.navigationStart,nt_red_st:pt.redirectStart,nt_red_end:pt.redirectEnd,nt_fet_st:pt.fetchStart,nt_dns_st:pt.domainLookupStart,nt_dns_end:pt.domainLookupEnd,nt_con_st:pt.connectStart,nt_con_end:pt.connectEnd,nt_req_st:pt.requestStart,nt_res_st:pt.responseStart,nt_res_end:pt.responseEnd,nt_domloading:pt.domLoading,nt_domint:pt.domInteractive,nt_domcontloaded_st:pt.domContentLoadedEventStart,nt_domcontloaded_end:pt.domContentLoadedEventEnd,nt_domcomp:pt.domComplete,nt_load_st:pt.loadEventStart,nt_load_end:pt.loadEventEnd,nt_unload_st:pt.unloadEventStart,nt_unload_end:pt.unloadEventEnd};if(pt.secureConnectionStart){data.nt_ssl_st=pt.secureConnectionStart;}
if(pt.msFirstPaint){data.nt_first_paint=pt.msFirstPaint;}
BOOMR.addVar(data);try{impl.addedVars.push.apply(impl.addedVars,Object.keys(data));}catch(ignore){}}
if(w.chrome&&w.chrome.loadTimes){pt=w.chrome.loadTimes();if(pt){data={nt_spdy:(pt.wasFetchedViaSpdy?1:0),nt_cinf:pt.connectionInfo,nt_first_paint:pt.firstPaintTime};BOOMR.addVar(data);try{impl.addedVars.push.apply(impl.addedVars,Object.keys(data));}catch(ignore){}}}
this.complete=true;BOOMR.sendBeacon();},clear:function(vars){if(impl.addedVars&&impl.addedVars.length>0){BOOMR.removeVar(impl.addedVars);impl.addedVars=[];}
this.complete=false;}};BOOMR.plugins.NavigationTiming={init:function(){if(!impl.initialized){BOOMR.subscribe("page_ready",impl.done,null,impl);BOOMR.subscribe("xhr_load",impl.xhr_done,null,impl);BOOMR.subscribe("before_unload",impl.done,null,impl);BOOMR.subscribe("onbeacon",impl.clear,null,impl);impl.initialized=true;}
return this;},is_complete:function(){return impl.complete;}};}());(function(){BOOMR=BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(BOOMR.plugins.IstockTiming){return;}
var restricted={redirectStart:"rt_red_st",redirectEnd:"rt_red_end",domainLookupStart:"rt_dns_st",domainLookupEnd:"rt_dns_end",connectStart:"rt_con_st",connectEnd:"rt_con_end",secureConnectionStart:"rt_scon_st",requestStart:"rt_req_st",responseStart:"rt_res_st"},impl={complete:false,targetElements:['img','css'],targetElementsURLContains:undefined,pageType:undefined,done:function(){var p=BOOMR.window.performance,r,data,i,images,firstImageData,lastImageData,pageType=impl.pageType,compImageData;if(impl.complete){return;}
BOOMR.removeVar("istocktiming");if(p&&typeof p.getEntriesByType==="function"){r=p.getEntriesByType("resource");if(r){BOOMR.info("Client supports Resource Timing API","istocktiming");images=[];r.forEach(function(e){if(impl.targetElements.indexOf(e.initiatorType)>-1){if(!impl.targetElementsURLContains||e.name.indexOf(impl.targetElementsURLContains)>-1){images.push(e);}}});function extract(entry){var k;var timings={starttime:entry.startTime,duration:entry.duration,endtime:entry.responseEnd};for(k in restricted){if(restricted.hasOwnProperty(k)&&entry[k]>0){timings[restricted[k]]=entry[k];}}
return timings;};if(images.length>0){if(pageType==='srp'){firstImageData=extract(images[0]);lastImageData=extract(images[images.length-1]);data={it_targeted_num_img:images.length,it_first_img_st:firstImageData.starttime,it_first_img_et:firstImageData.endtime,it_first_img_dur:firstImageData.duration,it_last_img_st:lastImageData.starttime,it_last_img_et:lastImageData.endtime,it_last_img_dur:lastImageData.duration,it_e2e_img_dur:lastImageData.endtime-firstImageData.starttime};}else if(pageType==='adp'){compImageData=extract(images[0]);data={it_comp_img_st:compImageData.starttime,it_comp_img_et:compImageData.endtime,it_comp_img_dur:compImageData.duration};}
BOOMR.addVar(data);}}}
this.complete=true;BOOMR.sendBeacon();}};BOOMR.plugins.IstockTiming={init:function(config){BOOMR.utils.pluginConfig(impl,config,"IstockTiming",['targetElements','targetElementsURLContains','pageType']);BOOMR.subscribe("page_ready",impl.done,null,impl);return this;},is_complete:function(){return impl.complete;}};}());"use strict";var WaveSurfer={defaultParams:{height:128,waveColor:"#999",progressColor:"#555",cursorColor:"#333",cursorWidth:1,skipLength:2,minPxPerSec:20,pixelRatio:window.devicePixelRatio,fillParent:!0,scrollParent:!1,hideScrollbar:!1,normalize:!1,audioContext:null,container:null,dragSelection:!0,loopSelection:!0,audioRate:1,interact:!0,splitChannels:!1,renderer:"Canvas",backend:"WebAudio",mediaType:"audio"},init:function(a){if(this.params=WaveSurfer.util.extend({},this.defaultParams,a),this.container="string"==typeof a.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");if(this.mediaContainer="undefined"==typeof this.params.mediaContainer?this.container:"string"==typeof this.params.mediaContainer?document.querySelector(this.params.mediaContainer):this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.createDrawer(),this.createBackend()},createDrawer:function(){var a=this;this.drawer=Object.create(WaveSurfer.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",function(){a.drawBuffer(),a.drawer.progress(a.backend.getPlayedPercents())}),this.drawer.on("click",function(b,c){setTimeout(function(){a.seekTo(c)},0)}),this.drawer.on("scroll",function(b){a.fireEvent("scroll",b)})},createBackend:function(){var a=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||WaveSurfer.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(WaveSurfer[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",function(){a.fireEvent("finish")}),this.backend.on("audioprocess",function(b){a.fireEvent("audioprocess",b)})},restartAnimationLoop:function(){var a=this,b=window.requestAnimationFrame||window.webkitRequestAnimationFrame,c=function(){a.backend.isPaused()||(a.drawer.progress(a.backend.getPlayedPercents()),b(c))};c()},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(a,b){this.backend.play(a,b),this.restartAnimationLoop(),this.fireEvent("play")},pause:function(){this.backend.pause(),this.fireEvent("pause")},playPause:function(){this.backend.isPaused()?this.play():this.pause()},skipBackward:function(a){this.skip(-a||-this.params.skipLength)},skipForward:function(a){this.skip(a||this.params.skipLength)},skip:function(a){var b=this.getCurrentTime()||0,c=this.getDuration()||1;b=Math.max(0,Math.min(c,b+(a||0))),this.seekAndCenter(b/c)},seekAndCenter:function(a){this.seekTo(a),this.drawer.recenter(a)},seekTo:function(a){var b=this.backend.isPaused(),c=this.params.scrollParent;b&&(this.params.scrollParent=!1),this.backend.seekTo(a*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),b||(this.backend.pause(),this.backend.play()),this.params.scrollParent=c,this.fireEvent("seek",a)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(a){this.backend.setVolume(a)},setPlaybackRate:function(a){this.backend.setPlaybackRate(a)},toggleMute:function(){this.isMuted?(this.backend.setVolume(this.savedVolume),this.isMuted=!1):(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0)},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var a=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),b=this.drawer.getWidth(),c=a;this.params.fillParent&&(!this.params.scrollParent||b>a)&&(c=b);var d=this.backend.getPeaks(c);this.drawer.drawPeaks(d,c),this.fireEvent("redraw",d,c)},loadArrayBuffer:function(a){this.decodeArrayBuffer(a,function(a){this.loadDecodedBuffer(a)}.bind(this))},loadDecodedBuffer:function(a){this.backend.load(a),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(a){var b=this,c=new FileReader;c.addEventListener("progress",function(a){b.onProgress(a)}),c.addEventListener("load",function(a){b.loadArrayBuffer(a.target.result)}),c.addEventListener("error",function(){b.fireEvent("error","Error reading file")}),c.readAsArrayBuffer(a),this.empty()},load:function(a,b){switch(this.params.backend){case"WebAudio":return this.loadBuffer(a);case"MediaElement":return this.loadMediaElement(a,b)}},loadBuffer:function(a){return this.empty(),this.getArrayBuffer(a,this.loadArrayBuffer.bind(this))},loadMediaElement:function(a,b){this.empty(),this.backend.load(a,this.mediaContainer,b),this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(a){this.fireEvent("error",a)}.bind(this))),!b&&this.backend.supportsWebAudio()&&this.getArrayBuffer(a,function(a){this.decodeArrayBuffer(a,function(a){this.backend.buffer=a,this.drawBuffer()}.bind(this))}.bind(this))},decodeArrayBuffer:function(a,b){this.backend.decodeArrayBuffer(a,this.fireEvent.bind(this,"decoded"),this.fireEvent.bind(this,"error","Error decoding audiobuffer")),this.tmpEvents.push(this.once("decoded",b))},getArrayBuffer:function(a,b){var c=this,d=WaveSurfer.util.ajax({url:a,responseType:"arraybuffer"});return this.tmpEvents.push(d.on("progress",function(a){c.onProgress(a)}),d.on("success",b),d.on("error",function(a){c.fireEvent("error","XHR error: "+a.target.statusText)})),d},onProgress:function(a){if(a.lengthComputable)var b=a.loaded/a.total;else b=a.loaded/(a.loaded+1e6);this.fireEvent("loading",Math.round(100*b),a.target)},exportPCM:function(a,b,c){a=a||1024,b=b||1e4,c=c||!1;var d=this.backend.getPeaks(a,b),e=[].map.call(d,function(a){return Math.round(a*b)/b}),f=JSON.stringify(e);return c||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(f)),f},clearTmpEvents:function(){this.tmpEvents.forEach(function(a){a.un()})},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy()}};WaveSurfer.create=function(a){var b=Object.create(WaveSurfer);return b.init(a),b},WaveSurfer.util={extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})}),a},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(a){var b=Object.create(WaveSurfer.Observer),c=new XMLHttpRequest,d=!1;return c.open(a.method||"GET",a.url,!0),c.responseType=a.responseType||"json",c.addEventListener("progress",function(a){b.fireEvent("progress",a),a.lengthComputable&&a.loaded==a.total&&(d=!0)}),c.addEventListener("load",function(a){d||b.fireEvent("progress",a),b.fireEvent("load",a),200==c.status||206==c.status?b.fireEvent("success",c.response,a):b.fireEvent("error",a)}),c.addEventListener("error",function(a){b.fireEvent("error",a)}),c.send(),b.xhr=c,b}},WaveSurfer.Observer={on:function(a,b){this.handlers||(this.handlers={});var c=this.handlers[a];return c||(c=this.handlers[a]=[]),c.push(b),{name:a,callback:b,un:this.un.bind(this,a,b)}},un:function(a,b){if(this.handlers){var c=this.handlers[a];if(c)if(b)for(var d=c.length-1;d>=0;d--)c[d]==b&&c.splice(d,1);else c.length=0}},unAll:function(){this.handlers=null},once:function(a,b){var c=this,d=function(){b.apply(this,arguments),setTimeout(function(){c.un(a,d)},0)};return this.on(a,d)},fireEvent:function(a){if(this.handlers){var b=this.handlers[a],c=Array.prototype.slice.call(arguments,1);b&&b.forEach(function(a){a.apply(null,c)})}}},WaveSurfer.util.extend(WaveSurfer,WaveSurfer.Observer),WaveSurfer.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return WaveSurfer.WebAudio.audioContext||(WaveSurfer.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),WaveSurfer.WebAudio.audioContext},getOfflineAudioContext:function(a){return WaveSurfer.WebAudio.offlineAudioContext||(WaveSurfer.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,a)),WaveSurfer.WebAudio.offlineAudioContext},init:function(a){this.params=a,this.ac=a.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(WaveSurfer.WebAudio.state.playing),Object.create(WaveSurfer.WebAudio.state.paused),Object.create(WaveSurfer.WebAudio.state.finished)],this.setState(this.PAUSED_STATE),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setPlaybackRate(this.params.audioRate)},disconnectFilters:function(){this.filters&&(this.filters.forEach(function(a){a&&a.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(a){this.state!==this.states[a]&&(this.state=this.states[a],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(a){this.disconnectFilters(),a&&a.length&&(this.filters=a,this.analyser.disconnect(),a.reduce(function(a,b){return a.connect(b),b},this.analyser).connect(this.gainNode))},createScriptNode:function(){var a=this,b=this.scriptBufferSize;this.scriptNode=this.ac.createScriptProcessor?this.ac.createScriptProcessor(b):this.ac.createJavaScriptNode(b),this.scriptNode.connect(this.ac.destination),this.scriptNode.onaudioprocess=function(){var b=a.getCurrentTime();a.buffer&&b>a.getDuration()?a.setState(a.FINISHED_STATE):a.buffer&&b>=a.scheduledPause?a.setState(a.PAUSED_STATE):a.state===a.states[a.PLAYING_STATE]&&a.fireEvent("audioprocess",b)}},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(a){this.gainNode.gain.value=a},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(a,b,c){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(a,function(a){b(a)}.bind(this),c)},getPeaks:function(a){for(var b=this.buffer.length/a,c=~~(b/10)||1,d=this.buffer.numberOfChannels,e=[],f=[],g=0;d>g;g++)for(var h=e[g]=[],i=this.buffer.getChannelData(g),j=0;a>j;j++){for(var k=~~(j*b),l=~~(k+b),m=0,n=k;l>n;n+=c){var o=i[n];o>m?m=o:-o>m&&(m=-o)}h[j]=m,(0==g||m>f[j])&&(f[j]=m)}return this.params.splitChannels?e:f},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect()},load:function(a){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=a,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(a,b){return this.scheduledPause=null,null==a&&(a=this.getCurrentTime(),a>=this.getDuration()&&(a=0)),null==b&&(b=this.getDuration()),this.startPosition=a,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:a,end:b}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(a,b){this.createSource();var c=this.seekTo(a,b);a=c.start,b=c.end,this.scheduledPause=b,this.source.start(0,a,b-a),this.setState(this.PLAYING_STATE)},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE)},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},setPlaybackRate:function(a){a=a||1,this.isPaused()?this.playbackRate=a:(this.pause(),this.playbackRate=a,this.play())}},WaveSurfer.WebAudio.state={},WaveSurfer.WebAudio.state.playing={init:function(){},getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},WaveSurfer.WebAudio.state.paused={init:function(){},getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition}},WaveSurfer.WebAudio.state.finished={init:function(){this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},WaveSurfer.util.extend(WaveSurfer.WebAudio,WaveSurfer.Observer),WaveSurfer.MediaElement=Object.create(WaveSurfer.WebAudio),WaveSurfer.util.extend(WaveSurfer.MediaElement,{init:function(a){this.params=a,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=a.mediaType.toLowerCase(),this.elementPosition=a.elementPosition},load:function(a,b,c){var d=this,e=document.createElement(this.mediaType);e.controls=!1,e.autoplay=!1,e.preload="auto",e.src=a,e.addEventListener("error",function(){d.fireEvent("error","Error loading media element")}),e.addEventListener("canplay",function(){d.fireEvent("canplay")}),e.addEventListener("ended",function(){d.fireEvent("finish")}),e.addEventListener("timeupdate",function(){d.fireEvent("audioprocess",d.getCurrentTime())});var f=b.querySelector(this.mediaType);f&&b.removeChild(f),b.appendChild(e),this.media=e,this.peaks=c,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return this.media.paused},getDuration:function(){var a=this.media.duration;return a>=1/0&&(a=this.media.seekable.end()),a},getCurrentTime:function(){return this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(a){this.playbackRate=a||1,this.media.playbackRate=this.playbackRate},seekTo:function(a){null!=a&&(this.media.currentTime=a),this.clearPlayEnd()},play:function(a,b){this.seekTo(a),this.media.play(),b&&this.setPlayEnd(b)},pause:function(){this.media.pause(),this.clearPlayEnd()},setPlayEnd:function(a){var b=this;this.onPlayEnd=function(c){c>=a&&(b.pause(),b.seekTo(a))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(a){return this.buffer?WaveSurfer.WebAudio.getPeaks.call(this,a):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(a){this.media.volume=a},destroy:function(){this.pause(),this.unAll(),this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),WaveSurfer.AudioElement=WaveSurfer.MediaElement,WaveSurfer.Drawer={init:function(a,b){this.container=a,this.params=b,this.width=0,this.height=b.height*this.params.pixelRatio,this.lastPos=0,this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(a){a.preventDefault();var b=this.wrapper.getBoundingClientRect();return(a.clientX-b.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0},setupWrapperEvents:function(){var a=this;this.wrapper.addEventListener("click",function(b){var c=a.wrapper.offsetHeight-a.wrapper.clientHeight;if(0!=c){var d=a.wrapper.getBoundingClientRect();if(b.clientY>=d.bottom-c)return}a.params.interact&&a.fireEvent("click",b,a.handleEvent(b))}),this.wrapper.addEventListener("scroll",function(b){a.fireEvent("scroll",b)})},drawPeaks:function(a,b){this.resetScroll(),this.setWidth(b),this.drawWave(a)},style:function(a,b){return Object.keys(b).forEach(function(c){a.style[c]!=b[c]&&(a.style[c]=b[c])}),a},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(a){var b=this.wrapper.scrollWidth*a;this.recenterOnPosition(b,!0)},recenterOnPosition:function(a,b){var c=this.wrapper.scrollLeft,d=~~(this.wrapper.clientWidth/2),e=a-d,f=e-c,g=this.wrapper.scrollWidth-this.wrapper.clientWidth;if(0!=g){if(!b&&f>=-d&&d>f){var h=5;f=Math.max(-h,Math.min(h,f)),e=c+f}e=Math.max(0,Math.min(g,e)),e!=c&&(this.wrapper.scrollLeft=e)}},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(a){a!=this.width&&(this.width=a,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())},setHeight:function(a){a!=this.height&&(this.height=a,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(a){var b=1/this.params.pixelRatio,c=Math.round(a*this.width)*b;if(c<this.lastPos||c-this.lastPos>=b){if(this.lastPos=c,this.params.scrollParent){var d=~~(this.wrapper.scrollWidth*a);this.recenterOnPosition(d)}this.updateProgress(a)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},createElements:function(){},updateSize:function(){},drawWave:function(){},clearWave:function(){},updateProgress:function(){}},WaveSurfer.util.extend(WaveSurfer.Drawer,WaveSurfer.Observer),WaveSurfer.Drawer.Canvas=Object.create(WaveSurfer.Drawer),WaveSurfer.util.extend(WaveSurfer.Drawer.Canvas,{createElements:function(){var a=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,top:0,bottom:0}));if(this.waveCc=a.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var b=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=b.getContext("2d")}},updateSize:function(){var a=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:a+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:a+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawWave:function(a,b){if(a[0]instanceof Array){var c=a;if(this.params.splitChannels)return this.setHeight(c.length*this.params.height*this.params.pixelRatio),void c.forEach(this.drawWave,this);a=c[0]}var d=.5/this.params.pixelRatio,e=this.params.height*this.params.pixelRatio,f=e*b||0,g=e/2,h=a.length,i=1;this.params.fillParent&&this.width!=h&&(i=this.width/h);var j=1;this.params.normalize&&(j=Math.max.apply(Math,a)),this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(b){if(b){b.beginPath(),b.moveTo(d,g+f);for(var c=0;h>c;c++){var e=Math.round(a[c]/j*g);b.lineTo(c*i+d,g+e+f)}b.lineTo(this.width+d,g+f),b.moveTo(d,g+f);for(var c=0;h>c;c++){var e=Math.round(a[c]/j*g);b.lineTo(c*i+d,g-e+f)}b.lineTo(this.width+d,g+f),b.closePath(),b.fill(),b.fillRect(0,g+f-d,this.width,d)}},this)},updateProgress:function(a){var b=Math.round(this.width*a)/this.params.pixelRatio;this.style(this.progressWave,{width:b+"px"})}});'use strict';var StackBlur=(function(){var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(imageID,canvasID,radius,blurAlphaChannel){var img,w,h,canvas;if(typeof img==='string'){img=document.getElementById(imageID);}else{img=imageID;}
w=img.width;h=img.height;if(typeof canvas==='string'){canvas=document.getElementById(canvasID);}else{canvas=canvasID;}
canvas.style.width=w+"px";canvas.style.height=h+"px";canvas.width=w;canvas.height=h;var context=canvas.getContext("2d");context.clearRect(0,0,w,h);context.drawImage(img,0,0,w,h);if(isNaN(radius)||radius<1)return;if(blurAlphaChannel)
stackBlurCanvasRGBA(canvasID,0,0,w,h,radius);else
stackBlurCanvasRGB(canvasID,0,0,w,h,radius);}
function stackBlurCanvasRGBA(id,top_x,top_y,width,height,radius){var canvas;if(isNaN(radius)||radius<1)return;radius|=0;if(typeof canvas==='string'){canvas=document.getElementById(id);}else{canvas=id;}
var context=canvas.getContext("2d");var imageData;try{try{imageData=context.getImageData(top_x,top_y,width,height);}catch(e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");imageData=context.getImageData(top_x,top_y,width,height);}catch(e){throw new Error("unable to access local image data: "+e);return;}}}catch(e){throw new Error("unable to access image data: "+e);}
var pixels=imageData.data;var x,y,i,p,yp,yi,yw,r_sum,g_sum,b_sum,a_sum,r_out_sum,g_out_sum,b_out_sum,a_out_sum,r_in_sum,g_in_sum,b_in_sum,a_in_sum,pr,pg,pb,pa,rbs;var div=radius+radius+1;var w4=width<<2;var widthMinus1=width-1;var heightMinus1=height-1;var radiusPlus1=radius+1;var sumFactor=radiusPlus1*(radiusPlus1+1)/2;var stackStart=new BlurStack();var stack=stackStart;for(i=1;i<div;i++){stack=stack.next=new BlurStack();if(i==radiusPlus1)var stackEnd=stack;}
stack.next=stackStart;var stackIn=null;var stackOut=null;yw=yi=0;var mul_sum=mul_table[radius];var shg_sum=shg_table[radius];for(y=0;y<height;y++){r_in_sum=g_in_sum=b_in_sum=a_in_sum=r_sum=g_sum=b_sum=a_sum=0;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);a_out_sum=radiusPlus1*(pa=pixels[yi+3]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;a_sum+=sumFactor*pa;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack.a=pa;stack=stack.next;}
for(i=1;i<radiusPlus1;i++){p=yi+((widthMinus1<i?widthMinus1:i)<<2);r_sum+=(stack.r=(pr=pixels[p]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[p+1]))*rbs;b_sum+=(stack.b=(pb=pixels[p+2]))*rbs;a_sum+=(stack.a=(pa=pixels[p+3]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;a_in_sum+=pa;stack=stack.next;}
stackIn=stackStart;stackOut=stackEnd;for(x=0;x<width;x++){pixels[yi+3]=pa=(a_sum*mul_sum)>>shg_sum;if(pa!=0){pa=255/pa;pixels[yi]=((r_sum*mul_sum)>>shg_sum)*pa;pixels[yi+1]=((g_sum*mul_sum)>>shg_sum)*pa;pixels[yi+2]=((b_sum*mul_sum)>>shg_sum)*pa;}else{pixels[yi]=pixels[yi+1]=pixels[yi+2]=0;}
r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;a_sum-=a_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;a_out_sum-=stackIn.a;p=(yw+((p=x+radius+1)<widthMinus1?p:widthMinus1))<<2;r_in_sum+=(stackIn.r=pixels[p]);g_in_sum+=(stackIn.g=pixels[p+1]);b_in_sum+=(stackIn.b=pixels[p+2]);a_in_sum+=(stackIn.a=pixels[p+3]);r_sum+=r_in_sum;g_sum+=g_in_sum;b_sum+=b_in_sum;a_sum+=a_in_sum;stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);a_out_sum+=(pa=stackOut.a);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;a_in_sum-=pa;stackOut=stackOut.next;yi+=4;}
yw+=width;}
for(x=0;x<width;x++){g_in_sum=b_in_sum=a_in_sum=r_in_sum=g_sum=b_sum=a_sum=r_sum=0;yi=x<<2;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);a_out_sum=radiusPlus1*(pa=pixels[yi+3]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;a_sum+=sumFactor*pa;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack.a=pa;stack=stack.next;}
yp=width;for(i=1;i<=radius;i++){yi=(yp+x)<<2;r_sum+=(stack.r=(pr=pixels[yi]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[yi+1]))*rbs;b_sum+=(stack.b=(pb=pixels[yi+2]))*rbs;a_sum+=(stack.a=(pa=pixels[yi+3]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;a_in_sum+=pa;stack=stack.next;if(i<heightMinus1){yp+=width;}}
yi=x;stackIn=stackStart;stackOut=stackEnd;for(y=0;y<height;y++){p=yi<<2;pixels[p+3]=pa=(a_sum*mul_sum)>>shg_sum;if(pa>0){pa=255/pa;pixels[p]=((r_sum*mul_sum)>>shg_sum)*pa;pixels[p+1]=((g_sum*mul_sum)>>shg_sum)*pa;pixels[p+2]=((b_sum*mul_sum)>>shg_sum)*pa;}else{pixels[p]=pixels[p+1]=pixels[p+2]=0;}
r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;a_sum-=a_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;a_out_sum-=stackIn.a;p=(x+(((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width))<<2;r_sum+=(r_in_sum+=(stackIn.r=pixels[p]));g_sum+=(g_in_sum+=(stackIn.g=pixels[p+1]));b_sum+=(b_in_sum+=(stackIn.b=pixels[p+2]));a_sum+=(a_in_sum+=(stackIn.a=pixels[p+3]));stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);a_out_sum+=(pa=stackOut.a);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;a_in_sum-=pa;stackOut=stackOut.next;yi+=width;}}
context.putImageData(imageData,top_x,top_y);}
function stackBlurCanvasRGB(id,top_x,top_y,width,height,radius){var canvas;if(isNaN(radius)||radius<1)return;radius|=0;if(typeof canvas==='string'){canvas=document.getElementById(id);}else{canvas=id;}
var context=canvas.getContext("2d");var imageData;try{try{imageData=context.getImageData(top_x,top_y,width,height);}catch(e){throw new Error("unable to access local image data: "+e);return;}}catch(e){throw new Error("unable to access image data: "+e);}
var pixels=imageData.data;var x,y,i,p,yp,yi,yw,r_sum,g_sum,b_sum,r_out_sum,g_out_sum,b_out_sum,r_in_sum,g_in_sum,b_in_sum,pr,pg,pb,rbs;var div=radius+radius+1;var w4=width<<2;var widthMinus1=width-1;var heightMinus1=height-1;var radiusPlus1=radius+1;var sumFactor=radiusPlus1*(radiusPlus1+1)/2;var stackStart=new BlurStack();var stack=stackStart;for(i=1;i<div;i++){stack=stack.next=new BlurStack();if(i==radiusPlus1)var stackEnd=stack;}
stack.next=stackStart;var stackIn=null;var stackOut=null;yw=yi=0;var mul_sum=mul_table[radius];var shg_sum=shg_table[radius];for(y=0;y<height;y++){r_in_sum=g_in_sum=b_in_sum=r_sum=g_sum=b_sum=0;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}
for(i=1;i<radiusPlus1;i++){p=yi+((widthMinus1<i?widthMinus1:i)<<2);r_sum+=(stack.r=(pr=pixels[p]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[p+1]))*rbs;b_sum+=(stack.b=(pb=pixels[p+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;}
stackIn=stackStart;stackOut=stackEnd;for(x=0;x<width;x++){pixels[yi]=(r_sum*mul_sum)>>shg_sum;pixels[yi+1]=(g_sum*mul_sum)>>shg_sum;pixels[yi+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(yw+((p=x+radius+1)<widthMinus1?p:widthMinus1))<<2;r_in_sum+=(stackIn.r=pixels[p]);g_in_sum+=(stackIn.g=pixels[p+1]);b_in_sum+=(stackIn.b=pixels[p+2]);r_sum+=r_in_sum;g_sum+=g_in_sum;b_sum+=b_in_sum;stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=4;}
yw+=width;}
for(x=0;x<width;x++){g_in_sum=b_in_sum=r_in_sum=g_sum=b_sum=r_sum=0;yi=x<<2;r_out_sum=radiusPlus1*(pr=pixels[yi]);g_out_sum=radiusPlus1*(pg=pixels[yi+1]);b_out_sum=radiusPlus1*(pb=pixels[yi+2]);r_sum+=sumFactor*pr;g_sum+=sumFactor*pg;b_sum+=sumFactor*pb;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}
yp=width;for(i=1;i<=radius;i++){yi=(yp+x)<<2;r_sum+=(stack.r=(pr=pixels[yi]))*(rbs=radiusPlus1-i);g_sum+=(stack.g=(pg=pixels[yi+1]))*rbs;b_sum+=(stack.b=(pb=pixels[yi+2]))*rbs;r_in_sum+=pr;g_in_sum+=pg;b_in_sum+=pb;stack=stack.next;if(i<heightMinus1){yp+=width;}}
yi=x;stackIn=stackStart;stackOut=stackEnd;for(y=0;y<height;y++){p=yi<<2;pixels[p]=(r_sum*mul_sum)>>shg_sum;pixels[p+1]=(g_sum*mul_sum)>>shg_sum;pixels[p+2]=(b_sum*mul_sum)>>shg_sum;r_sum-=r_out_sum;g_sum-=g_out_sum;b_sum-=b_out_sum;r_out_sum-=stackIn.r;g_out_sum-=stackIn.g;b_out_sum-=stackIn.b;p=(x+(((p=y+radiusPlus1)<heightMinus1?p:heightMinus1)*width))<<2;r_sum+=(r_in_sum+=(stackIn.r=pixels[p]));g_sum+=(g_in_sum+=(stackIn.g=pixels[p+1]));b_sum+=(b_in_sum+=(stackIn.b=pixels[p+2]));stackIn=stackIn.next;r_out_sum+=(pr=stackOut.r);g_out_sum+=(pg=stackOut.g);b_out_sum+=(pb=stackOut.b);r_in_sum-=pr;g_in_sum-=pg;b_in_sum-=pb;stackOut=stackOut.next;yi+=width;}}
context.putImageData(imageData,top_x,top_y);}
function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null;}
return{stackBlurImage:stackBlurImage,stackBlurCanvasRGBA:stackBlurCanvasRGBA,stackBlurCanvasRGB:stackBlurCanvasRGB}})();(function(){'use strict';var APP='default';angular.module(APP,['ngRoute','ngSanitize','ngAnimate','isLocalization','angular-locker','common.services','common.directives','common.constants','common.filters']);}());(function(){'use strict';var APP='defaultHTML5';angular.module(APP,['ngRoute','ngSanitize','isLocalization','angular-locker','common.services','common.directives','common.constants','common.filters']).config(function($locationProvider){$locationProvider.html5Mode(true);});}());
//-->
</script>
<script  style="display:none">
<!--

(function(){'use strict';angular.module('footer.constants',[]);})();(function(){'use strict';angular.module('globalHeader.controllers',[]);})();(function(){'use strict';var NS='globalHeader.directives';angular.module(NS,['globalHeader.services']);})();(function(){'use strict';angular.module('footer.models',[]);})();(function(){'use strict';angular.module('globalHeader.services',[]);})();(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('localePicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.inherited={};$scope.data=[];$scope.data.countryData=angular.copy($scope.countryData);$scope.data.defaultRegion=angular.copy($scope.defaultRegion);$scope.loadLanguage=function(){var language=localePickerService.getLanguage();if(language){localePickerService.loadLanguage(language.url);}};$scope.closeModal=function(){$scope.activateModal.baseModalVisible=false;$scope.loadLanguage();$scope.enableScroll();};$scope.inherited.close=function(){$scope.closeModal();};$scope.inherited.toggle=function(){$scope.activateModal.countryPickerVisible=!$scope.activateModal.countryPickerVisible;};$scope.inherited.getCountryPickerStatus=function(){return $scope.activateModal;};$scope.inherited.getCountryData=function(){return $scope.data;};$scope.inherited.getModalTitle=function(modalType){var modalTitle='',isModalTitle=!!$scope.headerTitle;isModalTitle=isModalTitle&&!!$scope.headerTitle[modalType];isModalTitle=isModalTitle&&!!$scope.headerTitle[modalType].content;if(isModalTitle){modalTitle=$scope.headerTitle[modalType].content;}
return modalTitle;};$scope.inherited.setCountry=function(country){localePickerService.setCountry(country);$scope.currentCountry=angular.copy(country);};}],_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopLocalePickerModal.html';},_link=function(scope){var body=angular.element('body'),defaultCss=body.css('overflow'),countrySitesElement=angular.element('.language-name, .footer-flag');countrySitesElement.on('click',function(){body.css('overflow','hidden');scope.removeStyles(angular.element('#language-modal-desktop'));});scope.enableScroll=function(){body.css('overflow',defaultCss);};scope.removeStyles=function(element){var style;if(element){style=element.attr('style');if(style){element.attr('style','');}}};};return{scope:{countryData:'=',defaultRegion:'@',currentCountry:'=',type:'@',activateModal:'=',headerTitle:'='},restrict:'E',templateUrl:_templateUrl,controller:_controller,link:_link};}]);}());(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('countryPicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.data={};$scope.setCountry=function(country){$scope.callbacks.setCountry(country);$scope.setStatus();};$scope.toggleSelectedRegion=function(region){$scope.selectedRegion=($scope.selectedRegion!==region)?region:'';};$scope.setStatus=function(){var languageList=localePickerService.getLanguageList();if(languageList&&angular.isArray(languageList)&&languageList.length===1){localePickerService.setLanguage(languageList[0]);$scope.callbacks.close();}else{$scope.callbacks.toggle('languagePicker');}};}],_link=function(scope){scope.data=scope.callbacks.getCountryData();scope.modalTitle=scope.callbacks.getModalTitle('countryPicker');scope.modalVisible=scope.callbacks.getCountryPickerStatus();scope.isSingleLanguage=function(country){if(country&&country.supportedLanguages&&angular.isArray(country.supportedLanguages)&&country.supportedLanguages.length===1){return true;}
return false;};scope.getLanguageUrl=function(country){if(scope.isSingleLanguage(country)){return country.supportedLanguages[0].url;}};scope.close=function(){scope.callbacks.close();};},_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopCountryPickerModal.html';};return{restrict:'E',require:'^localePicker',scope:{countryData:'=',defaultRegion:'@',callbacks:'=',type:'@'},link:_link,controller:_controller,templateUrl:_templateUrl};}]);}());(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('languagePicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.setLanguage=function(language){localePickerService.setLanguage(language);$scope.callbacks.toggle('countryPicker');$scope.callbacks.close();};$scope.goBack=function(){$scope.callbacks.toggle('countryPicker');};}],_link=function(scope){scope.modalVisible=scope.callbacks.getCountryPickerStatus();scope.modalTitle=scope.callbacks.getModalTitle('languagePicker');scope.close=function(){scope.callbacks.close();};},_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopLanguagePickerModal.html';};return{restrict:'E',require:'^localePicker',scope:{country:'=',callbacks:'='},link:_link,controller:_controller,templateUrl:_templateUrl};}]);}());(function(){'use strict';var module,APP='globalHeader';module=angular.module('globalHeader',['restangular','ngRoute','ngSanitize','ngCookies','ipCookie','ngAnimate','angular-locker','isLocalization','common.filters','common.services','common.directives','common.constants','footer.constants','footer.models',[APP,'.controllers'].join(''),[APP,'.directives'].join(''),[APP,'.services'].join('')]);module.config(['RestangularProvider','url','siteLang','isLocalizeProvider','translations','$locationProvider',function(RestangularProvider,url,siteLang,isLocalizeProvider,translations,$loc){var cache={};RestangularProvider.setBaseUrl('/api/');RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setResponseExtractor(function(response){return response.data;});$loc.html5Mode(true);cache[siteLang]=translations;isLocalizeProvider.setOptions({baseUrl:['/static/','js/angular/apps/header/','i18n/'].join(''),language:siteLang,cache:cache,loadResourceOnInit:true});}]);angular.element(document).ready(function(){angular.bootstrap(angular.element('header[role="global"], header[role="simple"]'),['globalHeader']);angular.bootstrap(angular.element('footer[role="global"], footer[role="simple"]'),['globalHeader']);});}());(function(){'use strict';var APP=angular.module('footer.constants');APP.constant('FOOTER_CONSTANTS',{REGION_NAME_NA_SA:'COUNTRY_SITES_NORTH_SOUTH_AMERICA',COUNTRY_CODE_BRAZIL:'BR',COUNTRY_CODE_CANADA:'CA',COUNTRY_CODE_MEXICO:'MX',COUNTRY_CODE_UNITED_STATES:'US',REGION_NAME_AFRICA_MIDDLE_EAST:'COUNTRY_SITES_AFRICA_MIDDLE_EAST',COUNTRY_CODE_ISREAL:'IL',COUNTRY_CODE_SOUTH_AFRICA:'ZA',COUNTRY_CODE_UNITED_ARAB_EMIRATES:'AE',REGION_NAME_EUROPE:'COUNTRY_SITES_EUROPE',COUNTRY_CODE_AUSTRIA:'AT',COUNTRY_CODE_BELGIUM:'BE',COUNTRY_CODE_DENMARK:'DK',COUNTRY_CODE_FINLAND:'FI',COUNTRY_CODE_FRANCE:'FR',COUNTRY_CODE_GERMANY:'DE',COUNTRY_CODE_IRELAND:'IE',COUNTRY_CODE_ITALY:'IT',COUNTRY_CODE_NETHERLANDS:'NL',COUNTRY_CODE_NORWAY:'NO',COUNTRY_CODE_POLAND:'PL',COUNTRY_CODE_PORTUGAL:'PT',COUNTRY_CODE_RUSSIA:'RU',COUNTRY_CODE_SPAIN:'ES',COUNTRY_CODE_SWEDEN:'SE',COUNTRY_CODE_SWITZERLAND:'CH',COUNTRY_CODE_TURKEY:'TR',COUNTRY_CODE_UNITED_KINGDOM:'GB',REGION_NAME_ASIA_PACIFIC:'COUNTRY_SITES_ASIA_PACIFIC',COUNTRY_CODE_AUSTRALIA:'AU',COUNTRY_CODE_HONG_KONG:'HK',COUNTRY_CODE_INDIA:'IN',COUNTRY_CODE_JAPAN:'JP',COUNTRY_CODE_MALAYSIA:'MY',COUNTRY_CODE_NEW_ZEALAND:'NZ',COUNTRY_CODE_SINGAPORE:'SG',COUNTRY_CODE_SOUTH_KOREA:'KR',COUNTRY_CODE_THAILAND:'TH'});})();(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('AcctCtrl',['$scope','$attrs','$filter','$injectedData','userService','accountService','orderService',function($scope,$attrs,$filter,$injectedData,userService,accountService,orderService){$scope.init=function(){$scope.userId=$attrs.userid||null;$scope.loadAccountData($scope.userId);if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}};$scope.loadAccountData=function(userId){$scope.subsRemaining=0;$scope.creditsPayAsYouGo=0;$scope.creditSubs=0;$scope.hasActualSuspendedSubscription=false;$scope.subsExpirationStatus=[];$scope.hasActiveSubscription=false;if(userId){userService.getUser(userId).then(function(user){$scope.hasPurchased=user.hasPurchased;if($scope.hasPurchased){userService.activeSubscription(userId).then(function(subscription){if(subscription.userHasActiveSubscription){if(subscription.payload&&subscription.payload.length!==0){$scope.hasActiveSubscription=true;$scope.subsRemaining=$filter('number')(subscription.payload.downloadCount.remaining,0);}}});}});userService.hasActualSuspendedSubscription(userId).then(function(suspended){$scope.hasActualSuspendedSubscription=suspended.hasActualSuspendedSubscription;});userService.subscriptionExpirationStatus($attrs.userid).then(function(expirationStatus){$scope.subsExpirationStatus=expirationStatus;});accountService.getAccount(userId).then(function(account){$scope.corporateAccount=account.isCorporateMaster||account.isCorporateSlave;$scope.isCorporateSlave=account.isCorporateSlave;$scope.creditsPayAsYouGo=$filter('number')(account.balance[8],0);$scope.creditSubs=$filter('number')(account.balance[5],0);});}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userId=data.userId;$scope.loggedIn=data.loggedIn;});$scope.$on('UPDATE_HEADER_AMOUNT',function(response,data){var orderId=data.orderId;$scope.totalCredits=0;orderService.getOrder(orderId,$scope.userId,'credits').then(function(data){angular.forEach(data.orderItems,function(value){$scope.totalCredits+=value.Points;});$scope.creditsPayAsYouGo=parseInt($scope.creditsPayAsYouGo,10)+$scope.totalCredits;});});$scope.init();}]);}());(function(){'use strict';var footer=angular.module('globalHeader.controllers');footer.controller('LocaleCtrl',['$scope','$filter','footerStateService','siteLang','FOOTER_CONSTANTS','$injectedData',function($scope,$filter,footerStateService,siteLang,FOOTER_CONSTANTS,$injectedData){$scope.state={modalStatus:{baseModalVisible:false,countryPickerVisible:true},countrySitesData:{countryCode:FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_STATES,defaultRegion:'',modalDisplayData:null,fullCountrySitesData:'',currentCountrySitesData:'',singleCountry:false,languageCode:siteLang,languageData:''},title:{languagePicker:{content:$filter('i18n')('COUNTRY_SITES_LANGUAGE_HEADER'),active:false},countryPicker:{content:$filter('i18n')('COUNTRY_SITES_COUNTRY_HEADER'),active:true}}};$scope.getFlagClass=function(){return('flag-icon '+angular.lowercase($scope.state.countrySitesData.countryCode));};$scope.activateModal=function(isLanguagePicker){var countryObj;$scope.state.modalStatus.baseModalVisible=true;$scope.state.modalStatus.countryPickerVisible=true;if(isLanguagePicker){$scope.state.modalStatus.countryPickerVisible=false;countryObj=angular.copy($scope.state.countrySitesData.currentCountrySitesData);countryObj.countryCode=$scope.state.countrySitesData.countryCode;$scope.state.currentCountry=angular.copy(countryObj);$scope.state.title.languagePicker.active=true;$scope.state.title.countryPicker.active=false;}};footerStateService.initState($scope.state.countrySitesData).then(function(){if(angular.isDefined($injectedData.modalStatus)&&!!$injectedData.modalStatus){$scope.activateModal(false);}});}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('HeaderCtrl',['$scope','$injectedData',function($scope,$injectedData){$scope.init=function(){if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}
if(angular.isDefined($injectedData.userName)){$scope.userName=$injectedData.userName;}else{$scope.userName='';}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userName=data.name;$scope.loggedIn=data.loggedIn;});$scope.init();}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('NotificationCtrl',['$scope','globalNotificationService',function($scope,globalNotificationService){globalNotificationService.init();$scope.globalNotificationsStateData=globalNotificationService.getNotifications();}]);}());(function(){'use strict';angular.module('footer.models').factory('countrySitesDisplayModelFactory',['FOOTER_CONSTANTS',function(FOOTER_CONSTANTS){var _createCountrySitesDisplayModel,_getCountrySitesDisplayModel,modalDisplayData=[{regionName:FOOTER_CONSTANTS.REGION_NAME_NA_SA,desktopOrder:1,tablerOrder:1,mobileOrder:1,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_BRAZIL,FOOTER_CONSTANTS.COUNTRY_CODE_CANADA,FOOTER_CONSTANTS.COUNTRY_CODE_MEXICO,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_STATES]},{regionName:FOOTER_CONSTANTS.REGION_NAME_AFRICA_MIDDLE_EAST,desktopOrder:2,tablerOrder:2,mobileOrder:4,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_ISREAL,FOOTER_CONSTANTS.COUNTRY_CODE_SOUTH_AFRICA,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_ARAB_EMIRATES]},{regionName:FOOTER_CONSTANTS.REGION_NAME_EUROPE,desktopOrder:3,tablerOrder:4,mobileOrder:2,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_AUSTRIA,FOOTER_CONSTANTS.COUNTRY_CODE_BELGIUM,FOOTER_CONSTANTS.COUNTRY_CODE_DENMARK,FOOTER_CONSTANTS.COUNTRY_CODE_FINLAND,FOOTER_CONSTANTS.COUNTRY_CODE_FRANCE,FOOTER_CONSTANTS.COUNTRY_CODE_GERMANY,FOOTER_CONSTANTS.COUNTRY_CODE_IRELAND,FOOTER_CONSTANTS.COUNTRY_CODE_ITALY,FOOTER_CONSTANTS.COUNTRY_CODE_NETHERLANDS,FOOTER_CONSTANTS.COUNTRY_CODE_NORWAY,FOOTER_CONSTANTS.COUNTRY_CODE_POLAND,FOOTER_CONSTANTS.COUNTRY_CODE_PORTUGAL,FOOTER_CONSTANTS.COUNTRY_CODE_RUSSIA,FOOTER_CONSTANTS.COUNTRY_CODE_SPAIN,FOOTER_CONSTANTS.COUNTRY_CODE_SWEDEN,FOOTER_CONSTANTS.COUNTRY_CODE_SWITZERLAND,FOOTER_CONSTANTS.COUNTRY_CODE_TURKEY,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_KINGDOM]},{regionName:FOOTER_CONSTANTS.REGION_NAME_ASIA_PACIFIC,desktopOrder:4,tablerOrder:3,mobileOrder:3,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_AUSTRALIA,FOOTER_CONSTANTS.COUNTRY_CODE_HONG_KONG,FOOTER_CONSTANTS.COUNTRY_CODE_INDIA,FOOTER_CONSTANTS.COUNTRY_CODE_JAPAN,FOOTER_CONSTANTS.COUNTRY_CODE_MALAYSIA,FOOTER_CONSTANTS.COUNTRY_CODE_NEW_ZEALAND,FOOTER_CONSTANTS.COUNTRY_CODE_SINGAPORE,FOOTER_CONSTANTS.COUNTRY_CODE_SOUTH_KOREA,FOOTER_CONSTANTS.COUNTRY_CODE_THAILAND]}];_createCountrySitesDisplayModel=function(fullCountrySitesData){var i,j,countryCodeString;for(i=0;i<modalDisplayData.length;i++){for(j=0;j<modalDisplayData[i].countryList.length;j++){countryCodeString=modalDisplayData[i].countryList[j];if(fullCountrySitesData&&fullCountrySitesData[countryCodeString]){modalDisplayData[i].countryList[j]=fullCountrySitesData[countryCodeString];}
modalDisplayData[i].countryList[j].countryCode=countryCodeString;}}
return modalDisplayData;};_getCountrySitesDisplayModel=function(fullCountrySitesData){return _createCountrySitesDisplayModel(fullCountrySitesData);};return{getCountrySitesDisplayModel:_getCountrySitesDisplayModel};}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('accountService',['Restangular',function(Restangular){var ACCOUNTS_ENDPOINT='accounts';return{getAccount:function(userId){return Restangular.one(ACCOUNTS_ENDPOINT,userId).get().then(function(account){return account;});}};}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('footerStateService',['$filter','countryService','countrySitesService','countrySitesDisplayModelFactory',function($filter,countryService,countrySitesService,countrySitesDisplayModelFactory){var _params,self={initState:function(controllerState){_params={state:controllerState};return self.getCountryCode().then(self.getCountrySitesData).then(self.setModalDisplayData).then(self.getLanguagesForCountry).then(self.addTranslations).then(self.setDefaultRegion);},getCountryCode:function(){var p=self.params();return countryService.getCurrentCountryCode().then(function(country){p.state.countryCode=country.countryCode;});},getCountrySitesData:function(){var p=self.params(),countryData;if(p&&p.state&&p.state.countryCode){return countrySitesService.getCountrySitesData().then(function(countrySitesData){if(angular.isDefined(countrySitesData)){p.state.fullCountrySitesData=countrySitesData;countryData=countrySitesData[p.state.countryCode];}
if(angular.isDefined(countryData)){p.state.currentCountrySitesData=countryData;}else{p.state.currentCountrySitesData=countrySitesData.US;}});}},getLanguagesForCountry:function(){var p=self.params(),countryData,languageCode;if(p&&p.state){countryData=p.state.currentCountrySitesData;languageCode=p.state.languageCode;if(p.state.languageCode.length>2){languageCode=p.state.languageCode.substring(0,2);}
if(countryData&&countryData.supportedLanguages&&countryData.supportedLanguages.length){p.state.languageData=window._.findWhere(countryData.supportedLanguages,{languageCode:languageCode});if(angular.equals(countryData.supportedLanguages.length,1)){p.state.singleCountry=true;}}}},setModalDisplayData:function(){var p=self.params(),data;if(p&&p.state&&p.state.fullCountrySitesData){data=countrySitesDisplayModelFactory.getCountrySitesDisplayModel(p.state.fullCountrySitesData);p.state.modalDisplayData=data;}},addTranslations:function(){var p=self.params();if(p&&p.state&&p.state.modalDisplayData){angular.forEach(p.state.modalDisplayData,function(data){if(data&&data.regionName){data.regionName=$filter('i18n')(data.regionName);}});}},setDefaultRegion:function(){var p=self.params();if(p&&p.state&&p.state.modalDisplayData){angular.forEach(p.state.modalDisplayData,function(data){var region;if(data&&data.regionName){region=data.regionName;}
if(data&&data.countryList&&angular.isArray(data.countryList)){angular.forEach(data.countryList,function(country){if(p.state.countryCode===country.countryCode){p.state.defaultRegion=region;}});}});}},params:function(){return _params;}};return self;}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('globalNotificationService',['ipCookie','$injectedData',function(ipCookie,$injectedData){var self={notifications:[],getNotifications:function(){return self.notifications;},createNotification:function(type,contentKey,closeCallback){self.notifications.push({type:type,content:contentKey,closeCallback:closeCallback});},getFunctionToSetCookieDismissal:function(cookieName,cookieValue,cookieExpiryDays){var closeFunction=null,expiryTimeMilliseconds,isValidArgs=(typeof cookieName==='string');isValidArgs=isValidArgs&&(cookieName.trim()!=='');if(isValidArgs){cookieName=cookieName.trim();switch(typeof cookieValue){case'string':cookieValue=cookieValue.trim();break;case'number':case'boolean':cookieValue=cookieValue.toString();break;default:cookieValue='Closed';break;}
if(jQuery.isNumeric(cookieExpiryDays)){cookieExpiryDays=parseFloat(cookieExpiryDays);expiryTimeMilliseconds=Math.round(cookieExpiryDays*24*60*60*1000);}else{expiryTimeMilliseconds=-1;}
closeFunction=function(){var myCookieName=cookieName,myCookieValue=cookieValue,myExpiryTimeMilliseconds=expiryTimeMilliseconds,today,expiryDateTime=0,options={path:'/'};if(myExpiryTimeMilliseconds>0){today=new Date();expiryDateTime=new Date();expiryDateTime.setTime(today.getTime()+myExpiryTimeMilliseconds);expiryDateTime=expiryDateTime.toGMTString();options.expires=expiryDateTime;}
ipCookie(myCookieName,myCookieValue,options);};}
return closeFunction;},setCookie:function(cookieName,cookieValue,expiryTime){var today,expires;cookieValue=cookieValue||'Closed';if(expiryTime){today=new Date();expires=new Date();expires.setTime(today.getTime()+expiryTime*60*1000);expires=expires.toGMTString();}else{expires=0;}
ipCookie(cookieName,cookieValue,{expires:expires,path:'/'});},init:function(){var globalNotificationsStateData=$injectedData.globalNotificationsStateData,getSanitizedCookieAttrs,isNotificationCookieDisabled,isDateInRange,isNotificationStateEnabled;getSanitizedCookieAttrs=function(notificationState){var cookieAttrs,isSanitizeable,sanitizedCookieAttrs=null;if(typeof notificationState==='object'){cookieAttrs=notificationState.cookieAttrs;}
isSanitizeable=(typeof cookieAttrs==='object');isSanitizeable=isSanitizeable&&(typeof cookieAttrs.cookieName==='string');isSanitizeable=isSanitizeable&&(cookieAttrs.cookieName.trim()!=='');if(isSanitizeable){sanitizedCookieAttrs={};sanitizedCookieAttrs.cookieName=cookieAttrs.cookieName.trim();sanitizedCookieAttrs.cookieValue=cookieAttrs.cookieValue||'Closed';if(jQuery.isNumeric(cookieAttrs.cookieExpiryDays)){sanitizedCookieAttrs.cookieExpiryDays=parseFloat(cookieAttrs.cookieExpiryDays);}else{sanitizedCookieAttrs.cookieExpiryDays=0;}}
return sanitizedCookieAttrs;};isNotificationCookieDisabled=function(notificationState){var cookieAttrs=notificationState.cookieAttrs,isCookieDisabled=false,cookieName,cookieValue;if(cookieAttrs!==null){cookieName=cookieAttrs.cookieName;cookieValue=ipCookie(cookieName);isCookieDisabled=(typeof cookieValue!=='undefined');isCookieDisabled=isCookieDisabled&&(cookieValue!=='enabled');}
return isCookieDisabled;};isDateInRange=function(notificationState){var timeZoneOffsetAsVal,startDateTimeAsUtcString,endDateTimeAsUtcString,startTimeAsVal,endTimeAsVal,nowTimeAsVal,isDateInRange=true;startDateTimeAsUtcString=notificationState.startTime;endDateTimeAsUtcString=notificationState.endTime;if(!!startDateTimeAsUtcString){try{startTimeAsVal=new Date(startDateTimeAsUtcString).valueOf();}catch(err){}}
if(!!endDateTimeAsUtcString){try{endTimeAsVal=new Date(endDateTimeAsUtcString).valueOf();}catch(err){}}
if(isFinite(startTimeAsVal)||isFinite(endTimeAsVal)){timeZoneOffsetAsVal=new Date().getTimezoneOffset()*60000;nowTimeAsVal=new Date().getTime().valueOf();if(isFinite(startTimeAsVal)){startTimeAsVal=startTimeAsVal-timeZoneOffsetAsVal;isDateInRange=(startTimeAsVal<=nowTimeAsVal);}
if(isDateInRange&&isFinite(endTimeAsVal)){endTimeAsVal=endTimeAsVal-timeZoneOffsetAsVal;isDateInRange=(endTimeAsVal>nowTimeAsVal);}
if(isDateInRange&&isFinite(startTimeAsVal)&&isFinite(endTimeAsVal)){isDateInRange=(startTimeAsVal<=endTimeAsVal);}}else{isDateInRange=true;}
return isDateInRange;};isNotificationStateEnabled=function(notificationState){var enablingCriteria=notificationState.isEnabled,isEnabledCriterion,isEnabled,isStateEnabled,enablers,i;enablers={isOutDatedBrowser:function(){var ie=(window.ActiveXObject&&(/msie\s(\d+)/i.exec(navigator.userAgent)[1]))||NaN;return(ie<=9);},isEuroLocale:function(){var isIstockObj,isEuroLocale=false,region,euroGeo=['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','UK'];isIstockObj=(typeof istock!=='undefined');isIstockObj=isIstockObj&&(istock!==null);isIstockObj=isIstockObj&&(typeof istock==='object');if(isIstockObj){if(typeof istock.georegional==='string'&&istock.georegional.trim()!==''){region=istock.georegional;}else if(typeof istock.siteRegion==='string'&&istock.siteRegion.trim()!==''){region=istock.siteRegion;}}
if(region){region=region.toUpperCase();isEuroLocale=euroGeo.indexOf(region)!==-1;}
return isEuroLocale;},isNotificationCookieEnabled:function(notificationState){var cookieAttrs=notificationState.cookieAttrs,isCookieEnabled=false,cookieName,cookieValue;if(cookieAttrs!==null){cookieName=cookieAttrs.cookieName;cookieValue=ipCookie(cookieName);isCookieEnabled=(typeof cookieValue!=='undefined');isCookieEnabled=isCookieEnabled&&(cookieValue==='enabled');}
return isCookieEnabled;}};if(typeof enablingCriteria==='undefined'||enablingCriteria===null){isStateEnabled=true;}else if(typeof enablingCriteria==='boolean'){isStateEnabled=enablingCriteria;}else if(angular.isArray(enablingCriteria)){isStateEnabled=true;for(i=0;i<enablingCriteria.length;i++){isEnabledCriterion=enablingCriteria[i];switch(typeof isEnabledCriterion){case'string':isEnabled=enablers[isEnabledCriterion];if(typeof isEnabled==='function'){isStateEnabled=isEnabled(notificationState);}
break;case'boolean':isStateEnabled=isEnabledCriterion;break;default:isStateEnabled=true;break;}
if(!isStateEnabled){break;}}}
return isStateEnabled;};angular.forEach(globalNotificationsStateData,function(notificationState,key){var isEnabled,closeFunction;isEnabled=(typeof notificationState==='object'&&typeof key==='string');if(isEnabled){notificationState.cookieAttrs=getSanitizedCookieAttrs(notificationState);}
isEnabled=isEnabled&&!isNotificationCookieDisabled(notificationState);isEnabled=isEnabled&&isNotificationStateEnabled(notificationState);isEnabled=isEnabled&&isDateInRange(notificationState);if(isEnabled){if(notificationState.cookieAttrs!==null){closeFunction=self.getFunctionToSetCookieDismissal(notificationState.cookieAttrs.cookieName,notificationState.cookieAttrs.cookieValue,notificationState.cookieAttrs.cookieExpiryDays);}else{closeFunction=null;}
self.createNotification(notificationState.cssClass,key,closeFunction);}},this);}};return self;}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('localePickerService',['$window',function($window){var _country=null,_language=null,_languageList=[],_setCountry,_getCountry,_getLanguage,_setLanguage,_setLanguageList,_getLanguageList,_loadLanguage;_setCountry=function(country){if(country){_country=angular.copy(country);_setLanguageList(_country.supportedLanguages);}};_setLanguage=function(language){if(language){_language=angular.copy(language);}};_getLanguage=function(){return _language;};_setLanguageList=function(languageList){if(languageList&&angular.isArray(languageList)){_languageList=angular.copy(languageList);if(_languageList.length===1){_setLanguage(_languageList[0]);}}};_getLanguageList=function(){return _languageList;};_getCountry=function(){return _country;};_loadLanguage=function(languageUrl){if(languageUrl&&angular.isString(languageUrl)){$window.location.href=languageUrl;}};return{setCountry:_setCountry,getCountry:_getCountry,setLanguage:_setLanguage,getLanguage:_getLanguage,getLanguageList:_getLanguageList,loadLanguage:_loadLanguage};}]);}());(function($){$(document).ready(function(){if($('#content #plans-pricing').length){$('.plans-pricing-link').addClass('header-link-active');}});})(jQuery.noConflict());(function(window,document){'use strict';var features={bind:!!(function(){}.bind),classList:'classList'in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function extend(object){if(arguments.length<=0){throw new Error('Missing arguments in extend function');}
var result=object||{},key,i;for(i=1;i<arguments.length;i++){var replacement=arguments[i]||{};for(key in replacement){if(typeof result[key]==='object'){result[key]=extend(result[key],replacement[key]);}
else{result[key]=result[key]||replacement[key];}}}
return result;}
function Headroom(elem,options){options=extend(options,Headroom.options);this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;this.onPin=options.onPin;this.onUnpin=options.onUnpin;this.onTop=options.onTop;this.onNotTop=options.onNotTop;}
Headroom.prototype={constructor:Headroom,init:function(){if(!Headroom.cutsTheMustard){return;}
this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this;},destroy:function(){var classes=this.classes;this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);this.elem.classList.remove(classes.unpinned,classes.pinned,classes.top,classes.initial);},attachEvent:function(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=true;window.addEventListener('scroll',this.debouncer,false);this.debouncer.handleEvent();}},unpin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.pinned)||!classList.contains(classes.unpinned)){classList.add(classes.unpinned);classList.remove(classes.pinned);this.onUnpin&&this.onUnpin.call(this);}},pin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.unpinned)){classList.remove(classes.unpinned);classList.add(classes.pinned);this.onPin&&this.onPin.call(this);}},top:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.top)){classList.add(classes.top);classList.remove(classes.notTop);this.onTop&&this.onTop.call(this);}},notTop:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.notTop)){classList.add(classes.notTop);classList.remove(classes.top);this.onNotTop&&this.onNotTop.call(this);}},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;},getDocumentHeight:function(){var body=document.body,documentElement=document.documentElement;return Math.max(body.scrollHeight,documentElement.scrollHeight,body.offsetHeight,documentElement.offsetHeight,body.clientHeight,documentElement.clientHeight);},isOutOfBounds:function(currentScrollY){var pastTop=currentScrollY<0,pastBottom=currentScrollY+this.getViewportHeight()>this.getDocumentHeight();return pastTop||pastBottom;},toleranceExceeded:function(currentScrollY){return Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;},shouldUnpin:function(currentScrollY,toleranceExceeded){var scrollingDown=currentScrollY>this.lastKnownScrollY,pastOffset=currentScrollY>=this.offset;return scrollingDown&&pastOffset&&toleranceExceeded;},shouldPin:function(currentScrollY,toleranceExceeded){var scrollingUp=currentScrollY<this.lastKnownScrollY,pastOffset=currentScrollY<=this.offset;return(scrollingUp&&toleranceExceeded)||pastOffset;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=this.toleranceExceeded(currentScrollY);if(this.isOutOfBounds(currentScrollY)){return;}
if(currentScrollY<=this.offset){this.top();}else{this.notTop();}
if(this.shouldUnpin(currentScrollY,toleranceExceeded)){this.unpin();}
else if(this.shouldPin(currentScrollY,toleranceExceeded)){this.pin();}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'searchbar-pinned',unpinned:'searchbar-unpinned',top:'searchbar-top',notTop:'searchbar-not-top',initial:'searchbar'}};Headroom.cutsTheMustard=typeof features!=='undefined'&&features.rAF&&features.bind&&features.classList;window.Headroom=Headroom;}(window,document));(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var
threshold=6,add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn();},25);});})(),ignoreTags={textarea:true,input:true,select:true,button:true},mouseevents={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'},touchevents={move:'touchmove',cancel:'touchend',end:'touchend'};function Timer(fn){var callback=fn,active=false,running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false;}
else{running=false;}}
this.kick=function(fn){active=true;if(!running){trigger();}};this.end=function(fn){var cb=callback;if(!fn){return;}
if(!running){fn();}
else{callback=active?function(){cb();fn();}:fn;active=true;}};}
function returnTrue(){return true;}
function returnFalse(){return false;}
function preventDefault(e){e.preventDefault();}
function preventIgnoreTags(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
e.preventDefault();}
function isLeftButton(e){return(e.which===1&&!e.ctrlKey&&!e.altKey);}
function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id);}
i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i];}}}
function changedTouch(e,event){var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
if(touch.pageX===event.pageX&&touch.pageY===event.pageY){return;}
return touch;}
function mousedown(e){var data;if(!isLeftButton(e)){return;}
data={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};add(document,mouseevents.move,mousemove,data);add(document,mouseevents.cancel,mouseend,data);}
function mousemove(e){var data=e.data;checkThreshold(e,data,e,removeMouse);}
function mouseend(e){removeMouse();}
function removeMouse(){remove(document,mouseevents.move,mousemove);remove(document,mouseevents.cancel,mouseend);}
function touchstart(e){var touch,template;if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
touch=e.changedTouches[0];template={target:touch.target,startX:touch.pageX,startY:touch.pageY,timeStamp:e.timeStamp,identifier:touch.identifier};add(document,touchevents.move+'.'+touch.identifier,touchmove,template);add(document,touchevents.cancel+'.'+touch.identifier,touchend,template);}
function touchmove(e){var data=e.data,touch=changedTouch(e,data);if(!touch){return;}
checkThreshold(e,data,touch,removeTouch);}
function touchend(e){var template=e.data,touch=identifiedTouch(e.changedTouches,template.identifier);if(!touch){return;}
removeTouch(template.identifier);}
function removeTouch(identifier){remove(document,'.'+identifier,touchmove);remove(document,'.'+identifier,touchend);}
function checkThreshold(e,template,touch,fn){var distX=touch.pageX-template.startX,distY=touch.pageY-template.startY;if((distX*distX)+(distY*distY)<(threshold*threshold)){return;}
triggerStart(e,template,touch,distX,distY,fn);}
function handled(){this._handled=returnTrue;return false;}
function flagAsHandled(e){e._handled();}
function triggerStart(e,template,touch,distX,distY,fn){var node=template.target,touches,time;touches=e.targetTouches;time=e.timeStamp-template.timeStamp;template.type='movestart';template.distX=distX;template.distY=distY;template.deltaX=distX;template.deltaY=distY;template.pageX=touch.pageX;template.pageY=touch.pageY;template.velocityX=distX/time;template.velocityY=distY/time;template.targetTouches=touches;template.finger=touches?touches.length:1;template._handled=handled;template._preventTouchmoveDefault=function(){e.preventDefault();};trigger(template.target,template);fn(template.identifier);}
function activeMousemove(e){var timer=e.data.timer;e.data.touch=e;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeMouseend(e){var event=e.data.event,timer=e.data.timer;removeActiveMouse();endEvent(event,timer,function(){setTimeout(function(){remove(event.target,'click',returnFalse);},0);});}
function removeActiveMouse(event){remove(document,mouseevents.move,activeMousemove);remove(document,mouseevents.end,activeMouseend);}
function activeTouchmove(e){var event=e.data.event,timer=e.data.timer,touch=changedTouch(e,event);if(!touch){return;}
e.preventDefault();event.targetTouches=e.targetTouches;e.data.touch=touch;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeTouchend(e){var event=e.data.event,timer=e.data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
removeActiveTouch(event);endEvent(event,timer);}
function removeActiveTouch(event){remove(document,'.'+event.identifier,activeTouchmove);remove(document,'.'+event.identifier,activeTouchend);}
function updateEvent(event,touch,timeStamp,timer){var time=timeStamp-event.timeStamp;event.type='move';event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=0.3*event.velocityX+0.7*event.deltaX/time;event.velocityY=0.3*event.velocityY+0.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY;}
function endEvent(event,timer,fn){timer.end(function(){event.type='moveend';trigger(event.target,event);return fn&&fn();});}
function setup(data,namespaces,eventHandle){add(this,'movestart.move',flagAsHandled);return true;}
function teardown(namespaces){remove(this,'dragstart drag',preventDefault);remove(this,'mousedown touchstart',preventIgnoreTags);remove(this,'movestart',flagAsHandled);return true;}
function addMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
add(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid,preventDefault,undefined,handleObj.selector);add(this,'mousedown.'+handleObj.guid,preventIgnoreTags,undefined,handleObj.selector);}
function removeMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
remove(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid);remove(this,'mousedown.'+handleObj.guid);}
jQuery.event.special.movestart={setup:setup,teardown:teardown,add:addMethod,remove:removeMethod,_default:function(e){var event,data;if(!e._handled()){return;}
function update(time){updateEvent(event,data.touch,data.timeStamp);trigger(e.target,event);}
event={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};data={event:event,timer:new Timer(update),touch:undefined,timeStamp:undefined};if(e.identifier===undefined){add(e.target,'click',returnFalse);add(document,mouseevents.move,activeMousemove,data);add(document,mouseevents.end,activeMouseend,data);}
else{e._preventTouchmoveDefault();add(document,touchevents.move+'.'+e.identifier,activeTouchmove,data);add(document,touchevents.end+'.'+e.identifier,activeTouchend,data);}}};jQuery.event.special.move={setup:function(){add(this,'movestart.move',jQuery.noop);},teardown:function(){remove(this,'movestart.move',jQuery.noop);}};jQuery.event.special.moveend={setup:function(){add(this,'movestart.moveend',jQuery.noop);},teardown:function(){remove(this,'movestart.moveend',jQuery.noop);}};add(document,'mousedown.move',mousedown);add(document,'touchstart.move',touchstart);if(typeof Array.prototype.indexOf==='function'){(function(jQuery,undefined){var props=["changedTouches","targetTouches"],l=props.length;while(l--){if(jQuery.event.props.indexOf(props[l])===-1){jQuery.event.props.push(props[l]);}}})(jQuery);};});(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},settings={threshold:0.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth;h=e.currentTarget.offsetHeight;event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swiperight';trigger(e.currentTarget,event);}}
else{if(-e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipeup';trigger(e.currentTarget,event);}}}
else{if(e.distX>-e.distY){if(e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipedown';trigger(e.currentTarget,event);}}
else{if(-e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swipeleft';trigger(e.currentTarget,event);}}}}
function getData(node){var data=jQuery.data(node,'event_swipe');if(!data){data={count:0};jQuery.data(node,'event_swipe',data);}
return data;}
jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){var data=getData(this);if(data.count++>0){return;}
add(this,'moveend',moveend);return true;},teardown:function(){var data=getData(this);if(--data.count>0){return;}
remove(this,'moveend',moveend);return true;},settings:settings};});(function($){var ocSwipe=function(){var _ocWrap=$('body .off-canvas-wrap');var _directionsAry=['left','right'];var _curDirection;$.each(_directionsAry,function(i,v){_ocWrap.on('swipe'+v,function(){_curDirection=v;onSwipe();}).on('movestart',function(e){if((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY)){e.preventDefault();}});})
function getReverseDirection(){if(_directionsAry[0]===_curDirection){_directionsAry.reverse();}
return _directionsAry[0];};function onSwipe(){if(isOpen()){doSwipeClose();}else{doSwipeOpen();}};function doSwipeOpen(){var reverse=getReverseDirection();var openAnchor=_ocWrap.find('a.'+reverse+'-off-canvas-toggle');openAnchor.trigger('click');};function doSwipeClose(){var closeAnchor=$('.'+_curDirection+'-off-canvas-menu').find('a.exit-off-canvas');closeAnchor.trigger('click');};function isOpen(){if(_ocWrap.hasClass('move-left')||_ocWrap.hasClass('move-right')){return true;}
return false;};};if(Modernizr.touch){ocSwipe();}})(jQuery.noConflict());
//-->
</script>

<script type="text/javascript"  style="display:none">
<!--
if (typeof(Breakpoints) !== 'undefined') {
    var size = 'small';

    if (Breakpoints.isMatched({name: 'LARGE_UP_BREAKPOINT'})) size = 'large';
    document.cookie = "u_t=" + size + "; expires=0; path=/; domain=istockphoto.com";
}

//-->
</script>
<script type="text/javascript"  style="display:none">
<!--

(function($,undef)
{if($.fn.dotdotdot)
{return;}
$.fn.dotdotdot=function(o)
{if(this.length==0)
{$.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this;}
if(this.length>1)
{return this.each(function()
{$(this).dotdotdot(o);});}
var $dot=this;if($dot.data('dotdotdot'))
{$dot.trigger('destroy.dot');}
$dot.data('dotdotdot-style',$dot.attr('style')||'');$dot.css('word-wrap','break-word');if($dot.css('white-space')==='nowrap')
{$dot.css('white-space','normal');}
$dot.bind_events=function()
{$dot.bind('update.dot',function(e,c)
{e.preventDefault();e.stopPropagation();opts.maxHeight=(typeof opts.height=='number')?opts.height:getTrueInnerHeight($dot);opts.maxHeight+=opts.tolerance;if(typeof c!='undefined')
{if(typeof c=='string'||('nodeType'in c&&c.nodeType===1))
{c=$('<div />').append(c).contents();}
if(c instanceof $)
{orgContent=c;}}
$inr=$dot.wrapInner('<div class="dotdotdot" />').children();$inr.contents().detach().end().append(orgContent.clone(true)).find('br').replaceWith('  <br />  ').end().css({'height':'auto','width':'auto','border':'none','padding':0,'margin':0});var after=false,trunc=false;if(conf.afterElement)
{after=conf.afterElement.clone(true);after.show();conf.afterElement.detach();}
if(test($inr,opts))
{if(opts.wrap=='children')
{trunc=children($inr,opts,after);}
else
{trunc=ellipsis($inr,$dot,$inr,opts,after);}}
$inr.replaceWith($inr.contents());$inr=null;if($.isFunction(opts.callback))
{opts.callback.call($dot[0],trunc,orgContent);}
conf.isTruncated=trunc;return trunc;}).bind('isTruncated.dot',function(e,fn)
{e.preventDefault();e.stopPropagation();if(typeof fn=='function')
{fn.call($dot[0],conf.isTruncated);}
return conf.isTruncated;}).bind('originalContent.dot',function(e,fn)
{e.preventDefault();e.stopPropagation();if(typeof fn=='function')
{fn.call($dot[0],orgContent);}
return orgContent;}).bind('destroy.dot',function(e)
{e.preventDefault();e.stopPropagation();$dot.unwatch().unbind_events().contents().detach().end().append(orgContent).attr('style',$dot.data('dotdotdot-style')||'').data('dotdotdot',false);});return $dot;};$dot.unbind_events=function()
{$dot.unbind('.dot');return $dot;};$dot.watch=function()
{$dot.unwatch();if(opts.watch=='window')
{var $window=$(window),_wWidth=$window.width(),_wHeight=$window.height();$window.bind('resize.dot'+conf.dotId,function()
{if(_wWidth!=$window.width()||_wHeight!=$window.height()||!opts.windowResizeFix)
{_wWidth=$window.width();_wHeight=$window.height();if(watchInt)
{clearInterval(watchInt);}
watchInt=setTimeout(function()
{$dot.trigger('update.dot');},100);}});}
else
{watchOrg=getSizes($dot);watchInt=setInterval(function()
{if($dot.is(':visible'))
{var watchNew=getSizes($dot);if(watchOrg.width!=watchNew.width||watchOrg.height!=watchNew.height)
{$dot.trigger('update.dot');watchOrg=watchNew;}}},500);}
return $dot;};$dot.unwatch=function()
{$(window).unbind('resize.dot'+conf.dotId);if(watchInt)
{clearInterval(watchInt);}
return $dot;};var orgContent=$dot.contents(),opts=$.extend(true,{},$.fn.dotdotdot.defaults,o),conf={},watchOrg={},watchInt=null,$inr=null;if(!(opts.lastCharacter.remove instanceof Array))
{opts.lastCharacter.remove=$.fn.dotdotdot.defaultArrays.lastCharacter.remove;}
if(!(opts.lastCharacter.noEllipsis instanceof Array))
{opts.lastCharacter.noEllipsis=$.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis;}
conf.afterElement=getElement(opts.after,$dot);conf.isTruncated=false;conf.dotId=dotId++;$dot.data('dotdotdot',true).bind_events().trigger('update.dot');if(opts.watch)
{$dot.watch();}
return $dot;};$.fn.dotdotdot.defaults={'ellipsis':'... ','wrap':'word','fallbackToLetter':true,'lastCharacter':{},'tolerance':0,'callback':null,'after':null,'height':null,'watch':false,'windowResizeFix':true};$.fn.dotdotdot.defaultArrays={'lastCharacter':{'remove':[' ','\u3000',',',';','.','!','?'],'noEllipsis':[]}};$.fn.dotdotdot.debug=function(msg){};var dotId=1;function children($elem,o,after)
{var $elements=$elem.children(),isTruncated=false;$elem.empty();for(var a=0,l=$elements.length;a<l;a++)
{var $e=$elements.eq(a);$elem.append($e);if(after)
{$elem.append(after);}
if(test($elem,o))
{$e.remove();isTruncated=true;break;}
else
{if(after)
{after.detach();}}}
return isTruncated;}
function ellipsis($elem,$d,$i,o,after)
{var isTruncated=false;var notx='a table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style';var noty='script, .dotdotdot-keep';$elem.contents().detach().each(function()
{var e=this,$e=$(e);if(typeof e=='undefined'||(e.nodeType==3&&$.trim(e.data).length==0))
{return true;}
else if($e.is(noty))
{$elem.append($e);}
else if(isTruncated)
{return true;}
else
{$elem.append($e);if(after&&!$e.is(o.after)&&!$e.find(o.after).length)
{$elem[$elem.is(notx)?'after':'append'](after);}
if(test($i,o))
{if(e.nodeType==3)
{isTruncated=ellipsisElement($e,$d,$i,o,after);}
else
{isTruncated=ellipsis($e,$d,$i,o,after);}
if(!isTruncated)
{$e.detach();isTruncated=true;}}
if(!isTruncated)
{if(after)
{after.detach();}}}});return isTruncated;}
function ellipsisElement($e,$d,$i,o,after)
{var e=$e[0];if(!e)
{return false;}
var txt=getTextContent(e),space=(txt.indexOf(' ')!==-1)?' ':'\u3000',separator=(o.wrap=='letter')?'':space,textArr=txt.split(separator),position=-1,midPos=-1,startPos=0,endPos=textArr.length-1;if(o.fallbackToLetter&&startPos==0&&endPos==0)
{separator='';textArr=txt.split(separator);endPos=textArr.length-1;}
while(startPos<=endPos&&!(startPos==0&&endPos==0))
{var m=Math.floor((startPos+endPos)/2);if(m==midPos)
{break;}
midPos=m;setTextContent(e,textArr.slice(0,midPos+1).join(separator)+o.ellipsis);if(!test($i,o))
{position=midPos;startPos=midPos;}
else
{endPos=midPos;if(o.fallbackToLetter&&startPos==0&&endPos==0)
{separator='';textArr=textArr[0].split(separator);position=-1;midPos=-1;startPos=0;endPos=textArr.length-1;}}}
if(position!=-1&&!(textArr.length==1&&textArr[0].length==0))
{txt=addEllipsis(textArr.slice(0,position+1).join(separator),o);setTextContent(e,txt);}
else
{var $w=$e.parent();$e.detach();var afterLength=(after&&after.closest($w).length)?after.length:0;if($w.contents().length>afterLength)
{e=findLastTextNode($w.contents().eq(-1-afterLength),$d);}
else
{e=findLastTextNode($w,$d,true);if(!afterLength)
{$w.detach();}}
if(e)
{txt=addEllipsis(getTextContent(e),o);setTextContent(e,txt);if(afterLength&&after)
{$(e).parent().append(after);}}}
return true;}
function test($i,o)
{return $i.innerHeight()>o.maxHeight;}
function addEllipsis(txt,o)
{while($.inArray(txt.slice(-1),o.lastCharacter.remove)>-1)
{txt=txt.slice(0,-1);}
if($.inArray(txt.slice(-1),o.lastCharacter.noEllipsis)<0)
{txt+=o.ellipsis;}
return txt;}
function getSizes($d)
{return{'width':$d.innerWidth(),'height':$d.innerHeight()};}
function setTextContent(e,content)
{if(e.innerText)
{e.innerText=content;}
else if(e.nodeValue)
{e.nodeValue=content;}
else if(e.textContent)
{e.textContent=content;}}
function getTextContent(e)
{if(e.innerText)
{return e.innerText;}
else if(e.nodeValue)
{return e.nodeValue;}
else if(e.textContent)
{return e.textContent;}
else
{return"";}}
function getPrevNode(n)
{do
{n=n.previousSibling;}
while(n&&n.nodeType!==1&&n.nodeType!==3);return n;}
function findLastTextNode($el,$top,excludeCurrent)
{var e=$el&&$el[0],p;if(e)
{if(!excludeCurrent)
{if(e.nodeType===3)
{return e;}
if($.trim($el.text()))
{return findLastTextNode($el.contents().last(),$top);}}
p=getPrevNode(e);while(!p)
{$el=$el.parent();if($el.is($top)||!$el.length)
{return false;}
p=getPrevNode($el[0]);}
if(p)
{return findLastTextNode($(p),$top);}}
return false;}
function getElement(e,$i)
{if(!e)
{return false;}
if(typeof e==='string')
{e=$(e,$i);return(e.length)?e:false;}
return!e.jquery?false:e;}
function getTrueInnerHeight($el)
{var h=$el.innerHeight(),a=['paddingTop','paddingBottom'];for(var z=0,l=a.length;z<l;z++)
{var m=parseInt($el.css(a[z]),10);if(isNaN(m))
{m=0;}
h-=m;}
return h;}
var _orgHtml=$.fn.html;$.fn.html=function(str)
{if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot'))
{return this.trigger('update',[str]);}
return _orgHtml.apply(this,arguments);};var _orgText=$.fn.text;$.fn.text=function(str)
{if(str!=undef&&!$.isFunction(str)&&this.data('dotdotdot'))
{str=$('<div />').text(str).html();return this.trigger('update',[str]);}
return _orgText.apply(this,arguments);};})(jQuery);(function(){'use strict';angular.module('adp.controllers',[]);})();(function(){'use strict';angular.module('adp.services',['restangular']).config(['RestangularProvider',function(RestangularProvider){RestangularProvider.setBaseUrl(istock.restUrl);RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setResponseExtractor(function(response){if(response.data&&response.status){return response.data;}
return response;});}]);}());(function(){'use strict';angular.module('adp.directives',[]);})();(function(){'use strict';angular.module('adp.filters',[]);})();(function(){'use strict';angular.module('adp.constants',[]);})();(function(){'use strict';var APP='adp',APP_PATH='js/angular/apps/'+APP+'/';(function(){var index,url=window.location.href,urlEncoded;index=url.indexOf('#');if(index>0){url=url.substring(0,index);}
urlEncoded=encodeURI(decodeURI(url));if(url!==urlEncoded&&!(/prerender=true/.test(url))){window.location=urlEncoded;}else if(/#!$/.test(window.location.href)){if('history'in window&&'pushState'in history){history.pushState('',document.title,window.location.pathname);}else{window.location=url;}}}());angular.module(APP,['ngRoute','ngAnimate','ngCookies','mm.foundation','ngTouch','ipCookie','angular-locker','restangular','ngSanitize','isLocalization','common.services','common.directives','common.controllers','common.constants','common.filters',APP+'.controllers',APP+'.directives',APP+'.filters',APP+'.services',APP+'.constants']).config(['$routeProvider','$sceDelegateProvider','url','siteLang','isLocalizeProvider','translations','RestangularProvider','$locationProvider',function($routeProvider,$sce,url,siteLang,isLocalizeProvider,translations,RestangularProvider,$loc){var partialsPath=['/static/',APP_PATH,'partials'].join(''),whitelist=[/(?:http(?:s)?:\/\/)?(?:.*)(istock)(img|photo)\.com(.*)?/,istock.restUrl,'self'],cache={};$sce.resourceUrlWhitelist(whitelist);$routeProvider.otherwise({templateUrl:partialsPath+'/index.html',controller:'AdpCtrl'});if(!/prerender=true/.test(window.location.search)){$loc.html5Mode(true).hashPrefix('!');}
cache[siteLang]=translations;isLocalizeProvider.setOptions({baseUrl:['/static/',APP_PATH,'i18n/'].join(''),language:siteLang,cache:cache,loadResourceOnInit:true});RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setBaseUrl(istock.restUrl);}]).run(function($rootScope){$rootScope.$on('$locationChangeStart',function(event,next){if(/#!$/.test(next)){event.preventDefault();}});});}());(function(){'use strict';var APP='adp',adp=angular.module(APP+'.controllers');adp.controller('AdpCtrl',['$scope','$window','$filter','$injectedData','$cacheFactory','$location','boomerangService','accountService','spinnerService','Restangular','adpEnsightenService','adpStateService','authorizationService','urlBuilder','OMNITURE_EVENTS','ADP_ERROR_MESSAGING',function($scope,$window,$filter,$injectedData,$cacheFactory,$location,boomerangService,accountService,spinnerService,Restangular,adpEnsightenService,adpStateService,authorizationService,urlBuilder,OMNITURE_EVENTS,ERROR_MESSAGING){var attemptedRefreshes=0;$scope.adp=adpStateService;$scope.adp.error={showErrorMessage:false,errorMessage:'',errorCode:''};$scope.serial=istock.serial;$scope.adpReady=false;$scope.urlInfix=urlBuilder.getUrlInfix();$scope.adp.statusMessage='';$scope.omnitureSimilarFileClick=OMNITURE_EVENTS.ADP.SIMILAR_FILE_CLICK;$scope.omnitureZoomClick=OMNITURE_EVENTS.ADP.FILE_ZOOM_CLICK;$scope.init=function(){boomerangService.initBoomerang('adp','file_thumbview_approve');$scope.adpReady=false;angular.element(document).ready(function(){var cache=$cacheFactory.get('$http');cache.removeAll();});$scope.configRequestHeader();spinnerService.show('adp-content-spinner');spinnerService.show('adp-carousel-section-spinner');if(attemptedRefreshes>1){$scope.adp.error.showErrorMessage=true;$scope.adp.error.errorMessage=ERROR_MESSAGING.API_ERROR+'|'+$scope.getContactUrl();$scope.adp.error.errorCode='Code: A1';spinnerService.hide('adp-content-spinner');spinnerService.hide('adp-keywords');}else{adpStateService.init().finally(function(){var data={asset:$scope.adp.asset,user:$scope.adp.user,assetId:$scope.adp.assetId,segmentString:$injectedData.segmentString};if($location.search().cmsDisable){$scope.adp.similarFilesCMS=false;}
adpStateService.fetchAccount().finally(function(){adpStateService.initSimilarFiles().then(function(){spinnerService.hide('carousel-spinner');adpEnsightenService.init();$scope.$broadcast('detailsInit');data.similarFilesSource=$scope.adp.similarFiles.source;$scope.sendToOmniture(OMNITURE_EVENTS.ADP.ADP_LOAD,data);});if(!$scope.adp.user&&!$scope.adp.alreadyVisited){adpStateService.initCategories();}});$scope.optoutLink=location.pathname+'?optout=2';}).catch(function(response){if(response.status&&response.status===401){authorizationService.refreshToken().then(function(data){$injectedData.token=data.token;}).catch(function(){$scope.adp.error.showErrorMessage=true;$scope.adp.error.errorMessage=ERROR_MESSAGING.API_ERROR+'|'+$scope.getContactUrl();$scope.adp.error.errorCode='Code: A2';if(response.data.referenceId){$scope.adp.error.errorCode+=' - Reference: '+response.data.referenceId;}}).finally(function(){attemptedRefreshes++;$scope.init();});}else{if($scope.isPrerender()){angular.element('head').append('<meta name="prerender-status-code" content="404">');}else{if(response.status&&response.status===404){$window.location.href=$scope.urlInfix+'/fourohfour';}else{$scope.adp.error.showErrorMessage=true;$scope.adp.error.errorMessage=ERROR_MESSAGING.API_ERROR+'|'+$scope.getContactUrl();$scope.adp.error.errorCode='Code: B1';if(response.data.referenceId){$scope.adp.error.errorCode+=' - Reference: '+response.data.referenceId;}}}}}).finally(function(){spinnerService.hide('adp-content-spinner');spinnerService.hide('adp-keywords');});}
$scope.adminData=$injectedData.adminData;};$scope.isPrerender=function(){var result=false,args=$window.location.search.substr(1).split('&');for(var i=0;i<args.length;i++){result=args[i].split('=')[0]==='prerender';if(result){break;}}
return result;};$scope.setOmnitureCookie=function(type,category){var cookieName='',d=new Date(),expires='';d.setTime(d.getTime()+(1*24*60*60*1000));expires='expires='+d.toUTCString();switch(type){case'category':cookieName='c_c';document.cookie=cookieName+'='+category+';expires='+expires+';domain=.istockphoto.com;path=/';break;case'keyword':cookieName='k_c';document.cookie=cookieName+'=keyword;expires='+
expires+';domain=.istockphoto.com;path=/';break;case'similarFile':cookieName='sf_c';document.cookie=cookieName+'=similarFile;expires='+
expires+';domain=.istockphoto.com;path=/';}};$scope.sendToOmniture=function(event,args){$scope.$broadcast(event,args);};$scope.configRequestHeader=function(){if($injectedData.token){Restangular.setDefaultHeaders({'Authorization':'Bearer '+$injectedData.token});}};$scope.similarFilesCallback=function(result){if(result==='CMS'){adp.similarFilesCMS=true;}else if(result==='callback'||result==='SimilarImages'){adp.similarFilesCMS=false;}
spinnerService.hide('adp-carousel-section-spinner');};$scope.showSimilarFilesSeparator=function(similarFiles){var noSimilarFiles=!similarFiles.assetPreviews.length,notEnoughFiles=(similarFiles.assetPreviews.length<similarFiles.threshold);return(noSimilarFiles||notEnoughFiles)&&!adp.similarFilesCMS;};$scope.getContactUrl=function(){if($scope.urlInfix){return $scope.urlInfix+'/contact_ticket';}else{return'/contact_ticket';}};$scope.$on('$routeChangeSuccess',function(){$scope.init();});$scope.$watch('adp.asset',function(){if($scope.adp.asset&&!$scope.adp.asset.status){$scope.adp.asset.status='Unknown';}
if($scope.adp.asset&&$scope.adp.asset.contributor&&$scope.adp.asset.contributor.isActive!==true){$scope.adp.asset.status='Banned';}
if($scope.adp.asset&&$scope.adp.asset.status){switch($scope.adp.asset.status){case'Active':$scope.adp.statusMessage='This asset is active';break;case'Rejected':$scope.adp.statusMessage='This file has been rejected';break;case'Pending':$scope.adp.statusMessage='This file is pending review';break;case'PendingExecutive':$scope.adp.statusMessage='This file is pending executive review';break;case'Deactivated':$scope.adp.statusMessage='This file has been deactivated';break;case'NeedsModelRelease':$scope.adp.statusMessage='This file requires a model release';break;case'Process':$scope.adp.statusMessage='Processing';break;case'Banned':$scope.adp.statusMessage='The owner of this file has been banned';break;case'PublishSubmitted':$scope.adp.statusMessage='This file is publishing';break;case'PublishFailure':$scope.adp.statusMessage='Publish Failed';break;default:$scope.adp.statusMessage='';break;}}});angular.element(window).on('load',function(){$scope.adpReady=true;});}]);}());(function(){'use strict';var APP='adp',adp=angular.module(APP+'.controllers');adp.controller('FileDetailsCtrl',['$scope','$window','$location','$http','$interval','$cookies','$injectedData','authorizationService','availabilityService','downloadService','metadataService','concreteTypeService','ipCookie','adpStateService','licenseStateService','purchaseStateService','spinnerService','countrySitesService','viewStateService','ctaTitleService','kountService','urlBuilder','OMNITURE_EVENTS','TYPE_MAPPING','ADP_ERROR_MESSAGING','isLocalize',function($scope,$window,$location,$http,$interval,$cookies,$injectedData,authorizationService,availabilityService,downloadService,metadataService,concreteTypeService,ipCookie,adpStateService,licenseStateService,purchaseStateService,spinnerService,countrySitesService,viewStateService,ctaTitleService,kountService,urlBuilder,OMNITURE_EVENTS,TYPE_MAPPING,ERROR_MESSAGING,isLocalize){$scope.editorialTooltipTitle=isLocalize.getLocalizedString('EDITORIAL_USE_ONLY_TOOLTIP');$scope.metaDataView='';$scope.licenseState=licenseStateService;$scope.viewState=viewStateService;$scope.purchaseState=purchaseStateService;$scope.ctaTitleState=ctaTitleService;$scope.viewStates=viewStateService.views;$scope.warnings=viewStateService.warnings;$scope.purchaseOptions=purchaseStateService.purchaseOptions;$scope.elState=licenseStateService.state;$scope.activeState=$scope.viewState.activeState;$scope.subsAbuseOperationCode=3;$scope.attemptedRefreshes=0;$scope.downloadedFileSize='';$scope.urlInfix=urlBuilder.getUrlInfix();$scope.detailsInit=function(){$scope.viewState.setActiveState($scope.viewStates.download);adpStateService.fetchAsset().then(function(asset){$scope.setMetaDataView(asset);$scope.insertProfilePicUrl();if(asset.assetType==='video'||asset.assetType==='audio'){$scope.populateDropdown();}
adpStateService.fetchAccount().then(function(user){$scope.viewState.init(asset,user,$scope.adp.gettyId);}).catch(function(){$scope.viewState.init(asset,null,$scope.adp.gettyId);}).finally(function(){$scope.ctaTitleState.init();$scope.viewState.setActiveState($scope.viewStates.download);$scope.assetTypeConfig=$scope.viewState.getAssetTypeConfig();$scope.setMiniAdpCookie();});});};$scope.getCtaAction=function(funcName,options){options=options||{};$scope.downloadType=options.downloadType||'';$scope.$eval('('+funcName+'())');};$scope.purchaseFile=function(){var extLicensePurchase=$scope.licenseState.isLicenseSelected(),nextState;if($injectedData.adminData&&$injectedData.adminData.permissions&&$injectedData.adminData.permissions.freeAdminDownloadACL){$scope.confirmPurchase();return;}
adpStateService.init().then(function(){$scope.viewState.setRedownloadStateInfo($scope.adp.gettyId).then(function(){var isRedirectToPricing,isPreviousDownload,isCorporateSlave;$scope.sendToOmniture(OMNITURE_EVENTS.CTA_CLICK,$scope.activeState.ctaTitle);if($scope.adp.user!==null){isRedirectToPricing=($scope.adp.user.numCredits===0);isRedirectToPricing=isRedirectToPricing&&($scope.adp.user.numCredits===0);isRedirectToPricing=isRedirectToPricing&&($scope.adp.user.hasSub===false);isRedirectToPricing=isRedirectToPricing&&(!$scope.adp.asset.isFreeFile);if(isRedirectToPricing){isPreviousDownload=($scope.purchaseOptions.availability.reason&&$scope.purchaseOptions.availability.reason.previousDownload);isRedirectToPricing=isRedirectToPricing&&!isPreviousDownload;}
if(isRedirectToPricing){isCorporateSlave=($scope.adp.user.corporateInfo&&$scope.adp.user.corporateInfo.isCorporateSlave);isRedirectToPricing=isRedirectToPricing&&!isCorporateSlave;}
if(isRedirectToPricing){$scope.goToPricing();}else{nextState=$scope.purchaseState.decide(extLicensePurchase,($scope.adp.asset.isFreeFile&&!extLicensePurchase),$scope.viewStates,$scope.warnings);$scope.viewState.setActiveState(nextState);}}else{if($scope.adp.hasCookie||$scope.adp.asset.isFreeFile){var redirectUrl='/'+$scope.adp.asset.assetType+$location.path();$scope.setWindowLocation(urlBuilder.buildReturnUrl('sign-in',redirectUrl));}else{$scope.goToPricing();}}});});};$scope.confirmPurchase=function(){var selectedLicenses=[],omnitureArgs={},vars={'subscription':'false','licenses':[],'concreteType':''},downloadSource='Credits';$scope.languageSupportedByWeTransfer=$injectedData.languageSupportedByWeTransfer;$scope.sendToOmniture(OMNITURE_EVENTS.CTA_CLICK,$scope.activeState.ctaTitle);selectedLicenses=$scope.licenseState.state.selectedLicenses;selectedLicenses.forEach(function(selectedLicense){vars.licenses.push(selectedLicense.licenseType);});if(selectedLicenses.length>0){downloadSource='License';}
if($scope.purchaseOptions.type==='sub'&&selectedLicenses.length===0&&!$scope.adp.asset.isFreeFile){vars.subscription=true;downloadSource='Subscription';}else if(selectedLicenses.length>0){downloadSource='Credits';vars.subscription=false;}
if($scope.purchaseOptions.availability.reason){if($scope.purchaseOptions.availability.reason.previousDownloadSource==='Subscription'&&selectedLicenses.length===0){vars.subscription=true;}else{downloadSource='Credits';vars.subscription=false;}}
if($scope.selectedDropdownOption){vars.concreteType=$scope.selectedDropdownOption.typeId;}else{vars.concreteType=$scope.purchaseOptions.size;}
if($scope.adp.asset.assetType==='vector'){$scope.downloadedFileSize='VECTOR';}else{$scope.downloadedFileSize=vars.concreteType;}
kountService.getKountSession().then(function(kountSession){$scope.adp.kountSession=kountSession;});downloadService.getDownload($scope.adp.gettyId,vars).then(function(downloadResults){var response=downloadResults.data,d=new Date(),expires='',days;$scope.adp.error.showErrorMessage=false;$scope.viewStates.confirmDownload.downloadUrl=response.downloadUrl;if($scope.viewState.focusView){$scope.viewState.setActiveState($scope.viewStates.completeDownloadFocus);}else{$scope.viewState.setActiveState($scope.viewStates.completeDownload);}
$scope.purchaseOptions.availability.isDownloadable=true;$scope.purchaseOptions.availability.reason={previousDownload:true,previousDownloadSource:downloadSource};$scope.adp.user.numCredits-=response.creditBurned;omnitureArgs.asset=$scope.adp.asset;omnitureArgs.user=$scope.adp.user;omnitureArgs.assetId=$scope.adp.assetId;omnitureArgs.downloadInfo=downloadResults.data;omnitureArgs.segmentString=$injectedData.segmentString;omnitureArgs.creditsRemaining=$scope.adp.user.numCredits;if($scope.adp.asset.assetType==='photo'){var sizeCookie=$cookies.visitedADP2,sizeCookieStr;if(sizeCookie){sizeCookie=sizeCookie.split('|')[0];sizeCookieStr=sizeCookie+'|'+$scope.purchaseOptions.concreteType;}else{sizeCookieStr=true+'|'+$scope.purchaseOptions.concreteType;}
days=30;d.setTime(d.getTime()+(days*24*60*60*1000));expires=d.toUTCString();document.cookie='visitedADP2 ='+sizeCookieStr+';expires='+
expires+';domain=.istockphoto.com;path=/';}
if(response.isDropBoxDownload===true){$scope.viewStates.completeDownload.showDropboxSyncFeedback=true;if($scope.downloadType==='manual'){$scope.setWindowLocation(response.downloadUrl);}}else{$scope.setWindowLocation(response.downloadUrl);}
$scope.viewStates.completeDownload.showWeTransferCTA=true;$scope.sendToOmniture(OMNITURE_EVENTS.ADP.FILE_DOWNLOAD,omnitureArgs);$interval(function(){if($scope.activeState.stateName==='CompleteState'){$scope.viewState.setActiveState($scope.viewStates.download);}},120000,1);}).catch(function(response){if(response.status){if(response.data.operationStatusCode&&response.status===403&&response.data.operationStatusCode===$scope.subsAbuseOperationCode){countrySitesService.getPlansAndPricingTranslation().then(function(pAndPTranslation){$scope.setWindowLocation(pAndPTranslation+'/team-share');});}else if(response.status===401&&$scope.attemptedRefreshes<=1){$scope.attemptedRefreshes++;authorizationService.refreshToken().then(function(data){$injectedData.token=data.token;$scope.confirmPurchase();}).catch(function(){$scope.adp.error.showErrorMessage=true;$scope.adp.error.errorMessage=ERROR_MESSAGING.DOWNLOAD_ERROR;});}else{$scope.adp.error.showErrorMessage=true;$scope.adp.error.errorMessage=ERROR_MESSAGING.DOWNLOAD_ERROR;}}});};$scope.goToPricing=function(){$scope.sendToOmniture(OMNITURE_EVENTS.CTA_CLICK,$scope.activeState.ctaTitle);countrySitesService.getPlansAndPricingTranslation().then(function(pAndPTranslation){$scope.setWindowLocation(pAndPTranslation);});};$scope.clearLicensesAndCancelPurchase=function(){$scope.licenseState.closeLicenseTable();$scope.cancelPurchase();};$scope.cancelPurchase=function(){$scope.viewState.setActiveState($scope.viewStates.download);$scope.licenseState.clearLicenses();};$scope.setMiniAdpCookie=function(){var eligibleForSubs=false,totalInfo,value,typeId,collectionId,infoFileTitle='',truncatedFileTitle='',name='file_closeup_mini_adp_fileInfo',days=1;if($scope.adp.asset.assetType&&$scope.adp.asset.standardPriceInCredits>0){if($scope.adp.asset.assetType==='photo'||$scope.adp.asset.assetType==='illustration'||$scope.adp.asset.assetType==='raster'||$scope.adp.asset.assetType==='vector'){eligibleForSubs=true;}}
typeId=TYPE_MAPPING.FILE_TYPES[$scope.adp.asset.assetType.toUpperCase()];collectionId=TYPE_MAPPING.COLLECTION_TYPES[$scope.adp.asset.collection.toUpperCase()];if($scope.adp.asset.title){infoFileTitle=$scope.adp.asset.title;truncatedFileTitle=$scope.adp.asset.title.slice(0,34);}
totalInfo={'fileId':$scope.adp.assetId,'creditsCost':$scope.adp.asset.standardPriceInCredits,'collection':collectionId,'abstractTypeId':typeId,'eligibleForSubs':eligibleForSubs,'fileType':$scope.adp.asset.assetType,'typeName':$scope.adp.asset.assetType,'fileTitle':infoFileTitle,'fileTitleTruncated':truncatedFileTitle};value=JSON.stringify(totalInfo);ipCookie(name,value,{path:'/',expires:days});};$scope.insertProfilePicUrl=function(){if($injectedData.profilePicUrl!==null){$scope.adp.asset.contributor.profilePicUrl=$injectedData.profilePicUrl;}};$scope.setMetaDataView=function(){$scope.metaDataView='/static/js/angular/apps/adp/partials/metadata/_'+
$scope.adp.asset.assetType.toLowerCase()+'Metadata.html';metadataService.setGenericMetaData($scope.adp.asset);metadataService.setTwitterMetaData($scope.adp.asset);metadataService.setOGPMetaData($scope.adp.asset);};$scope.populateDropdown=function(){var option={},optionList=[],audio44100Found=false,audio48000Found=false;if($scope.adp.asset.assetType==='video'){if($scope.adp.asset.videoList){$scope.adp.asset.videoList.forEach(function(videoOption){option={typeId:videoOption.videoId,fileSize:(videoOption.sizeInBytes/(1024*1024)).toFixed(2),presentationString:concreteTypeService.getTypeName(videoOption.videoId)+' | '+
videoOption.widthInPixels+' x '+videoOption.heightInPixels+' @ '+videoOption.framePerSecond+' fps | '+videoOption.format};optionList.push(option);});$scope.selectedDropdownOption=optionList[0];}}else if($scope.adp.asset.assetType==='audio'){if($scope.adp.asset.audioList){$scope.adp.asset.audioList.forEach(function(audioOption){if(audioOption.frequency===44.1&&!audio44100Found||audioOption.frequency===48&&!audio48000Found){option={typeId:audioOption.audioId,presentationString:audioOption.frequency+' kHz | '+$scope.adp.asset.bitDepth+' WAV'};optionList.push(option);if(audioOption.frequency===44.1){audio44100Found=true;}
if(audioOption.frequency===48){audio48000Found=true;}}});}
$scope.selectedDropdownOption=optionList[0];}
$scope.viewStates.download.fileTypeDropdownOptions=optionList;};$scope.sendPortfolioLinkData=function(){$scope.sendToOmniture(OMNITURE_EVENTS.ADP.PORTFOLIO_LINK_CLICK,$scope.adp);};$scope.updateDropdownSelection=function(option){$scope.selectedDropdownOption=option;};$scope.setWindowLocation=function(url){$window.location.href=url;};$scope.$on('detailsInit',function(){$scope.detailsInit();});$scope.$watch('viewState.activeState.showExtendedLicenses',function(newValue){if(newValue===true){$scope.cancelPurchase();}});}]);}());(function(){'use strict';var module=angular.module('adp.directives',['ngAnimate']);module.directive('adpZoom',['$window','$timeout','spinnerService',function($window,$timeout,spinnerService){return{restrict:'E',scope:{src:'@src',zoomSrc:'@zoomSrc',altText:'@zoomAltText',width:'@zoomPreviewWidth',height:'@zoomPreviewHeight',clickEvent:'&'},templateUrl:'/static/js/angular/apps/adp/partials/_zoom.html',link:function(scope,element){var thumb=angular.element('#image-thumbnail'),thumbWrapper=angular.element('.zoom-large-url');scope.touchscreen=(('ontouchstart'in $window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));thumbWrapper.hide();thumb.load(function(){thumbWrapper.fadeIn(600);});scope.zoomModalOpen=function($event){var zoomImage=angular.element('#image-zoom'),bodyElement=angular.element('body');$event.stopPropagation();scope.loaded=false;spinnerService.show('adp-zoom-modal-spinner');if(zoomImage.attr('src')){zoomImage.removeAttr('src');}
zoomImage.attr('src',scope.zoomSrc);bodyElement.addClass('modal-open');scope.loaded=true;scope.zoomed=true;scope.clickEvent();element.closest('body').on('keydown',keyDownCheck);};scope.zoomModalClose=function(){var bodyElement=angular.element('body');bodyElement.removeClass('modal-open');scope.zoomed=false;element.closest('body').off('keydown',keyDownCheck);};scope.setFlag=function(strFlag){angular.element('#image-zoom').addClass(strFlag);};scope.removeFlag=function(strFlag){angular.element('#image-zoom').removeClass(strFlag);};scope.noClick=function(e){e.stopPropagation();};function keyDownCheck(event){if(event.keyCode===27){scope.zoomModalClose();scope.$apply();}}}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpMediaPlayer',['$location','assetService','flashService','gettyMasterIdService','cookielessUrl','adpStateService',function($location,assetService,flashService,gettyMasterIdService,cookielessUrl,adpStateService){return{restrict:'E',link:function(scope,element){var loadMediaPlayer,buildAudioPlayer,buildVideoPlayer,setCompLink,flashVarArray,MediaPlayer={},flashVars,moreFlashVarsArray,flashString,concreteType='64';adpStateService.fetchAsset().then(function(asset){loadMediaPlayer(asset);});loadMediaPlayer=function(asset){flashVarArray=['videoFileID='+asset.referenceNumber,'bufferPercent=25'];switch(asset.assetType.toLowerCase()){case'audio':buildAudioPlayer(asset);break;case'video':buildVideoPlayer(asset);break;}
flashVarArray=flashVarArray.concat(moreFlashVarsArray);flashVars=flashVarArray.join('&');flashString=flashService.flashTag(MediaPlayer.playerPath,asset,flashVars,350,230);element.html(flashString);};buildVideoPlayer=function(asset){var previewLink;asset.videoList.forEach(function(option){if(option.standard.indexOf('HD')>-1){concreteType='65';}});previewLink=cookielessUrl+'/video_passthrough/'+
asset.referenceNumber+'/'+concreteType+'/'+asset.referenceNumber+'.flv';moreFlashVarsArray=['videoLocation='+encodeURIComponent(previewLink)];MediaPlayer.playerPath=cookielessUrl+'/video_player_wide.swf';setCompLink(previewLink);};buildAudioPlayer=function(asset){var previewLink='/audio_mp3_preview.php?id='+asset.referenceNumber;MediaPlayer.playerPath=cookielessUrl+'/richmedia/audio/audioPlayer.swf';moreFlashVarsArray=['videoLocation='+encodeURIComponent(previewLink),'bitDepth='+asset.bitDepth,'soundField='+asset.soundField,'tempo='+asset.tempo,'waveformUrl='+encodeURIComponent('/audio_passthrough.php?ID='+asset.referenceNumber+'&Type=87'),'timeSignature='+encodeURIComponent(asset.timeSignature)];setCompLink(previewLink);};setCompLink=function(link){var compElement=angular.element('#adp-comp-link');compElement.attr('href',link);};}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpMetadata',['assetService',function(){return{restrict:'E',transclude:true,templateUrl:'/static/js/angular/apps/adp/partials/details/_metadata.html'};}]);}());(function(){'use strict';var module=angular.module('adp.directives');function truncate(strText,intWidth,element){var arrText=strText.split(' '),intWordCount=arrText.length,x=1;while(x<=intWordCount){var tmpWidth=computeWidth(arrText.slice(0,x).join(' '),element);if(tmpWidth>intWidth){intWordCount=x-1;break;}
x++;}
if(intWordCount===0){intWordCount=1;}
return arrText.slice(0,intWordCount).join(' ');}
function computeWidth(strText,element){var o=angular.element('<div>'+strText+'</div>').css({'position':'absolute','float':'left','white-space':'nowrap','visibility':'hidden','font-family':getElementStyle(element,'font-family'),'font-size':getElementStyle(element,'font-size'),'font-weight':getElementStyle(element,'font-weight'),'font-style':getElementStyle(element,'font-style'),'line-height':getElementStyle(element,'line-height')}).appendTo(angular.element('body')),w=o.width();o.remove();return w;}
function getElementStyle(element,style){var elementValue=angular.element(element).css(style);return elementValue;}
module.directive('adpClamp',[function(){return{restrict:'AE',scope:{titlesrc:'=titlesrc',alttext:'=alttext',keywords:'=keywords'},replace:true,templateUrl:'/static/js/angular/apps/adp/partials/_clamp.html?serial='+istock.serial,link:function($scope,$element,$attrs){$scope.attrs=$attrs;$scope.showFullTitle=false;$scope.showKeywordsAsTitle=false;$scope.fullTitle='';$scope.alternateText=$scope.altText;$scope.toggleShowFullTitle=function(){$scope.showFullTitle=true;};$scope.clampTitle=function(){if(typeof $scope.keywords!=='undefined'){if($scope.keywords.length>0){$scope.clampid=$scope.attrs.id;var keywordsStr=$scope.keywords.join(', '),sWidth=getElementStyle('#'+$attrs.id+' section section h1','width'),iFullWidth=parseInt(sWidth,10),bufferSpace=50,iWidth=iFullWidth-(parseInt(getElementStyle('.adp-show-full-title-button','width'),10)+bufferSpace);if($scope.titlesrc===''){$scope.clampedTitle=truncate(keywordsStr,iWidth,'#'+$scope.attrs.id+' section section h1 small');$scope.clampedKeywords='';$scope.fullTitle=keywordsStr;if($scope.fullTitle.length<iFullWidth){$scope.showFullTitle=true;}
$scope.showKeywordsAsTitle=true;}else{$scope.clampedTitle=truncate($scope.titlesrc,iWidth,'#'+$scope.attrs.id+' section section h1 small');$scope.clampedKeywords=keywordsStr;$scope.fullTitle=$scope.titlesrc;}}else{$scope.clampedTitle=$scope.titlesrc;$scope.clampedKeywords=$scope.titlesrc;}}};$scope.$watch('titlesrc',function(){$scope.clampTitle(window.innerWidth);});$scope.$watch(function(){return{'h':window.innerHeight,'w':window.innerWidth};},function(newValue){$scope.windowHeight=newValue.h;$scope.windowWidth=newValue.w;$scope.clampTitle(newValue);$scope.resizeWithOffset=function(offsetH){return{'height':(newValue.h-offsetH)+'px'};};},true);angular.element(window).bind('resize',function(){$scope.$apply();});}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('imageCarousel',['$window','$timeout','searchRequestService','legacyFacetService','omnitureService','OMNITURE_EVENTS','boomerangService','isLocalize','$injectedData',function($window,$timeout,searchRequestService,legacyFacetService,omnitureService,OMNITURE_EVENTS,boomerangService,isLocalize,$injectedData){return{restrict:'EA',templateUrl:'/static/js/angular/apps/adp/partials/_carousel.html',scope:{data:'=?',clickEvent:'&',searchEvent:'&',callback:'&',sectionTitle:'@',sectionTitlePhoto:'@',sectionTitleVideo:'@',sectionTitleAudio:'@',sectionTitleVector:'@',sectionSubLink:'@',sectionSubLinkAnchor:'@',sectionMaxResults:'@',fileCollection:'@',carouselType:'@',queryKeywords:'@',queryFacets:'=?',assetList:'=?',contributor:'=?'},link:function(scope,element){var currentPage=1,boomerangTimer;scope.localdata={};scope.currentRow=[];scope.nextEnabled=false;scope.prevEnabled=false;scope.errorCode=0;scope.searchExecuted=false;scope.searchResultsCount=100;scope.processedKeywords='';if(scope.sectionMaxResults){scope.searchResultsCount=scope.sectionMaxResults;}
scope.go=function(path){omnitureService.adpCarouselSeeAllClick({carouselType:scope.carouselType});if((/\=/).test(path)){var splits=path.match(/(.*\=)(.*)$/);path=splits[1]+encodeURIComponent(splits[2]);}
$window.location.assign(path);};scope.updateButtons=function(){if(scope.localdata){var numberOfImages=currentPage*scope.localdata.filesInARow;scope.nextEnabled=numberOfImages<scope.localdata.totalResults;scope.prevEnabled=currentPage>1;}};scope.updateRow=function(){if(currentPage===0){currentPage=1;}
if(scope.localdata){var currentIndex=(currentPage-1)*scope.localdata.filesInARow;if(currentIndex+scope.localdata.filesInARow>scope.localdata.totalResults){if(scope.localdata.assetPreviews){scope.currentRow=scope.localdata.assetPreviews.slice(currentIndex,scope.localdata.totalResults);}}else{if(scope.localdata.assetPreviews){scope.currentRow=scope.localdata.assetPreviews.slice(currentIndex,currentIndex+scope.localdata.filesInARow);}}}};scope.checkValidPage=function(){if(currentPage<1){currentPage=1;}
if(scope.localdata){if((currentPage*scope.localdata.filesInARow)>scope.localdata.totalResults){currentPage=Math.ceil(scope.localdata.totalResults/scope.localdata.filesInARow);}}};scope.suppressCrossSellCarousel=function(){var adpObject=scope.$parent.adp;return(adpObject.user&&adpObject.user.sub&&adpObject.user.sub.type==='essentials'&&(adpObject.asset.assetType==='photo'||adpObject.asset.assetType==='vector')&&adpObject.user.numCredits<3&&scope.queryFacets.fileCollection&&scope.queryFacets.fileCollection.indexOf('essentials')===-1)===true;};scope.initFromFacets=function(facets){if(scope.searchExecuted){return;}
var options={searchToken:'',isFrontEndSearch:false,endpoint:'related-search'};facets=angular.copy(facets);facets.decoration=['0','1','2','41','59','63'];boomerangTimer=boomerangService.createTimer('image-carousel_load',scope.carouselType);searchRequestService.executeSearch(facets,options).then(function(response){var canonicalThumbType,canonicalMediaThumbType,mediumUrl,thumbType,returnedData={},totalReturnedAssets=0;boomerangTimer.finish();boomerangTimer=null;returnedData.assetPreviews=[];if(response.results){omnitureService.adpCarouselsLoad({carouselType:scope.carouselType});if(response.results.thumbNails){thumbType='srp_thumb';canonicalThumbType='canonical_srp_thumb';canonicalMediaThumbType='canonical_html5_thumb_medium';response.results.thumbNails.forEach(function(objectAsset){mediumUrl=objectAsset.url[thumbType];if($injectedData.useCanonicalUrls){if(!!objectAsset.url[canonicalMediaThumbType]){mediumUrl=objectAsset.url[canonicalMediaThumbType];}else if(!!objectAsset.url[canonicalThumbType]){mediumUrl=objectAsset.url[canonicalThumbType];}}
returnedData.assetPreviews.push({assetUrl:objectAsset.url.page,thumbnailsUrl:{mediumUrl:mediumUrl},title:objectAsset.title});totalReturnedAssets++;});}else{thumbType='thumb_190';response.results.forEach(function(objectAsset){var assetAbstractType=objectAsset.abstractType.string;if(assetAbstractType.indexOf('video')>-1){assetAbstractType='video';}
returnedData.assetPreviews.push({assetType:assetAbstractType,assetUrl:objectAsset.assets.adpUrl,gettyMasterId:'184948930',thumbnailsUrl:{mediumUrl:objectAsset.assets[thumbType]},title:objectAsset.title,licenseTypeID:objectAsset.license.id});totalReturnedAssets++;});}
returnedData.threshold=1;returnedData.filesInARow=6;returnedData.totalResults=totalReturnedAssets;scope.keywordResults=totalReturnedAssets;scope.localdata=returnedData;if(scope.localdata&&scope.localdata.assetPreviews&&scope.localdata.assetPreviews.length>0){scope.onResizeFunction();currentPage=1;scope.updateRow();scope.updateButtons();angular.element($window).bind('resize',function(){scope.onResizeFunction();scope.$apply();});}
if(scope.callback){scope.callback({result:'callback'});}}});scope.searchExecuted=true;};scope.$watch('$parent.adp.asset.assetType',function(){scope.assetType=scope.$parent.adp.asset.assetType;});scope.$watch('$parent.adp.keywords.baseKeywords',function(){scope.baseKeywords=scope.$parent.adp.keywords.baseKeywords;});scope.$watch('contributor',function(){if(scope.carouselType==='PORTFOLIO'&&scope.contributor&&scope.contributor.id){scope.queryFacets={};scope.queryFacets.portfolioID=scope.contributor.id;scope.queryFacets.text=[];scope.queryFacets.fileIdSet=[];if(scope.searchResultsCount){scope.queryFacets.perPage=scope.searchResultsCount;}
if(!scope.sectionTitle&&scope.contributor.copyrightName){scope.sectionTitle=scope.contributor.copyrightName;}
if(!scope.sectionSubLinkAnchor){scope.sectionSubLinkAnchor=scope.contributor.portfolioRelativePath;}
scope.initFromFacets(scope.queryFacets);}});function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n);}
scope.$watch('baseKeywords',function(){var linkFacets,titleMatrix,collection,assetType;if(scope.queryKeywords&&scope.queryKeywords!==''){var processedKeywordsStr='',processedKeywordsNoDelim='',processedKeywords=[];if(isNumeric(scope.queryKeywords)){for(var x=0;x<(+scope.queryKeywords);x++){processedKeywords.push(scope.baseKeywords[x]);}
processedKeywordsStr='"'+processedKeywords.join('","')+'"';processedKeywordsNoDelim=processedKeywords.join('');}else{processedKeywordsStr=scope.queryKeywords;processedKeywordsNoDelim=scope.queryKeywords;processedKeywords.push(scope.queryKeywords);}
if((scope.carouselType==='KEYWORDS'||scope.carouselType==='XSELL')&&processedKeywordsNoDelim!==''){scope.keywordResults=-1;scope.queryFacets={};scope.queryFacets.text=processedKeywords;if(scope.$parent.adp.asset.assetType){switch(scope.$parent.adp.asset.assetType.toUpperCase()){case'PHOTO':if(scope.sectionTitlePhoto!==''){scope.sectionTitle=scope.sectionTitlePhoto;}
scope.queryFacets.abstractType=['photos'];break;case'AUDIO':if(scope.sectionTitleAudio!==''){scope.sectionTitle=scope.sectionTitleAudio;}
scope.queryFacets.abstractType=['audio'];break;case'VECTOR':case'ILLUSTRATION':if(scope.sectionTitleVector!==''){scope.sectionTitle=scope.sectionTitleVector;}
scope.queryFacets.abstractType=['illustrations'];break;case'VIDEO':if(scope.sectionTitleVideo!==''){scope.sectionTitle=scope.sectionTitleVideo;}
scope.queryFacets.abstractType=['video'];break;}}
if(scope.carouselType==='XSELL'){if(scope.fileCollection){scope.queryFacets.fileCollection=scope.fileCollection.split(' ');}else{scope.queryFacets.fileCollection=(scope.$parent.adp.asset.collection==='essentials')?['signature','signature+']:['essentials'];}
if(scope.suppressCrossSellCarousel()){return;}
titleMatrix=[];titleMatrix[0]=['CAROUSEL_XSELL_TITLE_ESSENTIALS_IMAGE','CAROUSEL_XSELL_TITLE_ESSENTIALS_AUDIO','CAROUSEL_XSELL_TITLE_ESSENTIALS_VIDEO'];titleMatrix[1]=['CAROUSEL_XSELL_TITLE_SIGNATURE_IMAGE','CAROUSEL_XSELL_TITLE_SIGNATURE_AUDIO','CAROUSEL_XSELL_TITLE_SIGNATURE_VIDEO'];collection=Number(scope.queryFacets.fileCollection[0]!=='essentials');assetType=['AUDIO','VIDEO'].indexOf(scope.$parent.adp.asset.assetType.toUpperCase())+1;$timeout(function(){scope.sectionTitle=isLocalize.getLocalizedString(titleMatrix[collection][assetType]);},1);}
if(!scope.sectionSubLinkAnchor||scope.sectionSubLinkAnchor===''){linkFacets=jQuery.extend(true,{},scope.queryFacets);if(linkFacets.perpage){delete linkFacets.perpage;}
linkFacets.f=true;scope.sectionSubLinkAnchor='/search/?facets='+JSON.stringify(linkFacets);}
scope.initFromFacets(scope.queryFacets);}}});scope.$watch('carouselType',function(){if(scope.carouselType==='QUERY'&&scope.queryFacets){if(scope.searchResultsCount){scope.queryFacets.perPage=scope.searchResultsCount;}
scope.initFromFacets(scope.queryFacets);scope.sectionSubLinkAnchor='/search/?facets='+JSON.stringify(scope.queryFacets);}
if(scope.carouselType==='ASSETLIST'&&scope.assetList){scope.queryFacets={};scope.queryFacets.fileIdSet=scope.assetList;scope.queryFacets.text=[];if(scope.searchResultsCount){scope.queryFacets.perPage=scope.searchResultsCount;}
scope.initFromFacets(scope.queryFacets);}});scope.$watch('data',function(){if(scope.data&&(scope.data['34']||scope.data['50'])){scope.initFromFacets(scope.data);}else{scope.localdata=scope.data;if((scope.carouselType==='SIMILARFILES')&&scope.localdata&&scope.localdata.contributorLink&&scope.localdata.totalResults>0){omnitureService.adpCarouselsLoad({carouselType:scope.carouselType});scope.sectionSubLinkAnchor=scope.localdata.contributorLink;scope.onResizeFunction();}
if(scope.localdata&&scope.localdata.assetPreviews&&scope.localdata.assetPreviews.length>0){scope.onResizeFunction();currentPage=1;scope.updateRow();scope.updateButtons();angular.element($window).bind('resize',function(){scope.onResizeFunction();scope.$apply();});}
if(scope.callback){scope.onResizeFunction();if(scope.carouselType!==''){scope.callback({result:scope.carouselType});}}}});scope.$watch('itemWidth',function(){if(scope.itemWidth>0){$timeout(function(){scope.onResizeFunction();},50);}});scope.getNewRow=function(nextOrPrev){if(nextOrPrev==='next'){currentPage+=1;}else if(nextOrPrev==='prev'){currentPage-=1;}
scope.checkValidPage();scope.updateRow();scope.updateButtons();};scope.showNewFile=function(assetUrl,event){event.preventDefault();omnitureService.similarFileClick({carouselType:scope.carouselType});if(event.ctrlKey===true||event.metaKey===true){$window.open(assetUrl,'_blank');}else{$window.location.href=assetUrl;}};scope.onResizeFunction=function(){var contentWidth,itemWidth,numToDisplay;itemWidth=element.find('.carousel-items').first().outerWidth(true);scope.itemWidth=itemWidth;if(itemWidth){scope.windowHeight=$window.innerHeight;scope.windowWidth=$window.innerWidth;contentWidth=element.find('.carousel-content').first().width();numToDisplay=Math.max(Math.floor(contentWidth/itemWidth),1);if(scope.localdata){scope.localdata.filesInARow=numToDisplay;}
scope.checkValidPage();scope.updateRow();scope.updateButtons();}};scope.onResizeFunction();}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpDrag',function($document,$window){return{restrict:'EA',scope:{iszoomed:'=state'},link:function(scope,element){var startX=0,startY=0,x=0,y=0,minX=0,minY=0,maxX=0,maxY=0,width=0,height=0,winElement=angular.element($window),imageLoaded=false;winElement.bind('resize',function(){if(scope.iszoomed){initialize();}});element.bind('load',function(){imageLoaded=true;if(scope.iszoomed){initialize();}});scope.$watch('iszoomed',function(){if(scope.iszoomed){initialize();}},true);function initialize(){if(!imageLoaded){return;}
element.show();width=element[0].getBoundingClientRect().width;height=element[0].getBoundingClientRect().height;minX=winElement.width()-width;minY=winElement.height()-height;centerElement();}
function centerHorizontally(){return Math.round((winElement.width()-width)/2);}
function centerVertically(){return Math.round((winElement.height()-height)/2);}
function centerElement(){y=centerVertically();x=centerHorizontally();element.css({top:y+'px',left:x+'px'});}
element.on('mousedown touchstart',function(evt){evt.preventDefault();if(evt.targetTouches){evt=evt.targetTouches[0];element.on('touchmove',touchmove);element.on('touchend',dragFinished);}
startX=evt.pageX-x;startY=evt.pageY-y;$document.on('mousemove',dragInProgress);$document.on('mouseup',dragFinished);});function touchmove(evt){evt.preventDefault();var touches=evt.targetTouches;if(touches){evt.stopPropagation();dragInProgress(touches[0]);}}
function dragInProgress(evt){var widthSmaller=(width<=winElement.width()),heightSmaller=(height<=winElement.height());if(widthSmaller&&heightSmaller){centerElement();return;}
if(heightSmaller){y=centerVertically();}else if(evt.pageY-startY<=minY){y=minY;}else if(evt.pageY-startY>=maxY){y=maxY;}else{y=evt.pageY-startY;}
if(widthSmaller){x=centerHorizontally();}else if(evt.pageX-startX<=minX){x=minX;}else if(evt.pageX-startX>=maxX){x=maxX;}else{x=evt.pageX-startX;}
element.css({top:y+'px',left:x+'px'});}
function dragFinished(){$document.unbind('mousemove',dragInProgress);$document.unbind('mouseup',dragFinished);element.unbind('touchmove',touchmove);element.unbind('touchend',dragFinished);}}};});}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpDescription',[function(){return{restrict:'E',templateUrl:'/static/js/angular/apps/adp/partials/_description.html',scope:{asset:'=asset'},link:function(scope){var descriptionElement=angular.element('.adp-description-field');scope.$watch('asset',function(){descriptionElement.html(scope.asset.description);});}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpSizeSelector',['$cookies',function($cookies){return{restrict:'E',templateUrl:'/static/js/angular/apps/adp/partials/details/_fileSizeSelector.html',link:function(scope){var setDefaultSelected,orderSizes,removeExtraSmallSizes,mapSizeName;scope.availableSizes=[];scope.selectedTile=0;scope.selectTile=function(tile){var numSizes=scope.availableSizes.length;if(!scope.availableSizes[tile]){tile=numSizes-1;}
if(scope.adp.asset.assetType==='photo'){scope.purchaseOptions.size=scope.availableSizes[tile].photoId;}else{scope.purchaseOptions.size=scope.availableSizes[tile].rasterId;}
scope.purchaseOptions.concreteType=tile;scope.selectedTile=tile;scope.mouseTile(tile);};scope.mouseTile=function(tile){var current=scope.availableSizes[tile],presentation=scope.adp.asset.presentation,ratio=presentation.measurements.conversionRatio;if(scope.adp.asset.assetType==='photo'){scope.adp.asset.assetDimensions.widthInPixels=current.widthInPixels;scope.adp.asset.assetDimensions.heightInPixels=current.heightInPixels;presentation.measurements.dotsPer=(current.dpi/ratio).toFixed(1);presentation.measurements.width=(current.widthInPixels/presentation.measurements.dotsPer).toFixed(1);presentation.measurements.height=(current.heightInPixels/presentation.measurements.dotsPer).toFixed(1);}else{scope.adp.asset.rasterList.widthInPixels=current.widthInPixels;scope.adp.asset.rasterList.heightInPixels=current.heightInPixels;presentation.measurements.dotsPer=(current.dpi/ratio).toFixed(1);presentation.measurements.width=(current.widthInPixels/presentation.measurements.dotsPer).toFixed(1);presentation.measurements.height=(current.heightInPixels/presentation.measurements.dotsPer).toFixed(1);}};setDefaultSelected=function(){var defaultSize,sizeCookie=$cookies.visitedADP2;if(sizeCookie){defaultSize=sizeCookie.split('|')[1];}
if(defaultSize){scope.selectTile(defaultSize);}else{scope.selectTile(scope.availableSizes.length-1);}};removeExtraSmallSizes=function(){var tempSizes=[],list=[],key='';if(scope.adp.asset.assetType==='photo'){key='photoId';list=scope.adp.asset.photoList;}else{key='rasterId';list=scope.adp.asset.rasterList;}
tempSizes=list.filter(function(item){return!(/x+small/i.test(item[key]));});scope.availableSizes=tempSizes;};orderSizes=function(){scope.availableSizes.sort(function(x,y){var xArea=x.widthInPixels*x.heightInPixels,yArea=y.widthInPixels*y.heightInPixels;if(xArea<yArea){return-1;}
if(xArea>yArea){return 1;}
return 0;});};mapSizeName=function(){var assetSize='M';scope.availableSizes.forEach(function(size){if(size.photoId){assetSize=size.photoId;}
if(size.rasterId){assetSize=size.rasterId;}
switch(assetSize){case'XXXSMALL':size.photoDisplay='3XS';break;case'XXSMALL':size.photoDisplay='2XS';break;case'XSMALL':size.photoDisplay='XS';break;case'SMALL':size.photoDisplay='S';break;case'MEDIUM':size.photoDisplay='M';break;case'LARGE':size.photoDisplay='L';break;case'XLARGE':size.photoDisplay='XL';break;case'XXLARGE':size.photoDisplay='2XL';break;case'XXXLARGE':size.photoDisplay='3XL';break;default:size.photoDisplay='M';break;}});};removeExtraSmallSizes();orderSizes();mapSizeName();setDefaultSelected();}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('weTransfer',['$document','$rootScope','formValidationService','formFieldsValidatorService','$timeout','adpStateService','weTransferService','$filter','omnitureService','$injectedData','$window','urlBuilder',function($document,$rootScope,formValidation,formFieldsValidatorService,$timeout,adpStateService,weTransferService,$filter,omnitureService,$injectedData,$window,urlBuilder){return{restrict:'E',require:'?ngModel',templateUrl:'/static/js/angular/apps/adp/partials/weTransfer/_index.html',transclude:true,scope:{downloadedFileSize:'=',userEmailAddress:'=',fileType:'='},link:function(scope){var emailFieldDefaultPlaceholder=$filter('i18n')('WE_TRANSFER_PLACEHOLDER_TO'),EMAIL_FIELD_MAX_LIMIT=5,EMAIL_MAX_LENGTH=255,tagsInputFieldElement='#tags-input-field',inputFilledClass='input-filled',reduceWithClass='reduce-width',weTransferButton,windowElement=angular.element($window);weTransferButton='<iframe width="100%" height="50" frameborder="0" src="//we.tl/send/'+
$injectedData.languageSupportedByWeTransfer+'"></iframe>';angular.element('.we-transfer-iframe').append(weTransferButton);scope.emailTags=[];scope.emailPlaceholder=emailFieldDefaultPlaceholder;scope.messagePlaceholder=$filter('i18n')('WE_TRANSFER_PLACEHOLDER_MESSAGE');scope.invalidEmailMessageShown=false;scope.invalidMaxLimitMessageShown=false;scope.loadingState=false;scope.showSuccessfulModal=false;scope.showWeTransferRequestError=false;scope.init=function(){$document.foundation();formValidation.setExpression({emailValidationAndFormat:scope.emailValidationAndFormat});formValidation.setDefaultMsgKey({emailValidationAndFormat:{error:'ERROR_EMAIL'}});formValidation.setExpression({emailTagsUnderMaxLimit:scope.emailTagsUnderMaxLimit});formValidation.setDefaultMsgKey({emailTagsUnderMaxLimit:{error:'EMAIL_MAX_LIMIT'}});angular.element(':input:not(textarea)').keypress(function(event){return(event.keyCode!==13);});scope.contactTicketUrl=urlBuilder.getUrlInfix()+'/contact_ticket';};scope.showWeTransferModal=function(){omnitureService.weTransferModalOpen();if(scope.showSuccessfulModal){scope.resetForm();}
scope.closeDropboxModal();angular.element('html, body').animate({scrollTop:0},1000,'easeOutQuart');angular.element('#we-transfer-modal').foundation('reveal','open');};scope.closeWeTransferModal=function(){angular.element('#we-transfer-modal').foundation('reveal','close');};scope.emailValidationAndFormat=function(emailValue){var emailInputFieldElem=angular.element(tagsInputFieldElement),emailInputFieldValue=emailInputFieldElem.val(),emailValid=true;if(!emailValue){scope.invalidEmailMessageShown=!emailValid;return emailValid;}else if(emailValue.length>EMAIL_MAX_LENGTH){emailValid=false;return emailValid;}
if(formFieldsValidatorService.emailValidation(emailValue)&&(emailInputFieldValue!=='')){emailInputFieldElem.val('');scope.addEmailTag(emailValue);$timeout(function(){emailInputFieldElem.val('');scope.checkInputWidth();},0);}else if(emailInputFieldValue!==''){emailValid=false;}
scope.invalidEmailMessageShown=!emailValid;return emailValid;};scope.checkInputWidth=function(){var emailInputFieldElem=angular.element(tagsInputFieldElement),inputValue=emailInputFieldElem.val();if(scope.emailTags.length!==0&&(!inputValue||inputValue.length===0)){emailInputFieldElem.addClass(reduceWithClass);}else{emailInputFieldElem.removeClass(reduceWithClass);}};scope.emailTagsUnderMaxLimit=function(){var response=scope.emailTags.length<=EMAIL_FIELD_MAX_LIMIT;scope.invalidMaxLimitMessageShown=!response;return response;};scope.addEmailTag=function(emailValue){if(scope.emailPlaceholder!==''){scope.emailPlaceholder='';}
scope.emailTags.push(emailValue);};scope.removeEmailTag=function(index){var emailInputFieldElem=angular.element(tagsInputFieldElement),inputEl;scope.emailTags.splice(index,1);if(scope.emailTags.length===0){inputEl=angular.element('.email-tag-list');inputEl.removeClass(inputFilledClass);emailInputFieldElem.val('');scope.emailPlaceholder=emailFieldDefaultPlaceholder;scope.checkInputWidth();}else if(scope.emailTags.length===EMAIL_FIELD_MAX_LIMIT){$timeout(function(){emailInputFieldElem.blur();},0);}};scope.setInputFocus=function(){var emailInputFieldElem=angular.element(tagsInputFieldElement);emailInputFieldElem.focus();};scope.closeDropboxModal=function(){$rootScope.$broadcast('closeDropboxModal');};scope.sendFileToWeTransfer=function(invalidForm){var gettyId=adpStateService.gettyId,params,omnitureMessage,messageInputFieldElem=angular.element('#message-field');if(invalidForm){return;}
params={'gettyMasterId':gettyId,'assetSize':scope.downloadedFileSize,'toEmails':scope.emailTags,'emailMessage':messageInputFieldElem.val()};scope.loadingState=true;weTransferService.sendToWeTransfer(params).then(function(){scope.loadingState=false;scope.trimUserEmailAddress();scope.showSuccessfulModal=true;scope.showWeTransferRequestError=false;omnitureMessage='You did it! You successfully sent your file with weTransfer.'+'Expect a confirmation email at '+
scope.userEmailAddress+' shortly.';omnitureService.weTransferRequestSent(omnitureMessage);}).catch(function(){scope.loadingState=false;scope.showWeTransferRequestError=true;omnitureMessage='Unable to complete your request at this time. '+'Please try again later or contact us if the issue continues.';omnitureService.weTransferRequestSent(omnitureMessage);});};scope.trimUserEmailAddress=function(){var trimEmail,ellipsis='...';if(windowElement.innerWidth()<800&&scope.userEmailAddress.length>32){trimEmail=scope.userEmailAddress.substring(0,29);trimEmail=trimEmail+ellipsis;scope.trimEmailAddress=trimEmail;}else if(scope.userEmailAddress.length>42){trimEmail=scope.userEmailAddress.substring(0,40);trimEmail=trimEmail+ellipsis;scope.trimEmailAddress=trimEmail;}else{scope.trimEmailAddress=scope.userEmailAddress;}};scope.resetForm=function(){var emailInputFieldElem=angular.element(tagsInputFieldElement),messageInputFieldElem=angular.element('#message-field');scope.showSuccessfulModal=false;scope.emailTags=[];scope.messageData='';scope.emailPlaceholder=emailFieldDefaultPlaceholder;emailInputFieldElem.val('');messageInputFieldElem.val('');emailInputFieldElem.parent().removeClass(inputFilledClass);messageInputFieldElem.parent().removeClass(inputFilledClass);scope.checkInputWidth();};scope.getFileTypeForTranslation=function(){if(scope.fileType==='video'||scope.fileType==='audio'){return(scope.fileType).toUpperCase();}else{return'IMAGE';}};scope.handleBackspaceKey=function(event){var emailInputFieldElem=angular.element(tagsInputFieldElement),emailInputValue=emailInputFieldElem.val().trim();if(event.keyCode===8&&emailInputValue.length===0){scope.emailTags.pop();if(scope.emailTags.length===EMAIL_FIELD_MAX_LIMIT){$timeout(function(){emailInputFieldElem.blur();emailInputFieldElem.focus();},0);}else if(scope.emailTags.length===0){scope.emailPlaceholder=emailFieldDefaultPlaceholder;emailInputFieldElem.removeClass(reduceWithClass);}}};scope.init();}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpKount',[function(){return{restrict:'E',scope:{session:'=session'},link:function(scope,element){scope.$watch('session',function(){if(scope.session.pixelUrl){element.html('<img class="ng-hide" src="'+scope.session.pixelUrl+'"></img>');}});}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpAdminPanel',['$window','urlBuilder',function($window,urlBuilder){return{restrict:'E',require:'?ngModel',templateUrl:'/static/js/angular/apps/adp/partials/amp/_adminRefinePanel.html',transclude:true,link:function(scope){var MEDIUM_DOWN_BREAKPOINT=1024;scope.init=function(){scope.$watch(function(){return angular.element($window).innerWidth();},function(windowWidth){if(windowWidth<=MEDIUM_DOWN_BREAKPOINT){scope.mobilePanel=true;}else{scope.mobilePanel=false;}},true);scope.collectionSelected=scope.adminData.availableCollections[0];scope.activateFileLabel='Deactivate';if(scope.adminData.removeAdultContentFilter===true){scope.contentFilterLabel='Remove';}else{scope.contentFilterLabel='Apply';}
if(scope.adminData.isFileDeactivated){scope.activateFileLabel='Reactivate';}};scope.manageMoveCollection=function(collectionId){var redirectUrl=[urlBuilder.getUrlInfix(),scope.adminData.fileUrl,'move-collection',collectionId].join('/');$window.location.href=redirectUrl;};scope.contentFilterAction=function(){var filter;if(scope.adminData.removeAdultContentFilter===true){filter='No';}else{filter='Yes';}
$window.location.href=urlBuilder.getUrlInfix()+'/'+scope.adminData.fileUrl+'?applyFilter='+filter;};scope.userCanViewFileDetailsSection=function(){return(scope.adminData.permissions.fileViews||scope.adminData.permissions.downloads||scope.adminData.permissions.inspectedBy);};scope.userCanViewMaintenanceTopSection=function(){return(scope.adminData.permissions.editFileInfo||scope.adminData.permissions.applyContentFilter);};scope.userCanViewMaintenanceBottomSection=function(){return(scope.adminData.permissions.downloadOriginal||scope.adminData.permissions.replaceFile||scope.adminData.permissions.reprocessFile||scope.adminData.permissions.deactivateFile);};scope.userCanViewReleasesSection=function(){return(scope.adminData.permissions.uploadModelRelease||(scope.adminData.permissions.viewModelRelease&&scope.adminData.showModelRelease)||(scope.adminData.permissions.uploadConsentRelease&&scope.adp.asset.isEditorial)||(scope.adminData.permissions.viewConsentRelease&&scope.adp.asset.isEditorial&&scope.adminData.editorialConsentDocuments));};scope.userCanViewCollectionHistory=function(){var collectionHistory=scope.adminData.permissions.collectionHistory&&(scope.adminData.currentTaxonomy||scope.adminData.previousTaxonomy||scope.adminData.modifyBy.username||scope.adminData.premiereNomination);return collectionHistory;};scope.userCanViewVideoInfoSection=function(){return scope.adminData.permissions.viewVideoInfo&&scope.adminData.videoInfo;};scope.init();}};}]);}());(function(){'use strict';var module=angular.module('adp.directives');module.directive('adpAdminModal',[function(){return{restrict:'E',require:'?ngModel',templateUrl:'/static/js/angular/apps/adp/partials/amp/_adminRefineModal.html',transclude:true,link:function(scope){scope.init=function(){scope.showAdminModal=false;};scope.toogleAdminRefinePanel=function(){scope.showAdminModal=!scope.showAdminModal;};scope.onSubmit=function(){scope.showAdminModal=false;};scope.init();}};}]);}());(function(){'use strict';angular.module('adp.services').factory('availabilityService',['$q','OptionsRestangular',function($q,OptionsRestangular){var ASSETS_ENDPOINT='assets',AVAILABILITY_ENDPOINT='availability',_getAvailability;_getAvailability=function(gettyId){var defer=$q.defer();OptionsRestangular.getJavaRestConfig().one(ASSETS_ENDPOINT,gettyId).one(AVAILABILITY_ENDPOINT).get().then(function(availability){defer.resolve(availability);}).then(function(error){defer.reject(error);});return defer.promise;};return{getAvailability:_getAvailability};}]);}());(function(){'use strict';angular.module('adp.services').factory('concreteTypeService',['$filter',function($filter){var _getTypeName;_getTypeName=function(typeId){var typeName='';switch(typeId){case'DV':typeName='DV';break;case'NTSC':typeName='NTSC';break;case'PAL':typeName='PAL';break;case'NTSC_SMALL_WEB_MOV':case'NTSC_SMALL_WEB_MP4':case'PAL_SMALL_WEB_MOV':case'PAL_SMALL_WEB_MP4':case'HD_SMALL_WEB_MOV':case'HD_SMALL_WEB_MP4':typeName=$filter('i18n')('SELECT_SMALL_WEB');break;case'NTSC_BIG_WEB_MOV':case'NTSC_BIG_WEB_MP4':case'PAL_BIG_WEB_MOV':case'PAL_BIG_WEB_MP4':case'HD_BIG_WEB_MOV':case'HD_BIG_WEB_MP4':typeName=$filter('i18n')('SELECT_BIG_WEB');break;case'HD_720':typeName=$filter('i18n')('SELECT_HD')+' 720';break;case'HD_1080':typeName=$filter('i18n')('SELECT_HD')+' 1080';break;case'NATIVE_4K_VIDEO':case'ULTRAHD_4K_VIDEO':typeName=$filter('i18n')('SELECT_NATIVE_4K');break;}
return typeName;};return{getTypeName:_getTypeName};}]);}());(function(){'use strict';angular.module('adp.services').factory('downloadService',['OptionsRestangular',function(OptionsRestangular){var ASSETS_ENDPOINT='assets',_getDownload;_getDownload=function(gettyId,params){var referer=document.referrer;return OptionsRestangular.getJavaFullResponseConfig(referer).one(ASSETS_ENDPOINT,gettyId).customPOST(params);};return{getDownload:_getDownload};}]);}());(function(){'use strict';angular.module('adp.services').factory('extendedLicenseService',['$q','OptionsRestangular',function($q,OptionsRestangular){var ASSETS_ENDPOINT='assets',LICENSES_ENDPOINT='licenses',cachedData={licenses:{}},_getLicenses;_getLicenses=function(gettyId){var defer=$q.defer();if(!(gettyId in cachedData.licenses)){OptionsRestangular.getJavaRestConfig().one(ASSETS_ENDPOINT,gettyId).one(LICENSES_ENDPOINT).get().then(function(response){cachedData.licenses[gettyId]=response;defer.resolve(cachedData.licenses[gettyId]);},function(response){defer.reject(response);});}else{defer.resolve(cachedData.licenses[gettyId]);}
return defer.promise;};return{getLicenses:_getLicenses};}]);}());(function(){'use strict';angular.module('adp.services').factory('similarFilesService',['$q','OptionsRestangular',function($q,OptionsRestangular){var ASSETS_ENDPOINT='assets',SIMILAR_FILES_ENDPOINT='similar',_getSimilarFiles;_getSimilarFiles=function(gettyId,acceptLanguage,pageNumber,itemsPerPage){var params={'Accept-Language':null,'pageNumber':pageNumber,'itemsPerPage':itemsPerPage},defer=$q.defer();OptionsRestangular.getJavaRestConfig().one(ASSETS_ENDPOINT,gettyId).one(SIMILAR_FILES_ENDPOINT).get(params).then(function(similarFiles){defer.resolve(similarFiles);},function(error){defer.reject(error);});return defer.promise;};return{getSimilarFiles:_getSimilarFiles};}]);}());(function(){'use strict';angular.module('adp.services').factory('licenseStateService',['extendedLicenseService','spinnerService','adpStateService','purchaseStateService','viewStateService','ctaTitleService','$filter','$interval','ADP_ERROR_MESSAGING',function(extendedLicenseService,spinnerService,adpStateService,purchaseStateService,viewStateService,ctaTitleService,$filter,$interval,ERROR_MESSAGING){var _purchaseOptions=purchaseStateService.purchaseOptions,_openAMP,_openLicenseTable,_closeLicenseTable,_licenseClicked,_clearLicenses,_purchaseLicenses,_updatePrice,_isLicenseSelected,_state;_state={extendedLicenses:[],selectedLicenses:[],totalExtLicensePrice:0};_openAMP=function(){window.location='//'+window.location.hostname+'/manage/file-closeup/index'+window.location.pathname+'#administration';};_openLicenseTable=function(){if(_state.extendedLicenses.length===0){spinnerService.show('adp-ext-license');_state.extendedLicenses[0]={title:$filter('i18n')('LICENSE_STANDARD'),priceInCredits:adpStateService.asset.standardPriceInCredits,licenseType:'',hasBeenPurchased:false,canBePurchased:true,readOnly:true};extendedLicenseService.getLicenses(adpStateService.gettyId).then(function(licenses){adpStateService.error.showErrorMessage=false;for(var i=0;i<licenses.length;i++){if(!licenses[i].hasBeenPurchased){licenses[i].readOnly=false;}else if(licenses[i].canBePurchased){licenses[i].readOnly=false;}else if(!licenses[i].canBePurchased){licenses[i].readOnly=true;}
licenses[i].title=$filter('i18n')('LICENSE_'+((licenses[i].title).split(' ')[0]).toUpperCase());}
_state.extendedLicenses=_state.extendedLicenses.concat(licenses);angular.element('.adp-set-max-height').each(function(){var t=angular.element(this);t.css({'max-height':t.height()});});}).catch(function(){adpStateService.error.showErrorMessage=true;adpStateService.error.errorMessage=ERROR_MESSAGING.LICENSE_ERROR;}).finally(function(){spinnerService.hide('adp-ext-license');viewStateService.activeState.showExtendedLicenses=true;});if(_purchaseOptions.availability&&_purchaseOptions.availability.reason&&_purchaseOptions.availability.reason.previousDownload){_updatePrice(0);}}else{viewStateService.activeState.showExtendedLicenses=true;}};_closeLicenseTable=function(){viewStateService.activeState.showExtendedLicenses=false;_clearLicenses();};_licenseClicked=function(license){var selected;if(license.readOnly){return;}
if(_state.selectedLicenses.indexOf(license)>=0){_updatePrice(_purchaseOptions.cost-license.priceInCredits);_state.totalExtLicensePrice-=license.priceInCredits;_state.selectedLicenses.splice(_state.selectedLicenses.indexOf(license),1);}else{_updatePrice(_purchaseOptions.cost+license.priceInCredits);_state.totalExtLicensePrice+=license.priceInCredits;_state.selectedLicenses.push(license);}
viewStateService.setActiveState(viewStateService.views.download);selected=_isLicenseSelected();ctaTitleService.decideTitleOnLicenseClick(selected,license.priceInCredits);};_clearLicenses=function(){_state.selectedLicenses=[];_updatePrice(_purchaseOptions.cost-_state.totalExtLicensePrice);_state.totalExtLicensePrice=0;ctaTitleService.resetCtaTitle();};_purchaseLicenses=function(){_state.extendedLicenses.forEach(function(license){if(_state.selectedLicenses.indexOf(license)>=0){license.readOnly=true;_updatePrice(_purchaseOptions.cost+license.priceInCredits);}});};_updatePrice=function(price){purchaseStateService.purchaseOptions.cost=price;};_isLicenseSelected=function(){return _state.selectedLicenses.length>0;};return{openAMP:_openAMP,openLicenseTable:_openLicenseTable,closeLicenseTable:_closeLicenseTable,licenseClicked:_licenseClicked,purchaseLicenses:_purchaseLicenses,clearLicenses:_clearLicenses,isLicenseSelected:_isLicenseSelected,state:_state};}]);}());(function(){'use strict';angular.module('adp.services').factory('purchaseStateService',['adpStateService',function(adpStateService){var _purchaseOptions,_purchaseStatus,_setType,_setDisabled,_setPurchaseStatus,_decideIfSubCanBeUsed,_getStateWithCredits,_getStateWithSub,_decide;_purchaseOptions={type:'',cost:adpStateService.asset.standardPriceInCredits,subDisabled:false,availability:null,size:''};_purchaseStatus={hasCredits:false,enoughCredits:false,hasSub:false,redownload:false,rightSubType:null,downloadsLeft:null,audioVideo:false,isCorporateSlave:false};_setType=function(type){if(_purchaseOptions.subDisabled&&type==='sub'){return;}
_purchaseOptions.type=type;};_setDisabled=function(disabled){_purchaseOptions.subDisabled=disabled;};_decide=function(extLicensePurchase,freeFile,viewStates,warnings){var newState;_setPurchaseStatus(extLicensePurchase);if(_purchaseStatus.redownload){newState=viewStates.redownload;}else if(freeFile){newState=viewStates.confirmDownload;}else if(_purchaseStatus.hasSub&&!extLicensePurchase){newState=_getStateWithSub(viewStates,warnings);}else{newState=_getStateWithCredits(viewStates);}
return newState;};_getStateWithCredits=function(viewStates){var newState;if(_purchaseStatus.enoughCredits){newState=viewStates.confirmDownload;}else{if(_purchaseStatus.isCorporateSlave){newState=viewStates.noSubNoCreditsCorporateSlave;}else{newState=viewStates.noSubNoCredits;}}
return newState;};_getStateWithSub=function(viewStates,warnings){var newState;if(_purchaseStatus.enoughCredits){if(_purchaseStatus.rightSubType&&_purchaseStatus.downloadsLeft){newState=viewStates.withSubWithCredits;}else if(!_purchaseStatus.rightSubType&&_purchaseStatus.downloadsLeft){newState=viewStates.wrongSubTypeWithCredits;}else if(_purchaseStatus.rightSubType&&!_purchaseStatus.downloadsLeft){newState=viewStates.noSubDLWithCredits;}else if(!_purchaseStatus.rightSubType&&!_purchaseStatus.downloadsLeft){newState=viewStates.wrongSubTypeWithCredits;}
if(_purchaseStatus.audioVideo){newState.warningBox=true;newState.warningType=warnings.WRONG_FILE_TYPE_CRED;}}else{if(_purchaseStatus.rightSubType&&_purchaseStatus.downloadsLeft){if(_purchaseStatus.hasCredits){newState=viewStates.subDLInsufficientCredits;}else{newState=viewStates.confirmDownload;}}else if(_purchaseStatus.rightSubType&&!_purchaseStatus.downloadsLeft){if(_purchaseStatus.isCorporateSlave){newState=viewStates.noSubDlInsufficientCreditsCorporateSlave;}else{newState=viewStates.noSubDLNoCredits;}}else if(!_purchaseStatus.rightSubType){if(_purchaseStatus.isCorporateSlave){newState=viewStates.wrongSubTypeNoCreditsCorporateSlave;}else{newState=viewStates.wrongSubTypeNoCredits;}}
if(_purchaseStatus.audioVideo){if(_purchaseStatus.isCorporateSlave){newState=viewStates.noSubNoCreditsCorporateSlave;}else{newState=viewStates.noSubNoCredits;}
newState.warningBox=true;newState.warningType=warnings.WRONG_FILE_TYPE_NO_CREDS;}}
return newState;};_setPurchaseStatus=function(extLicensePurchase){if(adpStateService.user===null){return;}
if(_purchaseOptions.availability!==null){_purchaseStatus.redownload=(_purchaseOptions.availability.isDownloadable&&_purchaseOptions.availability.reason.previousDownload)&&!extLicensePurchase;}
_purchaseStatus.hasCredits=adpStateService.user.numCredits!==0;_purchaseStatus.hasSub=adpStateService.user.hasSub;_purchaseStatus.audioVideo=adpStateService.asset.assetType==='audio'||adpStateService.asset.assetType==='video';_purchaseStatus.enoughCredits=(adpStateService.user.numCredits>=_purchaseOptions.cost)||(adpStateService.asset.isFreeFile&&!extLicensePurchase);if(adpStateService.user.hasSub){_purchaseStatus.rightSubType=!(adpStateService.user.sub.type==='essentials'&&adpStateService.asset.collection==='signature');_purchaseStatus.downloadsLeft=adpStateService.user.sub.downloadsRemaining>0;_decideIfSubCanBeUsed(extLicensePurchase);}
if(adpStateService.user.corporateInfo){_purchaseStatus.isCorporateSlave=!!adpStateService.user.corporateInfo.isCorporateSlave;}};_decideIfSubCanBeUsed=function(extLicensePurchase){var invalidSub,wrongAssetType;invalidSub=(!_purchaseStatus.rightSubType||!_purchaseStatus.downloadsLeft||extLicensePurchase);wrongAssetType=adpStateService.asset.assetType==='audio'||adpStateService.asset.assetType==='video';if(invalidSub||wrongAssetType){_setDisabled(true);_setType('credits');}else{_setDisabled(false);_setType('sub');}};return{purchaseOptions:_purchaseOptions,purchaseStatus:_purchaseStatus,setType:_setType,setDisabled:_setDisabled,setPurchaseStatus:_setPurchaseStatus,decide:_decide};}]);}());(function(){'use strict';angular.module('adp.services').factory('viewStateService',['$q','$filter','adpStateService','availabilityService','purchaseStateService',function($q,$filter,adpStateService,availabilityService,purchaseStateService){var _init,_viewStates,_setActiveState,_updateViewsWithStateInfo,_setSubWithCreditsStateInfo,_setRedownloadStateInfo,_getAssetTypeConfig,_isDownloadState,_assetTypeConfig={},_activeState={},_warningStates={},_assetTypeConfigs={};_assetTypeConfigs={photo:{freeLabel:$filter('i18n')('FREE_PHOTO'),includedInSub:true,showDropDown:false},vector:{freeLabel:$filter('i18n')('FREE_VECTOR'),includedInSub:true,showDropDown:false},raster:{freeLabel:$filter('i18n')('FREE_PHOTO'),includedInSub:true,showDropDown:false},audio:{freeLabel:$filter('i18n')('FREE_AUDIO'),includedInSub:false,showDropDown:true},video:{freeLabel:$filter('i18n')('FREE_VIDEO'),includedInSub:false,showDropDown:true}};_warningStates={NO_SUB_NO_CRED:'no-sub-no-credits',NO_SUB_INSUFFICIENT_CRED:'no-downloads-insufficient-credits',NO_DL_W_CRED:'no-downloads-with-credits',WRONG_SUB_NO_CRED:'wrong-sub-no-credits',WRONG_SUB_W_CRED:'wrong-sub-with-credits',WRONG_FILE_TYPE_CRED:'wrong-file-type-credits',WRONG_FILE_TYPE_NO_CREDS:'wrong-file-type-no-credits-file-cost'};_viewStates={download:{title:'',ctaTitle:'',ctaAction:'purchaseFile',ctaClass:'super-cta',showSubTypeMessage:false,showFileTypeDropdown:true,confirmSection:false,completeSection:false,redownloadSection:false,focusView:false,warningBox:false,paymentSelect:false},confirmDownload:{ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaClass:'primary-cta',ctaAction:'confirmPurchase',confirmSection:true,showSubTypeMessage:false,showFileTypeDropdown:false},completeDownload:{stateName:'CompleteState',title:'DOWNLOAD_COMPLETE_TITLE',ctaTitle:'',ctaClass:'adp-purchase-complete-btn',confirmSection:false,paymentSelect:false,completeSection:true,warningBox:false,showSubTypeMessage:false,showFileTypeDropdown:false,redownloadSection:false,showDropboxSyncFeedback:false,showWeTransferCTA:false},completeDownloadFocus:{title:'DOWNLOAD_COMPLETE_TITLE',stateName:'CompleteState',ctaTitle:'',ctaClass:'adp-purchase-complete-btn',confirmSection:false,completeSection:true,showFileTypeDropdown:false,paymentSelect:false,focusView:true,warningBox:false,redownloadSection:false},redownload:{title:'REDOWNLOAD_TITLE',ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaClass:'primary-cta',ctaAction:'confirmPurchase',focusView:true,confirmSection:false,redownloadSection:true,showExtendedLicenses:false,showSubTypeMessage:false,showFileTypeDropdown:false},noSubNoCredits:{title:'NEED_CREDITS_TITLE',ctaTitle:$filter('i18n')('BUY_CREDITS_BUTTON'),ctaAction:'goToPricing',ctaClass:'primary-cta',showExtendedLicenses:false,focusView:true,showSubTypeMessage:false,showFileTypeDropdown:false,warningBox:true,warningType:_warningStates.NO_SUB_NO_CRED},noSubNoCreditsCorporateSlave:{title:'NEED_CREDITS_TITLE',ctaClass:'hide',showExtendedLicenses:false,focusView:true,showSubTypeMessage:false,showFileTypeDropdown:false,warningBox:true,warningType:_warningStates.NO_SUB_NO_CRED,showPromptForAdmin:true},wrongSubTypeWithCredits:{title:'',ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaClass:'primary-cta',ctaAction:'confirmPurchase',focusView:true,warningBox:true,warningType:_warningStates.WRONG_SUB_W_CRED,paymentSelect:true,showFileTypeDropdown:false,confirmSection:true,showExtendedLicenses:false},noSubDLWithCredits:{title:'',ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaClass:'primary-cta',ctaAction:'confirmPurchase',focusView:true,warningBox:true,warningType:_warningStates.NO_DL_W_CRED,paymentSelect:true,showFileTypeDropdown:false,confirmSection:true,showExtendedLicenses:false},withSubWithCredits:{title:'',ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaAction:'confirmPurchase',ctaClass:'primary-cta',focusView:true,warningBox:false,paymentSelect:true,confirmSection:true,showExtendedLicenses:false,showFileTypeDropdown:false},wrongSubTypeNoCredits:{title:'NEED_CREDITS_TITLE',ctaTitle:$filter('i18n')('BUY_CREDITS_BUTTON'),ctaAction:'goToPricing',ctaClass:'primary-cta',showExtendedLicenses:false,warningBox:true,warningType:_warningStates.WRONG_SUB_NO_CRED,focusView:true,confirmSection:false,showFileTypeDropdown:false},wrongSubTypeNoCreditsCorporateSlave:{title:'NEED_CREDITS_TITLE',ctaClass:'hide',showExtendedLicenses:false,warningBox:true,warningType:_warningStates.WRONG_SUB_NO_CRED,focusView:true,confirmSection:false,showFileTypeDropdown:false,showPromptForAdmin:true},noSubDLNoCredits:{title:'OUT_OF_DOWNLOADS_TITLE',ctaTitle:$filter('i18n')('BUY_CREDITS_BUTTON'),ctaAction:'goToPricing',ctaClass:'primary-cta',showExtendedLicenses:false,warningBox:true,warningType:_warningStates.NO_SUB_INSUFFICIENT_CRED,focusView:true,confirmSection:false,showFileTypeDropdown:false},noSubDlInsufficientCreditsCorporateSlave:{title:'OUT_OF_DOWNLOADS_TITLE',ctaClass:'hide',showExtendedLicenses:false,warningBox:true,warningType:_warningStates.NO_SUB_INSUFFICIENT_CRED,focusView:true,confirmSection:false,showFileTypeDropdown:false,showPromptForAdmin:true},subDLInsufficientCredits:{ctaTitle:$filter('i18n')('CONFIRM_DOWNLOAD_BUTTON'),ctaClass:'primary-cta',ctaAction:'confirmPurchase',confirmSection:true,showSubTypeMessage:false,showFileTypeDropdown:false,paymentSelect:true}};_init=function(asset,user,gettyId){_updateViewsWithStateInfo(asset,user);_setSubWithCreditsStateInfo(asset);_setRedownloadStateInfo(gettyId);};_updateViewsWithStateInfo=function(asset,user){var rightSub=false,preferEssential=adpStateService.paymentPreference==='s',preferSignature=adpStateService.paymentPreference==='p';if(user){if(user.hasSub){rightSub=!(user.sub.type==='essentials'&&asset.collection==='signature');user.rightSub=rightSub;}}else{rightSub=(asset.collection==='signature'&&preferSignature)||(asset.collection==='essentials'&&(preferEssential||preferSignature));}
_assetTypeConfig=_assetTypeConfigs[adpStateService.asset.assetType];_viewStates.download.showSubTypeMessage=rightSub&&_assetTypeConfig.includedInSub;_viewStates.confirmDownload.showSubTypeMessage=rightSub&&_assetTypeConfig.includedInSub;adpStateService.correctSubscription=rightSub;purchaseStateService.purchaseOptions.cost=asset.standardPriceInCredits;_viewStates.download.title=asset.presentation.collection.toUpperCase()+'_COLLECTION';_viewStates.confirmDownload.title=asset.presentation.collection.toUpperCase()+'_DOWNLOAD_TITLE';_viewStates.download.showFileTypeDropdown=_assetTypeConfig.showDropDown;};_setRedownloadStateInfo=function(gettyId){var defer=$q.defer();availabilityService.getAvailability(gettyId).then(function(availability){purchaseStateService.purchaseOptions.availability=availability;defer.resolve(availability);}).then(function(error){defer.resolve(error);});return defer.promise;};_setSubWithCreditsStateInfo=function(asset){var newCollection=(asset.presentation.collection+'_download_title').toUpperCase();_viewStates.wrongSubTypeWithCredits.title=newCollection;_viewStates.noSubDLWithCredits.title=newCollection;_viewStates.withSubWithCredits.title=newCollection;};_setActiveState=function(state){angular.extend(_activeState,state);angular.element('#download-button').removeClass().addClass(state.ctaClass);};_getAssetTypeConfig=function(){return _assetTypeConfig;};_isDownloadState=function(){return!(_activeState.confirmSection||_activeState.completeSection||_activeState.redownloadSection);};return{init:_init,views:_viewStates,warnings:_warningStates,getAssetTypeConfig:_getAssetTypeConfig,setActiveState:_setActiveState,activeState:_activeState,isDownloadState:_isDownloadState,setRedownloadStateInfo:_setRedownloadStateInfo};}]);}());(function(){'use strict';angular.module('adp.services').factory('keywordsService',['urlBuilder',function(urlBuilder){var BASE_NUM_KEYWORDS=18,TOP_NUM_KEYWORDS=5,self,_keywords={baseKeywords:{},extraKeywords:{}};self={getKeywords:function(keywords){var allKeywords=keywords;if(allKeywords){_keywords.baseKeywords=allKeywords.slice(0,BASE_NUM_KEYWORDS);_keywords.extraKeywords=allKeywords.slice(BASE_NUM_KEYWORDS,allKeywords.length);}
return _keywords;},getTopKeywords:function(keywords){var allKeywords=keywords,topKeywords=[];if(allKeywords){topKeywords=allKeywords.slice(0,TOP_NUM_KEYWORDS);}
return topKeywords;},getSearchUrl:function(assetType){if(!assetType){return'';}
var searchUrl={'audio':'PAGE_SRP_AUDIO','illustration':'PAGE_SRP_ILLUSTRATION','vector':'PAGE_SRP_ILLUSTRATION','raster':'PAGE_SRP_ILLUSTRATION','photo':'PAGE_SRP_PHOTO','video':'PAGE_SRP_VIDEO'};return urlBuilder.getTranslatedUrl(searchUrl[assetType.toLowerCase()]);}};return self;}]);}());(function(){'use strict';angular.module('adp.services').factory('seoUrlService',[function(){var getAssetId;getAssetId=function(seoUrl){var results=seoUrl.split(/-([\d]+)$/);if(results.length<2){return 0;}
return results[1];};return{getAssetId:getAssetId};}]);}());(function(){'use strict';angular.module('adp.services').factory('flashService',[function(){return{flashTag:function(playerPath,asset,flashVars,width,height){var tag=new FlashTag(playerPath,width,height);tag.setAlt(asset.title);tag.setTitle(asset.title);tag.setFlashvars(flashVars);return tag.toString();}};}]);}());(function($){'use strict';angular.module('adp.services').factory('adpEnsightenService',['adpStateService','$injectedData',function(adpStateService,injectedData){var self={init:function(){var asset,account={numCredits:''};if(!self.isEnsightenEnabled()){return;}
adpStateService.fetchAsset().then(function(assetInfo){asset=assetInfo;return adpStateService.fetchAccount();}).then(function(_account){account=_account;}).finally(function(){if(asset){self.setTrackingData(asset,account);self.bootstrapEnsighten();}});},setTrackingData:function(asset,account){var trackingData={};self.setDefaultValues(trackingData);self.setAccountValues(trackingData,account);self.setAssetValues(trackingData,asset);window.tracking_data=trackingData;},setDefaultValues:function(trackingData){trackingData.site_id='istock';trackingData.keyword_searched=self.getKeywords();},setAssetValues:function(trackingData,asset){trackingData.collection_type=asset.collection.charAt(0).toUpperCase()+
asset.collection.slice(1);trackingData.file_type=asset.assetType.charAt(0).toUpperCase()+
asset.assetType.slice(1);if(asset.assetType==='vector'){trackingData.page_name='iStock|Product|IllustrationFCP';}else if(trackingData.file_type){trackingData.page_name='iStock|Product|'+trackingData.file_type+'FCP';}
trackingData.product_sku=adpStateService.getAssetId();},setAccountValues:function(trackingData,account){trackingData.credits_remaining=account.numCredits;if(account.hasSub||account.numCredits>0){trackingData.customer_type='Existing';}else{trackingData.customer_type='New';}
if(account.hasSub){trackingData.sub_sku=account.sub.sku;trackingData.duration=account.sub.duration;}},bootstrapEnsighten:function(){if(injectedData.stage){$.getScript('//nexus.ensighten.com/getty/stage/Bootstrap.js');}else{$.getScript('//nexus.ensighten.com/getty/Bootstrap.js');}},isEnsightenEnabled:function(){return injectedData.ensightenEnabled;},getKeywords:function(){return injectedData.keywords;}};return self;}]);}(jQuery));(function(){'use strict';angular.module('adp.services').factory('adpStateService',['$q','$routeParams','$cookies','$filter','$sce','gettyMasterIdService','assetService','accountService','keywordsService','preferenceService','similarFilesService','categoryLinksService','$injectedData','ABSTRACT_TYPE',function($q,$routeParams,$cookies,$filter,$sce,gettyMasterIdService,assetService,accountService,keywordsService,preferenceService,similarFilesService,categoryLinksService,injectedData,ABSTRACT_TYPE){var _asset,_assetId,_gettyId,_preferences,self={adultContent:false,asset:{},kountSession:{},assetId:null,contentLoading:true,correctSubscription:false,ellipsisAltText:$filter('i18n')('ALT_TEXT_ELLIPSIS'),gettyId:null,paymentPreference:'c',keywords:{words:{},baseKeywords:{},extraKeywords:{},showExtraKeywords:false,searchUrl:'',topKeywords:{}},categories:[],hasCookie:false,alreadyVisited:false,metadataPartialName:null,similarFilesCMS:false,similarFiles:{assetPreviews:[],threshold:1,filesInARow:6,totalResults:0,sectionTitle:$filter('i18n')('SIMILAR_FILES_TITLE_PHOTO'),contributorLink:'',source:''},error:{showErrorMessage:false,errorMessage:''},user:null,init:function(){var defer=$q.defer();self.contentLoading=true;self.getAssetId();self.readCookie();if(injectedData.adultContent){self.adultContent=true;}
if(injectedData.showSimilarFilesCMS){self.similarFilesCMS=true;}
self.fetchAccount().finally(function(){self.fetchAsset().then(function(){self.contentLoading=false;defer.resolve();}).catch(function(response){self.contentLoading=false;defer.reject(response);});});return defer.promise;},initSimilarFiles:function(){var similarFilesObject={},defer=$q.defer();similarFilesService.getSimilarFiles(self.gettyId,undefined,1,self.similarFiles.filesInARow).then(function(similarFilesResults){similarFilesObject={assetPreviews:similarFilesResults.assetPreviews,threshold:self.similarFiles.threshold,filesInARow:self.similarFiles.filesInARow,totalResults:similarFilesResults.totalResults,sectionTitle:$filter('i18n')('SIMILAR_FILES_TITLE_'+self.asset.assetType.toUpperCase()),contributorLink:'/search/?facets={"57":"'+self.asset.referenceNumber+'","34":["'+ABSTRACT_TYPE[self.asset.assetType]+'"]}',source:similarFilesResults.source};if(injectedData.useCanonicalUrls&&similarFilesObject.assetPreviews!==undefined&&similarFilesObject.assetPreviews.length>0){similarFilesObject.assetPreviews.forEach(function(asset){if(asset.canonicalThumbnailsUrl!==undefined&&asset.canonicalThumbnailsUrl.mediumUrl!==undefined){asset.thumbnailsUrl.mediumUrl=asset.canonicalThumbnailsUrl.mediumUrl;}});}
self.similarFiles=similarFilesObject;if(similarFilesObject.totalResults>similarFilesObject.assetPreviews.length){similarFilesService.getSimilarFiles(self.gettyId,undefined,1,similarFilesObject.totalResults).then(function(secondResults){similarFilesObject.assetPreviews=secondResults.assetPreviews;self.similarFiles=similarFilesObject;defer.resolve(self.similarFiles);}).catch(defer.reject);}else{defer.resolve(self.similarFiles);}}).catch(defer.reject);return defer.promise;},getAssetId:function(){if(!_assetId){_assetId=injectedData.assetId;self.assetId=_assetId;}
return _assetId;},fetchGettyId:function(){var defer=$q.defer();if(!_gettyId){gettyMasterIdService.getMasterId(self.getAssetId()).then(function(gettyObject){self.gettyId=gettyObject.gettyMasterId;_gettyId=gettyObject.gettyMasterId;defer.resolve(gettyObject.gettyMasterId);}).catch(function(response){defer.reject(response);});}else{defer.resolve(_gettyId);}
return defer.promise;},fetchAsset:function(){var defer=$q.defer();if(!_asset){self.fetchGettyId().then(function(gettyId){self.gettyId=gettyId;return assetService.getAsset(gettyId,self.alreadyVisited,self.user);}).then(function(asset){self.asset=_asset=asset;self.massageAssetData(asset);self.initKeywords(asset,self.keywords);self.initThumbnails(asset);self.metadataMapping(asset);defer.resolve(_asset);}).catch(function(response){defer.reject(response);});}else{defer.resolve(_asset);}
return defer.promise;},fetchAccount:function(){var defer=$q.defer();if(injectedData.token){accountService.getAccount().then(function(account){self.user=account;self.massageUserData(account);self.getPreferences().then(function(){defer.resolve(account);});}).catch(function(response){defer.reject(response);});}else{defer.reject();}
return defer.promise;},getPreferences:function(){var defer=$q.defer();if(!_preferences){preferenceService.getPreferences().then(function(prefs){_preferences=prefs;defer.resolve(prefs);}).catch(defer.resolve);}else{defer.resolve(_preferences);}
return defer.promise;},initKeywords:function(asset,keywords){var words=keywordsService.getKeywords(asset.keywords);keywords.topKeywords=keywordsService.getTopKeywords(asset.keywords);keywords.baseKeywords=words.baseKeywords;keywords.extraKeywords=words.extraKeywords;keywords.searchUrl=keywordsService.getSearchUrl(asset.assetType);},initCategories:function(){self.categories=categoryLinksService.getCategoryLinks(self.asset.assetType);},initThumbnails:function(asset){asset.fullThumbnailSet=asset.thumbnails;if(injectedData.useCanonicalUrls&&asset.canonicalThumbnails){for(var url in asset.canonicalThumbnails){if(asset.canonicalThumbnails.hasOwnProperty(url)){asset.fullThumbnailSet[url]=asset.canonicalThumbnails[url];}}}},metadataMapping:function(asset){self.metadataPartialName=asset.assetType.toLowerCase();},massageAssetData:function(asset){var presentation={collection:'',type:'',title:''},titleMapping='TITLE_'+asset.assetType.toUpperCase(),conversionRatio,dimensions,useCanonicalVideo;if(asset.collection){presentation.collection=self.firstToUpper(asset.collection);}
if(asset.bestMatchCollection){presentation.bestMatchCollection=self.firstToUpper(asset.bestMatchCollection);if(presentation.bestMatchCollection==='Value'){presentation.bestMatchCollection='Value Bin';}}
if(asset.assetType){presentation.type=self.firstToUpper(asset.assetType);}
if(asset.title){presentation.title=$filter('i18n')(titleMapping,asset.title);presentation.altText=$filter('i18n')('ALT_TEXT_'+(asset.assetType).toUpperCase(),asset.title);}
if(asset.editorialCaption){presentation.editorialCaption=$sce.trustAsHtml(asset.editorialCaption);}
if(asset.assetType==='raster'&&asset.rasterList[0]){dimensions=asset.rasterList[0];}else{dimensions=asset.assetDimensions;}
if(dimensions&&dimensions.widthInPixels&&dimensions.heightInPixels&&dimensions.dpi){presentation.measurements={};if(_preferences&&_preferences.useMetric){conversionRatio=2.54;presentation.measurements.dotsPerUnit='px/cm';presentation.measurements.sizeUnit='cm';}else{conversionRatio=1.0;presentation.measurements.dotsPerUnit='dpi';presentation.measurements.sizeUnit='"';}
presentation.measurements.conversionRatio=conversionRatio;presentation.measurements.dotsPer=(dimensions.dpi/conversionRatio).toFixed(1);presentation.measurements.width=(dimensions.widthInPixels/presentation.measurements.dotsPer).toFixed(1);presentation.measurements.height=(dimensions.heightInPixels/presentation.measurements.dotsPer).toFixed(1);}
useCanonicalVideo=injectedData.useCanonicalUrls&&asset.canonicalThumbnails!==undefined&&asset.canonicalThumbnails.largeVideoUrl!==undefined;if(asset.assetType==='video'&&((asset.thumbnails!==undefined&&asset.thumbnails.largeVideoUrl!==undefined)||useCanonicalVideo)){presentation.videoMetadata={previewUrl:useCanonicalVideo?asset.canonicalThumbnails.largeVideoUrl:asset.thumbnails.largeVideoUrl};}
if(asset.assetType==='audio'){presentation.audioMetadata={fileId:self.getAssetId(),previewUrl:['/audio_mp3_preview.php?id=',self.getAssetId()].join('')};}
asset.presentation=presentation;},massageUserData:function(user){if(user.hasSub){user.presentation={};user.presentation.sub=self.firstToUpper(user.sub.type);}},toggleExtraKeywords:function(){self.keywords.showExtraKeywords=!self.keywords.showExtraKeywords;},showAdultContent:function(){self.adultContent=false;},readCookie:function(){var paymentCookieName='d_c',userCookieName='u_c',visitedCookieName='visitedADP2',paymentCookie=$cookies[paymentCookieName],userCookie=$cookies[userCookieName],alreadyVisited=$cookies[visitedCookieName],d=new Date(),expires='',days;if(paymentCookie&&paymentCookie.indexOf('_ch')!==-1){self.paymentPreference=paymentCookie.substr(paymentCookie.indexOf('_ch')+4,1);}
if(userCookie){self.hasCookie=true;}
if(alreadyVisited){self.alreadyVisited=true;}else{days=30;d.setTime(d.getTime()+(days*24*60*60*1000));expires=d.toUTCString();document.cookie=visitedCookieName+'='+true+';expires='+
expires+';domain=.istockphoto.com;path=/';}},firstToUpper:function(lowerString){return lowerString.charAt(0).toUpperCase()+lowerString.slice(1);}};return self;}]);}());(function(){'use strict';angular.module('adp.services').factory('metadataService',['$q','$location','$filter',function($q,$location,$filter){var _setGenericMetaData,_setTwitterMetaData,_setOGPMetaData;_setGenericMetaData=function(asset){var titleType,descriptionType,pageTitleType,translate=$filter('i18n'),translatedTitle,translatedDescription,translatedPageTitle;if(!asset.isEditorial){switch(asset.assetType){case'photo':titleType='META_TITLE_PHOTO';descriptionType='META_DESCRIPTION_PHOTO';pageTitleType='PAGE_TITLE_TYPE_PHOTO';break;case'illustration':titleType='META_TITLE_VECTOR';descriptionType='META_DESCRIPTION_VECTOR';pageTitleType='PAGE_TITLE_TYPE_ILLUSTRATION';break;case'vector':titleType='META_TITLE_VECTOR';descriptionType='META_DESCRIPTION_VECTOR';pageTitleType='PAGE_TITLE_TYPE_VECTOR';break;case'raster':titleType='META_TITLE_RASTER';descriptionType='META_DESCRIPTION_RASTER';pageTitleType='PAGE_TITLE_TYPE_ILLUSTRATION';break;case'audio':titleType='META_TITLE_AUDIO';descriptionType='META_DESCRIPTION_AUDIO';pageTitleType='PAGE_TITLE_TYPE_AUDIO';break;case'video':titleType='META_TITLE_VIDEO';descriptionType='META_DESCRIPTION_VIDEO';pageTitleType='PAGE_TITLE_TYPE_VIDEO';break;}}else{titleType='META_TITLE_EDITORIAL';descriptionType='META_DESCRIPTION_EDITORIAL';pageTitleType='PAGE_TITLE_TYPE_OTHER';}
if(asset.title){translatedTitle=translate(titleType,asset.title);translatedPageTitle=translatedTitle+' '+
translate(pageTitleType)+' '+asset.referenceNumber+' - iStock';translatedDescription=translate(descriptionType,asset.title);}
if(angular.element('title').length===0){angular.element('head').append('<title/>');}
angular.element('title').text(translatedPageTitle);if(angular.element('meta[name=title]').length===0){angular.element('head').append('<meta name="title" content="" />');}
angular.element('meta[name=title]').attr('content',translatedTitle);if(angular.element('meta[name=description]').length===0){angular.element('head').append('<meta name="description" content="" />');}
angular.element('meta[name=description]').attr('content',translatedDescription);};_setTwitterMetaData=function(asset){var jsHead=angular.element('head');jsHead.append('<meta property="twitter:site" content="@istock" />');jsHead.append('<meta property="twitter:domain" content="istockphoto.com" />');jsHead.append('<meta property="twitter:title" content="'+asset.title+'" />');if(asset.assetType==='photo'){jsHead.append('<meta property="twitter:card" content="photo" />');jsHead.append('<meta property="twitter:image" content="'+
asset.fullThumbnailSet.previewUrl+'" />');}
if(asset.assetType==='vector'||asset.assetType==='raster'){jsHead.append('<meta property="twitter:card" content="illustration" />');jsHead.append('<meta property="twitter:image" content="'+
asset.fullThumbnailSet.previewUrl+'" />');}
if(asset.assetType==='photo'||asset.assetType==='vector'){jsHead.append('<meta property="twitter:width" content="'+
asset.assetDimensions.widthInPixels+'" />');jsHead.append('<meta property="twitter:height" content="'+
asset.assetDimensions.heightInPixels+'" />');}
if(asset.assetType==='video'){jsHead.append('<meta property="twitter:player" content="'+
asset.fullThumbnailSet.previewUrl+'" />');jsHead.append('<meta property="twitter:card" content="player" />');jsHead.append('<meta name="twitter:player:width" content="320"> />');jsHead.append('<meta name="twitter:player:height" content="240"> />');jsHead.append('<meta name="twitter:player:stream" content="'+
asset.fullThumbnailSet.previewUrl+'"/>');}
if(asset.assetType==='audio'){jsHead.append('<meta property="twitter:player" content="'+
$location.absUrl()+'" />');jsHead.append('<meta property="twitter:card" content="player" />');jsHead.append('<meta name="twitter:player:width" content="320"> />');jsHead.append('<meta name="twitter:player:height" content="240"> />');jsHead.append('<meta name="twitter:player:stream" content="'+
$location.absUrl()+'"  />');}};_setOGPMetaData=function(asset){var jsHead=angular.element('head');jsHead.append('<meta property="og:url" content="'+$location.url()+'" />');jsHead.append('<meta property="og:site_name" content="iStockphoto" />');jsHead.append('<meta property="og:title" content="'+asset.title+'" />');switch(asset.assetType){case'photo':case'illustration':jsHead.append('<meta name="og:image" content="'+
asset.fullThumbnailSet.previewUrl+'" />');jsHead.append('<meta name="og:width" content="'+
asset.assetDimensions.widthInPixels+'" />');jsHead.append('<meta name="og:height" content="'+
asset.assetDimensions.heightInPixels+'" />');jsHead.append('<meta property="og:image:type" content="image/jpeg" />');break;case'raster':jsHead.append('<meta name="og:image" content="'+
asset.fullThumbnailSet.previewUrl+'" />');jsHead.append('<meta property="og:image:type" content="image/jpeg" />');break;case'audio':jsHead.append('<meta property="og:image" content="'+
asset.fullThumbnailSet.previewUrl+'" />');jsHead.append('<meta property="og:audio" content="'+
$location.absUrl()+'" />');break;case'video':jsHead.append('<meta property="og:video" content="'+
asset.fullThumbnailSet.previewUrl+'" />');jsHead.append('<meta property="og:url" content="'+
$location.absUrl()+'" />');break;}};return{setGenericMetaData:_setGenericMetaData,setTwitterMetaData:_setTwitterMetaData,setOGPMetaData:_setOGPMetaData};}]);}());(function(){'use strict';angular.module('adp.services').factory('ctaTitleService',['$filter','$interval','adpStateService','purchaseStateService','viewStateService','$injectedData',function($filter,$interval,adpStateService,purchaseStateService,viewStateService,injectedData){var _init,_resetCtaTitle,_updateActiveCtaTitle,_animateCtaTitle,_decideTitleOnLicenseClick,_decideSubValidity,_ctaTitles;_ctaTitles={defaultTitle:'',defaultCTA:'',freeTitle:null,subDownloadTitle:null,creditDownloadTitle:null};_init=function(){var asset=adpStateService.asset,user=adpStateService.user,cost=purchaseStateService.purchaseOptions.cost,canUseSub;canUseSub=_decideSubValidity(asset,user);if(asset.isFreeFile){_ctaTitles.defaultTitle=$filter('i18n')('FREE_DOWNLOAD_CTA_TITLE');_ctaTitles.freeTitle=_ctaTitles.defaultTitle;_ctaTitles.defaultCTA=_ctaTitles.defaultTitle;}else if(canUseSub){_ctaTitles.defaultTitle='';_ctaTitles.subDownloadTitle=_ctaTitles.defaultTitle;_ctaTitles.defaultCTA=$filter('i18n')((asset.assetType+'_CTA_TITLE').toUpperCase());}else{if(cost>1){_ctaTitles.defaultTitle=$filter('i18n')('CREDIT_DOWNLOAD_TITLE',cost);}else{_ctaTitles.defaultTitle=$filter('i18n')('ONE_CREDIT_DOWNLOAD_TITLE');}
_ctaTitles.creditDownloadTitle=_ctaTitles.defaultTitle;_ctaTitles.defaultCTA=$filter('i18n')((asset.assetType+'_CTA_TITLE').toUpperCase());}
if(injectedData.adminData&&injectedData.adminData.permissions&&injectedData.adminData.permissions.freeAdminDownloadACL){_ctaTitles.defaultTitle='Free Admin Download';_ctaTitles.freeTitle=_ctaTitles.defaultTitle;_ctaTitles.defaultCTA=_ctaTitles.defaultTitle;}
viewStateService.activeState.creditsTitle=_ctaTitles.defaultTitle;viewStateService.views.download.ctaTitle=_ctaTitles.defaultCTA;};_resetCtaTitle=function(){viewStateService.activeState.creditsTitle=_ctaTitles.defaultTitle;};_updateActiveCtaTitle=function(newTitle){viewStateService.activeState.creditsTitle=newTitle;};_decideTitleOnLicenseClick=function(licenseSelected,licensePrice){var assetCost=adpStateService.asset.standardPriceInCredits,currentCost=purchaseStateService.purchaseOptions.cost,firstSelected=(assetCost+licensePrice===currentCost),nonCreditDl=_ctaTitles.subDownloadTitle!==null||_ctaTitles.freeTitle!==null;if(!licenseSelected){if(nonCreditDl){_resetCtaTitle();}else{_animateCtaTitle(currentCost,assetCost);}}else{if(firstSelected){_animateCtaTitle(assetCost,currentCost);}else{_animateCtaTitle(licensePrice+assetCost,currentCost);}}};_animateCtaTitle=function(currentPrice,finalPrice){var start,intervalId;if(!currentPrice){currentPrice=0;}
start=currentPrice;intervalId=$interval(function(){if(currentPrice>finalPrice){currentPrice--;}else{currentPrice++;}
if(currentPrice>1){_updateActiveCtaTitle($filter('i18n')('CREDIT_DOWNLOAD_TITLE',currentPrice));}else{_updateActiveCtaTitle($filter('i18n')('ONE_CREDIT_DOWNLOAD_TITLE'));}
if(currentPrice===finalPrice){$interval.cancel(intervalId);}},10);};_decideSubValidity=function(asset,user){var goodSub=false,goodAssetType=false;if(user){goodSub=user.rightSub&&user.sub.downloadsRemaining>0;}
if(asset){goodAssetType=asset.assetType!=='audio'&&asset.assetType!=='video';}
return goodSub&&goodAssetType;};return{init:_init,updateActiveCtaTitle:_updateActiveCtaTitle,resetCtaTitle:_resetCtaTitle,animateCtaTitle:_animateCtaTitle,decideTitleOnLicenseClick:_decideTitleOnLicenseClick,ctaTitles:_ctaTitles,decideSubValidity:_decideSubValidity};}]);}());(function(){'use strict';angular.module('adp.services').factory('categoryLinksService',['urlBuilder',function(urlBuilder){var self,_categories={photoCategories:[{name:'Abstract',link:'/photos/abstract'},{name:'Animals',link:'/photos/animal'},{name:'Architecture',link:'/photos/architecture'},{name:'Babies',link:'/photos/baby'},{name:'Backgrounds',link:'/photos/background'},{name:'Beauty',link:'/photos/beauty'},{name:'Business',link:'/photos/business'},{name:'Celebration',link:'/photos/celebration'},{name:'Children',link:'/photos/children'},{name:'Dogs',link:'/photos/dog'},{name:'Family pictures',link:'/photos/family+pictures'},{name:'Fashion',link:'/photos/fashion'},{name:'Fitness',link:'/photos/fitness'},{name:'Flowers',link:'/photos/flower'},{name:'Food',link:'/photos/food'},{name:'Holidays',link:'/photos/holiday'},{name:'Human anatomy',link:'/photos/anatomy'},{name:'Landscapes',link:'/photos/landscape'},{name:'Lifestyle',link:'/photos/lifestyle'},{name:'Love',link:'/photos/love'},{name:'Medical',link:'/photos/medical'},{name:'Nature',link:'/photos/nature'},{name:'People',link:'/photos/people'},{name:'Pets',link:'/photos/pet'},{name:'Romance',link:'/photos/romance'},{name:'Sports',link:'/photos/sports'},{name:'Technology',link:'/photos/technology'},{name:'Travel',link:'/photos/travel'},{name:'Vintage',link:'/photos/vintage'},{name:'Wildlife',link:'/photos/wildlife'}],illustrationCategories:[{name:'Abstract',link:'/illustrations/abstract'},{name:'Animals',link:'/illustrations/animal'},{name:'Babies',link:'/illustrations/babies'},{name:'Backgrounds',link:'/illustrations/backgrounds'},{name:'Borders',link:'/illustrations/borders'},{name:'Buildings',link:'/illustrations/buildings'},{name:'Business',link:'/illustrations/business'},{name:'Cats',link:'/illustrations/cats'},{name:'Children',link:'/illustrations/children'},{name:'Clip art',link:'/illustrations/clip-art'},{name:'Dogs',link:'/illustrations/dogs'},{name:'Emojis',link:'/illustrations/emojis'},{name:'Family',link:'/illustrations/family'},{name:'Fashion',link:'/illustrations/fashion'},{name:'Fitness',link:'/illustrations/fitness'},{name:'Flags',link:'/illustrations/flags'},{name:'Flowers',link:'/illustrations/flowers'},{name:'Food',link:'/illustrations/food'},{name:'Holidays',link:'/illustrations/holidays'},{name:'Human anatomy',link:'/illustrations/anatomy'},{name:'Icons',link:'/illustrations/icons'},{name:'Infographics',link:'/illustrations/infographics'},{name:'Medical',link:'/illustrations/medical'},{name:'Nature',link:'/illustrations/nature'},{name:'Patters',link:'/illustrations/patters'},{name:'People',link:'/illustrations/people'},{name:'Pets',link:'/illustrations/pets'},{name:'Silhouettes',link:'/illustrations/silhouettes'},{name:'Sports',link:'/illustrations/sports'},{name:'Vectors',link:'/illustrations/vectors'}],videoCatgories:[{name:'3d animation',link:'/videos/3d+animation'},{name:'Aerial',link:'/videos/aerial'},{name:'Animals',link:'/videos/animals'},{name:'Beauty',link:'/videos/beauty'},{name:'Business',link:'/videos/business'},{name:'Celebrities',link:'/videos/celebrities'},{name:'Children',link:'/videos/children'},{name:'Education',link:'/videos/education'},{name:'Entertainment',link:'/videos/entertainment'},{name:'Fashion',link:'/videos/fashion'},{name:'Finance',link:'/videos/finance'},{name:'Fitness',link:'/videos/fitness'},{name:'Food',link:'/videos/food'},{name:'Green screen',link:'/videos/green+screen'},{name:'Healthcare',link:'/videos/healthcare'},{name:'Holidays',link:'/videos/holidays'},{name:'Industrial',link:'/videos/industrial'},{name:'Medical',link:'/videos/medical'},{name:'Nature',link:'/videos/nature'},{name:'People',link:'/videos/people'},{name:'Religion',link:'/videos/religion'},{name:'Science',link:'/videos/science'},{name:'Slow motion',link:'/videos/slow+motion'},{name:'Sports',link:'/videos/sports'},{name:'Technology',link:'/videos/technology'},{name:'Time lapse',link:'/videos/time+lapse'},{name:'Travel',link:'/videos/travel'},{name:'War',link:'/videos/war'},{name:'Wildlife',link:'/videos/wildlife'},{name:'Zombies',link:'/videos/zombies'}],audioCategories:[{name:'Acoustic',link:'/music/acoustic'},{name:'Ambient',link:'/music/ambient'},{name:'Background',link:'/music/background'},{name:'Bass',link:'/music/bass'},{name:'Children\'s',link:'/music/childrens'},{name:'Cinematic',link:'/music/cinematic'},{name:'Classical',link:'/music/classical'},{name:'Country',link:'/music/country'},{name:'Dark',link:'/music/dark'},{name:'Drums',link:'/music/drums'},{name:'Electric',link:'/music/electric'},{name:'Guitar',link:'/music/guitar'},{name:'Hip hop',link:'/music/hip+hop'},{name:'House',link:'/music/house'},{name:'Jazz',link:'/music/jazz'},{name:'Latin',link:'/music/latin'},{name:'Orchestra',link:'/music/orchestra'},{name:'Peaceful',link:'/music/peaceful'},{name:'Piano',link:'/music/piano'},{name:'Pop',link:'/music/pop'},{name:'Rock',link:'/music/rock'},{name:'Rock and roll',link:'/music/rock+and+roll'},{name:'Romantic',link:'/music/romantic'},{name:'Sound effects',link:'/music/sound+effects'},{name:'Stingers',link:'/music/stingers'},{name:'Synthesizer',link:'/music/synthesizer'},{name:'Techno',link:'/music/techno'},{name:'Upbeat',link:'/music/upbeat'},{name:'Vocals',link:'/music/vocals'},{name:'World',link:'/music/world'}]},_urlInfix=urlBuilder.getUrlInfix(),key,i;if(_urlInfix){for(key in _categories){if(_categories.hasOwnProperty(key)){for(i=0;i<_categories[key].length;i++){_categories[key][i].link=_urlInfix+_categories[key][i].link;}}}}
self={getCategoryLinks:function(assetType){var categoryList=[];if(!assetType){return[];}
switch(assetType){case'photo':categoryList=_categories.photoCategories;break;case'raster':case'vector':categoryList=_categories.illustrationCategories;break;case'video':categoryList=_categories.videoCatgories;break;case'audio':categoryList=_categories.audioCategories;break;}
return categoryList;}};return self;}]);}());(function(){'use strict';angular.module('adp.services').factory('searchRequestService',['Restangular','$q',function(Restangular,$q){var lastTimestamp,service;Restangular.setBaseUrl('/api/');service={executeSearch:function(facets,options){var requestObj={},deferred=$q.defer(),endpoint='search';requestObj.facets=facets;lastTimestamp=requestObj.timestamp=Date.now();if(options!==undefined){requestObj.searchToken=options.searchToken;requestObj.isFrontEndSearch=options.isFrontEndSearch;if(options.endpoint){endpoint=options.endpoint;}}
Restangular.one(endpoint).customPOST(requestObj).then(function(response){response.isLatest=lastTimestamp===response.timestamp;deferred.resolve(response);});return deferred.promise;},headers:function(){var headers={'Content-Type':'application/json'};if(istock.urls.urlInfix){headers['Accept-Language']=istock.urls.urlInfix;}
return headers;}};return service;}]);}());(function(){'use strict';var APP=angular.module('adp.constants');APP.constant('TYPE_MAPPING',{FILE_TYPES:{PHOTO:1,ILLUSTRATION:7,VIDEO:8,AUDIO:9},COLLECTION_TYPES:{ESSENTIALS:1,SIGNATURE:4}});})();(function(){'use strict';var APP=angular.module('adp.constants');APP.constant('ADP_ERROR_MESSAGING',{DOWNLOAD_ERROR:'DOWNLOAD_ERROR',LICENSE_ERROR:'LICENSE_ERROR',LIGHTBOX_ERROR:'LIGHTBOX_ERROR',API_ERROR:'API_ERROR'});})();function Exception(name,message)
{if(name)
this.name=name;if(message)
this.message=message;}
Exception.prototype.setName=function(name)
{this.name=name;}
Exception.prototype.getName=function()
{return this.name;}
Exception.prototype.setMessage=function(msg)
{this.message=msg;}
Exception.prototype.getMessage=function()
{return this.message;}
function FlashTag(src,width,height)
{this.src=src;this.width=width;this.height=height;this.version='7,0,14,0';this.id=null;this.bgcolor='ffffff';this.flashVars=null;this.alt='';this.title='';this.wmode='opaque';}
FlashTag.prototype.setVersion=function(v)
{this.version=v;}
FlashTag.prototype.setId=function(id)
{this.id=id;}
FlashTag.prototype.setBgcolor=function(bgc)
{this.bgcolor=bgc;}
FlashTag.prototype.setFlashvars=function(fv)
{this.flashVars=fv;}
FlashTag.prototype.setAlt=function(alt)
{this.alt=alt;}
FlashTag.prototype.setTitle=function(title)
{this.title=title;}
FlashTag.prototype.setWmode=function(wmode){this.wmode=wmode;}
FlashTag.prototype.toString=function()
{var ie=(navigator.appName.indexOf("Microsoft")!=-1)?1:0;var flashTag=new String();if(ie)
{flashTag+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ';if(this.id!=null)
{flashTag+='id="'+this.id+'" ';}
flashTag+='codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version='+this.version+'" ';flashTag+='width="'+this.width+'" ';flashTag+='height="'+this.height+'" ';flashTag+='alt="'+this.alt+'" ';flashTag+='title="'+this.title+'">';flashTag+='<param name="movie" value="'+this.src+'"/>';flashTag+='<param name="quality" value="high"/>';flashTag+='<param name="bgcolor" value="#'+this.bgcolor+'"/>';flashTag+='<param name="wmode" value="'+this.wmode+'">';if(this.flashVars!=null)
{flashTag+='<param name="flashvars" value="'+this.flashVars+'"/>';}
flashTag+='</object>';}
else
{flashTag+='<embed src="'+this.src+'" ';flashTag+='quality="high" ';flashTag+='bgcolor="#'+this.bgcolor+'" ';flashTag+='width="'+this.width+'" ';flashTag+='height="'+this.height+'" ';flashTag+='wmode="'+this.wmode+'" ';flashTag+='alt="'+this.alt+'" ';flashTag+='title="'+this.title+'" ';flashTag+='type="application/x-shockwave-flash" ';if(this.flashVars!=null)
{flashTag+='flashvars="'+this.flashVars+'" ';}
if(this.id!=null)
{flashTag+='name="'+this.id+'" ';}
flashTag+='pluginspage="http://www.macromedia.com/go/getflashplayer">';flashTag+='</embed>';}
return flashTag;}
FlashTag.prototype.write=function(doc)
{doc.write(this.toString());}
function FlashSerializer(useCdata)
{this.useCdata=useCdata;}
FlashSerializer.prototype.serialize=function(args)
{var qs=new String();for(var i=0;i<args.length;++i)
{switch(typeof(args[i]))
{case'undefined':qs+='t'+(i)+'=undf';break;case'string':qs+='t'+(i)+'=str&d'+(i)+'='+escape(args[i]);break;case'number':qs+='t'+(i)+'=num&d'+(i)+'='+escape(args[i]);break;case'boolean':qs+='t'+(i)+'=bool&d'+(i)+'='+escape(args[i]);break;case'object':if(args[i]==null)
{qs+='t'+(i)+'=null';}
else if(args[i]instanceof Date)
{qs+='t'+(i)+'=date&d'+(i)+'='+escape(args[i].getTime());}
else
{try
{qs+='t'+(i)+'=xser&d'+(i)+'='+escape(this._serializeXML(args[i]));}
catch(exception)
{throw new Exception("FlashSerializationException","The following error occurred during complex object serialization: "+exception.getMessage());}}
break;default:throw new Exception("FlashSerializationException","You can only serialize strings, numbers, booleans, dates, objects, arrays, nulls, and undefined.");}
if(i!=(args.length-1))
{qs+='&';}}
return qs;}
FlashSerializer.prototype._serializeXML=function(obj)
{var doc=new Object();doc.xml='<fp>';this._serializeNode(obj,doc,null);doc.xml+='</fp>';return doc.xml;}
FlashSerializer.prototype._serializeNode=function(obj,doc,name)
{switch(typeof(obj))
{case'undefined':doc.xml+='<undf'+this._addName(name)+'/>';break;case'string':doc.xml+='<str'+this._addName(name)+'>'+this._escapeXml(obj)+'</str>';break;case'number':doc.xml+='<num'+this._addName(name)+'>'+obj+'</num>';break;case'boolean':doc.xml+='<bool'+this._addName(name)+' val="'+obj+'"/>';break;case'object':if(obj==null)
{doc.xml+='<null'+this._addName(name)+'/>';}
else if(obj instanceof Date)
{doc.xml+='<date'+this._addName(name)+'>'+obj.getTime()+'</date>';}
else if(obj instanceof Array)
{doc.xml+='<array'+this._addName(name)+'>';for(var i=0;i<obj.length;++i)
{this._serializeNode(obj[i],doc,null);}
doc.xml+='</array>';}
else
{doc.xml+='<obj'+this._addName(name)+'>';for(var n in obj)
{if(typeof(obj[n])=='function')
continue;this._serializeNode(obj[n],doc,n);}
doc.xml+='</obj>';}
break;default:throw new Exception("FlashSerializationException","You can only serialize strings, numbers, booleans, objects, dates, arrays, nulls and undefined");break;}}
FlashSerializer.prototype._addName=function(name)
{if(name!=null)
{return' name="'+name+'"';}
return'';}
FlashSerializer.prototype._escapeXml=function(str)
{if(this.useCdata)
return'<![CDATA['+str+']]>';else
return str.replace(/&/g,'&amp;').replace(/</g,'&lt;');}
function FlashProxy(uid,proxySwfName)
{this.uid=uid;this.proxySwfName=proxySwfName;this.flashSerializer=new FlashSerializer(false);}
FlashProxy.prototype.call=function()
{if(arguments.length==0)
{throw new Exception("Flash Proxy Exception","The first argument should be the function name followed by any number of additional arguments.");}
var qs='lcId='+escape(this.uid)+'&functionName='+escape(arguments[0]);if(arguments.length>1)
{var justArgs=new Array();for(var i=1;i<arguments.length;++i)
{justArgs.push(arguments[i]);}
qs+=('&'+this.flashSerializer.serialize(justArgs));}
var divName='_flash_proxy_'+this.uid;if(!document.getElementById(divName))
{var newTarget=document.createElement("div");newTarget.id=divName;document.body.appendChild(newTarget);}
var target=document.getElementById(divName);var ft=new FlashTag(this.proxySwfName,1,1);ft.setVersion('6,0,65,0');ft.setFlashvars(qs);ft.setWmode('');target.innerHTML=ft.toString();}
FlashProxy.callJS=function()
{var functionToCall=eval(arguments[0]);var argArray=new Array();for(var i=1;i<arguments.length;++i)
{argArray.push(arguments[i]);}
functionToCall.apply(functionToCall,argArray);}
//-->
</script>
<script type="text/javascript"  style="display:none">
<!--
'use strict';angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function getDecimals(n){n=n+'';var i=n.indexOf('.');return(i==-1)?0:n.length-i-1;}
function getVF(n,opt_precision){var v=opt_precision;if(undefined===v){v=Math.min(getDecimals(n),3);}
var base=Math.pow(10,v);var f=((n*base)|0)%base;return{v:v,f:f};}
$provide.value("$locale",{"DATETIME_FORMATS":{"AMPMS":["AM","PM"],"DAY":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"ERANAMES":["Before Christ","Anno Domini"],"ERAS":["BC","AD"],"FIRSTDAYOFWEEK":6,"MONTH":["January","February","March","April","May","June","July","August","September","October","November","December"],"SHORTDAY":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"SHORTMONTH":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"WEEKENDRANGE":[5,6],"fullDate":"EEEE, MMMM d, y","longDate":"MMMM d, y","medium":"MMM d, y h:mm:ss a","mediumDate":"MMM d, y","mediumTime":"h:mm:ss a","short":"M/d/yy h:mm a","shortDate":"M/d/yy","shortTime":"h:mm a"},"NUMBER_FORMATS":{"CURRENCY_SYM":"$","DECIMAL_SEP":".","GROUP_SEP":",","PATTERNS":[{"gSize":3,"lgSize":3,"maxFrac":3,"minFrac":0,"minInt":1,"negPre":"-","negSuf":"","posPre":"","posSuf":""},{"gSize":3,"lgSize":3,"maxFrac":2,"minFrac":2,"minInt":1,"negPre":"\u00a4-","negSuf":"","posPre":"\u00a4","posSuf":""}]},"id":"en","pluralCat":function(n,opt_precision){var i=n|0;var vf=getVF(n,opt_precision);if(i==1&&vf.v==0){return PLURAL_CATEGORY.ONE;}return PLURAL_CATEGORY.OTHER;}});}]);
//-->
</script>
<script type="text/javascript">
    //<!--
if (!istock.urls) { istock.urls = {}; }
if (!istock.urls.translatedUrls) { istock.urls.translatedUrls = {}; }istock.urls.translatedUrls.PAGE_ADP_PHOTO = '/photo/%s-%s';istock.urls.translatedUrls.PAGE_ADP_ILLUSTRATION = '/vector/%s-%s';istock.urls.translatedUrls.PAGE_ADP_VIDEO = '/video/%s-%s';istock.urls.translatedUrls.PAGE_ADP_AUDIO = '/audio/%s-%s';istock.urls.translatedUrls.PAGE_SRP_PHOTO = '/photos/%s';istock.urls.translatedUrls.PAGE_SRP_ILLUSTRATION = '/illustrations/%s';istock.urls.translatedUrls.PAGE_SRP_VIDEO = '/videos/%s';istock.urls.translatedUrls.PAGE_SRP_AUDIO = '/music/%s';
istock.urls.unsecure = "http://www.istockphoto.com/";istock.urls.secure = "https://secure.istockphoto.com/";
if (!istock.urls) { istock.urls = {}; }
if (!istock.urls.translatedUrls) { istock.urls.translatedUrls = {}; }
istock.urls.unsecure = "http://www.istockphoto.com/";istock.urls.secure = "https://secure.istockphoto.com/";
if (!istock.urls) { istock.urls = {}; }
if (!istock.urls.translatedUrls) { istock.urls.translatedUrls = {}; }istock.urls.translatedUrls.PAGE_SRP_PHOTO = '/photos/%s';istock.urls.translatedUrls.PAGE_SRP_ILLUSTRATION = '/illustrations/%s';istock.urls.translatedUrls.PAGE_SRP_VIDEO = '/videos/%s';istock.urls.translatedUrls.PAGE_SRP_AUDIO = '/music/%s';
istock.urls.unsecure = "http://www.istockphoto.com/";istock.urls.secure = "https://secure.istockphoto.com/";
jQuery(document).foundation();    //-->
</script><script type="text/javascript"  style="display:none">
<!--

namespacing.init('istock.tracking');istock.tracking.Omniture={_firstSearch:true,_firstSearchEvent:null,_thumbnailToggled:false,_fileInfo:null,initialize:function()
{this._observeLanguage();this._observeSisterSite();this._observeErrorBubble();this._observeFileInfo();this._observeLegacyDownload();this._observeDownload();this._observeDownloadBySubscription();this._observeSearch();this._observeSearchLinks();this._observeLightbox();this._observeImage();this._observeTrackExperience();this._observeToolsAppsLinks();this._observeFileCloseup();this._observeImageZoom();this._observeCheckoutPayPal();this._observeGettySubscriptionDownload();this._observePageLoadSpeed();this._observeMiniADPClick();this._observeThumbnailToggle();this._observeJoinSignIn();this._observeLoggedOutPage();this._observeAbandonSubscriptionForm();this._observeDownloadHistory();this._observePlansAndPricing();this._observeFirstPurchaseModal();this._observeEZFPmbox();this._observeDisambiguationHover();this._observeDisambiguationClick();this._observeRelatedSearches();this._observeAutoSuggest();this._observeCategoryTileClick();this._observeFAQClickEvents();this._observeFAQHyperlinks();this._observeHomepageSaleButtonClick();this._observeContactUs();},_trackExperience:function(experience){this._setExperience(experience);this._setExperienceCookie(experience);if(this.tlTimeout){clearTimeout(this.tlTimeout);}
this.tlTimeout=setTimeout(function(){s.tl(this,'o');},1000);},_setExperience:function(experience){if(s.hasOwnProperty('prop65')&&s.prop65===experience){return;}
s.linkTrackVars='prop65,eVar65';s.prop65=experience;s.eVar65=experience;},_setExperienceCookie:function(experience){var ajx=function(){var cookie=istock.cookie.getCookie('d_c__mb'),obj;if(cookie.indexOf(encodeURIComponent(experience))>0){return;}
obj=new Ajax.Request('/json/SetCookie',{parameters:{'namespace':'_mb','key':s.prop64,'value':experience}});};ajx.delay(1);},_trackLink:function(link,navType)
{s.linkTrackVars='events,prop7,prop8,eVar38';s.linkTrackEvents='event13';s.prop8=link;s.eVar8=link;s.events='event13';s.tl('trackLink',navType,link);},_trackErrorBubble:function(errorMsg)
{s.linkTrackVars='prop19,eVar19,eVar38';s.prop19=errorMsg;s.eVar19=s.prop19;s.tl('trackError','o',errorMsg);},_trackLightbox:function(name,events,eventType,priceLeveFromSRP,fileId)
{s.linkTrackVars='events,prop10,eVar10,eVar38,prop57,eVar57,prop59';s.linkTrackEvents=events;s.events=events;s.eVar10=s.prop10=name;if(priceLeveFromSRP==null){var cookiePriceLevel=istock.cookie.getCookie('omniturePriceLevel');var priceTier="none";if(cookiePriceLevel!==null){var filePriceTier=cookiePriceLevel.split("|");if(fileId==filePriceTier[0]){priceTier=filePriceTier[1];}}
s.prop57=s.eVar57=priceTier;s.prop59="adp|AddToLightbox";}else{s.prop57=priceLeveFromSRP;s.eVar57="D=c57";}
s.tl(this,'o',eventType);},_trackRowColumn:function(event)
{var item=jQuery(event.target).closest('.search-item');var isListLayout=false;if(typeof item=='undefined'||!jQuery(item).attr('data-fileid')){item=jQuery(event.target).closest('.lsrRow');if(typeof item=='undefined'){return;}
isListLayout=true;}
var id=jQuery(item).attr('data-fileid');if(!id){return;}
var count=0;var fileMeta=istock.search.resultsHandler.getResultMeta(id);var priceTier=Math.log(fileMeta.priceLevel)/Math.log(2)+1;var im=istock.search.resultsHandler.getDisplayResult(fileMeta.v);var l10=istock.search.resultsHandler.getDisplayResult(fileMeta.l);var kr=istock.search.resultsHandler.getDisplayResult(fileMeta.k);var bm=istock.search.resultsHandler.getDisplayResult(fileMeta.b);var contributorId=fileMeta.contributor?fileMeta.contributor.id:null;var fileAge=fileMeta.age;var bias=istock.search.resultsHandler.getBias();var resultset=istock.search.resultsHandler.getResultSet(true);resultset.each(function(image){if(id==image.id){throw $break;}
count++;}.bind(this));var row,col,layout=this._getNumberOfRowsAndColumns();if(isListLayout){row=count+1;col=1;numPerRow=1;}else{row=Math.floor(count/layout.numPerRow)+1;col=(count%layout.numPerRow)+1;}
document.cookie="omnitureImage="+id+"|"+row+"|"+col+'|'+layout.numPerColumn+'|'+layout.numPerRow+';path=/';document.cookie="omniturePriceLevel="+id+"|"+priceTier+';path=/';document.cookie="omnitureTermIds="+JSON.stringify(istock.search.resultsHandler.getCvTermIds())+';path=/';if(istock.search.resultsHandler.getSortOrder()=="6"){document.cookie="omnitureFileInfo="+this._getFileInfoCookie(id,kr,l10,im,bm,bias,contributorId,fileAge)
+';path=/;domain=istockphoto.com';}},_getNumberOfRowsAndColumns:function()
{var ret={numPerRow:0,numPerColumn:0};var resultset=jQuery('section[data-fileid]');var isListLayout=false;if(resultset.length==0){resultset=jQuery('div.lsrRow[data-fileid]');isListLayout=true;}
if(resultset.length!=0){if(isListLayout){ret.numPerRow=1;ret.numPerColumn=resultset.length;}else{ret.numPerRow=Math.floor(jQuery('#results-container').outerWidth()/resultset.first().outerWidth());ret.numPerColumn=Math.ceil(resultset.length/ret.numPerRow);}}
return ret;},_observeImage:function()
{if(jQuery('#results-container')!==null){jQuery('#results-container').on('click',jQuery.proxy(function(event){this._trackRowColumn(event);},this));var isWebKit=/webkit/.test(navigator.userAgent.toLowerCase());if(!isWebKit){jQuery('#results-container').on('mouseup',jQuery.proxy(function(event){if((event.which&&event.which==2)||(event.buttons&&event.buttons==1)){this._trackRowColumn(event);}},this));}}},_observeTrackExperience:function()
{jQuery(document).on('omniture:trackExperience',jQuery.proxy(function(event,data){this._trackExperience(data);},this));},_observeLanguage:function()
{jQuery('#intl').on('click','a.e_languageOpt',jQuery.proxy(function(event){this._trackLink('language selector: '+event.target.innerHTML,'o');},this));},_buildLicenseString:function(licenses,availableLicenses)
{var extLicenses='';licenses.each(function(license){if(availableLicenses[license]!=null){license=availableLicenses[license].name;var extLicense=license.replace(/[_(\/)\\-]/g,' ');var outExtLicense='';extLicense.split(' ').each(function(part){outExtLicense+=part.substring(0,1).toUpperCase();});extLicenses+=outExtLicense+' ';}});return extLicenses;},_observeFileCloseup:function()
{jQuery(document).on('omniture:trackPurchaseCredits',jQuery.proxy(function(event,data){s.linkTrackVars="prop59";s.prop59='BuyCreditsSave25-Credit';if(!data.displayCredits){if(data.saveCreditsClicked){s.prop59='BuyCredits-Save25-PAYG';}else{s.prop59='BuyCredits-PAYG';}}
s.tl('track credit purchase','o','clicked');},this));jQuery(document).on('omniture:adpFindSimilar',jQuery.proxy(function(){s.linkTrackVars="prop59";s.prop59='adp|FindSimilars';s.tl('find similar click','o','clicked');},this));jQuery(document).on('omniture:adpViewPortfolioLink',jQuery.proxy(function(){s.linkTrackVars='';s.linkTrackEvents='event13';s.events='event13';s.tl(this,'o','viewPortfolioLink');},this));jQuery(document).on('omniture:adpDescriptionLinks',jQuery.proxy(function(){s.linkTrackVars='';s.linkTrackEvents='event9';s.events='event9';s.tl(this,'o','adpDescriptionLinks');},this));jQuery(document).on('omniture:saveAdpTrackingData',jQuery.proxy(function(){var sessionKey='miniAdpTracking-'+jQuery('#fileId').val(),prodTracking=s.eVar13,concreteTypeId=jQuery('input:radio[name=size]:checked').val(),existingTrackingData=JSON.parse(sessionStorage.getItem(sessionKey)),licenses=existingTrackingData.licenses,priceTier=existingTrackingData.priceTier,filePriceInfo=FilePriceInformation[concreteTypeId],extendedLicenses=this._buildLicenseString(licenses,filePriceInfo.availableLicenses),audioVideoFormat=(filePriceInfo.format||filePriceInfo.suffix),trackingData={licenseType:'',abstractType:'',taxonomy:'',format:'none',displaySize:jQuery('input:radio[name=size]:checked').next().text(),license:'Standard',extendedLicenses:'none',priceTier:priceTier};if(typeof prodTracking!=='undefined'){prodTracking=prodTracking.split('|');trackingData.licenseType=prodTracking[0];trackingData.abstractType=prodTracking[1];trackingData.taxonomy=prodTracking[2];}
if(typeof audioVideoFormat!=='undefined'){trackingData.format=audioVideoFormat;}
if(!extendedLicenses.empty()){trackingData.license='Extended';trackingData.extendedLicenses=extendedLicenses;}
sessionStorage.setItem(sessionKey,JSON.stringify(trackingData));},this));if(jQuery('#payment-tabs')!==null){jQuery('#payment-tabs').on('click',jQuery.proxy(function(){s.linkTrackVars="events,eVar5";s.linkTrackEvents="event34";s.events="event34";if(jQuery('#show-credits').hasClass('active')){s.tl(this,'o','CreditsPricingTab');}else if(jQuery('#show-cash').hasClass('active')){s.events+=",prodView";s.linkTrackVars+=",prodView";s.tl(this,'o','USDPricingTab');}else if(jQuery('#show-subscription').hasClass('active')){s.tl(this,'o','SubscriptionTab');}},this));}
jQuery(document).on("omniture:trackFileCloseup",jQuery.proxy(function(){var events=istock.cookie.getCookie('omnitureEvents');if(events){s.events=s.apl(s.events,events,',',1);istock.cookie.deleteCookie('omnitureEvents');}
s.linkTrackVars="prop65";s.prop65='iStockADP_Old';},this));jQuery(document).on("omniture:trackImageSave",jQuery.proxy(function(event,data){var existingVars="",existingProps="";for(var i=1;i<76;i++){if(s["eVar"+i]){existingVars+=",eVar"+i;}
if(s["prop"+i]){existingProps+=",prop"+i;}}
s.linkTrackVars="eVar62,prop59"+existingVars+existingProps;s.linkTrackEvents="event33";s.events="event33";s.prop59="adp|CompDownload";switch(data.type){case"left":s.eVar62="SaveToDesktop-Left";break;case"right":s.eVar62="SaveToDesktop-Right";break;case"comp":s.eVar62="CompDownload";break;}
s.tl("trackLink","d",this);},this));},_observeImageZoom:function()
{jQuery(document).on("omniture:imageZoom",jQuery.proxy(function(){s.linkTrackVars="prop23,eVar13";s.prop23="Zoom";s.tl("image zoom","o","clicked");jQuery(document).trigger('image:zoom:tracked');},this));},_observeSisterSite:function()
{jQuery('a.trackSisterSite').on('click',jQuery.proxy(function(){this._trackLink('sister site: '+event.currentTarget.innerHTML.stripTags(),'e');},this));var isWebKit=/webkit/.test(navigator.userAgent.toLowerCase());if(!isWebKit){jQuery('a.trackSisterSite').on('mouseup',jQuery.proxy(function(){if((event.which&&event.which==2)||(event.buttons&&event.buttons==1)){this._trackLink('sister site: '+event.currentTarget.innerHTML.stripTags(),'e');}},this));}
jQuery(document).on('omniture:gettyLink',jQuery.proxy(function(){jQuery('a.trackSisterSite').on('click',jQuery.proxy(function(){this._trackLink('sister site: gettyimages.com1','e');},this));var isWebKit=/webkit/.test(navigator.userAgent.toLowerCase());if(!isWebKit){jQuery('a.trackSisterSite').on('mouseup',jQuery.proxy(function(event){if((event.which&&event.which==2)||(event.buttons&&event.buttons==1)){this._trackLink('sister site: gettyimages.com2','e');}},this));}},this));},_observeErrorBubble:function()
{jQuery(document).on('errorBubble',jQuery.proxy(function(event,mssg){this._trackErrorBubble(mssg.trim());event.stopPropagation();},this));jQuery(document).on("omniture:errorBubble",jQuery.proxy(function(event,mssg){this._trackErrorBubble(mssg);event.stopPropagation();},this));jQuery(window).load(jQuery.proxy(function(){jQuery('div.line-error').each(jQuery.proxy(function(errElm){var elem=jQuery('div.line-error')[errElm];if(jQuery(elem).html()&&(jQuery(elem).css('display')==='block')){this._trackErrorBubble(jQuery(elem).html());}},this));},this));},_observeFileInfo:function()
{jQuery(document).on("omniture:trackFileInfo",jQuery.proxy(function(event,data){this._fileInfo=data;},this));},_observeLegacyDownload:function()
{jQuery(document).on("omniture:trackLegacyDownload",jQuery.proxy(function(event,memo){s.linkTrackVars='events,eVar4,prop4,prop59,eVar38';s.linkTrackEvents='event9';s.events='event9';s.tl('agreeBtn','o','Accept Agreement');var trackSplit=memo.split('~');s.linkTrackVars='products,events,eVar13,eVar38,prop4,eVar4,'+'eVar58,eVar39,prop57,eVar57,eVar62,prop58,prop59,prop45,prop26,prop72';s.linkTrackEvents="event23,event4";s.events="event4,event23";s.products=';;;;event23='+trackSplit[1]+';';s.eVar13=trackSplit[0];s.eVar58=s.prop58=trackSplit[2];s.eVar39=trackSplit[3];var fileId=jQuery("#fileId").val();var cookiePriceLevel=istock.cookie.getCookie('omniturePriceLevel');var priceTier="none";if(cookiePriceLevel!==null){var filePriceTier=cookiePriceLevel.split("|");if(fileId==filePriceTier[0]){priceTier=filePriceTier[1];}}
s.prop57=s.eVar57=priceTier;s.prop59="adp|Download";s.eVar62="Credits";s.tl(this,"o","trackDownloads");event.preventDefault();},this));},_observeDownloadBySubscription:function()
{jQuery(document).on("omniture:trackDownloadBySubscription",jQuery.proxy(function(event,memo){var productString=memo.productString.split(";"),subscrAccountStatus=(memo.isPremium)?'Premium|':'';s.linkTrackVars='events,eVar4,prop4,prop59,eVar38';s.linkTrackEvents='event9';s.events='event9';s.tl('agreeBtn','o','Accept Agreement');s.linkTrackVars="products,events,eVar13,prop4,eVar4,prop57,eVar57,eVar62,prop59";s.linkTrackEvents="event4";s.events="event4";s.products=';;;;;event23='+memo.credits+';';s.eVar13=productString[1];s.eVar62="Sub|"+subscrAccountStatus+memo.subscriptionDuration;var fileInfo=this._getFileInfoFromCookie(fileId);if(fileInfo){s.prop45=fileInfo.imValue;s.prop26=fileInfo.fileAge;s.prop72=fileInfo.contributorId;}
var cookiePriceLevel=istock.cookie.getCookie('omniturePriceLevel');var priceTier="none";if(cookiePriceLevel!==null){var fileId=jQuery("#fileId").val();var filePriceTier=cookiePriceLevel.split("|");if(fileId==filePriceTier[0]){priceTier=filePriceTier[1];}}
s.prop57=s.eVar57=priceTier;s.prop59="adp|Download";s.tl(this,"o","trackDownloads");event.preventDefault();},this));},_observeDownload:function()
{jQuery(document).on('thankyou:downloadClicked',jQuery.proxy(function(event,memo){var file=this._fileInfo[memo.fileId];var productString=file.licenseType+'|'+file.type+'|'+file.taxonomy+'|'+file.size+'|'+file.format+'|'+file.license+'|'+file.extendedLicense;var existingVars="",existingProps="";for(var i=1;i<76;i++){if(s["eVar"+i]){existingVars+=",eVar"+i;}
if(s["prop"+i]){existingProps+=",prop"+i;}}
s.linkTrackVars="products,events,eVar13,eVar58,prop57,eVar57,eVar62"+
existingVars+",prop56,prop45,prop26,prop72,prop58"+existingProps;s.linkTrackEvents="event4,event23";s.events="event4,event23";s.products=';'+productString+';;;;event23=0;';s.prop56=memo.fileId;if(file.priceTier==null){s.prop57="none";}else{s.prop57=file.priceTier;}
s.eVar57="D=c57";s.eVar13=productString;var fileInfo=this._getFileInfoFromCookie(memo.fileId);if(fileInfo){s.prop45=fileInfo.imValue;s.prop26=fileInfo.fileAge;s.prop72=fileInfo.contributorId;}
s.eVar58=prop58=file.creditsRemaining;if(memo.repeat){s.eVar62="re-download";}else{s.eVar62="cash";}
s.tl("startDownload","o","trackDownloads");},this));},_observeLightbox:function()
{var lightboxEvent='event5';if(jQuery('#LightboxForm')!=null){jQuery('#LightboxForm').on('submit',jQuery.proxy(function(){if(jQuery('#ID')==null){this._trackLightbox(jQuery('#Name').value,'event6','Create Lightbox');}},this));}
jQuery(document).on("omniture:lightboxCreate",jQuery.proxy(function(event,memo){if(memo.page===true){lightboxEvent='event37';}
this._trackLightbox(memo.name,lightboxEvent+',event6','Create Lightbox');event.preventDefault();},this));jQuery(document).on("omniture:lightboxAdd",jQuery.proxy(function(event,memo){var priceTier=null;var fileId=null;if(memo.page===true){lightboxEvent='event37';}else{try{fileId=memo.fileId;var fileMeta=istock.search.resultsHandler.getResultMeta(fileId);priceTier=Math.log(fileMeta.priceLevel)/Math.log(2)+1;}catch(exception){}}
this._trackLightbox(memo.name,lightboxEvent,'Add File Lightbox',priceTier,fileId);event.preventDefault();},this));},_observeContactUs:function(){jQuery(document).on('omniture:contactUsLink',jQuery.proxy(function(event,memo){this._trackLink(memo,'o');},this));},_trackCollections:function(results){var _collections=['value','essentials','signature','signature+'],_types=['photo','illustration','video','audio'],stats={},countColl=1,countType=1;jQuery.each(_collections,function(index,collection){stats[collection]={};jQuery.each(_types,function(index,type){stats[collection][type]=0;});});jQuery.each(results,function(index,value){var types=value.type.split('-'),collection=value.collection;if(!value.collection){collection='main';}
stats[collection][types[0]]++;});s.linkTrackVars+=',prop38,eVar46';s.prop38='';jQuery.each(_types,function(index,type){countColl=1;jQuery.each(_collections,function(index,collection){s.prop38+=stats[collection][type];if(countColl!==_collections.length){s.prop38+='|';}
countColl+=1;});if(countType!==_types.length){s.prop38+=';';}
countType+=1;});s.eVar46="D=c38";},_trackPriceLevels:function(results){var _priceTiers=['0','1','2','4','8'],_types=['photo','illustration','video','audio'],stats={},countPrice=1,countType=1;jQuery.each(_priceTiers,function(index,priceTier){stats[priceTier]={};jQuery.each(_types,function(index,type){stats[priceTier][type]=0;});});jQuery.each(results,function(index,v){var types=v.type.split('-'),priceTier=v.priceLevel;stats[priceTier][types[0]]++;});s.linkTrackVars+=',eVar55,prop55';s.prop55='';jQuery.each(_types,function(index,type){countPrice=1;jQuery.each(_priceTiers,function(index,priceTier){s.prop55+=stats[priceTier][type];if(countPrice!==_priceTiers.length){s.prop55+='|';}
countPrice+=1;});if(countType!==_types.length){s.prop55+=';';}
countType++;});s.eVar55="D=c55";},_trackImpressionRatio:function(results){var count=0,totalImpression=0,standardDeviation=0;jQuery.each(results,function(index,v){totalImpression+=v.l17;count++;});s.linkTrackVars+=',prop21';var averageImp=totalImpression/count;jQuery.each(results,function(index,v){standardDeviation+=Math.pow((v.l17-averageImp),2);});standardDeviation=standardDeviation/count;standardDeviation=Math.sqrt(standardDeviation);s.prop21=averageImp.toFixed(2);s.prop21+='|';s.prop21+=standardDeviation.toFixed(2);},_parseSearch:function()
{var breadBox=this._parseBreadBox();this._trackSearch(breadBox);if(breadBox.lightbox!==''){s.linkTrackVars='eVar10,prop10,eVar38';s.eVar10=s.prop10=breadBox.lightbox;s.tl('trackLightbox','o','Lightbox');}},_trackSearch:function(breadBox)
{var categoryCookieValue=this._getCookie(s.categoryCookieName),categoryCookieExists=this._checkCookie(s.categoryCookieName),keywordCookieValue=this._getCookie(s.keywordCookieName),keywordCookieExists=this._checkCookie(s.keywordCookieName),similarFileCookieValue=this._getCookie(s.similarFileCookieName),similarFileCookieExists=this._checkCookie(s.similarFileCookieName);this._deleteCookie(s.categoryCookieName);this._deleteCookie(s.keywordCookieName);this._deleteCookie(s.similarFileCookieName);if(istock.search&&typeof istock.search.resultsHandler!=="undefined"){var thumbnailSize;s.linkTrackVars='pageName,prop5,prop11,prop12,prop13,prop14,prop15,prop16,prop31,prop32,'+'prop33,prop34,prop35,prop36,prop42,prop43,prop44,prop53,prop69,eVar5,eVar11,eVar12,eVar13,eVar14,'+'eVar15,eVar16,eVar31,eVar32,eVar33,eVar34,eVar35,eVar36,eVar53,eVar38,eVar42,eVar43';s.linkTrackEvents='';s.prop5=window.location.pathname;var totalResults=istock.search.resultsHandler.getTotalResultCount();if(s.prop11){s.prop3=s.prop3+'|'+s.prop11;}
s.prop11=breadBox.keywords;if(parseInt(totalResults,10)===0){s.prop11='none:'+s.prop11;}
s.prop12=breadBox.portfolio;s.prop13=totalResults.toString();s.prop14=istock.search.resultsHandler.getCurrentPage().toString();var selected=istock.search.preferences.get('order');if(selected===7||selected===12||selected===13){s.prop15='Downloads|'+SearchSortOptions[selected];}else{s.prop15=SearchSortOptions[selected];}
if(categoryCookieExists){s.prop11=categoryCookieValue;s.prop12="category";}
if(keywordCookieExists){s.prop12="keywordlink";}
if(similarFileCookieExists){s.events='event44';s.prop62='SimilarImages';}
s.prop16=breadBox.fileTypes;s.prop31=breadBox.photoIllustration;s.prop32=jQuery('#colour-selector-input')[0].value;if(s.prop32=='HEX'){s.prop32='';}
s.prop33=breadBox.videoFilters;s.prop34=breadBox.audioFilters;s.prop35=breadBox.collections;s.prop36=breadBox.more;s.eVar53=s.prop53=istock.search.preferences.get('perPage');s.eVar11=s.prop11;if(s.prop12=='keyword'){s.prop12+='|'+istock.search.resultsHandler.isKeywordCached();}
s.eVar12=s.prop12;s.eVar14=s.prop14;s.eVar15=s.prop15;s.eVar16=s.prop16;s.eVar31=s.prop31;s.eVar32=s.prop32;s.eVar33=s.prop33;s.eVar34=s.prop34;s.eVar35=s.prop35;s.eVar36=s.prop36;if(jQuery("#priceRange").length){s.eVar42=s.prop42=jQuery("#priceRange").html();}else{s.eVar42=s.prop42="none";}
s.eVar43=s.prop43=breadBox.license.toLowerCase();if(istock.search.resultsHandler.getResultSet().size()){s.linkTrackVars+=',prop60';s.prop60=istock.search.resultsHandler.getKrAdjustmentSummary();}
s.eVar65=s.prop65='SRP_2015_Old';thumbnailSize=istock.search.preferences.get('thumbnailSize')||'large';if(this._thumbnailToggled){thumbnailSize+='-toggle';}
s.prop69=thumbnailSize;this._trackCollections(istock.search.resultsHandler.getResultSet());this._trackPriceLevels(istock.search.resultsHandler.getResultSet());this._trackImpressionRatio(istock.search.resultsHandler.getResultSet());if(!istock.search.resultsHandler.getResultSet().size()){s.pageName='iStock|Search|ZeroResults';}else if(istock.search.resultsHandler.getSortOrder()=="6"){s.linkTrackVars+=',prop39,eVar39';s.prop39=istock.search.resultsHandler.getUserSegmentId();s.eVar39=s.prop39;s.linkTrackVars+=',prop29,eVar29';s.prop29=istock.search.resultsHandler.getUserType();s.eVar29=s.prop29;s.linkTrackVars+=',prop46';s.prop46=istock.search.resultsHandler.getBreadCrumb();s.linkTrackVars+=',prop45';s.prop45=istock.search.resultsHandler.getStandardDeviationPixel();}
var layout=this._getNumberOfRowsAndColumns();s.prop44=layout.numPerColumn+':'+layout.numPerRow;+"|";var cvTermIds=istock.search.resultsHandler.getCvTermIds();if(cvTermIds){s.prop44+='|'+cvTermIds.join()}
if(this._firstSearch){var firstSearchEvents='',firstSearchEventsArray=['event2'];if(!istock.search.resultsHandler.getIsHistoryLoad()){firstSearchEventsArray.push('event14');}
firstSearchEvents=firstSearchEventsArray.join(',');if(typeof s.events=="undefined"){s.events=firstSearchEvents;}else{s.events+=","+firstSearchEvents;}
s.t();this._firstSearch=false;}else{s.tl('trackSearch','o','Search');}}},_parseBreadBox:function()
{var data={keywords:'',portfolio:omnitureTranslation.portfolio,categories:'',photoIllustration:'',fileTypes:'all files',license:'',videoFilters:'',audioFilters:'',collections:'',lightbox:'',more:''};var firstChild='';jQuery('#breadbox').children().each(function(){firstChild=jQuery.trim(jQuery(this).children(":first").html());switch(omnitureTranslation[firstChild]){case'Keywords':data.keywords=istock.tracking.Omniture._parseBreadBoxTerms(this,false);break;case'Portfolio':data.portfolio='memberID';break;case'Categories':data.categories=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'Photos &amp; Illustration Filters':data.photoIllustration=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'File Types':data.fileTypes=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'License':data.license=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'Video Filters':data.videoFilters=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'Audio Filters':data.audioFilters=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'Collections':data.collections='C-'+istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'More Attributes':data.more=istock.tracking.Omniture._parseBreadBoxTerms(this,true);break;case'Lightbox':data.lightbox=istock.tracking.Omniture._parseBreadBoxTerms(this,false);break;default:break;}});return data;},_parseBreadBoxTerms:function(element,translate)
{var facetString='';var rawFacetString='';jQuery(element).find('span.facet-title').each(function(){if(translate){rawFacetString=jQuery(this).html().replace(/(<([^>]+)>)/ig,"").replace(/&nbsp;/gi,'').trim();if(typeof omnitureTranslation[rawFacetString]=='undefined'){facetString+=rawFacetString;}else{facetString+=omnitureTranslation[rawFacetString];}}else{facetString+=jQuery(this).html().replace(/(<([^>]+)>)/ig,"").replace(/&nbsp;/gi,'');}
facetString+='|';});facetString=facetString.substr(0,facetString.length-1);return facetString;},_observeSearch:function()
{jQuery(document).on('omniture:firstSearch',jQuery.proxy(function(event){this._parseSearch();event.preventDefault();},this));jQuery(document).on('omniture:nextSearch',jQuery.proxy(function(event){this._parseSearch();event.preventDefault();},this));},_observeToolsAppsLinks:function()
{if(!jQuery('#appsToolsPrimaryContainer').length){return;}
var links=[['#appsToolsPrimaryContainer section:first-child a:nth-child(5)','iPhoneApp',null],['#appsToolsPrimaryContainer section:nth-child(2) a:nth-child(5)','PowerPoint',null],['#appsToolsPrimaryContainer section:nth-child(2) a:nth-child(7)','WordPlugin',null],['#appsToolsSecondaryContainer section:first-child a','WordPress',null],['#appsToolsSecondaryContainer section:nth-child(2) a','ViewCalendars','o'],['#appsToolsSecondaryContainer section:nth-child(3) a','FaceBookApp',null],['#appsToolsContribContainer section:nth-child(3) a','DeepMeta',null],];jQuery.each(links,function(index,link){jQuery(link[0]).on('click',jQuery.proxy(function(){s.linkTrackVars='events,eVar62';s.linkTrackEvents='event33';s.events='event33';s.eVar62=link[1];s.pageName='iStock | Participate | ToolsApps';if(link[2]!=null){s.tl(link[1],link[2],'iStock Tools Apps');}},this));});},_observeCheckoutPayPal:function(){jQuery(document).on('checkout:paypal',jQuery.proxy(function(event){this._trackContinueToPayPal();event.preventDefault();},this));},_trackContinueToPayPal:function(){s.events='event35';s.tl();},_observeGettySubscriptionDownload:function(){jQuery(document).on('omniture:gettySubscriptionDownload',jQuery.proxy(function(event,responseObj){s.linkTrackVars='products,events';s.linkTrackEvents="event4";s.events='event4';s.products=';'+responseObj.sku;if(s.prop24){if(responseObj.autoRenew===true){s.prop24+='|on';}else if(responseObj.autoRenew===false){s.prop24+='|off';}}
s.tl();},this));},_observeMiniADPClick:function(){var miniAdp=jQuery('#mini-adp a'),miniAdpAddToCart=jQuery('#mini-adp .add-to-cart');if(jQuery(miniAdp).length){jQuery(miniAdp).on('click',jQuery.proxy(function(){document.cookie='omnitureEvents=event39';},this));}
if(jQuery(miniAdpAddToCart).length){jQuery(miniAdpAddToCart).on('click',jQuery.proxy(function(){this._trackMiniADPAddToCart(miniAdp.data('fileId'));},this));}},_trackMiniADPClick:function(){s.linkTrackEvents='event39';s.linkTrackVars='events,prop7,prop52';s.events='event39';s.tl(this,'o','mini ADP click');},_trackMiniADPAddToCart:function(fileId){var sessionKey='miniAdpTracking-'+fileId,file=JSON.parse(sessionStorage.getItem(sessionKey));if(file!==null){sessionStorage.removeItem(sessionKey);s.products=';'+
file.licenseType+'|'+
file.abstractType+'|'+
file.taxonomy+'|'+
file.displaySize+'|'+
file.format+'|'+
file.license+'|'+
file.extendedLicenses+'|'+';;;;';s.prop57=file.priceTier;s.linkTrackEvents='event39,scAdd';s.linkTrackVars='events,products,prop57';s.events='event39,scAdd';s.tl(this,'o','mini ADP add to cart click');}},_observePageLoadSpeed:function(){jQuery(document).on('omniture:pageLoadFinished',jQuery.proxy(function(){this._trackPageLoad();},this));},_trackPageLoad:function(){if(typeof window.timestamps==='undefined'){return;}
var t=window.timestamps;if(typeof s.linkTrackVars==='string'&&s.linkTrackVars!==''){s.linkTrackVars+=',prop73,prop74';}else{s.linkTrackVars='prop73,prop74';}
s.prop73=t.serverEnd-t.serverStart;var temp74=t.cssEnd-t.htmlStart+s.prop73;s.prop74=temp74+'|'+(t.htmlEnd-t.cssEnd+temp74);if(istock.search&&istock.search.resultsHandler){s.linkTrackVars+=',prop75';t.jsEnd=Math.round((new Date()).getTime());s.prop75=istock.search.resultsHandler.getSearchTimes()+'|render:'+(t.jsEnd-t.htmlStart);}},_setAdditionalPropsIsEditorsPickIsExclusive:function(event){if(typeof(event.memo)!='undefined'){if(event.memo.isEditorsPick==='true'&&event.memo.isExclusive==='true'){s.prop61=s.eVar61='EditorsPick|Exclusive';}else if(event.memo.isEditorsPick==='false'&&event.memo.isExclusive==='false'){s.prop61=s.eVar61='Standard';}else if(event.memo.isEditorsPick==='true'){s.prop61=s.eVar61='EditorsPick';}else if(event.memo.isExclusive==='true'){s.prop61=s.eVar61='Exclusive';}}},_observeSearchLoupe:function(){jQuery(document).on('omniture:loupeView',jQuery.proxy(function(event){s.linkTrackEvents='event38';s.linkTrackVars='events,prop59';this._setAdditionalPropsIsEditorsPickIsExclusive(event);s.events="event38";s.prop59="search";s.tl(this,'o','searchLoupeView');},this));},_observeSearchLinks:function(){jQuery(document).on('omniture:searchContributorLink',jQuery.proxy(function(){s.linkTrackVars='prop59';s.prop59='search|contributor';s.tl(this,'o','searchContributorClick');},this));jQuery(document).on('omniture:searchFileIdLink',jQuery.proxy(function(){s.linkTrackVars='prop59';s.prop59='search|assetId';s.tl(this,'o','searchFileIdClick');},this));jQuery(document).on('omniture:searchAddToLightbox',jQuery.proxy(function(){s.linkTrackVars='prop59,eVar59';this._setAdditionalPropsIsEditorsPickIsExclusive(event);s.eVar59='search|addToLightbox';s.prop59=s.eVar59;s.tl(this,'o','searchAddToLightbox');},this));jQuery(document).on('omniture:searchRemoveFromLightbox',jQuery.proxy(function(){s.linkTrackVars='prop59,eVar59';this._setAdditionalPropsIsEditorsPickIsExclusive(event);s.eVar59='search|removeFromLightbox';s.prop59=s.eVar59;s.tl(this,'o','searchRemoveFromLightbox');},this));jQuery(document).on('omniture:searchFindSimilarLink',jQuery.proxy(function(){s.linkTrackVars='prop59';this._setAdditionalPropsIsEditorsPickIsExclusive(event);s.prop59='search|searchFindSimilars';s.tl(this,'o','searchFindSimilarClick');},this));jQuery(document).on('omniture:searchTileLink',jQuery.proxy(function(){s.linkTrackVars='prop59';this._setAdditionalPropsIsEditorsPickIsExclusive(event);s.prop59='search|searchThumbnailClick';s.tl(this,'o','searchThumbnailClick');},this));},_observeThumbnailToggle:function(){jQuery(document).on('omniture:thumbnailToggle',jQuery.proxy(function(){this._thumbnailToggled=true;this._trackSearch(this._parseBreadBox());},this));},_observeJoinSignIn:function()
{jQuery(document).on('omniture:joinSignIn',jQuery.proxy(function(){s.linkTrackVars='prop19';s.prop19='join| already_member';s.tl('trackLink','o',this);},this));},_observeRelatedSearches:function()
{jQuery(document).on('omniture:relatedSearches',jQuery.proxy(function(event,data){s.linkTrackVars='prop68';s.prop68=data;s.tl('trackLink','o',this);},this));},_observeLoggedOutPage:function()
{jQuery(document).on('omniture:browseCategoryClick',jQuery.proxy(function(){s.linkTrackVars='';s.linkTrackEvents='event41';s.events='event41';s.tl(this,'o','homepagebrowse');},this));},_getFileInfoFromCookie:function(fileId){var ret=null;var cookie=istock.cookie.getCookie('omnitureFileInfo');if(cookie!==null){var array=JSON.parse(cookie);if(array!=null){jQuery.each(array,function(key,value){if(value.id==fileId){ret=value.info;}});}}
return ret;},_observeAbandonSubscriptionForm:function()
{jQuery(document).on('omniture:abandonForm',jQuery.proxy(function(event,data){s.linkTrackVars='prop30';s.prop30=data;s.tl(this,'o',data);},this));},_getFileInfoCookie:function(fileId,kr,l10,im,bm,bias,contributorId,fileAge)
{var approvalDate=new Date(fileAge*1000);var year=approvalDate.getFullYear();var month=approvalDate.getMonth()+1;var day=approvalDate.getDate();if(month<10){month='0'+month;}
if(day<10){day='0'+day;}
var array=new Array();var newArray=new Array();newArray[0]={'id':fileId,'info':{'imValue':kr+"|"+l10+"|"+im+"|"+bm+"|"+bias,'contributorId':contributorId,'fileAge':year+'-'+month+'-'+day}};var cookieFileInfo=istock.cookie.getCookie('omnitureFileInfo');if(cookieFileInfo!=null){array=JSON.parse(cookieFileInfo);var isInCookie=false;if(array!=null){jQuery.each(array,function(key,value){if(value.id==fileId){isInCookie=true;}});if(!isInCookie){if(array.length>=10){array.pop();}
newArray=newArray.concat(array);}else{newArray=array;}}}
return JSON.stringify(newArray);},_observeDownloadHistory:function()
{jQuery('.redownloadLink').on('click',jQuery.proxy(function(event){var type=jQuery(event.currentTarget).attr('data-type'),a1;s.linkTrackVars='eVar62';s.linkTrackEvents='event2';s.events='event2';s.eVar62='redownload';if(type==='subs'){a1='sub-redownload';}else{a1='redownload';}
s.tl(true,'o',a1);},this));},_observePlansAndPricing:function()
{jQuery(document).on('omniture:pnpDataLoad',jQuery.proxy(function(event){s.prop52='';var creditsAry=[];var optionBoxes=jQuery('#pack-options ul.options-boxes >li');if(optionBoxes.length){optionBoxes.find('.credit-text strong').each(function(){creditsAry.push(jQuery(this).html());});}else{jQuery('#pack-options >ul >li:visible .descriptor .credits-name strong').each(function(){creditsAry.push(jQuery(this).html());});}
s.prop52=creditsAry.join('|');s.t();},this));jQuery('button[data-button-type=purchase]').on('click',jQuery.proxy(function(event){var subType=jQuery(event.currentTarget).data('sub-type');s.pageName='iStock|Payment|'+subType+'Plan';if(jQuery(event.currentTarget).data('flex')===true){s.pageName+='-Flex';}
s.events='';s.t();},this));jQuery('div[data-button-type=purchase]').on('click',jQuery.proxy(function(event){var subType=jQuery(event.currentTarget).data('sub-type');s.pageName='iStock|Payment|'+subType+'Plan';if(jQuery(event.currentTarget).data('flex')===true){s.pageName+='-Flex';}
s.events='';s.t();},this));jQuery('.credit-container').on('click',jQuery.proxy(function(event){s.pageName='iStock|Payment|PlansAndPricing';s.linkTrackVars='events';s.linkTrackEvents='scAdd';s.events=s.linkTrackEvents;s.tl(true,'o','CreditContianer add to cart click');},this));jQuery('.credit-list-item').on('click',jQuery.proxy(function(event){var element=jQuery(event.target).closest('.credit-row-container'),pack=element.attr('data-credits'),cost=element.attr('data-price');s.events='scAdd';s.linkTrackEvents='scAdd';s.products=';Individual|Pay-as-you-go|1|1 Year|'+pack+';1;'+cost+';;';s.linkTrackVars='prop65,eVar65,products';s.tl(true,'o','PlansPricing-CreditCartAdd');},this));jQuery('#packs-view-more a').on('click',jQuery.proxy(function(event){s.pageName='iStock|Payment|PlansAndPricing';s.linkTrackEvents='event41';s.events=s.linkTrackEvents;s.tl(true,'o','ViewAllCreditPacks');},this));jQuery('#faqs a').on('click',jQuery.proxy(function(event){s.pageName='iStock|Payment|FAQ';s.events='';s.t();},this));jQuery('#lpChatFooter').on('click',jQuery.proxy(function(event){s.pageName='iStock|Payment|PlansAndPricing';s.linkTrackEvents='event43';s.events=s.linkTrackEvents;s.tl(true,"o","LiveChat");},this));},_observeFirstPurchaseModal:function()
{jQuery(document).on('omniture:firstPurchaseModalDisplayed',jQuery.proxy(function(){s.pageName='iStock|Payment|CheckoutModal';s.t();},this));},_observeEZFPmbox:function()
{jQuery(document).on('omniture:iS_EZFP',jQuery.proxy(function(event,data){s.eVar64=data;s.t();},this));},_observeDisambiguationHover:function()
{jQuery(document).on('omniture:disambiguationHover',jQuery.proxy(function(){s.tl(true,'o','SRP-KeywordHoverView');},this));},_observeDisambiguationClick:function()
{jQuery(document).on('omniture:disambiguationClick',jQuery.proxy(function(){s.tl(true,'o','SRP-KeywordHoverClick');},this));},_observeAutoSuggest:function()
{jQuery(document).on('omniture:autoSuggest',jQuery.proxy(function(event,data){s.linkTrackVars='prop12';s.prop12=data;s.tl('trackLink','o',this);},this));},_observeCategoryTileClick:function(){jQuery(document).on("omniture:categorytileclick",jQuery.proxy(function(event,memo){s.tl(true,'o','LandingPage-'+memo+'-Click');},this));},_getCookie:function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return"";},_setCookie:function(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;},_deleteCookie:function(cname){document.cookie=cname+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC ;domain=.istockphoto.com;path=/";},_checkCookie:function(cname){var cvalue=this._getCookie(cname);if(cvalue!=""){return true;}else{return false;}},_observeFAQClickEvents:function(){jQuery('.track-omni').on('click',jQuery.proxy(function(event){this._sendFAQViewAllEvent('FAQ-'+event.currentTarget.dataset.omni);},this));},_observeFAQHyperlinks:function(){var cookieTitle='FAQHyperlinkEvents=faq|',path=';path=/;domain=istockphoto.com';jQuery('.basics-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_basic'+path;},this));jQuery('.using-files-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_usingistockfiles'+path;},this));jQuery('.purchasing-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_purchasing'+path;},this));jQuery('.downloading-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_downloading'+path;},this));jQuery('.your-account-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_youraccount'+path;},this));jQuery('.troubleshooting-hyperlink').on('click',jQuery.proxy(function(event){document.cookie=cookieTitle+'tile_troubleshooting'+path;},this));},_sendFAQViewAllEvent:function(clickEvent){s.linkTrackEvents='event28';s.events=s.linkTrackEvents;s.tl(true,"o",clickEvent);},_observeHomepageSaleButtonClick:function(){var saleButton=jQuery(".primary-cta.sale-cta");if(jQuery(saleButton).length){jQuery(saleButton).on('click',jQuery.proxy(function(){s.linkTrackEvents='event28';s.events='event28';s.tl(true,'o','JuneSaleClick');istock.cookie.setCookie('sale','home|hero',1);},this));}}};jQuery(window).on('load',function(){istock.tracking.Omniture.initialize();jQuery(document).trigger('omniture:trackingLoaded');});jQuery(function($){$(function(){$(document).on('click','[data-isource-track]',function(e){istock.cookie.setCookie('isource',$(this).data('isource-track'),1);if(!(e.altKey||e.metaKey||e.which==2||e.ctrlKey)){e.stopPropagation();}});});}(jQuery.noConflict()));var istock=istock||{};istock.cookie={getCookie:function(key){var searchKey=key+"=";var value=null;document.cookie.split(';').forEach(function(element){element=element.trim();if(element.substring(0,searchKey.length)===searchKey){value=element.substring(searchKey.length,element.length);}});return value;},setCookie:function(key,value,exdays){var exdate=new Date(),parts,subdomain,domain,c_value;exdate.setDate(exdate.getDate()+exdays);parts=location.hostname.split('.');subdomain=parts.shift();domain=parts.join('.');c_value=escape(value)+((exdays===null)?"":"; expires="+exdate.toUTCString())+"; path=/; domain=."+domain;document.cookie=key+"="+c_value;},deleteCookie:function(key){this.setCookie(key,"",-1);}};var s_account="gettyistockphotoprod";var s=s_gi(s_account)
s.trackDownloadLinks=true
s.trackExternalLinks=true
s.trackInlineStats=true
s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx"
s.linkInternalFilters="javascript:,istockphoto.com"
s.linkLeaveQueryString=false
s.linkTrackVars="prop7,prop8,eVar7,eVar8"
s.linkTrackEvents="None"
s.categoryCookieName='c_c'
s.keywordCookieName='k_c'
s.similarFileCookieName='sf_c';s._channelDomain='Social Media|facebook.com,linkedin.com,twitter.com,/t.co,plus.url.google.com,plus.google.com,pinterest.com,orkut.com,friendster.com,livejournal.com,blogspot.com,wordpress.com,friendfeed.com,myspace.com,digg.com,reddit.com,stumbleupon.com,twine.com,yelp.com,mixx.com,delicious.com,tumblr.com,disqus.com,intensedebate.com,plurk.com,slideshare.net,backtype.com,netvibes.com,mister-wong.com,diigo.com,flixster.com,youtube.com,vimeo.com,12seconds.tv,zooomr.com,identi.ca,jaiku.com,flickr.com,imeem.com,dailymotion.com,photobucket.com,fotolog.com,smugmug.com,classmates.com,myyearbook.com,mylife.com,tagged.com,brightkite.com,ning.com,bebo.com,hi5.com,yuku.com,cafemom.com,xanga.com>'+'Other Getty sites|wireimage,filmmagic,contourphotos,thinkstockphotos,thinkstock,photos.com,punchstock.com,jupiterimages,clipart.com,royaltyfreemusic,pumpaudio,gettyimages,sxc.hu,stockxpert>'+'GDN|g.doubleclick.net>'
s._channelPattern='GDN|_GDN>Paid Search|SEM,goog,bing,yah>Referral Program|reflinkcon>Display|DIS,dfa,ban,kg_,kct>Remarketing|REM,rmkt,dotomi>Affiliate|AFF,linkconn,webgains,linkshare>Email|EM_,_em,eml_,email_,ema_>Partner|partner>Other Getty sites|GI,sxc_';if(typeof s.formList=="undefined"){s.formList="";}
s.trackFormList=false;s.trackPageName=true;s.useCommerce=false;s.varUsed="prop30";s.eventList="Abandon";s.usePlugins=true
function s_doPlugins(s){var isourceVal=null;if(window.istock&&istock.cookie)
isourceVal=istock.cookie.getCookie('isource');if(isourceVal!==null){if(isourceVal.indexOf("nav")!==-1){isourceVal=unescape(isourceVal).split("=");s.eVar66=s.prop71=isourceVal[1];}else{s.eVar67=s.eVar70=s.eVar71=isourceVal;}
istock.cookie.deleteCookie('isource');}else{s.eVar67=s.eVar70=s.eVar71=s.getQueryParam('isource');}
s.eVar67=s.getValOnce(s.eVar67,'s_v67',0);s.eVar70=s.getValOnce(s.eVar70,'s_v70',0);s.eVar71=s.getValOnce(s.eVar71,'s_v71',0);if(typeof bdPrtnrID!="undefined"&&bdPrtnrID){s.campaign=s.eVar68=s.eVar69=bdPrtnrID;}
if(!s.campaign){s.campaign=s.eVar68=s.eVar69=s.getQueryParam('esource');}
s.prop20=s.getQueryParam('navlnk');s.channelManager('esource,isource','','s_gvo','','s_tb','28');if(s._channel){if(document.referrer.indexOf('/imgres')>-1||document.referrer.indexOf('/image')>-1||document.referrer.indexOf('/img')>-1||document.referrer.indexOf('/images')>-1)
s._channel='Image Search';if(s._channel=='Paid Search'&&(s.getQueryParam('esource').toLowerCase().indexOf('_brand')>-1||s.getQueryParam('esource').toLowerCase().indexOf('_istock')>-1))
s._channel='Paid Search - Brand';else if(s._channel=='Paid Search')
s._channel='Paid Search - Generic';if(s._channel=='Social Media'&&(document.referrer.indexOf('www.facebook.com/istock')>-1||document.referrer.indexOf('twitter.com/istock')>-1||document.referrer.indexOf('twitter.com/britain_is')>-1||document.referrer.indexOf('t.co/istock')>-1||document.referrer.indexOf('t.co/britain_is')>-1||document.referrer.indexOf('vimeo.com/istock')>-1||document.referrer.indexOf('youtube.com/istock')>-1||document.referrer.indexOf('flickr.com/photo')>-1))
s._channel='Social Media (iStock)';if(s._channel=='Natural Search')
s._channel='Organic Search';if(s._channel=='Display'&&s.getQueryParam('esource').toLowerCase().indexOf('sxc')>-1)
s._channel='Unknown Channel';if(s._channel=='Unknown Channel'&&s.getQueryParam('esource').toLowerCase().indexOf('AFF')>-1)
s._channel='Affiliate';if(s._channel=='Unknown Channel')
s._channel='Unclassified Campaigns';if(s._channel=='Other Natural Referrers')
s._channel='Other Referrers';if(s._channel=='Typed/Bookmarked')
s._channel='Direct';s.eVar42=s.crossVisitParticipation(s._channel,'s_channelstack','90','5',' > ','',0);}
s.events=s.apl(s.events,"event1",",",2);if(s.getVisitStart("s_visit")==1||s.prop51=='undefined'||s.prop51=='')
s.prop51='start';if(s.events){if(s.events.indexOf('purchase')>-1)
s.prop51='stop';}
s.prop51=s.getTimeToComplete(s.prop51,'ttc',0);s.eVar51=s.prop51?s.prop51.toLowerCase():'';s.eVar7=s.prop7=s.getPreviousValue(s.pageName,'gpv_07');s.eVar1=s.prop1?s.prop1.toLowerCase():'';s.eVar2=s.prop2?s.prop2.toLowerCase():'';s.eVar3=s.prop3?s.prop3.toLowerCase():'';s.eVar5=s.pageName?s.pageName.toLowerCase():'';s.eVar6=s.server?s.server.toLowerCase():'';s.eVar10=s.prop10?s.prop10.toLowerCase():'';s.eVar11=s.prop11?s.prop11.toLowerCase():'';s.eVar12=s.prop12?s.prop12.toLowerCase():'';s.eVar14=s.prop14?s.prop14.toLowerCase():'';s.eVar15=s.prop15?s.prop15.toLowerCase():'';s.eVar16=s.prop16?s.prop16.toLowerCase():'';s.eVar17=s.prop17?s.prop17.toLowerCase():'';s.eVar18=s.tempeVar18?s.tempeVar18.toLowerCase():'';s.tempeVar18='';s.eVar19=s.prop19?s.prop19.toLowerCase():'';s.eVar31=s.prop31?s.prop31.toLowerCase():'';s.eVar32=s.prop32?s.prop32.toLowerCase():'';s.eVar33=s.prop33?s.prop33.toLowerCase():'';s.eVar34=s.prop34?s.prop34.toLowerCase():'';s.eVar35=s.prop35?s.prop35.toLowerCase():'';s.eVar36=s.prop36?s.prop36.toLowerCase():'';s.eVar40=s.prop40?s.prop40.toLowerCase():'';s.eVar41=s.prop41?s.prop41.toLowerCase():'';s.eVar43=s.prop43?s.prop43.toLowerCase():'';s.eVar44=s.prop44?s.prop44.toLowerCase():'';s.eVar28=s.prop28=s.getDaysSinceLastVisit('s_lv');s.eVar60=s.getQueryParam("sp_mid");s.prop18=s.getPercentPageViewed();s.tnt=s.trackTNT();}
s.doPlugins=s_doPlugins
var dfaConfig={CSID:'1519555',SPOTID:'2499034',tEvar:'eVar21',errorEvar:'eVar23',timeoutEvent:'event24',requestURL:"http://fls.doubleclick.net/json?spot=[SPOTID]&src=[CSID]&var=[VAR]&host=integrate.112.2o7.net%2Fdfa_echo%3Fvar%3D[VAR]%26AQE%3D1%26A2S%3D1&ord=[RAND]",maxDelay:"1000",visitCookie:"s_dfa",clickThroughParam:"dfaid",searchCenterParam:undefined,newRsidsProp:undefined};s.maxDelay=dfaConfig.maxDelay;s.loadModule("Integrate")
s.Integrate.onLoad=function(s,m){var dfaCheck=s.partnerDFACheck(dfaConfig);if(dfaCheck){s.Integrate.add("DFA");s.Integrate.DFA.tEvar=dfaConfig.tEvar;s.Integrate.DFA.errorEvar=dfaConfig.errorEvar;s.Integrate.DFA.timeoutEvent=dfaConfig.timeoutEvent;s.Integrate.DFA.CSID=dfaConfig.CSID;s.Integrate.DFA.SPOTID=dfaConfig.SPOTID;s.Integrate.DFA.get(dfaConfig.requestURL);s.Integrate.DFA.setVars=function(s,p){if(window[p.VAR]){if(!p.ec){s[p.tEvar]="DFA-"+(p.lis?p.lis:0)+"-"+(p.lip?p.lip:0)+"-"+(p.lastimp?p.lastimp:0)+"-"+(p.lastimptime?p.lastimptime:0)+"-"+(p.lcs?p.lcs:0)+"-"+(p.lcp?p.lcp:0)+"-"+(p.lastclk?p.lastclk:0)+"-"+(p.lastclktime?p.lastclktime:0)}else if(p.errorEvar){s[p.errorEvar]=p.ec;}}else if(p.timeoutEvent){s.events=((!s.events||s.events=='')?'':(s.events+','))+p.timeoutEvent;}}}}
s.partnerDFACheck=new Function("cfg",""
+"var s=this,c=cfg.visitCookie,src=cfg.clickThroughParam,scp=cfg.searchCenterParam,p=cfg.newRsidsProp,tv=cfg.tEvar,dl=',',cr,nc,q,g,gs,i,j,k,fnd,v=1,t=new Date,cn=0,ca=new Array,aa=new Array,cs=new A"
+"rray;t.setTime(t.getTime()+1800000);cr=s.c_r(c);if(cr){v=0;}ca=s.split(cr,dl);aa=s.split(s.un,dl);for(i=0;i<aa.length;i++){fnd = 0;for(j=0;j<ca.length;j++){if(aa[i] == ca[j]){fnd=1;}}if(!fnd){cs[cn"
+"]=aa[i];cn++;}}if(cs.length){for(k=0;k<cs.length;k++){nc=(nc?nc+dl:'')+cs[k];}cr=(cr?cr+dl:'')+nc;s.vpr(p,nc);v=1;}q=s.wd.location.search.toLowerCase();q=s.repl(q,'?','&');g=q.indexOf('&'+src.toLow"
+"erCase()+'=');gs=(scp)?q.indexOf('&'+scp.toLowerCase()+'='):-1;if(g>-1){s.vpr(p,cr);v=1;}else if(gs>-1){v=0;s.vpr(tv,'SearchCenter Visitors');}if(!s.c_w(c,cr,t)){s.c_w(c,cr,0);}if(!s.c_r(c)){v=0;}r"
+"eturn v>=1;");s.vpr=new Function("vs","v","if(typeof(v)!='undefined'){var s=this; eval('s.'+vs+'=\"'+v+'\"')}");s.handlePPVevents=new Function("",""
+"if(!s.getPPVid)return;var dh=Math.max(Math.max(s.d.body.scrollHeigh"
+"t,s.d.documentElement.scrollHeight),Math.max(s.d.body.offsetHeight,"
+"s.d.documentElement.offsetHeight),Math.max(s.d.body.clientHeight,s."
+"d.documentElement.clientHeight)),vph=s.wd.innerHeight||(s.d.documen"
+"tElement.clientHeight||s.d.body.clientHeight),st=s.wd.pageYOffset||"
+"(s.wd.document.documentElement.scrollTop||s.wd.document.body.scroll"
+"Top),vh=st+vph,pv=Math.min(Math.round(vh/dh*100),100),c=s.c_r('s_pp"
+"v'),a=(c.indexOf(',')>-1)?c.split(',',4):[],id=(a.length>0)?(a[0]):"
+"escape(s.getPPVid),cv=(a.length>1)?parseInt(a[1]):(0),p0=(a.length>"
+"2)?parseInt(a[2]):(pv),cy=(a.length>3)?parseInt(a[3]):(0),cn=(pv>0)"
+"?(id+','+((pv>cv)?pv:cv)+','+p0+','+((vh>cy)?vh:cy)):'';s.c_w('s_pp"
+"v',cn);");s.getPercentPageViewed=new Function("pid",""
+"pid=pid?pid:'-';var s=this,ist=!s.getPPVid?true:false;if(typeof(s.l"
+"inkType)!='undefined'&&s.linkType!='e')return'';var v=s.c_r('s_ppv'"
+"),a=(v.indexOf(',')>-1)?v.split(',',4):[];if(a.length<4){for(var i="
+"3;i>0;i--){a[i]=(i<a.length)?(a[i-1]):('');}a[0]='';}a[0]=unescape("
+"a[0]);s.getPPVpid=pid;s.c_w('s_ppv',escape(pid));if(ist){s.getPPVid"
+"=(pid)?(pid):(s.pageName?s.pageName:document.location.href);s.c_w('"
+"s_ppv',escape(s.getPPVid));if(s.wd.addEventListener){s.wd.addEventL"
+"istener('load',s.handlePPVevents,false);s.wd.addEventListener('scro"
+"ll',s.handlePPVevents,false);s.wd.addEventListener('resize',s.handl"
+"ePPVevents,false);}else if(s.wd.attachEvent){s.wd.attachEvent('onlo"
+"ad',s.handlePPVevents);s.wd.attachEvent('onscroll',s.handlePPVevent"
+"s);s.wd.attachEvent('onresize',s.handlePPVevents);}}return(pid!='-'"
+")?(a):(a[1]);");s.getPreviousValue=new Function("v","c","el",""
+"var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el"
+"){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i"
+"){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t)"
+":s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?"
+"s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");s.apl=new Function("l","v","d","u",""
+"var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a."
+"length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas"
+"e()));}}if(!m)l=l?l+d+v:v;return l");s.repl=new Function("x","o","n",""
+"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x."
+"substring(i+o.length);i=x.indexOf(o,i+l)}return x");s.split=new Function("l","d",""
+"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"
+"++]=l.substring(0,i);l=l.substring(i+d.length);}return a");s.getQueryParam=new Function("p","d","u","h",""
+"var s=this,v='',i,j,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.loca"
+"tion);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0"
+"?p.length:i;t=s.p_gpv(p.substring(0,i),u+'',h);if(t){t=t.indexOf('#"
+"')>-1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substrin"
+"g(i==p.length?i:i+1)}return v");s.p_gpv=new Function("k","u","h",""
+"var s=this,v='',q;j=h==1?'#':'?';i=u.indexOf(j);if(k&&i>-1){q=u.sub"
+"string(i+1);v=s.pt(q,'&','p_gvf',k)}return v");s.p_gvf=new Function("t","k",""
+"if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'T"
+"rue':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s."
+"epa(v)}return''");s.channelManager=new Function("a","b","c","d","e","f","g",""
+"var s=this,h=new Date,i=0,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E"
+",F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;U=s.getQueryParam?1:0;V=s.repl?1"
+":0;h.setTime(h.getTime()+1800000);if(e){i=1;if(s.c_r(e))i=0;if(!s.c"
+"_w(e,1,h))s.c_w(e,1,0);if(!s.c_r(e))i=0;if(f&&s.c_r('s_tbm'+f))i=0;"
+"}j=s.referrer?s.referrer:document.referrer;j=decodeURIComponent(j.t"
+"oLowerCase());if(!j)k=1;else {l=j.indexOf('?')>-1?j.indexOf('?'):j."
+"length;m=j.substring(0,l);n=j.split('/');n=n[2].split('?');o=n[0].t"
+"oLowerCase();p=s.linkInternalFilters.toLowerCase();p=p.split(',');f"
+"or(q=0;q<p.length;q++){r=o.indexOf(p[q])==-1?'':j;if(r)break;}}if(!"
+"r&&!k){t=j;u=v=o;w='Other Natural Referrers';x=s.seList+'>'+s._extr"
+"aSearchEngines;if(d==1){m=V?s.repl(m,'oogle','%'):s.replace(m,'oogl"
+"e','%');m=V?s.repl(m,'ahoo','^'):s.replace(m,'ahoo','^');j=V?s.repl"
+"(j,'as_q','*'):s.replace(j,'as_q','*');}y=x.split('>');for(z=0;z<y."
+"length;z++){A=y[z];A=A.split('|');B=A[0].split(',');for(C=0;C<B.len"
+"gth;C++){D=m.indexOf(B[C]);if(D>-1){if(A[2])E=v=A[2];else E=o;if(d="
+"=1){E=V?s.repl(E,'#',' - '):s.replace(E,'#',' - ');j=V?s.repl(j,'*'"
+",'as_q'):s.replace(j,'*','as_q');E=V?s.repl(E,'^','ahoo'):s.replace"
+"(E,'^','ahoo');E=V?s.repl(E,'%','oogle'):s.replace(E,'%','oogle');}"
+"F=A[1].split(',');for(G=0;G<F.length;G++){if(j.indexOf(F[G]+'=')>-1"
+"||j.indexOf('https://www.google.')==0||j.indexOf('http://r.search.y"
+"ahoo.com')==0)H=1;I=U?s.getQueryParam(F[G],'',j).toLowerCase():s.Ut"
+"il.getQueryParam(F[G],j).toLowerCase();if(H||I)break;}}if(H||I)brea"
+"k;}if(H||I)break;}}if(!r||g!='1'){J=a.split(',');for(var q in J){if"
+"(J.hasOwnProperty(q)){if(U?s.getQueryParam(J[q]):s.Util.getQueryPar"
+"am(J[q])){T=T?T+b+(U?s.getQueryParam(J[q]):s.Util.getQueryParam(J[q"
+"])):(U?s.getQueryParam(J[q]):s.Util.getQueryParam(J[q]));}}}if(T){v"
+"=T;if(E)w='Paid Search';else w='Unknown Paid Channel';}if(!T&&E&&H)"
+"{v=E;w='Natural Search';}}if(i&&k&&!T)t=u=v=w='Typed/Bookmarked';J="
+"s._channelDomain;if(J&&o&&!r){K=J.split('>');for(L=0;L<K.length;L++"
+"){M=K[L]?K[L].split('|'):'';N=M[1]?M[1].split(','):'';O=N.length;fo"
+"r(P=0;P<O;P++){Q=N[P].toLowerCase();R=('/'+o).indexOf(Q);if(R>-1){w"
+"=M[0];break;}}if(R>-1)break;}}J=s._channelParameter;if(J){K=J.split"
+"('>');for(L=0;L<K.length;L++){M=K[L]?K[L].split('|'):'';N=M[1]?M[1]"
+".split(','):'';O=N.length;for(P=0;P<O;P++){R=U?s.getQueryParam(N[P]"
+"):s.Util.getQueryParam(N[P]);if(R){w=M[0];break;}}if(R)break;}}J=s."
+"_channelPattern;if(J){K=J.split('>');for(L=0;L<K.length;L++){M=K[L]"
+"?K[L].split('|'):'';N=M[1]?M[1].split(','):'';O=N.length;for(P=0;P<"
+"O;P++){Q=N[P].toLowerCase();R=T?T.toLowerCase():'';S=R.indexOf(Q);i"
+"f(S==0){w=M[0];break;}}if(S==0)break;}}S=w?T+u+w+I:'';c=c?c:'c_m';i"
+"f(c!='0')S=s.getValOnce(S,c,0);if(S){s._campaignID=T?T:'n/a';s._ref"
+"errer=t?t:'n/a';s._referringDomain=u?u:'n/a';s._campaign=v?v:'n/a';"
+"s._channel=w?w:'n/a';s._partner=E?E:'n/a';s._keywords=H?I?I:'keywor"
+"d unavailable':'n/a';if(f&&w!='typed/bookmarked'){h.setTime(h.getTi"
+"me()+f*86400000);s.c_w('s_tbm'+f,1,h);}}else s._campaignID=s._refer"
+"rer=s._referringDomain=s._campaign=s._channel=s._partner=s._keyword"
+"s='';");s.seList="google.,googlesyndication.com,.googleadservices.com|q,as_q|"
+"Google>bing.com|q|Bing>yahoo.com,yahoo.co.jp|p,va|Yahoo!>ask.jp,ask"
+".co|q,ask|Ask>search.aol.,suche.aolsvc.de|q,query|AOL>altavista.co,"
+"altavista.de|q,r|AltaVista>.mywebsearch.com|searchfor|MyWebSearch>w"
+"ebcrawler.com|q|WebCrawler>wow.com|q|Wow>infospace.com|q|InfoSpace>"
+"blekko.com|q|Blekko>dogpile.com|q|DogPile>alhea.com|q|Alhea>goduckg"
+"o.com|q|GoDuckGo>info.com|qkw|Info.com>contenko.com|q|Contenko>baid"
+"u.com|word,wd|Baidu>daum.net,search.daum.net|q|Daum>icqit.com|q|icq"
+">myway.com|searchfor|MyWay.com>naver.com,search.naver.com|query|Nav"
+"er>netscape.com|query,search|Netscape Search>reference.com|q|Refere"
+"nce.com>seznam|w|Seznam.cz>abcsok.no|q|Startsiden>tiscali.it,www.ti"
+"scali.co.uk|key,query|Tiscali>virgilio.it|qs|Virgilio>yandex|text|Y"
+"andex.ru>optimum.net|q|Optimum Search>search.earthlink.net|q|Earthl"
+"ink>search.comcast.net|q|Comcast>libero.it|query|libero.it>excite.c"
+"o|search|Excite>mail.ru|q|Mail.ru>isearch.avg.com|q|AVG>msn.com|q|M"
+"SN>seznam.cz|q|seznam.cz>so.com|q|so.com>ixquick.com|query|ixquick."
+"com>sogou.com|query|sogou.com>360.cn|q|360.cn";s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv",""
+"var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var"
+" ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.l"
+"ength;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}i"
+"f(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape("
+"v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array()"
+";if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=ar"
+"ry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry"
+"[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+"
+"5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.len"
+"gth-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date("
+").getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new"
+" Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td."
+"getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0"
+"]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',"
+"front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{deli"
+"m:dl});if(ce)s.c_w(cn,'');return r;");s.join=new Function("v","p",""
+"var s=this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back"
+":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0"
+";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el"
+"se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");s.getValOnce=new Function("v","c","e",""
+"var s=this,a=new Date,v=v?v:v='',c=c?c:c='s_gvo',e=e?e:0,k=s.c_r(c"
+");if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return"
+" v==k?'':v");s.setupFormAnalysis=new Function(""
+"var s=this;if(!s.fa){s.fa=new Object;var f=s.fa;f.ol=s.wd.onload;s."
+"wd.onload=s.faol;f.uc=s.useCommerce;f.vu=s.varUsed;f.vl=f.uc?s.even"
+"tList:'';f.tfl=s.trackFormList;f.fl=s.formList;f.va=new Array('',''"
+",'','')}");s.sendFormEvent=new Function("t","pn","fn","en",""
+"var s=this,f=s.fa;t=t=='s'?t:'e';f.va[0]=pn;f.va[1]=fn;f.va[3]=t=='"
+"s'?'Success':en;s.fasl(t);f.va[1]='';f.va[3]='';");s.faol=new Function("e",""
+"var s=s_c_il["+s._in+"],f=s.fa,r=true,fo,fn,i,en,t,tf;if(!e)e=s.wd."
+"event;f.os=new Array;if(f.ol)r=f.ol(e);if(s.d.forms&&s.d.forms.leng"
+"th>0){for(i=s.d.forms.length-1;i>=0;i--){fo=s.d.forms[i];fn=fo.name"
+";tf=f.tfl&&s.pt(f.fl,',','ee',fn)||!f.tfl&&!s.pt(f.fl,',','ee',fn);"
+"if(tf){f.os[fn]=fo.onsubmit;fo.onsubmit=s.faos;f.va[1]=fn;f.va[3]='"
+"No Data Entered';for(en=0;en<fo.elements.length;en++){el=fo.element"
+"s[en];t=el.type;if(t&&t.toUpperCase){t=t.toUpperCase();var md=el.on"
+"mousedown,kd=el.onkeydown,omd=md?md.toString():'',okd=kd?kd.toStrin"
+"g():'';if(omd.indexOf('.fam(')<0&&okd.indexOf('.fam(')<0){el.s_famd"
+"=md;el.s_fakd=kd;el.onmousedown=s.fam;el.onkeydown=s.fam}}}}}f.ul=s"
+".wd.onunload;s.wd.onunload=s.fasl;}return r;");s.faos=new Function("e",""
+"var s=s_c_il["+s._in+"],f=s.fa,su;if(!e)e=s.wd.event;if(f.vu){s[f.v"
+"u]='';f.va[1]='';f.va[3]='';}su=f.os[this.name];return su?su(e):tru"
+"e;");s.fasl=new Function("e",""
+"var s=s_c_il["+s._in+"],f=s.fa,a=f.va,l=s.wd.location,ip=s.trackPag"
+"eName,p=s.pageName;if(a[1]!=''&&a[3]!=''){a[0]=!p&&ip?l.host+l.path"
+"name:a[0]?a[0]:p;if(!f.uc&&a[3]!='No Data Entered'){if(e=='e')a[2]="
+"'Error';else if(e=='s')a[2]='Success';else a[2]='Abandon'}else a[2]"
+"='';var tp=ip?a[0]+':':'',t3=e!='s'?':('+a[3]+')':'',ym=!f.uc&&a[3]"
+"!='No Data Entered'?tp+a[1]+':'+a[2]+t3:tp+a[1]+t3,ltv=s.linkTrackV"
+"ars,lte=s.linkTrackEvents,up=s.usePlugins;if(f.uc){s.linkTrackVars="
+"ltv=='None'?f.vu+',events':ltv+',events,'+f.vu;s.linkTrackEvents=lt"
+"e=='None'?f.vl:lte+','+f.vl;f.cnt=-1;if(e=='e')s.events=s.pt(f.vl,'"
+",','fage',2);else if(e=='s')s.events=s.pt(f.vl,',','fage',1);else s"
+".events=s.pt(f.vl,',','fage',0)}else{s.linkTrackVars=ltv=='None'?f."
+"vu:ltv+','+f.vu}s[f.vu]=ym;s.usePlugins=false;var faLink=new Object"
+"();faLink.href='#';s.tl(faLink,'o','Form Analysis');s[f.vu]='';s.us"
+"ePlugins=up}return f.ul&&e!='e'&&e!='s'?f.ul(e):true;");s.fam=new Function("e",""
+"var s=s_c_il["+s._in+"],f=s.fa;if(!e) e=s.wd.event;var o=s.trackLas"
+"tChanged,et=e.type.toUpperCase(),t=this.type.toUpperCase(),fn=this."
+"form.name,en=this.name,sc=false;if(document.layers){kp=e.which;b=e."
+"which}else{kp=e.keyCode;b=e.button}et=et=='MOUSEDOWN'?1:et=='KEYDOW"
+"N'?2:et;if(f.ce!=en||f.cf!=fn){if(et==1&&b!=2&&'BUTTONSUBMITRESETIM"
+"AGERADIOCHECKBOXSELECT-ONEFILE'.indexOf(t)>-1){f.va[1]=fn;f.va[3]=e"
+"n;sc=true}else if(et==1&&b==2&&'TEXTAREAPASSWORDFILE'.indexOf(t)>-1"
+"){f.va[1]=fn;f.va[3]=en;sc=true}else if(et==2&&kp!=9&&kp!=13){f.va["
+"1]=fn;f.va[3]=en;sc=true}if(sc){nface=en;nfacf=fn}}if(et==1&&this.s"
+"_famd)return this.s_famd(e);if(et==2&&this.s_fakd)return this.s_fak"
+"d(e);");s.ee=new Function("e","n",""
+"return n&&n.toLowerCase?e.toLowerCase()==n.toLowerCase():false;");s.fage=new Function("e","a",""
+"var s=this,f=s.fa,x=f.cnt;x=x?x+1:1;f.cnt=x;return x==a?e:'';");s.getVisitStart=new Function("c",""
+"var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);if(s.c_r(c"
+")){v=0}if(!s.c_w(c,1,t)){s.c_w(c,1,0)}if(!s.c_r(c)){v=0}return v;");s.getTimeToComplete=new Function("v","cn","e",""
+"var s=this,d=new Date,x=d,k;if(!s.ttcr){e=e?e:0;if(v=='start'||v=='"
+"stop')s.ttcr=1;x.setTime(x.getTime()+e*86400000);if(v=='start'){s.c"
+"_w(cn,d.getTime(),e?x:0);return '';}if(v=='stop'){k=s.c_r(cn);if(!s"
+".c_w(cn,'',d)||!k)return '';v=(d.getTime()-k)/1000;var td=86400,th="
+"3600,tm=60,r=5,u,un;if(v>td){u=td;un='days';}else if(v>th){u=th;un="
+"'hours';}else if(v>tm){r=2;u=tm;un='minutes';}else{r=.2;u=1;un='sec"
+"onds';}v=v*r/u;return (Math.round(v)/r)+' '+un;}}return '';");s.trackTNT=new Function("v","p","b",""
+"var s=this,n='s_tnt',p=p?p:n,v=v?v:n,r='',pm=false,b=b?b:true;if(s."
+"getQueryParam){pm=s.getQueryParam(p);}if(pm){r+=(pm+',');}if(s.wd[v"
+"]!=undefined){r+=s.wd[v];}if(b){s.wd[v]='';}return r;");s.getDaysSinceLastVisit=new Function("c",""
+"var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),hour=60*60*1000,day=24*hour,f1,ds1,ds2,hs1,hs2,nd;"
+"e.setTime(ct+3*365*day);"
+"es.setTime(ct+30*60*1000);"
+"f0='Cookies Not Supported';"
+"f1='First Visit';"
+"ds1=' days';"
+"ds2='1 day';"
+"hs1=' hours';"
+"hs2='1 hour';"
+"cval=s.c_r(c);"
+"if(cval.length==0){"
+"  s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);"
+"  }"
+"else{"
+"  var d=ct-cval;"
+"  if(d>30*60*1000){"
+"      if(d>2*day-1) {"
+"          nd=Math.floor(d/day);"
+"          s.c_w(c,ct,e);s.c_w(c+'_s',nd+ds1,es);"
+"          }"
+"      else if(d>day-1 && d<2*day){"
+"          s.c_w(c,ct,e);s.c_w(c+'_s',ds2,es);"
+"          }"
+"      else if(d>2*hour-1 && d<day){"
+"          nd=Math.floor(d/hour);"
+"          s.c_w(c,ct,e);s.c_w(c+'_s',nd+hs1,es);"
+"          }"
+"      else if(d<2*hour){"
+"          s.c_w(c,ct,e);s.c_w(c+'_s',hs2,es);"
+"          }"
+"      }"
+"  else{"
+"      s.c_w(c,ct,e);"
+"      cval_ss=s.c_r(c+'_s');"
+"      s.c_w(c+'_s',cval_ss,es);"
+"      }"
+"  }"
+"cval_s=s.c_r(c+'_s');"
+"if(cval_s.length==0) return f0;"
+"else return cval_s;");s.loadModule("Survey")
var s_sv_dynamic_root="survey.122.2o7.net/survey/dynamic"
var s_sv_gather_root="survey.122.2o7.net/survey/gather"
s.m_Survey_c="var m=s.m_i(\"Survey\");m.launch=function(i,e,c,o,f){this._boot();var m=this,g=window.s_sv_globals||{},l,j;if(g.unloaded||m._blocked())return 0;i=i&&i.constructor&&i.constructor==Array?"
+"i:[i];l=g.manualTriggers;for(j=0;j<i.length;++j)l[l.length]={l:m._suites,i:i[j],e:e||0,c:c||0,o:o||0,f:f||0};m._execute();return 1;};m.version = 10001;m._t=function(){this._boot();var m=this,s=m.s,"
+"g=window.s_sv_globals||{},l,impr,i,k,impr={};if(m._blocked())return;for(i=0;i<s.va_t.length;i++){k=s.va_t[i];if(s[k]) impr[k]=s[k];}impr[\"l\"]=m._suites;impr[\"n\"]=impr[\"pageName\"]||\"\";impr["
+"\"u\"]=impr[\"pageURL\"]||\"\";impr[\"c\"]=impr[\"campaign\"]||\"\";impr[\"r\"]=impr[\"referrer\"]||\"\";l=g.pageImpressions;if(l.length > 4) l[l.length - 4]=null;l[l.length]=impr;m._execute();};m."
+"_rr=function(){var g=window.s_sv_globals||{},f=g.onScQueueEmpty||0;if(f)f();};m._blocked=function(){var m=this,g=window.s_sv_globals||{};return !m._booted||g.stop||!g.pending&&!g.triggerRequested;}"
+";m._execute=function(){if(s_sv_globals.execute)setTimeout(\"s_sv_globals.execute();\",0);};m._boot=function(){var m=this,s=m.s,w=window,g,c,d=s.dc,e=s.visitorNamespace,n=navigator.appName.toLowerCa"
+"se(),a=navigator.userAgent,v=navigator.appVersion,h,i,j,k,l,b;if(w.s_sv_globals)return;if(!((b=v.match(/AppleWebKit\\/([0-9]+)/))?521<b[1]:n==\"netscape\"?a.match(/gecko\\//i):(b=a.match(/opera[ \\"
+"/]?([0-9]+).[0-9]+/i))?7<b[1]:n==\"microsoft internet explorer\"&&!v.match(/macintosh/i)&&(b=v.match(/msie ([0-9]+).([0-9]+)/i))&&(5<b[1]||b[1]==5&&4<b[2])))return;g=w.s_sv_globals={};g.module=m;g."
+"pending=0;g.incomingLists=[];g.pageImpressions=[];g.manualTriggers=[];e=\"survey\";c=g.config={};m._param(c,\"dynamic_root\",(e?e+\".\":\"\")+d+\".2o7.net/survey/dynamic\");m._param(c,\"gather_root"
+"\",(e?e+\".\":\"\")+d+\".2o7.net/survey/gather\");g.url=location.protocol+\"//\"+c.dynamic_root;g.gatherUrl=location.protocol+\"//\"+c.gather_root;g.dataCenter=d;g.onListLoaded=new Function(\"r\","
+"\"b\",\"d\",\"i\",\"l\",\"s_sv_globals.module._loaded(r,b,d,i,l);\");m._suites=(m.suites||s.un).toLowerCase().split(\",\");l=m._suites;b={};for(j=0;j<l.length;++j){i=l[j];if(i&&!b[i]){h=i.length;fo"
+"r(k=0;k<i.length;++k)h=(h&0x03ffffff)<<5^h>>26^i.charCodeAt(k);b[i]={url:g.url+\"/suites/\"+(h%251+100)+\"/\"+encodeURIComponent(i.replace(/\\|/,\"||\").replace(/\\//,\"|-\"))};++g.pending;}}g.suit"
+"es=b;setTimeout(\"s_sv_globals.module._load();\",0);m._booted=1;};m._param=function(c,n,v){var p=\"s_sv_\",w=window,u=\"undefined\";if(typeof c[n]==u)c[n]=typeof w[p+n]==u?v:w[p+n];};m._load=functi"
+"on(){var m=this,g=s_sv_globals,q=g.suites,r,i,n=\"s_sv_sid\",b=m.s.c_r(n);if(!b){b=parseInt((new Date()).getTime()*Math.random());m.s.c_w(n,b);}for(i in q){r=q[i];if(!r.requested){r.requested=1;m._"
+"script(r.url+\"/list.js?\"+b);}}};m._loaded=function(r,b,d,i,l){var m=this,g=s_sv_globals,n=g.incomingLists;--g.pending;if(!g.commonRevision){g.bulkRevision=b;g.commonRevision=r;g.commonUrl=g.url+"
+"\"/common/\"+b;}else if(g.commonRevision!=r)return;if(!l.length)return;n[n.length]={r:i,l:l};if(g.execute)g.execute();else if(!g.triggerRequested){g.triggerRequested=1;m._script(g.commonUrl+\"/trig"
+"ger.js\");}};m._script=function(u){var d=document,e=d.createElement(\"script\");e.type=\"text/javascript\";e.src=u;d.getElementsByTagName(\"head\")[0].appendChild(e);};if(m.onLoad)m.onLoad(s,m)";s.m_i("Survey");s.trackingServer="omni.istockphoto.com"
s.trackingServerSecure="somni.istockphoto.com"
s.visitorMigrationKey="4E311E1A"
s.visitorMigrationServer="gettyimages.122.2o7.net"
s.visitorMigrationServerSecure="gettyimages.122.2o7.net"
s.m_Integrate_c="var m=s.m_i('Integrate');m.add=function(n,o){var m=this,p;if(!o)o='s_Integrate_'+n;if(!m.s.wd[o])m.s.wd[o]=new Object;m[n]=new Object;p=m[n];p._n=n;p._m=m;p._c=0;p._d=0;p.disable=0;p"
+".get=m.get;p.delay=m.delay;p.ready=m.ready;p.beacon=m.beacon;p.script=m.script;m.l[m.l.length]=n};m._g=function(t){var m=this,s=m.s,i,p,f=(t?'use':'set')+'Vars',tcf;for(i=0;i<m.l.length;i++){p=m[m."
+"l[i]];if(p&&!p.disable&&p[f]){if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','p','f','var e;try{p[f](s,p)}catch(e){}');tcf(s,p,f)}else p[f](s,p)}}};m._t=function(){this._g(1)};m._fu=func"
+"tion(p,u){var m=this,s=m.s,v,x,y,z,tm=new Date;if(u.toLowerCase().substring(0,4) != 'http')u='http://'+u;if(s.ssl)u=s.rep(u,'http:','https:');p.RAND=Math&&Math.random?Math.floor(Math.random()*10000"
+"000000000):tm.getTime();p.RAND+=Math.floor(tm.getTime()/10800000)%10;x=0;while(x>=0){x=u.indexOf('[',x);if(x>=0){y=u.indexOf(']',x);if(y>x){z=u.substring(x+1,y);if(z.length>2&&z.substring(0,2)=='s."
+"'){v=s[z.substring(2)];if(!v)v=''}else{v=''+p[z];if(!(v==p[z]||parseFloat(v)==p[z]))z=0}if(z)u=u.substring(0,x)+s.rep(escape(v),'+','%2B')+u.substring(y+1);x=y}}}return u};m.get=function(u,v){var p"
+"=this,m=p._m;if(!p.disable){if(!v)v='s_'+m._in+'_Integrate_'+p._n+'_get_'+p._c;p._c++;p.VAR=v;p._d++;m.s.loadModule('Integrate:'+v,m._fu(p,u),0,1,p._n)}};m.delay=function(){var p=this;if(p._d<=0)p."
+"_d=1};m.ready=function(){var p=this,m=p._m;p._d=0;if(!p.disable)m.s.dlt()};m._d=function(){var m=this,i,p;for(i=0;i<m.l.length;i++){p=m[m.l[i]];if(p&&!p.disable&&p._d>0)return 1}return 0};m._x=func"
+"tion(d,n){var p=this[n],x;if(!p.disable){for(x in d)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))p[x]=d[x];p._d--}};m.beacon=function(u){var p=this,m=p._m,s=m.s,imn='s_i_'+m._in+'_Integ"
+"rate_'+p._n+'_'+p._c,im;if(!p.disable&&s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){p._c++;im=s.wd[imn]=new Image;im.src=m._fu(p,u)}};m.script=function(u){var p=this,m=p._m;"
+"if(!p.disable)m.s.loadModule(0,m._fu(p,u),0,1)};m.l=new Array;if(m.onLoad)m.onLoad(s,m)";s.m_i("Integrate");var s_code='',s_objectID;function s_gi(un,pg,ss){var c="s.version='H.27.4';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(s.rep(m,\"\\\\\",\"\\\\"
+"\\\\\"),\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}retur"
+"n y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;ret"
+"urn 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent("
+"x);for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.su"
+"bstring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+"
+"','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00"
+"'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unesc"
+"ape(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r"
+";z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring("
+"0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf'"
+",f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visi"
+"bilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){whil"
+"e(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\")"
+";s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.li"
+"nkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostnam"
+"e,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'"
+".','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<"
+"0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-6"
+"0);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':''"
+");return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i"
+";l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tc"
+"f=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s"
+".wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0"
+";return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return "
+"s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)fo"
+"r(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.tagContainerMarker='';s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingS"
+"erverSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+s._in+'_'+un,im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net"
+"';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobi"
+"le?'5.1':'1')+'/'+s.version+(s.tcn?'T':'')+(s.tagContainerMarker?\"-\"+s.tagContainerMarker:\"\")+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv"
+">=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+"
+"'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;fo"
+"r(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.alt=\"\";im.s_l=0;im.onload=im.onerror=new Function('e','this.s_l=1;var wd=windo"
+"w,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s."
+"forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_"
+"top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'"
+"};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v)"
+"{var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLo"
+"werCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google'"
+")>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(',"
+"'+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf"
+",vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',"
+"')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk]"
+";if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(ty"
+"peof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else "
+"if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.subs"
+"tring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv="
+"','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[m"
+"n].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x"
+"=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='supplementalDataID')q='sdid';else if(k=='timestamp')q"
+"='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='marketingCloudVisitorID')q='mid';else if(k=='analyticsVisitorID')q='aid';else if(k=='audienceManagerLocatio"
+"nHint')q='aamlh';else if(k=='audienceManagerBlob')q='aamb';else if(k=='authState')q='as';else if(k=='pageURL'){q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k"
+"=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationS"
+"erverSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s"
+".em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='"
+"cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';els"
+"e if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else"
+" if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q"
+"='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=="
+"'deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if("
+"b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase("
+"):'';var qi=h.indexOf('?'),hi=h.indexOf('#');if(qi>=0){if(hi>=0&&hi<qi)qi=hi;}else qi=hi;h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=functi"
+"on(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFi"
+"lters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.inde"
+"xOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.ln"
+"k=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var s=this;if(s.bct&&s.bce)s.bct.dispatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct."
+"href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&e.s_fe)return;var s=s_c_il['+s._in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForce"
+"dLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"click\",s.bc,true);s.bbc=s.useForcedLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcEl"
+"ement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLinkTracking&&e.target){a=e.target;while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a"
+".parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h.indexOf(\"javascript:\")==0)h=0;t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent"
+"\"||(s.wd.name&&t==s.wd.name))){tcf=new Function(\"s\",\"var x;try{n=s.d.createEvent(\\\\\"MouseEvents\\\\\")}catch(x){n=new MouseEvent}return n\");n=tcf(s);if(n){tcf=new Function(\"n\",\"e\",\"var"
+" x;try{n.initMouseEvent(\\\\\"click\\\\\",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(x){n"
+"=0}return n\");n=tcf(n,e);if(n){n.s_fe=1;e.stopPropagation();if (e.stopImmediatePropagation) {e.stopImmediatePropagation();}e.preventDefault();s.bct=e.target;s.bce=n}}}}}');s.oh=function(o){var s=t"
+"his,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.p"
+"rotocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagN"
+"ame;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t"
+"=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toL"
+"owerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if"
+"(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.inde"
+"xOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=funct"
+"ion(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s"
+".epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s"
+".sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]"
+"]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var "
+"s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf("
+"\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclic"
+"k',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&((s.n.userAgent.indexOf('WebKit')>=0&&s.d.createEvent)||(s.n.userAgent.indexOf('Firefox/2')>=0&&s.wd.MouseEvent))){s.bbc=1;s.useForcedLinkTrackin"
+"g=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,false)}else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s"
+"_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m)"
+"{if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}retu"
+"rn 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m"
+";l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s"
+".un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl"
+"=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e'"
+",'_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m["
+"l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))r"
+"eturn;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).ind"
+"exOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s."
+"m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).i"
+"ndexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.l"
+"oadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}"
+"else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._i"
+"n+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250"
+";if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/"
+"javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,"
+"u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){v"
+"ar s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=fu"
+"nction(vo,onlySet){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!onlySet&&!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i"
+"=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s"
+".maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.d"
+"lt()};s._waitingForMarketingCloudVisitorID = false;s._doneWaitingForMarketingCloudVisitorID = false;s._marketingCloudVisitorIDCallback=function(marketingCloudVisitorID) {var s=this;s.marketingCloud"
+"VisitorID = marketingCloudVisitorID;s._doneWaitingForMarketingCloudVisitorID = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAnalyticsVisitorID = false;s._doneWaitingForAnalyticsVisitorID "
+"= false;s._analyticsVisitorIDCallback=function(analyticsVisitorID) {var s=this;s.analyticsVisitorID = analyticsVisitorID;s._doneWaitingForAnalyticsVisitorID = true;s._callbackWhenReadyToTrackCheck("
+");};s._waitingForAudienceManagerLocationHint = false;s._doneWaitingForAudienceManagerLocationHint = false;s._audienceManagerLocationHintCallback=function(audienceManagerLocationHint) {var s=this;s."
+"audienceManagerLocationHint = audienceManagerLocationHint;s._doneWaitingForAudienceManagerLocationHint = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerBlob = false;s._doneWa"
+"itingForAudienceManagerBlob = false;s._audienceManagerBlobCallback=function(audienceManagerBlob) {var s=this;s.audienceManagerBlob = audienceManagerBlob;s._doneWaitingForAudienceManagerBlob = true;"
+"s._callbackWhenReadyToTrackCheck();};s.isReadyToTrack=function() {var s=this,readyToTrack = true,visitor = s.visitor;if ((visitor) && (visitor.isAllowed())) {if ((!s._waitingForMarketingCloudVisito"
+"rID) && (!s.marketingCloudVisitorID) && (visitor.getMarketingCloudVisitorID)) {s._waitingForMarketingCloudVisitorID = true;s.marketingCloudVisitorID = visitor.getMarketingCloudVisitorID([s,s._marke"
+"tingCloudVisitorIDCallback]);if (s.marketingCloudVisitorID) {s._doneWaitingForMarketingCloudVisitorID = true;}}if ((!s._waitingForAnalyticsVisitorID) && (!s.analyticsVisitorID) && (visitor.getAnaly"
+"ticsVisitorID)) {s._waitingForAnalyticsVisitorID = true;s.analyticsVisitorID = visitor.getAnalyticsVisitorID([s,s._analyticsVisitorIDCallback]);if (s.analyticsVisitorID) {s._doneWaitingForAnalytics"
+"VisitorID = true;}}if ((!s._waitingForAudienceManagerLocationHint) && (!s.audienceManagerLocationHint) && (visitor.getAudienceManagerLocationHint)) {s._waitingForAudienceManagerLocationHint = true;"
+"s.audienceManagerLocationHint = visitor.getAudienceManagerLocationHint([s,s._audienceManagerLocationHintCallback]);if (s.audienceManagerLocationHint) {s._doneWaitingForAudienceManagerLocationHint ="
+" true;}}if ((!s._waitingForAudienceManagerBlob) && (!s.audienceManagerBlob) && (visitor.getAudienceManagerBlob)) {s._waitingForAudienceManagerBlob = true;s.audienceManagerBlob = visitor.getAudience"
+"ManagerBlob([s,s._audienceManagerBlobCallback]);if (s.audienceManagerBlob) {s._doneWaitingForAudienceManagerBlob = true;}}if (((s._waitingForMarketingCloudVisitorID)     && (!s._doneWaitingForMarke"
+"tingCloudVisitorID)     && (!s.marketingCloudVisitorID)) ||((s._waitingForAnalyticsVisitorID)          && (!s._doneWaitingForAnalyticsVisitorID)          && (!s.analyticsVisitorID)) ||((s._waitingF"
+"orAudienceManagerLocationHint) && (!s._doneWaitingForAudienceManagerLocationHint) && (!s.audienceManagerLocationHint)) ||((s._waitingForAudienceManagerBlob)         && (!s._doneWaitingForAudienceMa"
+"nagerBlob)         && (!s.audienceManagerBlob))) {readyToTrack = false;}}return readyToTrack;};s._callbackWhenReadyToTrackQueue = null;s._callbackWhenReadyToTrackInterval = 0;s.callbackWhenReadyToT"
+"rack=function(callbackThis,callback,args) {var s=this,callbackInfo;callbackInfo = {};callbackInfo.callbackThis = callbackThis;callbackInfo.callback     = callback;callbackInfo.args         = args;i"
+"f (s._callbackWhenReadyToTrackQueue == null) {s._callbackWhenReadyToTrackQueue = [];}s._callbackWhenReadyToTrackQueue.push(callbackInfo);if (s._callbackWhenReadyToTrackInterval == 0) {s._callbackWh"
+"enReadyToTrackInterval = setInterval(s._callbackWhenReadyToTrackCheck,100);}};s._callbackWhenReadyToTrackCheck=new Function('var s=s_c_il['+s._in+'],callbackNum,callbackInfo;if (s.isReadyToTrack())"
+" {if (s._callbackWhenReadyToTrackInterval) {clearInterval(s._callbackWhenReadyToTrackInterval);s._callbackWhenReadyToTrackInterval = 0;}if (s._callbackWhenReadyToTrackQueue != null) {while (s._call"
+"backWhenReadyToTrackQueue.length > 0) {callbackInfo = s._callbackWhenReadyToTrackQueue.shift();callbackInfo.callback.apply(callbackInfo.callbackThis,callbackInfo.args);}}}');s._handleNotReadyToTrac"
+"k=function(variableOverrides) {var s=this,args,varKey,variableOverridesCopy = null,setVariables = null;if (!s.isReadyToTrack()) {args = [];if (variableOverrides != null) {variableOverridesCopy = {}"
+";for (varKey in variableOverrides) {variableOverridesCopy[varKey] = variableOverrides[varKey];}}setVariables = {};s.vob(setVariables,true);args.push(variableOverridesCopy);args.push(setVariables);s"
+".callbackWhenReadyToTrack(s,s.track,args);return true;}return false;};s.gfid=function(){var s=this,d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexO"
+"f('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j=Math.floor(Math.random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));"
+"if(!s.c_w(k,fid,e))fid=0;return fid};s.track=s.t=function(vo,setVariables){var s=this,notReadyToTrack,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),s"
+"ess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '"
+"+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if (s.visitor) {if (s.visitor.getAuthState) {s.authState = s.visitor.getAuthState();}if ((!s.supplementalDataID) && ("
+"s.visitor.getSupplementalDataID)) {s.supplementalDataID = s.visitor.getSupplementalDataID(\"AppMeasurement:\" + s._in,(s.expectSupplementalData ? false : true));}}if(s.mpc('t',arguments))return;s.g"
+"l(s.vl_g);s.uns();s.m_ll();notReadyToTrack = s._handleNotReadyToTrack(vo);if (!notReadyToTrack) {if (setVariables) {s.voa(setVariables);}if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='"
+"',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.to"
+"Precision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j='1.7';if(a.reduce){j='1.8';"
+"if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv"
+">=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.of"
+"fsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return h"
+"p');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30)"
+"{ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectio"
+"nType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if(!s.analyticsVisitorID&&!s.marketingCloudVisitorID)s.fid=s.gfid();if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);"
+"if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s"
+".eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}i"
+"f(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLea"
+"veQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else "
+"trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttribute&&o.getAttribute('data-s-"
+"object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useForcedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.indexOf('s_objectID'),oce,ocq,ocx"
+";if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb))>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'||ocq)){if(ocq){if(oc.charAt"
+"(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc){o.s_soid=new Function('s',"
+"'var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+"
+"(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m("
+"'t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);}s.abort=0;s.supplementalDataID=s.pageURLRest=s.lnk=s.e"
+"o=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){var s=t"
+"his;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagC"
+"ontainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];"
+"y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='functi"
+"on'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply"
+"(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagNa"
+"me){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('"
+"Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parse"
+"Float(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;"
+"if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='supplementalDat"
+"aID,timestamp,dynamicVariablePrefix,visitorID,marketingCloudVisitorID,analyticsVisitorID,audienceManagerLocationHint,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,"
+"ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteL"
+"ightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIn"
+"crementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,audienceManagerBlob,authState,linkName,linkType';var n;for(n="
+"1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,re"
+"solution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trac"
+"kingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccoun"
+"tMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,light"
+"TrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=functi"
+"on(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",w=window,l=w.s_c_il,n=navigator,u=n.userAgent,v=n.appVersion,e=v.indexOf('MSIE '),m=u.indexOf('Netscape6/'),a,i,j,x,s;if(un){un=un.toLowerCase();if(l)for(j=0;j<2;j++)for(i=0;i<l.length;i++){s=l[i];x=s._c;if((!x||x=='s_c'||(j>0&&x=='s_l'))&&(s.oun==un||(s.fs&&s.sa&&s.fs(s.oun,un)))){if(s.sa)s.sa(un);if(x=='s_c')return s}else s=0}}w.s_an='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';w.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.subst"
+"ring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");w.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");w.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");w.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d"
+"=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn("
+"x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");w.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");w.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':"
+"a");w.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){i"
+"f(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")"
+"'+c.substring(e+1);s=c.indexOf('=function(')}return c;");c=s_d(c);if(e>0){a=parseInt(i=v.substring(e+5));if(a>3)a=parseFloat(i)}else if(m>0)a=parseFloat(u.substring(m+10));else a=parseFloat(v);if(a<5||v.indexOf('Opera')>=0||u.indexOf('Opera')>=0)c=s_ft(c);if(!s){s=new Object;if(!w.s_c_in){w.s_c_il=new Array;w.s_c_in=0}s._il=w.s_c_il;s._in=w.s_c_in;s._il[s._in]=s;w.s_c_in++;}s._c='s_c';(new Function("s","un","pg","ss",c))(s,un,pg,ss);return s}
function s_giqf(){var w=window,q=w.s_giq,i,t,s;if(q)for(i=0;i<q.length;i++){t=q[i];s=s_gi(t.oun);s.sa(t.un);s.setTagContainer(t.tagContainerName)}w.s_giq=0}s_giqf()
//-->
</script>
<script type="text/javascript">
    //<!--
jQuery(window).on("load", function(e) { z.pageName = s.pageName; z.t(); });
window.tracking_data = {"credits_remaining":"","currency_code":null,"customer_tier":"","customer_type":"New","dateof_purchase":null,"discount_code":null,"order_id":0,"order_total_local":null,"order_total_usd":null,"page_name":"iStock|Product|PhotoFCP","restock_segment":"","site_id":"istock","sub_sku":null,"duration":null};
        window.onload = function () {
            lpTag.isDom = true;
            lpTag.start();
        }

        var lpTag = lpTag || {}; lpTag.vars = lpTag.vars  || []; lpTag.dbs = lpTag.dbs || [];
        lpTag.section = 'default'; 
        
        var arrLPvars = [ 
            { scope:'page', name:'unit', value:'istock-na-sales' },
            { scope:'session', name:'language', value:'english' }
        ];
        lpTag.vars.push(arrLPvars);

        var sendVarsOnClick = function () {
            lpTag.vars.push([ {scope:'session', name:'CTA', value:'true'} ]);
            lpTag.vars.send();
        };
        
        var sendVarsOnSecondVisit = function () {
            lpTag.vars.send();
        };    //-->
</script>
<script type="text/javascript"  style="display:none">
<!--

var visitor=new Visitor("69AA402551915FB10A490D4D@AdobeOrg");visitor.trackingServer="gettyimages.122.2o7.net";visitor.trackingServerSecure="gettyimages.102.122.2o7.net";function Visitor(k,q){if(!k)throw"Visitor requires Adobe Marketing Cloud Org ID";var a=this;a.version="1.2.1";var g=window;g.s_c_in||(g.s_c_il=[],g.s_c_in=0);a._c="Visitor";a._il=g.s_c_il;a._in=g.s_c_in;a._il[a._in]=a;g.s_c_in++;var o=g.document,i=g.O;i||(i=null);var j=g.P;j||(j=!0);var r=g.N;r||(r=!1);a.C=function(a){var d=0,b,e;if(a)for(b=0;b<a.length;b++)e=a.charCodeAt(b),d=(d<<5)-d+e,d&=d;return d};a.m=function(a){var d="0123456789",b="",e="",f,h=8,g=10,i=10;if(1==a){d+="ABCDEF";for(a=0;16>a;a++)f=Math.floor(Math.random()*h),b+=d.substring(f,f+1),f=Math.floor(Math.random()*h),e+=d.substring(f,f+1),h=16;return b+"-"+e}for(a=0;19>a;a++)f=Math.floor(Math.random()*g),b+=d.substring(f,f+1),g=0==a&&9==f?3:10,f=Math.floor(Math.random()*i),e+=d.substring(f,f+1),i=0==a&&9==f?3:10;return b+e};a.I=function(){var a;!a&&g.location&&(a=g.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a="";else{var d=a.split("."),b=d.length-1,e=b-1;1<b&&2>=d[b].length&&0>",am,aq,ax,cc,cf,cg,ch,cv,cz,de,dj,dk,eu,fm,fo,ga,gd,gf,gl,gm,gq,gs,gw,hm,li,lu,md,mh,mp,mq,ms,ne,nl,nu,pm,si,sk,sm,sr,su,tc,td,tf,tg,tk,tv,va,vg,vu,wf,yt,".indexOf(","+
d[b]+",")&&e--;if(0<e)for(a="";b>=e;)a=d[b]+(a?".":"")+a,b--}return a};a.cookieRead=function(a){var a=encodeURIComponent(a),d=(";"+o.cookie).split(" ").join(";"),b=d.indexOf(";"+a+"="),e=0>b?b:d.indexOf(";",b+1);return 0>b?"":decodeURIComponent(d.substring(b+2+a.length,0>e?d.length:e))};a.cookieWrite=function(c,d,b){var e=a.cookieLifetime,f,d=""+d,e=e?(""+e).toUpperCase():"";b&&"SESSION"!=e&&"NONE"!=e?(f=""!=d?parseInt(e?e:0):-60)?(b=new Date,b.setTime(b.getTime()+1E3*f)):1==b&&(b=new Date,f=b.getYear(),b.setYear(f+2+(1900>f?1900:0))):b=0;return c&&"NONE"!=e?(o.cookie=encodeURIComponent(c)+"="+encodeURIComponent(d)+"; path=/;"+(b?" expires="+b.toGMTString()+";":"")+(a.l?" domain="+a.l+";":""),a.cookieRead(c)==d):0};a.d=i;a.w=function(a,d){try{"function"==typeof a?a.apply(g,d):a[1].apply(a[0],d)}catch(b){}};a.L=function(c,d){d&&(a.d==i&&(a.d={}),void 0==a.d[c]&&(a.d[c]=[]),a.d[c].push(d))};a.k=function(c,d){if(a.d!=i){var b=a.d[c];if(b)for(;0<b.length;)a.w(b.shift(),d)}};a.g=i;a.J=function(c,d,b){!d&&b&&b();var e=o.getElementsByTagName("HEAD")[0],f=o.createElement("SCRIPT");f.type="text/javascript";f.setAttribute("async","async");f.src=d;e.firstChild?e.insertBefore(f,e.firstChild):e.appendChild(f);b&&(a.g==i&&(a.g={}),a.g[c]=setTimeout(b,a.loadTimeout))};a.H=function(c){a.g!=i&&a.g[c]&&(clearTimeout(a.g[c]),a.g[c]=0)};a.D=r;a.F=r;a.isAllowed=function(){if(!a.D&&(a.D=j,a.cookieRead(a.cookieName)||a.cookieWrite(a.cookieName,"T",1)))a.F=j;return a.F};a.a=i;a.c=i;var t=a.V;t||(t="MC");var l=a.X;l||(l="MCMID");var u=a.W;u||(u="MCCIDH");var v=a.T;v||(v="A");var m=a.Q;m||(m="MCAID");var w=a.U;w||(w="AAM");var p=a.S;p||(p="MCAAMLH");var n=a.R;n||(n="MCAAMB");var s=a.Y;s||(s="NONE");a.t=0;a.B=function(){if(!a.t){var c=a.version;a.customerIDMappingServer&&(c+="|"+a.customerIDMappingServer);a.customerIDMappingServerSecure&&(c+="|"+a.customerIDMappingServerSecure);a.audienceManagerServer&&(c+="|"+a.audienceManagerServer);a.audienceManagerServerSecure&&(c+="|"+a.audienceManagerServerSecure);if(a.audienceManagerCustomerIDDPIDs)for(var d in a.audienceManagerCustomerIDDPIDs)!Object.prototype[d]&&a.audienceManagerCustomerIDDPIDs[d]&&(c+=d+"="+a.audienceManagerCustomerIDDPIDs[d]);a.t=a.C(c)}return a.t};a.G=r;a.i=function(){if(!a.G){a.G=j;var c=a.B(),d=r,b=a.cookieRead(a.cookieName),e,f,h,g=new Date;a.a==i&&(a.a={});if(b&&"T"!=b){b=b.split("|");b[0].match(/^[\-0-9]+$/)&&(parseInt(b[0])!=c&&(d=j),b.shift());1==b.length%2&&b.pop();for(c=0;c<b.length;c+=2)e=b[c].split("-"),f=e[0],h=b[c+1],e=1<e.length?parseInt(e[1]):0,d&&(f==u&&(h=""),0<e&&(e=g.getTime()/1E3-60)),f&&h&&(a.f(f,h,1),0<e&&(a.a["expire"+
f]=e,g.getTime()>=1E3*e&&(a.c||(a.c={}),a.c[f]=j)))}if(!a.b(m)&&(b=a.cookieRead("s_vi")))b=b.split("|"),1<b.length&&0<=b[0].indexOf("v1")&&(h=b[1],c=h.indexOf("["),0<=c&&(h=h.substring(0,c)),h&&h.match(/^[0-9a-fA-F\-]+$/)&&a.f(m,h))}};a.M=function(){var c=a.B(),d,b;for(d in a.a)!Object.prototype[d]&&a.a[d]&&"expire"!=d.substring(0,6)&&(b=a.a[d],c+=(c?"|":"")+d+(a.a["expire"+d]?"-"+a.a["expire"+d]:"")+"|"+b);a.cookieWrite(a.cookieName,c,1)};a.b=function(c,d){return a.a!=i&&(d||!a.c||!a.c[c])?a.a[c]:i};a.f=function(c,d,b){a.a==i&&(a.a={});a.a[c]=d;b||a.M()};a.s=function(c,d){var b=new Date;b.setTime(b.getTime()+1E3*d);a.a==i&&(a.a={});a.a["expire"+c]=Math.floor(b.getTime()/1E3);0>d&&(a.c||(a.c={}),a.c[c]=j)};a.A=function(a){if(a&&("object"==typeof a&&(a=a.d_mid?a.d_mid:a.visitorID?a.visitorID:a.id?a.id:a.uuid?a.uuid:""+a),a&&(a=a.toUpperCase(),"NOTARGET"==a&&(a=s)),!a||a!=s&&!a.match(/^[0-9a-fA-F\-]+$/)))a="";return a};a.o=function(c,d){a.H(c);if(c==t||c==w){if(c==t){var b=a.b(l);b||((b=a.A(d))||(b=a.m()),a.f(l,b));if(!b||b==s)b="";a.k(l,[b])}if("object"==typeof d){b=604800;void 0!=d.id_sync_ttl&&d.id_sync_ttl&&(b=parseInt(d.id_sync_ttl));var e=a.b(p);e||((e=d.d_region)||(e=d.dcs_region),e&&(a.s(p,b),a.f(p,e)));e||(e="");a.k(p,[e]);e=a.b(n);if(d.d_blob||d.blob)(e=d.d_blob)||(e=d.blob),a.s(n,b),a.f(n,e);e||(e="");a.k(n,[e])}}else if(c==v){b=a.b(m);b||(b=a.A(d))&&a.f(m,b);if(!b||b==s)b="";a.k(m,[b])}};a.h=i;a.n=function(c,d,b,e){var f="",h;if(a.isAllowed()&&(a.i(),f=a.b(c),!f&&(c==l?h=t:c==p||c==n?h=w:c==m&&(h=v),h))){if(a.h==i||void 0==a.h[h])a.h==i&&(a.h={}),a.h[h]=j,a.J(h,d,function(){if(!a.b(c)){var b="";c==l&&(b=a.m());a.o(h,b)}});a.L(c,b);return""}if((c==l||c==m)&&f==s)f="";b&&e&&a.w(b,[f]);return f};a._setMarketingCloudFields=function(c){a.i();a.o(t,c)};a.setMarketingCloudVisitorID=function(c){a._setMarketingCloudFields(c)};a.getMarketingCloudVisitorID=function(c,d){return a.isAllowed()?a.n(l,a.q("_setMarketingCloudFields"),c,d):""};a._mapCustomerIDsDone=function(c){c&&"success"==c.status&&a.f(u,a.r)};a.K=function(){a._mapCustomerIDsDone({status:"success"})};a.e={};a.z=r;a.r="";a.setCustomerIDs=function(c){a.e=c;if(a.isAllowed()){a.i();var c=a.b(u),d="",b,e;c||(c=0);for(b in a.e)e=a.e[b],!Object.prototype[b]&&e&&(d+=(d?"|":"")+b+"|"+e);a.r=a.C(d);a.r!=c&&(a.z=j,a.K())}};a.getCustomerIDs=function(){return a.e};a._setAnalyticsFields=function(c){a.i();a.o(v,c)};a.setAnalyticsVisitorID=function(c){a._setAnalyticsFields(c)};a.getAnalyticsVisitorID=function(c,d){if(a.isAllowed()){var b=a.getMarketingCloudVisitorID(function(){a.getAnalyticsVisitorID(c,j)});if(b){var e=a.trackingServer,f="";a.loadSSL&&a.trackingServerSecure&&(e=a.trackingServerSecure);e&&(f="http"+(a.loadSSL?"s":"")+"://"+e+"/id?mid="+b+"&callback=s_c_il%5B"+a._in+"%5D._setAnalyticsFields");return a.n(m,f,c,d)}}return""};a._setAudienceManagerFields=function(c){a.i();a.o(w,c)};a.q=function(c){var d=a.audienceManagerServer,b="",e=a.b(l),f=a.b(n,j),h="",g,i;a.loadSSL&&a.audienceManagerServerSecure&&(d=a.audienceManagerServerSecure);if(d){if(a.e&&a.audienceManagerCustomerIDDPIDs)for(g in a.e)Object.prototype[g]||(b=a.e[g],i=a.audienceManagerCustomerIDDPIDs[g],b&&i&&(h+=(h?"%01":"&d_cid=")+i+"%01"+encodeURIComponent(b)));c||(c="_setAudienceManagerFields");b="http"+(a.loadSSL?"s":"")+"://"+d+"/id?d_rtbd=json&d_ver=2&d_orgid="+encodeURIComponent(a.marketingCloudOrgID)+(e?"&d_mid="+e:"")+(f?"&d_blob="+encodeURIComponent(f):"")+h+"&d_cb=s_c_il%5B"+a._in+"%5D."+c}return b};a.getAudienceManagerLocationHint=function(c,d){return a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerLocationHint(c,j)})?a.n(p,a.q(),c,d):""};a.getAudienceManagerBlob=function(c,d){if(a.isAllowed()&&a.getMarketingCloudVisitorID(function(){a.getAudienceManagerBlob(c,j)})){var b=a.q();a.z&&a.s(n,-1);return a.n(n,b,c,d)}return""};a.j="";a.p={};a.u="";a.v={};a.getSupplementalDataID=function(c,d){!a.j&&!d&&(a.j=a.m(1));var b=a.j;a.u&&!a.v[c]?(b=a.u,a.v[c]=j):b&&(a.p[c]&&(a.u=a.j,a.v=a.p,a.j=b=!d?a.m(1):"",a.p={}),b&&(a.p[c]=j));return b};0>k.indexOf("@")&&(k+="@AdobeOrg");a.marketingCloudOrgID=k;a.namespace=q;a.cookieName="AMCV_"+k;a.l=a.I();a.l==g.location.hostname&&(a.l="");if(q){var x="AMCV_"+q,z=a.cookieRead(a.cookieName),y=a.cookieRead(x);!z&&y&&(a.cookieWrite(a.cookieName,y,1),a.cookieWrite(x,"",-60))}a.loadSSL=0<=g.location.protocol.toLowerCase().indexOf("https");a.loadTimeout=500;a.marketingCloudServer=a.audienceManagerServer="dpm.demdex.net";a.customerIDMappingServer="map.adobecrs.com"}
Visitor.getInstance=function(k,q){var a,g=window.s_c_il,o;0>k.indexOf("@")&&(k+="@AdobeOrg");if(g)for(o=0;o<g.length;o++)if((a=g[o])&&"Visitor"==a._c&&(a.marketingCloudOrgID==k||q&&a.namespace==q))return a;return new Visitor(k,q)};
//-->
</script>
<script type="text/javascript"  style="display:none">
<!--

z=new AppMeasurement();z.debugTracking=true;z.account="gettyistock-crossdomain";z.trackingServer="gettyimages.122.2o7.net";z.secureTrackingServer="gettyimages.102.122.2o7.net"
z.visitorNamespace="gettyimages";z.visitor=Visitor.getInstance("69AA402551915FB10A490D4D@AdobeOrg");z.getPreviousValue=new Function("v","c","el",""
+"var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el"
+"){if(z.events){i=z.split(el,',');j=z.split(z.events,',');for(x in i"
+"){for(y in j){if(i[x]==j[y]){if(z.c_r(c)) r=z.c_r(c);v?z.c_w(c,v,t)"
+":z.c_w(c,'no value',t);return r}}}}}else{if(z.c_r(c)) r=z.c_r(c);v?"
+"z.c_w(c,v,t):z.c_w(c,'no value',t);return r}");function s_getLoadTime(){if(!window.s_loadT){var b=new Date().getTime(),o=window.performance?performance.timing:0,a=o?o.requestStart:window.inHeadTS||0;s_loadT=a?Math.round((b-a)/100):''}return s_loadT}
z.handlePPVevents=new Function("",""
+"if(!z.getPPVid)return;var dh=Math.max(Math.max(z.d.body.scrollHeigh"
+"t,z.d.documentElement.scrollHeight),Math.max(z.d.body.offsetHeight,"
+"z.d.documentElement.offsetHeight),Math.max(z.d.body.clientHeight,z."
+"d.documentElement.clientHeight)),vph=z.wd.innerHeight||(z.d.documen"
+"tElement.clientHeight||z.d.body.clientHeight),st=z.wd.pageYOffset||"
+"(z.wd.document.documentElement.scrollTop||z.wd.document.body.scroll"
+"Top),vh=st+vph,pv=Math.min(Math.round(vh/dh*100),100),c=z.c_r('s_pp"
+"v'),a=(c.indexOf(',')>-1)?c.split(',',4):[],id=(a.length>0)?(a[0]):"
+"escape(z.getPPVid),cv=(a.length>1)?parseInt(a[1]):(0),p0=(a.length>"
+"2)?parseInt(a[2]):(pv),cy=(a.length>3)?parseInt(a[3]):(0),cn=(pv>0)"
+"?(id+','+((pv>cv)?pv:cv)+','+p0+','+((vh>cy)?vh:cy)):'';z.c_w('s_pp"
+"v',cn);");z.getPercentPageViewed=new Function("pid",""
+"pid=pid?pid:'-';var s=this,ist=!z.getPPVid?true:false;if(typeof(z.l"
+"inkType)!='undefined'&&z.linkType!='e')return'';var v=z.c_r('s_ppv'"
+"),a=(v.indexOf(',')>-1)?v.split(',',4):[];if(a.length<4){for(var i="
+"3;i>0;i--){a[i]=(i<a.length)?(a[i-1]):('');}a[0]='';}a[0]=unescape("
+"a[0]);z.getPPVpid=pid;z.c_w('s_ppv',escape(pid));if(ist){z.getPPVid"
+"=(pid)?(pid):(z.pageName?z.pageName:document.location.href);z.c_w('"
+"s_ppv',escape(z.getPPVid));if('wd' in z && z.wd.addEventListener){z.wd.addEventL"
+"istener('load',z.handlePPVevents,false);z.wd.addEventListener('scro"
+"ll',z.handlePPVevents,false);z.wd.addEventListener('resize',z.handl"
+"ePPVevents,false);}else if('wd' in z && z.wd.attachEvent){z.wd.attachEvent('onlo"
+"ad',z.handlePPVevents);z.wd.attachEvent('onscroll',z.handlePPVevent"
+"s);z.wd.attachEvent('onresize',z.handlePPVevents);}}return(pid!='-'"
+")?(a):(a[1]);");z.getNewRepeat=new Function("d","cn",""
+"var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:"
+"'s_nr';e.setTime(ct+d*24*60*60*1000);cval=z.c_r(cn);if(cval.length="
+"=0){z.c_w(cn,ct+'-New',e);return'New';}sval=z.split(cval,'-');if(ct"
+"-sval[0]<30*60*1000&&sval[1]=='New'){z.c_w(cn,ct+'-New',e);return'N"
+"ew';}else{z.c_w(cn,ct+'-Repeat',e);return'Repeat';}");z.split=new Function("l","d",""
+"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"
+"++]=l.substring(0,i);l=l.substring(i+d.length);}return a");z.getVisitNum=new Function(""
+"var s=this,e=new Date(),cval,cvisit,ct=e.getTime(),c='s_vnum',c2='s"
+"_invisit';e.setTime(ct+30*24*60*60*1000);cval=z.c_r(c);if(cval){var"
+" i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvis"
+"it=z.c_r(c2);if(cvisit){if(str){e.setTime(ct+30*60*1000);z.c_w(c2,'"
+"true',e);return str;}else return 'unknown visit number';}else{if(st"
+"r){str++;k=cval.substring(0,i);e.setTime(k);z.c_w(c,k+'&vn='+str,e)"
+";e.setTime(ct+30*60*1000);z.c_w(c2,'true',e);return str;}else{z.c_w"
+"(c,ct+30*24*60*60*1000+'&vn=1',e);e.setTime(ct+30*60*1000);z.c_w(c2"
+",'true',e);return 1;}}");z.getPageViewNum=function(){var s=this;var e=new Date();var cval;var ct=e.getTime();var c='gg_pvnum';e.setTime(ct+30*60*1000);cval=Number(z.c_r(c));if(cval){cval++;z.c_w(c,String(cval),e);return cval;}
else{z.c_w(c,'1',e);return 1;}}
z.usePlugins=true
function s_doPlugins(s){z.campaign=z.Util.getQueryParam('esource');z.eVar1=z.campaign;z.eVar2=z.campaign;z.eVar3=z.Util.getQueryParam('isource');z.eVar4=z.eVar3;z.eVar5=z.eVar3;z.eVar6=z.Util.getQueryParam('cdo');z.eVar7=z.Util.getQueryParam('KW');z.prop1=z.getVisitNum();var url=document.URL.valueOf();if(url.indexOf("?")>-1){z.prop2=url.substr(0,url.indexOf("?"));}
else{z.prop2=url;}
z.prop3=z.getPageViewNum();var prevPagename=z.getPreviousValue(z.pageName,"ggcd_c",null);if(prevPagename!="no value")
{z.prop7=prevPagename;}
if(z.prop7&&z.prop7!="no value"){var ppvArray=z.getPercentPageViewed(z.prop7);z.prop4=ppvArray[2];z.prop5=ppvArray[1];}
var adobe_vid=s.c_r("s_vi");if(adobe_vid)
{adobe_vid=adobe_vid.substring(adobe_vid.indexOf("|")+1);adobe_vid=adobe_vid.substring(1,adobe_vid.length-4);z.prop21=adobe_vid;}
if(window.s){if(window.s.prop4){z.prop22=window.s.prop4;}}}
z.doPlugins=s_doPlugins;z.prop6=s_getLoadTime();function AppMeasurement(){var s=this;s.version="1.3";var w=window;if(!w.s_c_in)w.s_c_il=[],w.s_c_in=0;s._il=w.s_c_il;s._in=w.s_c_in;s._il[s._in]=s;w.s_c_in++;s._c="s_c";var k=w.ob;k||(k=null);var m=w,i,n;try{i=m.parent;for(n=m.location;i&&i.location&&n&&""+i.location!=""+n&&m.location&&""+i.location!=""+m.location&&i.location.host==n.host;)m=i,i=m.parent}catch(p){}s.Za=function(s){try{console.log(s)}catch(a){}};s.oa=function(s){return""+parseInt(s)==""+s};s.replace=function(s,a,c){if(!s||s.indexOf(a)<0)return s;return s.split(a).join(c)};s.escape=function(b){var a,c;if(!b)return b;b=encodeURIComponent(b);for(a=0;a<7;a++)c="+~!*()'".substring(a,a+1),b.indexOf(c)>=0&&(b=s.replace(b,c,"%"+c.charCodeAt(0).toString(16).toUpperCase()));return b};s.unescape=function(b){if(!b)return b;b=b.indexOf("+")>=0?s.replace(b,"+"," "):b;try{return decodeURIComponent(b)}catch(a){}return unescape(b)};s.Qa=function(){var b=w.location.hostname,a=s.fpCookieDomainPeriods,c;if(!a)a=s.cookieDomainPeriods;if(b&&!s.ha&&!/^[0-9.]+$/.test(b)&&(a=a?parseInt(a):2,a=a>2?a:2,c=b.lastIndexOf("."),c>=0)){for(;c>=0&&a>1;)c=b.lastIndexOf(".",c-1),a--;s.ha=c>0?b.substring(c):b}return s.ha};s.c_r=s.cookieRead=function(b){b=s.escape(b);var a=" "+s.d.cookie,c=a.indexOf(" "+b+"="),e=c<0?c:a.indexOf(";",c);b=c<0?"":s.unescape(a.substring(c+2+b.length,e<0?a.length:e));return b!="[[B]]"?b:""};s.c_w=s.cookieWrite=function(b,a,c){var e=s.Qa(),d=s.cookieLifetime,f;a=""+a;d=d?(""+d).toUpperCase():"";c&&d!="SESSION"&&d!="NONE"&&((f=a!=""?parseInt(d?d:0):-60)?(c=new Date,c.setTime(c.getTime()+f*1E3)):c==1&&(c=new Date,f=c.getYear(),c.setYear(f+5+(f<1900?1900:0))));if(b&&d!="NONE")return s.d.cookie=b+"="+s.escape(a!=""?a:"[[B]]")+"; path=/;"+(c&&d!="SESSION"?" expires="+c.toGMTString()+";":"")+(e?" domain="+e+";":""),s.cookieRead(b)==a;return 0};s.D=[];s.C=function(b,a,c){if(s.ia)return 0;if(!s.maxDelay)s.maxDelay=250;var e=0,d=(new Date).getTime()+s.maxDelay,f=s.d.mb,g=["webkitvisibilitychange","visibilitychange"];if(!f)f=s.d.nb;if(f&&f=="prerender"){if(!s.R){s.R=1;for(c=0;c<g.length;c++)s.d.addEventListener(g[c],function(){var a=s.d.mb;if(!a)a=s.d.nb;if(a=="visible")s.R=0,s.delayReady()})}e=1;d=0}else c||s.r("_d")&&(e=1);e&&(s.D.push({m:b,a:a,t:d}),s.R||setTimeout(s.delayReady,s.maxDelay));return e};s.delayReady=function(){var b=(new Date).getTime(),a=0,c;for(s.r("_d")&&(a=1);s.D.length>0;){c=s.D.shift();if(a&&!c.t&&c.t>b){s.D.unshift(c);setTimeout(s.delayReady,parseInt(s.maxDelay/2));break}s.ia=1;s[c.m].apply(s,c.a);s.ia=0}};s.setAccount=s.sa=function(b){var a,c;if(!s.C("setAccount",arguments))if(s.account=b,s.allAccounts){a=s.allAccounts.concat(b.split(","));s.allAccounts=[];a.sort();for(c=0;c<a.length;c++)(c==0||a[c-1]!=a[c])&&s.allAccounts.push(a[c])}else s.allAccounts=b.split(",")};s.foreachVar=function(b,a){var c,e,d,f,g="";d=e="";if(s.lightProfileID)c=s.H,(g=s.lightTrackVars)&&(g=","+g+","+s.U.join(",")+",");else{c=s.c;if(s.pe||s.linkType)if(g=s.linkTrackVars,e=s.linkTrackEvents,s.pe&&(d=s.pe.substring(0,1).toUpperCase()+
s.pe.substring(1),s[d]))g=s[d].lb,e=s[d].kb;g&&(g=","+g+","+s.A.join(",")+",");e&&g&&(g+=",events,")}a&&(a=","+a+",");for(e=0;e<c.length;e++)d=c[e],(f=s[d])&&(!g||g.indexOf(","+d+",")>=0)&&(!a||a.indexOf(","+d+",")>=0)&&b(d,f)};s.J=function(b,a,c,e,d){var f="",g,j,w,q,i=0;b=="contextData"&&(b="c");if(a){for(g in a)if(!Object.prototype[g]&&(!d||g.substring(0,d.length)==d)&&a[g]&&(!c||c.indexOf(","+(e?e+".":"")+g+",")>=0)){w=!1;if(i)for(j=0;j<i.length;j++)g.substring(0,i[j].length)==i[j]&&(w=!0);if(!w&&(f==""&&(f+="&"+b+"."),j=a[g],d&&(g=g.substring(d.length)),g.length>0))if(w=g.indexOf("."),w>0)j=g.substring(0,w),w=(d?d:"")+j+".",i||(i=[]),i.push(w),f+=s.J(j,a,c,e,w);else if(typeof j=="boolean"&&(j=j?"true":"false"),j){if(e=="retrieveLightData"&&d.indexOf(".contextData.")<0)switch(w=g.substring(0,4),q=g.substring(4),g){case"transactionID":g="xact";break;case"channel":g="ch";break;case"campaign":g="v0";break;default:s.oa(q)&&(w=="prop"?g="c"+q:w=="eVar"?g="v"+q:w=="list"?g="l"+q:w=="hier"&&(g="h"+q,j=j.substring(0,255)))}f+="&"+s.escape(g)+"="+s.escape(j)}}f!=""&&(f+="&."+b)}return f};s.Sa=function(){var b="",a,c,e,d,f,g,j,w,i="",k="",m=c="";if(s.lightProfileID)a=s.H,(i=s.lightTrackVars)&&(i=","+i+","+s.U.join(",")+",");else{a=s.c;if(s.pe||s.linkType)if(i=s.linkTrackVars,k=s.linkTrackEvents,s.pe&&(c=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1),s[c]))i=s[c].lb,k=s[c].kb;i&&(i=","+i+","+s.A.join(",")+",");k&&(k=","+k+",",i&&(i+=",events,"));s.events2&&(m+=(m!=""?",":"")+s.events2)}s.AudienceManagement&&s.AudienceManagement.isReady()&&(b+=s.J("d",s.AudienceManagement.getEventCallConfigParams()));for(c=0;c<a.length;c++){d=a[c];f=s[d];e=d.substring(0,4);g=d.substring(4);!f&&d=="events"&&m&&(f=m,m="");if(f&&(!i||i.indexOf(","+d+",")>=0)){switch(d){case"supplementalDataID":d="sdid";break;case"timestamp":d="ts";break;case"dynamicVariablePrefix":d="D";break;case"visitorID":d="vid";break;case"marketingCloudVisitorID":d="mid";break;case"analyticsVisitorID":d="aid";break;case"audienceManagerLocationHint":d="aamlh";break;case"audienceManagerBlob":d="aamb";break;case"pageURL":d="g";if(f.length>255)s.pageURLRest=f.substring(255),f=f.substring(0,255);break;case"pageURLRest":d="-g";break;case"referrer":d="r";break;case"vmk":case"visitorMigrationKey":d="vmt";break;case"visitorMigrationServer":d="vmf";s.ssl&&s.visitorMigrationServerSecure&&(f="");break;case"visitorMigrationServerSecure":d="vmf";!s.ssl&&s.visitorMigrationServer&&(f="");break;case"charSet":d="ce";break;case"visitorNamespace":d="ns";break;case"cookieDomainPeriods":d="cdp";break;case"cookieLifetime":d="cl";break;case"variableProvider":d="vvp";break;case"currencyCode":d="cc";break;case"channel":d="ch";break;case"transactionID":d="xact";break;case"campaign":d="v0";break;case"resolution":d="s";break;case"colorDepth":d="c";break;case"javascriptVersion":d="j";break;case"javaEnabled":d="v";break;case"cookiesEnabled":d="k";break;case"browserWidth":d="bw";break;case"browserHeight":d="bh";break;case"connectionType":d="ct";break;case"homepage":d="hp";break;case"plugins":d="p";break;case"events":m&&(f+=(f!=""?",":"")+m);if(k){g=f.split(",");f="";for(e=0;e<g.length;e++)j=g[e],w=j.indexOf("="),w>=0&&(j=j.substring(0,w)),w=j.indexOf(":"),w>=0&&(j=j.substring(0,w)),k.indexOf(","+j+",")>=0&&(f+=(f?",":"")+g[e])}break;case"events2":f="";break;case"contextData":b+=s.J("c",s[d],i,d);f="";break;case"lightProfileID":d="mtp";break;case"lightStoreForSeconds":d="mtss";s.lightProfileID||(f="");break;case"lightIncrementBy":d="mti";s.lightProfileID||(f="");break;case"retrieveLightProfiles":d="mtsr";break;case"deleteLightProfiles":d="mtsd";break;case"retrieveLightData":s.retrieveLightProfiles&&(b+=s.J("mts",s[d],i,d));f="";break;default:s.oa(g)&&(e=="prop"?d="c"+g:e=="eVar"?d="v"+g:e=="list"?d="l"+g:e=="hier"&&(d="h"+g,f=f.substring(0,255)))}f&&(b+="&"+d+"="+(d.substring(0,3)!="pev"?s.escape(f):f))}d=="pev3"&&s.g&&(b+=s.g)}return b};s.v=function(s){var a=s.tagName;if(""+s.sb!="undefined"||""+s.eb!="undefined"&&(""+s.eb).toUpperCase()!="HTML")return"";a=a&&a.toUpperCase?a.toUpperCase():"";a=="SHAPE"&&(a="");a&&((a=="INPUT"||a=="BUTTON")&&s.type&&s.type.toUpperCase?a=s.type.toUpperCase():!a&&s.href&&(a="A"));return a};s.ka=function(s){var a=s.href?s.href:"",c,e,d;c=a.indexOf(":");e=a.indexOf("?");d=a.indexOf("/");if(a&&(c<0||e>=0&&c>e||d>=0&&c>d))e=s.protocol&&s.protocol.length>1?s.protocol:l.protocol?l.protocol:"",c=l.pathname.lastIndexOf("/"),a=(e?e+"//":"")+(s.host?s.host:l.host?l.host:"")+(h.substring(0,1)!="/"?l.pathname.substring(0,c<0?0:c)+"/":"")+a;return a};s.F=function(b){var a=s.v(b),c,e,d="",f=0;if(a){c=b.protocol;e=b.onclick;if(b.href&&(a=="A"||a=="AREA")&&(!e||!c||c.toLowerCase().indexOf("javascript")<0))d=s.ka(b);else if(e)d=s.replace(s.replace(s.replace(s.replace(""+e,"\r",""),"\n",""),"\t","")," ",""),f=2;else if(a=="INPUT"||a=="SUBMIT"){if(b.value)d=b.value;else if(b.innerText)d=b.innerText;else if(b.textContent)d=b.textContent;f=3}else if(b.src&&a=="IMAGE")d=b.src;if(d)return{id:d.substring(0,100),type:f}}return 0};s.pb=function(b){for(var a=s.v(b),c=s.F(b);b&&!c&&a!="BODY";)if(b=b.parentElement?b.parentElement:b.parentNode)a=s.v(b),c=s.F(b);if(!c||a=="BODY")b=0;if(b&&(a=b.onclick?""+b.onclick:"",a.indexOf(".tl(")>=0||a.indexOf(".trackLink(")>=0))b=0;return b};s.bb=function(){var b,a,c=s.linkObject,e=s.linkType,d=s.linkURL,f,g;s.V=1;if(!c)s.V=0,c=s.j;if(c){b=s.v(c);for(a=s.F(c);c&&!a&&b!="BODY";)if(c=c.parentElement?c.parentElement:c.parentNode)b=s.v(c),a=s.F(c);if(!a||b=="BODY")c=0;if(c){var j=c.onclick?""+
c.onclick:"";if(j.indexOf(".tl(")>=0||j.indexOf(".trackLink(")>=0)c=0}}else s.V=1;!d&&c&&(d=s.ka(c));d&&!s.linkLeaveQueryString&&(f=d.indexOf("?"),f>=0&&(d=d.substring(0,f)));if(!e&&d){var i=0,k=0,m;if(s.trackDownloadLinks&&s.linkDownloadFileTypes){j=d.toLowerCase();f=j.indexOf("?");g=j.indexOf("#");f>=0?g>=0&&g<f&&(f=g):f=g;f>=0&&(j=j.substring(0,f));f=s.linkDownloadFileTypes.toLowerCase().split(",");for(g=0;g<f.length;g++)(m=f[g])&&j.substring(j.length-(m.length+1))=="."+m&&(e="d")}if(s.trackExternalLinks&&!e&&(j=d.toLowerCase(),s.na(j))){if(!s.linkInternalFilters)s.linkInternalFilters=w.location.hostname;f=0;s.linkExternalFilters?(f=s.linkExternalFilters.toLowerCase().split(","),i=1):s.linkInternalFilters&&(f=s.linkInternalFilters.toLowerCase().split(","));if(f){for(g=0;g<f.length;g++)m=f[g],j.indexOf(m)>=0&&(k=1);k?i&&(e="e"):i||(e="e")}}}s.linkObject=c;s.linkURL=d;s.linkType=e;if(s.trackClickMap||s.trackInlineStats)if(s.g="",c){e=s.pageName;d=1;c=c.sourceIndex;if(!e)e=s.pageURL,d=0;if(w.s_objectID)a.id=w.s_objectID,c=a.type=1;if(e&&a&&a.id&&b)s.g="&pid="+s.escape(e.substring(0,255))+(d?"&pidt="+d:"")+"&oid="+s.escape(a.id.substring(0,100))+(a.type?"&oidt="+a.type:"")+"&ot="+b+(c?"&oi="+c:"")}};s.Ta=function(){var b=s.V,a=s.linkType,c=s.linkURL,e=s.linkName;if(a&&(c||e))a=a.toLowerCase(),a!="d"&&a!="e"&&(a="o"),s.pe="lnk_"+a,s.pev1=c?s.escape(c):"",s.pev2=e?s.escape(e):"",b=1;s.abort&&(b=0);if(s.trackClickMap||s.trackInlineStats){a={};c=0;var d=s.cookieRead("s_sq"),f=d?d.split("&"):0,g,j,w;d=0;if(f)for(g=0;g<f.length;g++)j=f[g].split("="),e=s.unescape(j[0]).split(","),j=s.unescape(j[1]),a[j]=e;e=s.account.split(",");if(b||s.g){b&&!s.g&&(d=1);for(j in a)if(!Object.prototype[j])for(g=0;g<e.length;g++){d&&(w=a[j].join(","),w==s.account&&(s.g+=(j.charAt(0)!="&"?"&":"")+j,a[j]=[],c=1));for(f=0;f<a[j].length;f++)w=a[j][f],w==e[g]&&(d&&(s.g+="&u="+s.escape(w)+(j.charAt(0)!="&"?"&":"")+j+"&u=0"),a[j].splice(f,1),c=1)}b||(c=1);if(c){d="";g=2;!b&&s.g&&(d=s.escape(e.join(","))+"="+s.escape(s.g),g=1);for(j in a)!Object.prototype[j]&&g>0&&a[j].length>0&&(d+=(d?"&":"")+s.escape(a[j].join(","))+"="+s.escape(j),g--);s.cookieWrite("s_sq",d)}}}return b};s.Ua=function(){if(!s.jb){var b=new Date,a=m.location,c,e,d,f=d=e=c="",g="",w="",i="1.2",k=s.cookieWrite("s_cc","true",0)?"Y":"N",n="",p="",o=0;if(b.setUTCDate&&(i="1.3",o.toPrecision&&(i="1.5",c=[],c.forEach))){i="1.6";d=0;e={};try{d=new Iterator(e),d.next&&(i="1.7",c.reduce&&(i="1.8",i.trim&&(i="1.8.1",Date.parse&&(i="1.8.2",Object.create&&(i="1.8.5")))))}catch(r){}}c=screen.width+"x"+screen.height;d=navigator.javaEnabled()?"Y":"N";e=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=s.w.innerWidth?s.w.innerWidth:s.d.documentElement.offsetWidth;w=s.w.innerHeight?s.w.innerHeight:s.d.documentElement.offsetHeight;b=navigator.plugins;try{s.b.addBehavior("#default#homePage"),n=s.b.qb(a)?"Y":"N"}catch(t){}try{s.b.addBehavior("#default#clientCaps"),p=s.b.connectionType}catch(u){}if(b)for(;o<b.length&&o<30;){if(a=b[o].name)a=a.substring(0,100)+";",f.indexOf(a)<0&&(f+=a);o++}s.resolution=c;s.colorDepth=e;s.javascriptVersion=i;s.javaEnabled=d;s.cookiesEnabled=k;s.browserWidth=g;s.browserHeight=w;s.connectionType=p;s.homepage=n;s.plugins=f;s.jb=1}};s.I={};s.loadModule=function(b,a){var c=s.I[b];if(!c){c=w["AppMeasurement_Module_"+b]?new w["AppMeasurement_Module_"+b](s):{};s.I[b]=s[b]=c;c.Ba=function(){return c.Ea};c.Fa=function(a){if(c.Ea=a)s[b+"_onLoad"]=a,s.C(b+"_onLoad",[s,c],1)||a(s,c)};try{Object.defineProperty?Object.defineProperty(c,"onLoad",{get:c.Ba,set:c.Fa}):c._olc=1}catch(e){c._olc=1}}a&&(s[b+"_onLoad"]=a,s.C(b+"_onLoad",[s,c],1)||a(s,c))};s.r=function(b){var a,c;for(a in s.I)if(!Object.prototype[a]&&(c=s.I[a])){if(c._olc&&c.onLoad)c._olc=0,c.onLoad(s,c);if(c[b]&&c[b]())return 1}return 0};s.Xa=function(){var b=Math.floor(Math.random()*1E13),a=s.visitorSampling,c=s.visitorSamplingGroup;c="s_vsn_"+(s.visitorNamespace?s.visitorNamespace:s.account)+(c?"_"+c:"");var e=s.cookieRead(c);if(a){e&&(e=parseInt(e));if(!e){if(!s.cookieWrite(c,b))return 0;e=b}if(e%1E4>v)return 0}return 1};s.K=function(b,a){var c,e,d,f,g,w;for(c=0;c<2;c++){e=c>0?s.ea:s.c;for(d=0;d<e.length;d++)if(f=e[d],(g=b[f])||b["!"+f]){if(!a&&(f=="contextData"||f=="retrieveLightData")&&s[f])for(w in s[f])g[w]||(g[w]=s[f][w]);s[f]=g}}};s.wa=function(b,a){var c,e,d,f;for(c=0;c<2;c++){e=c>0?s.ea:s.c;for(d=0;d<e.length;d++)f=e[d],b[f]=s[f],!a&&!b[f]&&(b["!"+f]=1)}};s.Pa=function(s){var a,c,e,d,f,g=0,w,i="",k="";if(s&&s.length>255&&(a=""+s,c=a.indexOf("?"),c>0&&(w=a.substring(c+1),a=a.substring(0,c),d=a.toLowerCase(),e=0,d.substring(0,7)=="http://"?e+=7:d.substring(0,8)=="https://"&&(e+=8),c=d.indexOf("/",e),c>0&&(d=d.substring(e,c),f=a.substring(c),a=a.substring(0,c),d.indexOf("google")>=0?g=",q,ie,start,search_key,word,kw,cd,":d.indexOf("yahoo.co")>=0&&(g=",p,ei,"),g&&w)))){if((s=w.split("&"))&&s.length>1){for(e=0;e<s.length;e++)d=s[e],c=d.indexOf("="),c>0&&g.indexOf(","+d.substring(0,c)+",")>=0?i+=(i?"&":"")+d:k+=(k?"&":"")+d;i&&k?w=i+"&"+k:k=""}c=253-(w.length-k.length)-a.length;s=a+(c>0?f.substring(0,c):"")+"?"+w}return s};s.O=!1;s.da=!1;s.Da=function(b){s.marketingCloudVisitorID=b;s.da=!0;s.l()};s.L=!1;s.aa=!1;s.ya=function(b){s.analyticsVisitorID=b;s.aa=!0;s.l()};s.N=!1;s.ca=!1;s.Aa=function(b){s.audienceManagerLocationHint=b;s.ca=!0;s.l()};s.M=!1;s.ba=!1;s.za=function(b){s.audienceManagerBlob=b;s.ba=!0;s.l()};s.isReadyToTrack=function(){var b=!0,a=s.visitor;if(a&&a.isAllowed()){if(!s.O&&!s.marketingCloudVisitorID&&a.getMarketingCloudVisitorID&&(s.marketingCloudVisitorID=a.getMarketingCloudVisitorID([s,s.Da]),!s.marketingCloudVisitorID))s.O=!0;if(!s.L&&!s.analyticsVisitorID&&a.getAnalyticsVisitorID&&(s.analyticsVisitorID=a.getAnalyticsVisitorID([s,s.ya]),!s.analyticsVisitorID))s.L=!0;if(!s.N&&!s.audienceManagerLocationHint&&a.getAudienceManagerLocationHint&&(s.audienceManagerLocationHint=a.getAudienceManagerLocationHint([s,s.Aa]),!s.audienceManagerLocationHint))s.N=!0;if(!s.M&&!s.audienceManagerBlob&&a.getAudienceManagerBlob&&(s.audienceManagerBlob=a.getAudienceManagerBlob([s,s.za]),!s.audienceManagerBlob))s.M=!0;if(s.O&&!s.da&&!s.marketingCloudVisitorID||s.L&&!s.aa&&!s.analyticsVisitorID||s.N&&!s.ca&&!s.audienceManagerLocationHint||s.M&&!s.ba&&!s.audienceManagerBlob)b=!1}return b};s.k=k;s.o=0;s.callbackWhenReadyToTrack=function(b,a,c){var e;e={};e.Ja=b;e.Ia=a;e.Ga=c;if(s.k==k)s.k=[];s.k.push(e);if(s.o==0)s.o=setInterval(s.l,100)};s.l=function(){var b;if(s.isReadyToTrack()){if(s.o)clearInterval(s.o),s.o=0;if(s.k!=k)for(;s.k.length>0;)b=s.k.shift(),b.Ia.apply(b.Ja,b.Ga)}};s.Ca=function(b){var a,c,e=k,d=k;if(!s.isReadyToTrack()){a=[];if(b!=k)for(c in e={},b)e[c]=b[c];d={};s.wa(d,!0);a.push(e);a.push(d);s.callbackWhenReadyToTrack(s,s.track,a);return!0}return!1};s.Ra=function(){var b=s.cookieRead("s_fid"),a="",c="",e;e=8;var d=4;if(!b||b.indexOf("-")<0){for(b=0;b<16;b++)e=Math.floor(Math.random()*e),a+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*d),c+="0123456789ABCDEF".substring(e,e+1),e=d=16;b=a+"-"+c}s.cookieWrite("s_fid",b,1)||(b=0);return b};s.t=s.track=function(b,a){var c,e=new Date,d="s"+Math.floor(e.getTime()/108E5)%10+Math.floor(Math.random()*1E13),f=e.getYear();f="t="+s.escape(e.getDate()+"/"+e.getMonth()+"/"+(f<1900?f+1900:f)+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+" "+e.getDay()+" "+e.getTimezoneOffset());if(!s.supplementalDataID&&s.visitor&&s.visitor.getSupplementalDataID)s.supplementalDataID=s.visitor.getSupplementalDataID("AppMeasurement:"+s._in,s.expectSupplementalData?!1:!0);s.r("_s");if(!s.C("track",arguments)){if(!s.Ca(b)){a&&s.K(a);b&&(c={},s.wa(c,0),s.K(b));if(s.Xa()){if(!s.analyticsVisitorID&&!s.marketingCloudVisitorID)s.fid=s.Ra();s.bb();s.usePlugins&&s.doPlugins&&s.doPlugins(s);if(s.account){if(!s.abort){if(s.trackOffline&&!s.timestamp)s.timestamp=Math.floor(e.getTime()/1E3);e=w.location;if(!s.pageURL)s.pageURL=e.href?e.href:e;if(!s.referrer&&!s.xa)s.referrer=m.document.referrer,s.xa=1;s.referrer=s.Pa(s.referrer);s.r("_g")}if(s.Ta()&&!s.abort)s.Ua(),f+=s.Sa(),s.ab(d,f),s.r("_t"),s.referrer=""}}b&&s.K(c,1)}s.abort=s.supplementalDataID=s.timestamp=s.pageURLRest=s.linkObject=s.j=s.linkURL=s.linkName=s.linkType=w.rb=s.pe=s.pev1=s.pev2=s.pev3=s.g=0}};s.tl=s.trackLink=function(b,a,c,e,d){s.linkObject=b;s.linkType=a;s.linkName=c;if(d)s.i=b,s.q=d;return s.track(e)};s.trackLight=function(b,a,c,e){s.lightProfileID=b;s.lightStoreForSeconds=a;s.lightIncrementBy=c;return s.track(e)};s.clearVars=function(){var b,a;for(b=0;b<s.c.length;b++)if(a=s.c[b],a.substring(0,4)=="prop"||a.substring(0,4)=="eVar"||a.substring(0,4)=="hier"||a.substring(0,4)=="list"||a=="channel"||a=="events"||a=="eventList"||a=="products"||a=="productList"||a=="purchaseID"||a=="transactionID"||a=="state"||a=="zip"||a=="campaign")s[a]=void 0};s.ab=function(b,a){var c,e=s.trackingServer;c="";var d=s.dc,f="sc.",g=s.visitorNamespace;if(e){if(s.trackingServerSecure&&s.ssl)e=s.trackingServerSecure}else{if(!g)g=s.account,e=g.indexOf(","),e>=0&&(g=g.substring(0,e)),g=g.replace(/[^A-Za-z0-9]/g,"");c||(c="2o7.net");d=d?(""+d).toLowerCase():"d1";c=="2o7.net"&&(d=="d1"?d="112":d=="d2"&&(d="122"),f="");e=g+"."+d+"."+f+c}c=s.ssl?"https://":"http://";d=s.AudienceManagement&&s.AudienceManagement.isReady();c+=e+"/b/ss/"+s.account+"/"+(s.mobile?"5.":"")+(d?"10":"1")+"/JS-"+s.version+(s.ib?"T":"")+"/"+b+"?AQB=1&ndh=1&"+(d?"callback=s_c_il["+s._in+"].AudienceManagement.passData&":"")+a+"&AQE=1";s.Wa&&(c=c.substring(0,2047));s.Na(c);s.S()};s.Na=function(b){s.e||s.Va();s.e.push(b);s.T=s.u();s.va()};s.Va=function(){s.e=s.Ya();if(!s.e)s.e=[]};s.Ya=function(){var b,a;if(s.Y()){try{(a=w.localStorage.getItem(s.W()))&&(b=w.JSON.parse(a))}catch(c){}return b}};s.Y=function(){var b=!0;if(!s.trackOffline||!s.offlineFilename||!w.localStorage||!w.JSON)b=!1;return b};s.la=function(){var b=0;if(s.e)b=s.e.length;s.z&&b++;return b};s.S=function(){if(!s.z)if(s.ma=k,s.X)s.T>s.G&&s.ta(s.e),s.$(500);else{var b=s.Ha();if(b>0)s.$(b);else if(b=s.ja())s.z=1,s.$a(b),s.fb(b)}};s.$=function(b){if(!s.ma)b||(b=0),s.ma=setTimeout(s.S,b)};s.Ha=function(){var b;if(!s.trackOffline||s.offlineThrottleDelay<=0)return 0;b=s.u()-s.ra;if(s.offlineThrottleDelay<b)return 0;return s.offlineThrottleDelay-b};s.ja=function(){if(s.e.length>0)return s.e.shift()};s.$a=function(b){if(s.debugTracking){var a="AppMeasurement Debug: "+b;b=b.split("&");var c;for(c=0;c<b.length;c++)a+="\n\t"+s.unescape(b[c]);s.Za(a)}};s.fb=function(b){var a,c,e;if(!a&&s.d.createElement&&s.AudienceManagement&&s.AudienceManagement.isReady()&&(a=s.d.createElement("SCRIPT"))&&"async"in a)(e=(e=s.d.getElementsByTagName("HEAD"))&&e[0]?e[0]:s.d.body)?(a.type="text/javascript",a.setAttribute("async","async"),c=3):a=0;if(!a)a=new Image,a.alt="";a.ga=function(){try{if(s.Z)clearTimeout(s.Z),s.Z=0;if(a.timeout)clearTimeout(a.timeout),a.timeout=0}catch(b){}};a.onload=a.hb=function(){a.ga();s.Ma();s.P();s.z=0;s.S()};a.onabort=a.onerror=a.Oa=function(){a.ga();(s.trackOffline||s.X)&&s.z&&s.e.unshift(s.La);s.z=0;s.T>s.G&&s.ta(s.e);s.P();s.$(500)};a.onreadystatechange=function(){a.readyState==4&&(a.status==200?a.hb():a.Oa())};s.ra=s.u();if(c==1)a.open("GET",b,!0),a.send();else if(c==2)a.open("GET",b),a.send();else if(a.src=b,c==3){if(s.pa)try{e.removeChild(s.pa)}catch(d){}e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a);s.pa=s.Ka}if(a.abort)s.Z=setTimeout(a.abort,5E3);s.La=b;s.Ka=w["s_i_"+s.replace(s.account,",","_")]=a;if(s.useForcedLinkTracking&&s.B||s.q){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;s.Q=setTimeout(s.P,s.forcedLinkTrackingTimeout)}};s.Ma=function(){if(s.Y()&&!(s.qa>s.G))try{w.localStorage.removeItem(s.W()),s.qa=s.u()}catch(b){}};s.ta=function(b){if(s.Y()){s.va();try{w.localStorage.setItem(s.W(),w.JSON.stringify(b)),s.G=s.u()}catch(a){}}};s.va=function(){if(s.trackOffline){if(!s.offlineLimit||s.offlineLimit<=0)s.offlineLimit=10;for(;s.e.length>s.offlineLimit;)s.ja()}};s.forceOffline=function(){s.X=!0};s.forceOnline=function(){s.X=!1};s.W=function(){return s.offlineFilename+"-"+s.visitorNamespace+s.account};s.u=function(){return(new Date).getTime()};s.na=function(s){s=s.toLowerCase();if(s.indexOf("#")!=0&&s.indexOf("about:")!=0&&s.indexOf("opera:")!=0&&s.indexOf("javascript:")!=0)return!0;return!1};s.setTagContainer=function(b){var a,c,e;s.ib=b;for(a=0;a<s._il.length;a++)if((c=s._il[a])&&c._c=="s_l"&&c.tagContainerName==b){s.K(c);if(c.lmq)for(a=0;a<c.lmq.length;a++)e=c.lmq[a],s.loadModule(e.n);if(c.ml)for(e in c.ml)if(s[e])for(a in b=s[e],e=c.ml[e],e)if(!Object.prototype[a]&&(typeof e[a]!="function"||(""+e[a]).indexOf("s_c_il")<0))b[a]=e[a];if(c.mmq)for(a=0;a<c.mmq.length;a++)e=c.mmq[a],s[e.m]&&(b=s[e.m],b[e.f]&&typeof b[e.f]=="function"&&(e.a?b[e.f].apply(b,e.a):b[e.f].apply(b)));if(c.tq)for(a=0;a<c.tq.length;a++)s.track(c.tq[a]);c.s=s;break}};s.Util={urlEncode:s.escape,urlDecode:s.unescape,cookieRead:s.cookieRead,cookieWrite:s.cookieWrite,getQueryParam:function(b,a,c){var e;a||(a=s.pageURL?s.pageURL:w.location);c||(c="&");if(b&&a&&(a=""+a,e=a.indexOf("?"),e>=0&&(a=c+a.substring(e+1)+c,e=a.indexOf(c+b+"="),e>=0&&(a=a.substring(e+c.length+b.length+1),e=a.indexOf(c),e>=0&&(a=a.substring(0,e)),a.length>0))))return s.unescape(a);return""}};s.A=["supplementalDataID","timestamp","dynamicVariablePrefix","visitorID","marketingCloudVisitorID","analyticsVisitorID","audienceManagerLocationHint","fid","vmk","visitorMigrationKey","visitorMigrationServer","visitorMigrationServerSecure","charSet","visitorNamespace","cookieDomainPeriods","fpCookieDomainPeriods","cookieLifetime","pageName","pageURL","referrer","contextData","currencyCode","lightProfileID","lightStoreForSeconds","lightIncrementBy","retrieveLightProfiles","deleteLightProfiles","retrieveLightData","pe","pev1","pev2","pev3","pageURLRest"];s.c=s.A.concat(["purchaseID","variableProvider","channel","server","pageType","transactionID","campaign","state","zip","events","events2","products","audienceManagerBlob","tnt"]);s.U=["timestamp","charSet","visitorNamespace","cookieDomainPeriods","cookieLifetime","contextData","lightProfileID","lightStoreForSeconds","lightIncrementBy"];s.H=s.U.slice(0);s.ea=["account","allAccounts","debugTracking","visitor","trackOffline","offlineLimit","offlineThrottleDelay","offlineFilename","usePlugins","doPlugins","configURL","visitorSampling","visitorSamplingGroup","linkObject","linkURL","linkName","linkType","trackDownloadLinks","trackExternalLinks","trackClickMap","trackInlineStats","linkLeaveQueryString","linkTrackVars","linkTrackEvents","linkDownloadFileTypes","linkExternalFilters","linkInternalFilters","useForcedLinkTracking","forcedLinkTrackingTimeout","trackingServer","trackingServerSecure","ssl","abort","mobile","dc","lightTrackVars","maxDelay","expectSupplementalData","AudienceManagement"];for(i=0;i<=75;i++)s.c.push("prop"+i),s.H.push("prop"+i),s.c.push("eVar"+i),s.H.push("eVar"+i),i<6&&s.c.push("hier"+i),i<4&&s.c.push("list"+i);i=["resolution","colorDepth","javascriptVersion","javaEnabled","cookiesEnabled","browserWidth","browserHeight","connectionType","homepage","plugins"];s.c=s.c.concat(i);s.A=s.A.concat(i);s.ssl=w.location.protocol.toLowerCase().indexOf("https")>=0;s.charSet="UTF-8";s.contextData={};s.offlineThrottleDelay=0;s.offlineFilename="AppMeasurement.offline";s.ra=0;s.T=0;s.G=0;s.qa=0;s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";s.w=w;s.d=w.document;try{s.Wa=navigator.appName=="Microsoft Internet Explorer"}catch(o){}s.P=function(){if(s.Q)w.clearTimeout(s.Q),s.Q=k;s.i&&s.B&&s.i.dispatchEvent(s.B);if(s.q)if(typeof s.q=="function")s.q();else if(s.i&&s.i.href)s.d.location=s.i.href;s.i=s.B=s.q=0};s.ua=function(){s.b=s.d.body;if(s.b)if(s.p=function(b){var a,c,e,d,f;if(!(s.d&&s.d.getElementById("cppXYctnr")||b&&b.cb)){if(s.fa)if(s.useForcedLinkTracking)s.b.removeEventListener("click",s.p,!1);else{s.b.removeEventListener("click",s.p,!0);s.fa=s.useForcedLinkTracking=0;return}else s.useForcedLinkTracking=0;s.j=b.srcElement?b.srcElement:b.target;try{if(s.j&&(s.j.tagName||s.j.parentElement||s.j.parentNode))if(e=s.la(),s.track(),e<s.la()&&s.useForcedLinkTracking&&b.target){for(d=b.target;d&&d!=s.b&&d.tagName.toUpperCase()!="A"&&d.tagName.toUpperCase()!="AREA";)d=d.parentNode;if(d&&(f=d.href,s.na(f)||(f=0),c=d.target,b.target.dispatchEvent&&f&&(!c||c=="_self"||c=="_top"||c=="_parent"||w.name&&c==w.name))){try{a=s.d.createEvent("MouseEvents")}catch(g){a=new w.MouseEvent}if(a){try{a.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}catch(i){a=0}if(a)a.cb=1,b.stopPropagation(),b.gb&&b.gb(),b.preventDefault(),s.i=b.target,s.B=a}}}}catch(k){}s.j=0}},s.b&&s.b.attachEvent)s.b.attachEvent("onclick",s.p);else{if(s.b&&s.b.addEventListener){if(navigator&&(navigator.userAgent.indexOf("WebKit")>=0&&s.d.createEvent||navigator.userAgent.indexOf("Firefox/2")>=0&&w.MouseEvent))s.fa=1,s.useForcedLinkTracking=1,s.b.addEventListener("click",s.p,!0);s.b.addEventListener("click",s.p,!1)}}else setTimeout(s.ua,30)};s.ua()}
function s_gi(s){var w,k=window.s_c_il,m,i=s.split(","),n,p,o=0;if(k)for(m=0;!o&&m<k.length;){w=k[m];if(w._c=="s_c"&&w.account)if(w.account==s)o=1;else{if(!w.allAccounts)w.allAccounts=w.account.split(",");for(n=0;n<i.length;n++)for(p=0;p<w.allAccounts.length;p++)i[n]==w.allAccounts[p]&&(o=1)}m++}o||(w=new AppMeasurement);w.setAccount(s);return w}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);function s_pgicq(){var s=window,w=s.s_giq,k,m,i;if(w)for(k=0;k<w.length;k++)m=w[k],i=s_gi(m.oun),i.setAccount(m.un),i.setTagContainer(m.tagContainerName);s.s_giq=0}s_pgicq();
//-->
</script>
<script type="text/javascript"  style="display:none">
<!--

window.lpTag=window.lpTag||{};if(typeof window.lpTag._tagCount==='undefined'){window.lpTag={site:'7046965',section:lpTag.section||'',autoStart:lpTag.autoStart===false?false:true,ovr:lpTag.ovr||{},_v:'1.5.1',_tagCount:1,protocol:location.protocol,events:{bind:function(app,ev,fn){lpTag.defer(function(){lpTag.events.bind(app,ev,fn)},0)},trigger:function(app,ev,json){lpTag.defer(function(){lpTag.events.trigger(app,ev,json)},1)}},defer:function(fn,fnType){if(fnType==0){this._defB=this._defB||[];this._defB.push(fn)}else if(fnType==1){this._defT=this._defT||[];this._defT.push(fn)}else{this._defL=this._defL||[];this._defL.push(fn)}},load:function(src,chr,id){var t=this;setTimeout(function(){t._load(src,chr,id)},0)},_load:function(src,chr,id){var url=src;if(!src){url=this.protocol+'//'+((this.ovr&&this.ovr.domain)?this.ovr.domain:'lptag.liveperson.net')+'/tag/tag.js?site='+this.site}var s=document.createElement('script');s.setAttribute('charset',chr?chr:'UTF-8');if(id){s.setAttribute('id',id)}s.setAttribute('src',url);document.getElementsByTagName('head').item(0).appendChild(s)},init:function(){this._timing=this._timing||{};this._timing.start=(new Date()).getTime();var that=this;if(window.attachEvent){window.attachEvent('onload',function(){that._domReady('domReady')})}else{window.addEventListener('DOMContentLoaded',function(){that._domReady('contReady')},false);window.addEventListener('load',function(){that._domReady('domReady')},false)}if(typeof(window._lptStop)=='undefined'){this.load()}},start:function(){this.autoStart=false},_domReady:function(n){if(!this.isDom){this.isDom=true;this.events.trigger('LPT','DOM_READY',{t:n})}this._timing[n]=(new Date()).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]};lpTag.init()}else{window.lpTag._tagCount+=1}
//-->
</script><script>
		window.timestamps.htmlEnd = Math.round((new Date()).getTime());;
</script>
<script>
    jQuery(document).on('omniture:trackingLoaded', function () {
        jQuery(document).trigger('omniture:pageLoadFinished');
	});
</script>
</body>
</html>
